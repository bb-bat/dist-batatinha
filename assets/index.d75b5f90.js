import{u as i,v as t,w as l,x as kc,y as Ac,z as xg,D as Ln,H as xc,J as j,K as Js,L as fr,N as Dg,O as Pg,Q as Xe,U as Mg,V as Dc,W as Lg,X as vm,Y as Vt,Z as Ug,_ as Fg,$ as Vg,a0 as bn,a1 as _n,a2 as Pc,a3 as da,a4 as Tm,a5 as wm,a6 as ym,a7 as Bg,a8 as Gg,a9 as Rm,aa as Hg,ab as Wg,ac as Om,ad as Ko,ae as km,af as Eu,ag as jg,ah as qg,ai as Mc,aj as dc,ak as zg,al as Yg,am as Kg,an as $g,ao as Qg,ap as Lc,aq as Uc,ar as Xg,as as Ra,at as Jg,au as Zg,av as ef,aw as tf,ax as nf,ay as Cu,az as sf,aA as rf,aB as of,aC as af,aD as vl,aE as Tl,aF as wl,aG as lf}from"./vendor.3de9e0e8.js";import{N as Kr,a as or,H as ma,M as Ae,T as kn,R as se,b as Ke,A as uo,c as Nn,G as cf,d as Z,D as uf,C as en,e as df,f as He,g as mf,h as li,i as Ts,j as Hs,k as Fc,l as ci,E as hf,m as bu,n as zn,o as $o,p as bt,F as oi,q as Qo,S as ha,r as Ro,s as gf,t as Am,u as Xo,v as ff,w as pf,x as If,y as dn,z as Vc,B as ui,I as Ls,O as xm,V as At,J as yl,P as go,K as qt,L as os,U as Ef,Q as Cf,W as Rl,X as Dm,Y as zs,Z as bf,_ as _f,$ as Sf,a0 as Nf,a1 as vf,a2 as Tf,a3 as wf,a4 as yf,a5 as Rf,a6 as Of,a7 as kf,a8 as Af,a9 as xf,aa as Pm,ab as Df,ac as Pf,ad as Mf,ae as Lf,af as Uf,ag as Ff,ah as Vf,ai as Bf,aj as Gf,ak as Hf,al as Wf,am as jf,an as qf,ao as zf,ap as mc,aq as Yf,ar as Kf,as as Mm,at as $f,au as Qf,av as Xf,aw as Jf,ax as Zf,ay as ep,az as tp,aA as np,aB as sp,aC as rp,aD as op,aE as ap,aF as ip,aG as Lm,aH as lp,aI as cp,aJ as up,aK as _u,aL as dp,aM as mp,aN as hp,aO as rl,aP as gp,aQ as fp,aR as Um,aS as pp,aT as Ip,aU as di,aV as tn,aW as bo,aX as Fm,aY as Vm,aZ as Ep,a_ as Cp,a$ as bp,b0 as _p,b1 as Sp,b2 as Np,b3 as vp,b4 as Tp,b5 as ol,b6 as ko,b7 as Bm,b8 as Su,b9 as wp,ba as yp,bb as Rp,bc as Op,bd as kp,be as Ap,bf as xp,bg as Dp,bh as Pp,bi as Mp,bj as Lp,bk as Up,bl as Fp,bm as Vp,bn as Bp,bo as Gp,bp as Hp,bq as Wp,br as jp,bs as qp,bt as zp,bu as Yp,bv as Kp,bw as $p,bx as Qp,by as Xp,bz as Jp,bA as Zp,bB as e0,bC as t0,bD as Gm,bE as hc,bF as n0,bG as Hm,bH as s0,bI as r0,bJ as o0,bK as a0,bL as i0,bM as l0,bN as c0,bO as u0,bP as d0,bQ as m0,bR as h0,bS as g0,bT as f0,bU as p0,bV as I0,bW as E0,bX as C0,bY as b0,bZ as _0,b_ as S0,b$ as N0,c0 as v0,c1 as T0,c2 as w0,c3 as y0,c4 as R0,c5 as O0,c6 as k0,c7 as A0,c8 as x0,c9 as D0,ca as P0,cb as M0,cc as L0,cd as Wm,ce as jm,cf as mi,cg as U0,ch as F0,ci as Jo,cj as qm,ck as it,cl as V0,cm as B0,cn as G0,co as H0,cp as W0,cq as j0,cr as q0,cs as z0,ct as Y0,cu as K0,cv as $0,cw as Ol,cx as Q0,cy as X0,cz as J0,cA as Z0,cB as eI,cC as tI,cD as Nu,cE as nI,cF as sI,cG as Tr,cH as rI,cI as oI,cJ as xn,cK as Tt,cL as aI,cM as iI,cN as lI,cO as Oa,cP as is,cQ as ye,cR as cI,cS as jt,cT as uI,cU as dI,cV as mI,cW as hI,cX as gI,cY as fI,cZ as pI,c_ as II,c$ as EI,d0 as CI,d1 as bI,d2 as _I,d3 as SI,d4 as NI,d5 as vI,d6 as TI,d7 as wI,d8 as gc,d9 as yI,da as RI,db as OI,dc as zm,dd as kI,de as AI,df as vu,dg as xI,dh as DI,di as PI,dj as MI,dk as fc,dl as LI,dm as UI,dn as FI,dp as VI,dq as ka,dr as Tu,ds as BI,dt as GI,du as HI,dv as WI,dw as Ym,dx as jI,dy as Km,dz as qI,dA as $m,dB as zI,dC as YI,dD as KI,dE as $I,dF as wu,dG as Wn,dH as Qm,dI as pc,dJ as Es,dK as yu,dL as Ru,dM as wt,dN as Ys,dO as QI,dP as XI,dQ as JI,dR as ZI,dS as kl,dT as eE,dU as Ou,dV as ku,dW as tE,dX as Al,dY as nE,dZ as sE,d_ as rE,d$ as xl,e0 as oE,e1 as aE,e2 as iE,e3 as lE,e4 as cE,e5 as Xm,e6 as uE,e7 as Aa,e8 as dE,e9 as Jm,ea as mE,eb as hE,ec as gE,ed as fE,ee as pE,ef as IE,eg as EE,eh as CE,ei as Dl,ej as bE,ek as _E,el as SE,em as NE,en as vE,eo as TE,ep as Zm,eq as wE,er as yE,es as RE,et as OE,eu as kE,ev as Ao,ew as AE,ex as xE,ey as DE,ez as PE,eA as Au,eB as ME,eC as LE,eD as UE,eE as FE,eF as VE,eG as BE,eH as xu,eI as GE,eJ as HE,eK as WE,eL as jE,eM as qE,eN as zE,eO as YE,eP as KE,eQ as $E,eR as QE,eS as eh,eT as XE,eU as JE,eV as ZE,eW as eC,eX as tC,eY as th,eZ as nC,e_ as sC,e$ as rC,f0 as oC,f1 as aC,f2 as iC,f3 as lC,f4 as cC,f5 as uC,f6 as dC,f7 as mC,f8 as hC,f9 as gC,fa as fC,fb as pC,fc as IC,fd as EC,fe as Bc,ff as ga,fg as CC,fh as Pl,fi as bC,fj as Du,fk as _C,fl as SC,fm as mn,fn as NC,fo as vC,fp as TC,fq as wC,fr as yC,fs as RC,ft as OC,fu as kC,fv as AC,fw as xC,fx as DC,fy as PC,fz as MC,fA as LC,fB as UC,fC as FC,fD as nh,fE as Pu,fF as sh,fG as VC,fH as BC,fI as GC,fJ as HC,fK as WC,fL as jC,fM as qC,fN as zC,fO as YC,fP as ls,fQ as KC,fR as $C,fS as QC,fT as XC,fU as JC,fV as ZC,fW as e1,fX as t1,fY as n1,fZ as s1,f_ as r1,f$ as o1,g0 as a1,g1 as i1,g2 as l1,g3 as c1,g4 as Mu,g5 as u1,g6 as d1,g7 as m1,g8 as h1,g9 as g1,ga as f1,gb as xa,gc as Lu,gd as p1,ge as I1,gf as Da,gg as rh,gh as E1,gi as Ml,gj as C1,gk as b1,gl as _1,gm as oh,gn as S1,go as N1,gp as v1,gq as T1,gr as w1,gs as y1,gt as R1,gu as O1,gv as k1,gw as A1,gx as x1,gy as D1,gz as P1,gA as fo,gB as M1,gC as Uu,gD as L1,gE as U1,gF as F1,gG as ah,gH as V1,gI as B1,gJ as G1,gK as H1,gL as W1,gM as j1,gN as q1,gO as z1,gP as Y1,gQ as K1,gR as $1,gS as Q1,gT as ih,gU as X1,gV as lh,gW as J1,gX as Z1,gY as eb,gZ as tb,g_ as nb,g$ as Ms,h0 as Ll,h1 as sb,h2 as rb,h3 as Fu,h4 as ob,h5 as ab,h6 as ib,h7 as Gc,h8 as ch,h9 as as,ha as lb,hb as cb,hc as ub,hd as uh,he as dh,hf as db,hg as mb,hh as hb,hi as mh,hj as gb,hk as fb,hl as pb,hm as Ib,hn as Eb,ho as Cb,hp as bb,hq as _b,hr as Sb,hs as Nb,ht as vb,hu as Tb,hv as Pa,hw as It,hx as wb,hy as yb,hz as Ul,hA as Vu,hB as Rb,hC as Ob,hD as kb,hE as Ab,hF as xb,hG as Db,hH as Pb,hI as Mb,hJ as Lb,hK as Ub,hL as Fb,hM as Vb,hN as Bb,hO as Gb,hP as Bu,hQ as ds,hR as Ma}from"./nitro-renderer.8cf0e9d8.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function _e(){return Kr.instance}function _t(a){_e().addLinkEventTracker(a)}function xt(){return _e().avatar}function Gu(a){return xt().structureData.getPalette(a)}function Hu(a){return xt().structureData.getSetType(a)}function xo(){return _e().cameraManager}function Hb(){const a=_e();if(!a||!a.core)throw new Error("Nitro instance or core is not initialized yet");return a.core}function Wu(){const a=Hb();if(!a||!a.configuration)throw new Error("Configuration manager is not initialized yet");return a.configuration}function te(a){a=a.startsWith("event:")?a.substring(6):a,_e().createLinkEvent(a)}function po(){var a;return(a=_e())==null?void 0:a.communication}function X(a,e=null){return or.getValue(a,e)}function Ic(){var a;return(a=po())==null?void 0:a.connection}function hh(){return _e().localization}const _o=a=>{!a||!a.length||(a.startsWith("http")?ma.openWebPage(a):te(a))};function St(a){_e().removeLinkEventTracker(a)}function Y(){return _e().roomEngine}let Fl=!1,La=0,Ua=0;const Fa=(a,e=1)=>{const n=a.clientX,s=a.clientY;let r=a.type;switch(r===Ae.MOUSE_CLICK&&(La&&(Ua=1,La>=Date.now()-300&&Ua++),La=Date.now(),Ua===2&&(Fl||(r=Ae.DOUBLE_CLICK),Ua=0,La=null)),r){case Ae.MOUSE_CLICK:break;case Ae.DOUBLE_CLICK:break;case Ae.MOUSE_MOVE:Fl=!0;break;case Ae.MOUSE_DOWN:Fl=!1;break;case Ae.MOUSE_UP:break;case Ae.RIGHT_CLICK:break;default:return}Y().dispatchMouseEvent(e,n,s,r,a.altKey,a.ctrlKey||a.metaKey,a.shiftKey,!1)};let Vl=!1,Va=0,Ba=0;const Ga=(a,e=1,n=!1,s=!1,r=!1,o=!1)=>{let c=0,u=0;a.touches[0]?(c=a.touches[0].clientX,u=a.touches[0].clientY):a.changedTouches[0]&&(c=a.changedTouches[0].clientX,u=a.changedTouches[0].clientY);let d=a.type;switch(n&&(d=kn.TOUCH_LONG),(d===Ae.MOUSE_CLICK||d===kn.TOUCH_END)&&(d=Ae.MOUSE_CLICK,Va&&(Ba=1,Va>=Date.now()-300&&Ba++),Va=Date.now(),Ba===2&&(Vl||(d=Ae.DOUBLE_CLICK),Ba=0,Va=null)),d){case Ae.MOUSE_CLICK:break;case Ae.DOUBLE_CLICK:break;case kn.TOUCH_START:d=Ae.MOUSE_DOWN,Vl=!1;break;case kn.TOUCH_MOVE:d=Ae.MOUSE_MOVE,Vl=!0;break;case kn.TOUCH_END:d=Ae.MOUSE_UP;break;case kn.TOUCH_LONG:d=Ae.MOUSE_DOWN_LONG;break;default:return}d===kn.TOUCH_START&&Y().dispatchMouseEvent(e,c,u,d,s,r,o,!1),Y().dispatchMouseEvent(e,c,u,d,s,r,o,!1)};function Jt(a){if(!a||!a.model)return!1;const e=z().userId,n=a.model.getValue(se.FURNITURE_OWNER_ID);return e===n}function Zo(a,e,n){return a?a.isRoomOwner||a.controllerLevel>=Ke.GUEST||z().isModerator||Jt(Y().getRoomObject(a.roomId,e,n)):!1}function Pr(){return _e().roomSessionManager}function wr(a,e=null){Pr().createSession(a,e)}function Wb(){const a=Mr();return a?a.model.getValue(se.FIGURE_CAN_STAND_UP):uo.POSTURE_STAND}function Bl(){const a=Mr();if(!a)return!1;const n=a.model.getValue(se.FIGURE_EFFECT);return!(n===29||n===30||n===185)}function z(){return _e().sessionDataManager}function Dn(){return X("hc.disabled",!1)?Nn.VIP:z().clubLevel}const Fs=class Fs{};Fs.OKAY=0,Fs.MISSING_OFFER=1,Fs.FURNI_LIMIT_REACHED=2,Fs.NOT_IN_ROOM=3,Fs.NOT_ROOM_OWNER=4,Fs.GUILD_ROOM=5,Fs.VISITORS_IN_ROOM=6;let Us=Fs;class jb{constructor(e,n,s){this._depth=0,this._localization="",this._pageId=-1,this._pageName="",this._iconId=0,this._depth=n,this._parent=s,this._localization=e.localization,this._pageId=e.pageId,this._pageName=e.pageName,this._iconId=e.icon,this._children=[],this._offerIds=e.offerIds,this._isVisible=e.visible,this._isActive=!1,this._isOpen=!1}activate(){this._isActive=!0}deactivate(){this._isActive=!1}open(){this._isOpen=!0}close(){this._isOpen=!1}addChild(e){e&&this._children.push(e)}get depth(){return this._depth}get isBranch(){return this._children.length>0}get isLeaf(){return this._children.length===0}get localization(){return this._localization}get pageId(){return this._pageId}get pageName(){return this._pageName}get iconId(){return this._iconId}get children(){return this._children}get offerIds(){return this._offerIds}get parent(){return this._parent}get isVisible(){return this._isVisible}get isActive(){return this._isActive}get isOpen(){return this._isOpen}}const Di=class Di{constructor(e,n,s,r,o,c=-1){this._pageId=e,this._layoutCode=n,this._localization=s,this._offers=r,this._acceptSeasonCurrencyAsCredits=o;for(const u of r)u.page=this;c===-1?this._mode=Di.MODE_NORMAL:this._mode=c}get pageId(){return this._pageId}get layoutCode(){return this._layoutCode}get localization(){return this._localization}get offers(){return this._offers}get acceptSeasonCurrencyAsCredits(){return this._acceptSeasonCurrencyAsCredits}get mode(){return this._mode}};Di.MODE_NORMAL=0;let hi=Di;const ht=class ht{};ht.DUCKET_INFO="ducket_info",ht.CREDITS="credits",ht.AVATAR_EFFECTS="avatar_effects",ht.HC_MEMBERSHIP="hc_membership",ht.CLUB_GIFTS="club_gifts",ht.LIMITED_SOLD="limited_sold",ht.PET_ACCESSORIES="pet_accessories",ht.TRAX_SONGS="trax_songs",ht.NEW_ADDITIONS="new_additions",ht.QUEST_SHELL="quest_shell",ht.QUEST_SNOWFLAKES="quest_snowflakes",ht.VAL_QUESTS="val_quests",ht.GUILD_CUSTOM_FURNI="guild_custom_furni",ht.GIFT_SHOP="gift_shop",ht.HORSE_STYLES="horse_styles",ht.HORSE_SHOE="horse_shoe",ht.SET_EASTER="set_easter",ht.ECOTRON_TRANSFORM="ecotron_transform",ht.LOYALTY_INFO="loyalty_info",ht.ROOM_BUNDLES="room_bundles",ht.ROOM_BUNDLES_MOBILE="room_bundles_mobile",ht.HABBO_CLUB_DESKTOP="habbo_club_desktop",ht.MOBILE_SUBSCRIPTIONS="mobile_subscriptions";let gi=ht;class qb{constructor(e,n){this.breed=e,this.palettes=n}}const Vs=class Vs{};Vs.NONE=0,Vs.CONFIRM=1,Vs.PURCHASE=2,Vs.NO_CREDITS=3,Vs.NO_POINTS=4,Vs.SOLD_OUT=5,Vs.FAILED=6;let tt=Vs;const Pi=class Pi{};Pi.NORMAL="NORMAL",Pi.BUILDER="BUILDERS_CLUB";let Kn=Pi;const zb=a=>"",Yb=a=>"",ju=(a,e)=>{const n=a.get(e),s=[];if(n&&n.length)for(const r of n)r.isVisible&&s.push(r);return s},gh=(a,e,n,s)=>{if(n.isVisible&&n.pageId>0){let r=!1;const o=[n.pageName,n.localization].join(" ").toLowerCase().replace(/ /gi,"");if(o.indexOf(a)>-1&&(s.push(n),r=!0),!r){for(const c of e)if(o.indexOf(c)>=0){s.push(n);break}}}for(const r of n.children)gh(a,e,r,s)};function Kb(a){if(!a.length)return 0;let e=a.length-1;for(;e>=0&&!isNaN(parseInt(a.charAt(e)));)e--;return e>0?parseInt(a.substring(e+1)):-1}function $b(a,e){switch(a){case 0:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 1:return[[16743226],[16750435],[16764339],[16094464],[16498012],[16704690],[15586304],[16115545],[16513201],[8694111],[11585939],[14413767],[6664599],[9553845],[12971486],[8358322],[10002885],[13292268],[10780600],[12623573],[14403561],[12418717],[14327229],[15517403],[14515069],[15764368],[16366271],[11250603],[13948116],[16777215],[14256481],[14656129],[15848130],[14005087],[14337152],[15918540],[15118118],[15531929],[9764857],[11258085]];case 2:return[[16579283],[15378351],[8830016],[15257125],[9340985],[8949607],[6198292],[8703620],[9889626],[8972045],[12161285],[13162269],[8620113],[12616503],[8628101],[13827840],[9764857]];case 3:return[[16777215],[15658734],[14540253]];case 4:return[[16777215],[16053490],[15464440],[16248792],[15396319],[15007487]];case 5:return[[16777215],[15658734],[14540253]];case 6:return[[16777215],[15658734],[14540253],[16767177],[16770205],[16751331]];case 7:return[[13421772],[11447982],[16751331],[10149119],[16763290],[16743786]];default:{const n=[];for(const s of e){const r=Y().getPetColorResult(a,s.paletteId);r&&(r.primaryColor===r.secondaryColor?n.push([r.primaryColor]):n.push([r.primaryColor,r.secondaryColor]))}return n}}}const hs=class hs{};hs.WALL="i",hs.FLOOR="s",hs.EFFECT="e",hs.HABBO_CLUB="h",hs.BADGE="b",hs.GAME_TOKEN="GAME_TOKEN",hs.PET="p",hs.ROBOT="r";let Ee=hs;const Mi=class Mi{constructor(e,n,s,r,o,c,u=!1,d=0,g=0){this._productType=e.toLowerCase(),this._productClassId=n,this._extraParam=s,this._productCount=r,this._productData=o,this._furnitureData=c,this._isUniqueLimitedItem=u,this._uniqueLimitedItemSeriesSize=d,this._uniqueLimitedItemsLeft=g}static stripAddonProducts(e){return e.length===1?e:e.filter(n=>n.productType!==Ee.BADGE&&n.productType!==Ee.EFFECT&&n.productClassId!==Mi.EFFECT_CLASSID_NINJA_DISAPPEAR)}getIconUrl(e=null,n=null){switch(this._productType){case Ee.FLOOR:return Y().getFurnitureFloorIconUrl(this.productClassId);case Ee.WALL:{if(e&&this._furnitureData){let s="";switch(this._furnitureData.className){case"floor":s=["th",this._furnitureData.className,e.product.extraParam].join("_");break;case"wallpaper":s=["th","wall",e.product.extraParam].join("_");break;case"landscape":s=["th",this._furnitureData.className,(e.product.extraParam||"").replace(".","_"),"001"].join("_");break}if(s!=="")return`${X("catalog.asset.url")}/${s}.png`}return Y().getFurnitureWallIconUrl(this.productClassId,this._extraParam)}case Ee.EFFECT:return zb(this.productClassId);case Ee.HABBO_CLUB:return Yb(this.productClassId);case Ee.BADGE:return z().getBadgeUrl(this._extraParam);case Ee.ROBOT:return null}return null}get productType(){return this._productType}get productClassId(){return this._productClassId}get extraParam(){return this._extraParam}set extraParam(e){this._extraParam=e}get productCount(){return this._productCount}get productData(){return this._productData}get furnitureData(){return this._furnitureData}get isUniqueLimitedItem(){return this._isUniqueLimitedItem}get uniqueLimitedItemSeriesSize(){return this._uniqueLimitedItemSeriesSize}get uniqueLimitedItemsLeft(){return this._uniqueLimitedItemsLeft}set uniqueLimitedItemsLeft(e){this._uniqueLimitedItemsLeft=e}};Mi.EFFECT_CLASSID_NINJA_DISAPPEAR=108;let ir=Mi;const Mt=class Mt{constructor(e,n,s,r,o,c,u,d,g,m){this._clubLevel=0,this._bundlePurchaseAllowed=!1,this._offerId=e,this._localizationId=n,this._isRentOffer=s,this._priceInCredits=r,this._priceInActivityPoints=o,this._activityPointType=c,this._giftable=u,this._clubLevel=d,this._products=g,this._bundlePurchaseAllowed=m,this.setPricingModelForProducts(),this.setPricingType();for(const f of g)if(f.productType===Ee.BADGE){this._badgeCode=f.extraParam;break}}activate(){}get clubLevel(){return this._clubLevel}get page(){return this._page}set page(e){this._page=e}get offerId(){return this._offerId}get localizationId(){return this._localizationId}get priceInCredits(){return this._priceInCredits}get priceInActivityPoints(){return this._priceInActivityPoints}get activityPointType(){return this._activityPointType}get giftable(){return this._giftable}get product(){if(!this._products||!this._products.length)return null;if(this._products.length===1)return this._products[0];const e=ir.stripAddonProducts(this._products);return e.length?e[0]:null}get pricingModel(){return this._pricingModel}get priceType(){return this._priceType}get bundlePurchaseAllowed(){return this._bundlePurchaseAllowed}get isRentOffer(){return this._isRentOffer}get badgeCode(){return this._badgeCode}get localizationName(){const e=mo(this._localizationId);return e?e.name:h(this._localizationId)}get localizationDescription(){const e=mo(this._localizationId);return e?e.description:h(this._localizationId)}get isLazy(){return!1}get products(){return this._products}setPricingModelForProducts(){const e=ir.stripAddonProducts(this._products);e.length===1?e[0].productCount===1?this._pricingModel=Mt.PRICING_MODEL_SINGLE:this._pricingModel=Mt.PRICING_MODEL_MULTI:e.length>1?this._pricingModel=Mt.PRICING_MODEL_BUNDLE:this._pricingModel=Mt.PRICING_MODEL_UNKNOWN}setPricingType(){this._priceInCredits>0&&this._priceInActivityPoints>0?this._priceType=Mt.PRICE_TYPE_CREDITS_ACTIVITYPOINTS:this._priceInCredits>0?this._priceType=Mt.PRICE_TYPE_CREDITS:this._priceInActivityPoints>0?this._priceType=Mt.PRICE_TYPE_ACTIVITYPOINTS:this._priceType=Mt.PRICE_TYPE_NONE}clone(){const e=[],n=mo(this.localizationId);for(const r of this._products){const o=Ec(r.productClassId,r.productType);e.push(new ir(r.productType,r.productClassId,r.extraParam,r.productCount,n,o))}const s=new Mt(this.offerId,this.localizationId,this.isRentOffer,this.priceInCredits,this.priceInActivityPoints,this.activityPointType,this.giftable,this.clubLevel,e,this.bundlePurchaseAllowed);return s.page=this.page,s}};Mt.PRICING_MODEL_UNKNOWN="pricing_model_unknown",Mt.PRICING_MODEL_SINGLE="pricing_model_single",Mt.PRICING_MODEL_MULTI="pricing_model_multi",Mt.PRICING_MODEL_BUNDLE="pricing_model_bundle",Mt.PRICING_MODEL_FURNITURE="pricing_model_furniture",Mt.PRICE_TYPE_NONE="price_type_none",Mt.PRICE_TYPE_CREDITS="price_type_credits",Mt.PRICE_TYPE_ACTIVITYPOINTS="price_type_activitypoints",Mt.PRICE_TYPE_CREDITS_ACTIVITYPOINTS="price_type_credits_and_activitypoints";let Yt=Mt;class Qb{constructor(e){this._furniData=e,this._product=new ir(this._furniData.type,this._furniData.id,this._furniData.customParams,1,mo(this._furniData.className),this._furniData)}activate(){M(new cf(this._furniData.rentOfferId>-1?this._furniData.rentOfferId:this._furniData.purchaseOfferId))}get offerId(){return this.isRentOffer?this._furniData.rentOfferId:this._furniData.purchaseOfferId}get priceInActivityPoints(){return 0}get activityPointType(){return 0}get priceInCredits(){return 0}get page(){return this._page}set page(e){this._page=e}get priceType(){return""}get product(){return this._product}get products(){return[this._product]}get localizationId(){return"roomItem.name."+this._furniData.id}get bundlePurchaseAllowed(){return!1}get isRentOffer(){return this._furniData.rentOfferId>-1}get giftable(){return!1}get pricingModel(){return Yt.PRICING_MODEL_FURNITURE}get clubLevel(){return 0}get badgeCode(){return""}get localizationName(){return this._furniData.name}get localizationDescription(){return this._furniData.description}get isLazy(){return!0}}const Xb=(a,e,n=null)=>{let s=null;switch(a.toLocaleLowerCase()){case Ee.FLOOR:s=Y().getFurnitureFloorIconUrl(e);break;case Ee.WALL:s=Y().getFurnitureWallIconUrl(e,n);break}return s};class Jb{constructor(e){this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,this._isEnabled=e.isEnabled,this._price=e.price,this._boxTypes=e.boxTypes,this._ribbonTypes=e.ribbonTypes,this._stuffTypes=e.giftWrappers,this._defaultStuffTypes=e.giftFurnis}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}const Li=class Li{constructor(e,n,s,r,o,c,u,d,g=-1){this._timeLeftMinutes=-1,this._offerId=e,this._furniId=n,this._furniType=s,this._extraData=r,this._stuffData=o,this._price=c,this._status=u,this._averagePrice=d,this._offerCount=g}get offerId(){return this._offerId}set offerId(e){this._offerId=e}get furniId(){return this._furniId}get furniType(){return this._furniType}get extraData(){return this._extraData}get stuffData(){return this._stuffData}get price(){return this._price}set price(e){this._price=e}get averagePrice(){return this._averagePrice}get image(){return this._image}set image(e){this._image=e}get imageCallback(){return this._imageCallback}set imageCallback(e){this._imageCallback=e}get status(){return this._status}get timeLeftMinutes(){return this._timeLeftMinutes}set timeLeftMinutes(e){this._timeLeftMinutes=e}get offerCount(){return this._offerCount}set offerCount(e){this._offerCount=e}get isUniqueLimitedItem(){return this.stuffData&&this.stuffData.uniqueSeries>0}};Li.TYPE_FLOOR=1,Li.TYPE_WALL=2;let ea=Li;const Xr=class Xr{};Xr.ONGOING=1,Xr.ONGOING_OWN=1,Xr.SOLD=2,Xr.EXPIRED=3;let ta=Xr;const Po=class Po{};Po.BY_ACTIVITY=1,Po.BY_VALUE=2,Po.ADVANCED=3;let Xt=Po;class fh{constructor(e,n){this._images=e,this._texts=n}getText(e){let n=this._texts[e]||"";return n&&n.length&&(n=n.replace(/\r\n|\r|\n/g,"<br />")),n}getImage(e){const n=this._images[e]||"";if(!n||!n.length)return null;let s=X("catalog.asset.image.url");return s=s.replace("%name%",n),s}}class Zb{constructor(e,n,s,r,o,c,u,d){this.roomId=e,this.objectId=n,this.category=s,this.wallLocation=r,this.x=o,this.y=c,this.direction=u,this.offer=d}get offerId(){return this.offer.offerId}get productClassId(){return this.offer.product.productClassId}get productData(){return this.offer.product.productData}get furniData(){return this.offer.product.furnitureData}get extraParam(){return this.offer.product.extraParam}}const es=class es{constructor(){this._requestType=es.REQUEST_TYPE_NONE}resetRequest(){this._requestType=es.REQUEST_TYPE_NONE,this._requestById=-1,this._requestedByOfferId=-1,this._requestByName=null}get requestType(){return this._requestType}get requestById(){return this._requestById}set requestById(e){this._requestType=es.REQUEST_TYPE_ID,this._requestById=e}get requestedByOfferId(){return this._requestedByOfferId}set requestedByOfferId(e){this._requestType=es.REQUEST_TYPE_OFFER,this._requestedByOfferId=e}get requestByName(){return this._requestByName}set requestByName(e){this._requestType=es.REQUEST_TYPE_NAME,this._requestByName=e}};es.REQUEST_TYPE_NONE=0,es.REQUEST_TYPE_ID=1,es.REQUEST_TYPE_OFFER=2,es.REQUEST_TYPE_NAME=3;let br=es;class e_{constructor(e,n,s){this.searchValue=e,this.offers=n,this.filteredNodes=s}}function Ec(a,e){let n=null;switch(e.toLowerCase()){case Ee.FLOOR:n=z().getFloorItemData(a);break;case Ee.WALL:n=z().getWallItemData(a);break}return n}function al(a,e,n){const s=Y().getRoomObject(a,e,n);if(!s)return;const r=s.model.getValue(se.FURNITURE_TYPE_ID);switch(n){case Z.FLOOR:return z().getFloorItemData(r);case Z.WALL:return z().getWallItemData(r)}return null}function t_(){const a=Mr();return a?a.model.getValue(se.FIGURE_POSTURE):uo.POSTURE_STAND}function mo(a){return a?z().getProductData(a):null}function Oe(){return Pr().getSession(-1)}function Cc(){M(new uf)}function yr(){return z().clubLevel>=Nn.CLUB}function Ha(){return z().clubLevel>=Nn.VIP}function n_(a){const e=Y().getRoomObject(Oe().roomId,a,Z.FLOOR);if(!e||!e.model)return!1;const n=z().userId,s=e.model.getValue(se.FURNITURE_OWNER_ID);return n===s}function s_(){const a=Mr();return a?a.model.getValue(se.FIGURE_EFFECT)===77:!1}function r_(a){Pr().startSession(a)}const Hc=()=>{Oe()&&(Cc(),Pr().removeSession(-1))};function Mr(){const a=z().userId,e=Y().activeRoomId,n=Z.UNIT,s=Y().getTotalObjectsForManager(e,n);let r=0;for(;r<s;){const o=Y().getRoomObjectByIndex(e,r,n);if(o){const c=Oe().userDataManager.getUserDataByIndex(o.id);if(c&&c.webID===a)return o}r++}return null}const Wc=(a,e,n,s=1)=>{const r=Y().getRoomObjectBoundingRectangle(a,e,n,s);return r?(r.x=Math.round(r.x),r.y=Math.round(r.y),r):null},ph=(a,e,n,s=1)=>{const r=Y().getRoomObjectScreenLocation(a,e,n,s);return r?(r.x=Math.round(r.x),r.y=Math.round(r.y),r):null},o_=(a,e,n=1)=>{const s=Y(),r=s.activeRoomId;s.initializeRoomInstanceRenderingCanvas(r,n,a,e)};function a_(a){let e=!1;const n=Y().getRoomObject(a.roomId,a.objectId,a.category);return n&&n.model.getValue(se.FURNITURE_SELECTION_DISABLED)===1&&(e=!0,z().isModerator&&(e=!1)),e}function $r(a,e,n){Y().processRoomObjectOperation(a,e,n)}function qu(a){Y().setActiveRoomId(a)}const M=a=>Ic().send(a);class Sn{static getAchievementBadgeCode(e){if(!e)return null;let n=e.badgeId;return e.finalLevel||(n=hh().getPreviousLevelBadgeId(n)),n}static getAchievementCategoryImageUrl(e,n=null,s=!1){const r=X("achievements.images.url");let o=s?"achicon_":"achcategory_";return o+=e.code,n!==null&&(o+=`_${n>0?"active":"inactive"}`),r.replace("%image%",o)}static getAchievementCategoryMaxProgress(e){if(!e)return 0;let n=0;for(const s of e.achievements)n+=s.levelCount;return n}static getAchievementCategoryProgress(e){if(!e)return 0;let n=0;for(const s of e.achievements)n+=s.finalLevel?s.level:s.level-1;return n}static getAchievementCategoryTotalUnseen(e){if(!e)return 0;let n=0;for(const s of e.achievements)s.unseen>0&&n++;return n}static getAchievementHasStarted(e){return e?!!(e.finalLevel||e.level-1>0):!1}static getAchievementIsIgnored(e){if(!e)return!1;const n=X("achievements.unseen.ignored"),s=e.badgeId.replace(/[0-9]/g,"");return n.indexOf(s)>=0}static getAchievementLevel(e){return e?e.finalLevel?e.level:e.level-1:0}}class zu{constructor(e){this._code=e,this._achievements=[]}getProgress(){return Sn.getAchievementCategoryProgress(this)}getMaxProgress(){return Sn.getAchievementCategoryMaxProgress(this)}get code(){return this._code}get achievements(){return this._achievements}set achievements(e){this._achievements=e}}const Jr=class Jr{};Jr.ACTION_SAVE="AEA_ACTION_SAVE",Jr.ACTION_CLEAR="AEA_ACTION_CLEAR",Jr.ACTION_RESET="AEA_ACTION_RESET",Jr.ACTION_RANDOMIZE="AEA_ACTION_RANDOMIZE";let ms=Jr;class i_{constructor(e,n=!1){this._partColor=e,this._isDisabled=n,this._isHC=this._partColor.clubLevel>0,this._isSelected=!1}dispose(){this._partColor=null}get partColor(){return this._partColor}get color(){return en.int2rgb(this._partColor.rgb)}get isDisabled(){return this._isDisabled}get isHC(){return this._isHC}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}}class jc{constructor(e,n,s){this._selectedPartIndex=-1,this._name=e,this._parts=n,this._palettes=s,this._selectedPartIndex=-1}static defaultColorId(e,n){if(!e||!e.length)return-1;let s=0;for(;s<e.length;){const r=e[s];if(r.partColor&&r.partColor.clubLevel<=n)return r.partColor.id;s++}return-1}init(){for(const e of this._parts)e&&e.init()}dispose(){if(this._parts){for(const e of this._parts)e.dispose();this._parts=null}if(this._palettes){for(const e of this._palettes)for(const n of e)n.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(e){if(!this._parts)return;let n=0;for(;n<this._parts.length;){if(this._parts[n].id===e){this.selectPartIndex(n);return}n++}}selectColorIds(e){if(!e||!this._palettes)return;this._paletteIndexes=new Array(e.length);let n=0;for(;n<this._palettes.length;){const s=this.getPalette(n);if(s){let r=0;if(e.length>n)r=e[n];else{const c=s[0];c&&c.partColor&&(r=c.partColor.id)}let o=0;for(;o<s.length;){const c=s[o];c.partColor.id===r?(this._paletteIndexes[n]=o,c.isSelected=!0):c.isSelected=!1,o++}}n++}this.updatePartColors()}selectPartIndex(e){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const n=this._parts[this._selectedPartIndex];n&&(n.isSelected=!1)}if(this._parts.length>e){const n=this._parts[e];if(n)return n.isSelected=!0,this._selectedPartIndex=e,n}return null}selectColorIndex(e,n){const s=this.getPalette(n);if(!s||s.length<=e)return null;this.deselectColorIndex(this._paletteIndexes[n],n),this._paletteIndexes[n]=e;const r=s[e];return r?(r.isSelected=!0,this.updatePartColors(),r):null}getCurrentColorIndex(e){return this._paletteIndexes[e]}deselectColorIndex(e,n){const s=this.getPalette(n);if(!s||s.length<=e)return;const r=s[e];r&&(r.isSelected=!1)}getSelectedColorIds(){if(!this._paletteIndexes||!this._paletteIndexes.length||!this._palettes||!this._palettes.length)return null;const e=this._palettes[0];if(!e||!e.length)return null;const n=e[0];if(!n||!n.partColor)return null;const s=n.partColor.id,r=[];let o=0;for(;o<this._paletteIndexes.length;){const u=this._palettes[o];if(!(!u||u.length<=o))if(u.length>this._paletteIndexes[o]){const d=u[this._paletteIndexes[o]];d&&d.partColor?r.push(d.partColor.id):r.push(s)}else r.push(s);o++}const c=this.getCurrentPart();return c?r.slice(0,Math.max(c.maxColorIndex,1)):null}getSelectedColors(){const e=[];let n=0;for(;n<this._paletteIndexes.length;){const s=this.getSelectedColor(n);s?e.push(s.partColor):e.push(null),n++}return e}getSelectedColor(e){const n=this.getPalette(e);return!n||n.length<=this._paletteIndexes[e]?null:n[this._paletteIndexes[e]]}getSelectedColorId(e){const n=this.getSelectedColor(e);return n&&n.partColor?n.partColor.id:0}getPalette(e){return!this._paletteIndexes||!this._palettes||this._palettes.length<=e?null:this._palettes[e]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const e=this.getSelectedColors();for(const n of this._parts)n&&(n.partColors=e)}hasClubSelectionsOverLevel(e){let n=!1;const s=this.getSelectedColors();if(s){let o=0;for(;o<s.length;){const c=s[o];c&&c.clubLevel>e&&(n=!0),o++}}const r=this.getCurrentPart();if(r&&r.partSet){const o=r.partSet;o&&o.clubLevel>e&&(n=!0)}return n}hasInvalidSelectedItems(e){const n=this.getCurrentPart();if(!n)return!1;const s=n.partSet;if(!(!s||!s.isSellable))return e.indexOf(s.id)>-1}stripClubItemsOverLevel(e){const n=this.getCurrentPart();if(n&&n.partSet&&n.partSet.clubLevel>e){const r=this.selectPartIndex(0);return r&&!r.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(e){const n=[],s=this.getSelectedColors(),r=this.getPalette(0);let o=!1;const c=jc.defaultColorId(r,e);if(c===-1)return!1;let u=0;for(;u<s.length;){const d=s[u];d?d.clubLevel>e?(n.push(c),o=!0):n.push(d.id):(n.push(c),o=!0),u++}return o&&this.selectColorIds(n),o}get name(){return this._name}get parts(){return this._parts}get selectedPartIndex(){return this._selectedPartIndex}}const Zr=class Zr{static getGender(e){switch(e){case Re.MALE:case"m":case"M":e=Re.MALE;break;case Re.FEMALE:case"f":case"F":e=Re.FEMALE;break;default:e=Re.MALE}return e}static hasFigureSetId(e){return this.FIGURE_SET_IDS.indexOf(e)>=0}static createCategory(e,n){if(!e||!n||!this.CURRENT_FIGURE)return null;const s=[],r=[];let o=0;for(;o<this.MAX_PALETTES;)r.push([]),o++;const c=Hu(n);if(!c)return null;const u=Gu(c.paletteID);if(!u)return null;let d=this.CURRENT_FIGURE.getColorIds(n);d||(d=[]);const g=new Array(d.length),m=this.clubItemsDimmed,f=Dn();for(const _ of u.colors.getValues())if(_.isSelectable&&(m||f>=_.clubLevel)){let S=0;for(;S<this.MAX_PALETTES;){const T=f<_.clubLevel,R=new i_(_,T);r[S].push(R),S++}if(n!==Re.FACE){let T=0;for(;T<d.length;)_.id===d[T]&&(g[T]=_),T++}}let p=[];if(m?p=xt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,2):p=xt().getMandatoryAvatarPartSetIds(this.CURRENT_FIGURE.gender,f),p.indexOf(n)===-1){const _=new fi(null,null,!1);_.isClear=!0,s.push(_)}const E=n!==Re.FACE,b=c.partSets;for(o=b.length-1;o>=0;){const _=b.getWithIndex(o);let S=!1;if((_.gender===Re.UNISEX||_.gender===this.CURRENT_FIGURE.gender)&&(S=!0),_.isSelectable&&S&&(m||f>=_.clubLevel)){const T=f<_.clubLevel;let R=!0;_.isSellable&&(R=this.hasFigureSetId(_.id)),R&&s.push(new fi(_,g,E,T))}o--}for(s.sort(this.clubItemsFirst?this.clubSorter:this.noobSorter),o=0;o<this.MAX_PALETTES;)r[o].sort(this.colorSorter),o++;return new jc(n,s,r)}static clubSorter(e,n){const s=e.partSet?e.partSet.clubLevel:9999999999,r=n.partSet?n.partSet.clubLevel:9999999999,o=e.partSet?e.partSet.isSellable:!1,c=n.partSet?n.partSet.isSellable:!1;return o&&!c?1:c&&!o||s>r?-1:s<r?1:e.partSet.id>n.partSet.id?-1:e.partSet.id<n.partSet.id?1:0}static colorSorter(e,n){const s=e.partColor?e.partColor.clubLevel:-1,r=n.partColor?n.partColor.clubLevel:-1;return s<r?-1:s>r?1:e.partColor.index<n.partColor.index?-1:e.partColor.index>n.partColor.index?1:0}static noobSorter(e,n){const s=e.partSet?e.partSet.clubLevel:-1,r=n.partSet?n.partSet.clubLevel:-1,o=e.partSet?e.partSet.isSellable:!1,c=n.partSet?n.partSet.isSellable:!1;return o&&!c?1:c&&!o||s<r?-1:s>r?1:e.partSet.id<n.partSet.id?-1:e.partSet.id>n.partSet.id?1:0}static avatarSetFirstSelectableColor(e){const n=Hu(e);if(!n)return-1;const s=Gu(n.paletteID);if(!s)return-1;for(const r of s.colors.getValues())if(!(!r.isSelectable||Dn()<r.clubLevel))return r.id;return-1}static get clubItemsFirst(){return X("avatareditor.show.clubitems.first",!0)}static get clubItemsDimmed(){return X("avatareditor.show.clubitems.dimmed",!0)}};Zr.MAX_PALETTES=2,Zr.CURRENT_FIGURE=null,Zr.FIGURE_SET_IDS=[],Zr.BOUND_FURNITURE_NAMES=[];let kt=Zr;const de=class de{constructor(){this._gender="M",this._direction=de.DEFAULT_DIRECTION,this._avatarEffectType=-1,this._notifier=null}loadAvatarData(e,n){this._data=new Map,this._colors=new Map,this._gender=n,this.parseFigureString(e),this.updateView()}parseFigureString(e){if(!e)return;const n=e.split(".");if(!(!n||!n.length))for(const s of n){const r=s.split("-");if(!r.length)continue;const o=r[0],c=parseInt(r[1]),u=[];let d=2;for(;d<r.length;)u.push(parseInt(r[d])),d++;u.length||u.push(0),this.savePartSetId(o,c,!1),this.savePartSetColourId(o,u,!1)}}getPartSetId(e){const n=this._data.get(e);return n!==void 0?n:-1}getColorIds(e){const n=this._colors.get(e);return n!==void 0?n:[kt.avatarSetFirstSelectableColor(e)]}getFigureString(){let e="";const n=[];for(const[r,o]of this._data.entries()){const c=this._colors.get(r);let u=r+"-"+o;if(c&&c.length){let d=0;for(;d<c.length;)u=u+("-"+c[d]),d++}n.push(u)}let s=0;for(;s<n.length;)e=e+n[s],s<n.length-1&&(e=e+"."),s++;return e}savePartData(e,n,s,r=!1){this.savePartSetId(e,n,r),this.savePartSetColourId(e,s,r)}savePartSetId(e,n,s=!0){switch(e){case de.FACE:case de.HAIR:case de.HAT:case de.HEAD_ACCESSORIES:case de.EYE_ACCESSORIES:case de.FACE_ACCESSORIES:case de.SHIRT:case de.JACKET:case de.CHEST_ACCESSORIES:case de.CHEST_PRINTS:case de.TROUSERS:case de.SHOES:case de.TROUSER_ACCESSORIES:n>=0?this._data.set(e,n):this._data.delete(e);break}s&&this.updateView()}savePartSetColourId(e,n,s=!0){switch(e){case de.FACE:case de.HAIR:case de.HAT:case de.HEAD_ACCESSORIES:case de.EYE_ACCESSORIES:case de.FACE_ACCESSORIES:case de.SHIRT:case de.JACKET:case de.CHEST_ACCESSORIES:case de.CHEST_PRINTS:case de.TROUSERS:case de.SHOES:case de.TROUSER_ACCESSORIES:this._colors.set(e,n);break}s&&this.updateView()}getFigureStringWithFace(e,n=!0){let s="";const r=[de.FACE],o=[];for(const u of r){const d=this._colors.get(u);if(!d)continue;let g=this._data.get(u);u===de.FACE&&n&&(g=e);let m=u+"-"+g;if(g>=0){let f=0;for(;f<d.length;)m=m+("-"+d[f]),f++}o.push(m)}let c=0;for(;c<o.length;)s=s+o[c],c<o.length-1&&(s=s+"."),c++;return s}updateView(){this.notify&&this.notify()}get gender(){return this._gender}get direction(){return this._direction}set direction(e){this._direction=e,this.updateView()}set avatarEffectType(e){this._avatarEffectType=e}get avatarEffectType(){return this._avatarEffectType}get notify(){return this._notifier}set notify(e){this._notifier=e}};de.DEFAULT_DIRECTION=4,de.MALE="M",de.FEMALE="F",de.UNISEX="U",de.SCALE="h",de.STD="std",de.DEFAULT_FRAME="0",de.FACE="hd",de.HAIR="hr",de.HAT="ha",de.HEAD_ACCESSORIES="he",de.EYE_ACCESSORIES="ea",de.FACE_ACCESSORIES="fa",de.JACKET="cc",de.SHIRT="ch",de.CHEST_ACCESSORIES="ca",de.CHEST_PRINTS="cp",de.TROUSERS="lg",de.SHOES="sh",de.TROUSER_ACCESSORIES="wa",de.SET_TYPES=[de.FACE,de.HAIR,de.HAT,de.HEAD_ACCESSORIES,de.EYE_ACCESSORIES,de.FACE_ACCESSORIES,de.JACKET,de.SHIRT,de.CHEST_ACCESSORIES,de.CHEST_PRINTS,de.TROUSERS,de.SHOES,de.TROUSERS];let Re=de;const gs=class gs{constructor(e,n,s=!0,r=!1){if(this._renderManager=xt(),this._partSet=e,this._partColors=n,this._useColors=s,this._isDisabled=r,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._isSelected=!1,this._disposed=!1,this._isInitalized=!1,e){const o=e.parts;for(const c of o)this._maxColorIndex=Math.max(this._maxColorIndex,c.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._partSet=null,this._partColors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!this._renderManager||!this._partSet||!this._partSet.parts||!this._partSet.parts.length)return!1;const e=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(e)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(e,this),!1)}renderThumb(){if(!this._renderManager||!this._partSet||!this._isValidFigure&&!this.analyzeFigure())return null;const e=this._partSet.parts.concat().sort(this.sortByDrawOrder),n=new mf;for(const s of e){if(!s)continue;let r=null,o=0,c=!1;for(;!c&&o<gs.THUMB_DIRECTIONS.length;){const f=Re.SCALE+"_"+Re.STD+"_"+s.type+"_"+s.id+"_"+gs.THUMB_DIRECTIONS[o]+"_"+Re.DEFAULT_FRAME;r=this._renderManager.getAssetByName(f),r&&r.texture?c=!0:o++}if(!c)continue;const u=r.offsetX,d=r.offsetY;let g=null;if(this._useColors&&s.colorLayerIndex>0){const f=this._partColors[s.colorLayerIndex-1];f&&(g=f)}const m=new li(r.texture);m.position.set(u,d),g&&(m.tint=g.rgb),n.addChild(m)}return n}updateThumbVisualization(){if(!this._isInitalized)return;let e=this._thumbContainer;e||(e=this.renderThumb()),e&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabled&&this.setAlpha(e,.2),this._imageUrl=Ts.generateImageUrl(e),this.notify&&this.notify())}setAlpha(e,n){return e.filters=[gs.ALPHA_FILTER],e}sortByDrawOrder(e,n){const s=gs.DRAW_ORDER.indexOf(e.type),r=gs.DRAW_ORDER.indexOf(n.type);return s<r?-1:s>r?1:e.index<n.index?-1:e.index>n.index?1:0}resetFigure(e){this.analyzeFigure()&&this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set partColors(e){this._partColors=e,this.update()}get isDisabled(){return this._isDisabled}set thumbContainer(e){this._thumbContainer=e,this.update()}get imageUrl(){return this._imageUrl}get maxColorIndex(){return this._maxColorIndex}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(e){this._isClear=e}get isSelected(){return this._isSelected}set isSelected(e){this._isSelected=e,this.notify&&this.notify()}get notify(){return this._notifier}set notify(e){this._notifier=e}};gs.ALPHA_FILTER=new df(.2),gs.THUMB_DIRECTIONS=[2,6,0,4,3,1],gs.DRAW_ORDER=[He.LEFT_HAND_ITEM,He.LEFT_HAND,He.LEFT_SLEEVE,He.LEFT_COAT_SLEEVE,He.BODY,He.SHOES,He.LEGS,He.CHEST,He.CHEST_ACCESSORY,He.COAT_CHEST,He.CHEST_PRINT,He.WAIST_ACCESSORY,He.RIGHT_HAND,He.RIGHT_SLEEVE,He.RIGHT_COAT_SLEEVE,He.HEAD,He.FACE,He.EYES,He.HAIR,He.HAIR_BIG,He.FACE_ACCESSORY,He.EYE_ACCESSORY,He.HEAD_ACCESSORY,He.HEAD_ACCESSORY_EXTRA,He.RIGHT_HAND_ITEM];let fi=gs;class il{constructor(){this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new Map)}reset(){if(this._isInitalized=!1,this._categories)for(const e of this._categories.values())e&&e.dispose();this._categories=new Map}addCategory(e){let n=this._categories.get(e);n||(n=kt.createCategory(this,e),n&&(this._categories.set(e,n),this.updateSelectionsFromFigure(e)))}updateSelectionsFromFigure(e){const n=this._categories.get(e);if(!n)return;const s=kt.CURRENT_FIGURE.getPartSetId(e);let r=kt.CURRENT_FIGURE.getColorIds(e);r||(r=[]),n.selectPartId(s),n.selectColorIds(r)}hasClubSelectionsOverLevel(e){if(!this._categories)return!1;for(const n of this._categories.values())if(n&&n.hasClubSelectionsOverLevel(e))return!0;return!1}hasInvalidSelectedItems(e){if(!this._categories)return!1;for(const n of this._categories.values())if(n.hasInvalidSelectedItems(e))return!0;return!1}stripClubItemsOverLevel(e){if(!this._categories)return!1;let n=!1;for(const[s,r]of this._categories.entries()){let o=!1;if(r.stripClubItemsOverLevel(e)&&(o=!0),r.stripClubColorsOverLevel(e)&&(o=!0),o){const c=r.getCurrentPart();c&&kt.CURRENT_FIGURE&&kt.CURRENT_FIGURE.savePartData(s,c.id,r.getSelectedColorIds(),!0),n=!0}}return n}stripInvalidSellableItems(){if(!this._categories)return!1;let e=!1;for(const[n,s]of this._categories.entries());return e}selectPart(e,n){const s=this._categories.get(e);if(!s)return;const r=s.selectedPartIndex;s.selectPartIndex(n);const o=s.getCurrentPart();if(o){if(o.isDisabled){s.selectPartIndex(r);return}this._maxPaletteCount=o.maxColorIndex,kt.CURRENT_FIGURE.savePartData(e,o.id,s.getSelectedColorIds(),!0)}}selectColor(e,n,s){const r=this._categories.get(e);if(!r)return;const o=r.getCurrentColorIndex(s);if(r.selectColorIndex(n,s),r.getSelectedColor(s).isDisabled){r.selectColorIndex(o,s);return}kt.CURRENT_FIGURE.savePartSetColourId(e,r.getSelectedColorIds(),!0)}getCategoryData(e){return this._isInitalized||this.init(),this._categories?this._categories.get(e):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount||1}set maxPaletteCount(e){this._maxPaletteCount=e}get name(){return null}}class l_ extends il{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(Re.FACE),this._isInitalized=!0}selectColor(e,n,s){super.selectColor(e,n,s),this.updateSelectionsFromFigure(Re.FACE)}updateSelectionsFromFigure(e){if(!this._categories||!kt.CURRENT_FIGURE)return;const n=this._categories.get(e);if(!n)return;const s=kt.CURRENT_FIGURE.getPartSetId(e);let r=kt.CURRENT_FIGURE.getColorIds(e);r||(r=[]),n.selectPartId(s),n.selectColorIds(r);for(const o of n.parts){const c=u=>{const d=kt.CURRENT_FIGURE.getFigureStringWithFace(o.id),g=xt().createAvatarImage(d,Fc.LARGE,null,{resetFigure:c,dispose:null,disposed:!1}),m=g.getImageAsSprite(ci.HEAD);m&&(m.y=10,o.thumbContainer=m,setTimeout(()=>g.dispose(),0))};c()}}get canSetGender(){return!0}get name(){return Hs.GENERIC}}const un=a=>{if(a==null||typeof a!="object")return a;const e=new a.constructor;for(const n in a)a.hasOwnProperty(n)&&(e[n]=a[n]);return e};class Ft{static makeColorHex(e){return"#"+e}static makeColorNumberHex(e){return"#"+e.toString(16).padStart(6,"0")}static convertFromHex(e){return parseInt(e.replace("#",""),16)}static uintHexColor(e){const n=e>>>0;return Ft.makeColorHex(n.toString(16).substring(2))}static int_to_8BitVals(e){const n=e>>24&255,s=e>>16&255,r=e>>8&255,o=e&255;return[n,s,r,o]}static eight_bitVals_to_int(e,n,s,r){return(e<<24)+(n<<16)+(s<<8)+(r|0)}static int2rgb(e){e>>>=0;const n=e&255,s=(e&65280)>>>8;return"rgba("+[(e&16711680)>>>16,s,n,1].join(",")+")"}}const pr=a=>{let e=Math.floor(a/86400),n=Math.floor(a%86400/3600),s=Math.floor(a%86400%3600/60),r=a%86400%3600%60;return e.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+r.toString().padStart(2,"0")},pi=a=>{try{JSON.parse(window.localStorage.getItem(a))}catch{return null}},qc=a=>{let e=_e().localization.getBadgeDesc(a);return(!e||!e.length)&&(e=`badge_desc_${a}`),e},fa=a=>{let e=_e().localization.getBadgeName(a);return(!e||!e.length)&&(e=`badge_name_${a}`),e};function Ii(a){return!a||isNaN(a)?"0":a.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function c_(a){if(!a||isNaN(a))return"0";let e=Math.abs(a);const n=Math.pow(10,1),s=a<0;let r="";const o=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(const c of o){let u=e/c.value;if(u=Math.round(u*n)/n,u>=1){e=u,r=c.key;break}}return(s?"-":"")+e+r}function h(a,e=null,n=null){return _e().getLocalizationWithParameters(a,e,n)}const Ui=class Ui{};Ui.CATALOG_PLACE_MULTIPLE_OBJECTS="catalogPlaceMultipleObjects",Ui.CATALOG_SKIP_PURCHASE_CONFIRMATION="catalogSkipPurchaseConfirmation";let na=Ui;const Ih=(a,e)=>a.dispatchEvent(e),bc=a=>Ih(_e().events,a),ws=new hf,nt=a=>Ih(ws,a);let Eh=!1;const ys=a=>{Eh&&bc(new bu(bu.PLAY_SOUND,a))},Yu=[Ae.MOUSE_CLICK],u_=()=>{const a=()=>Yu.forEach(n=>window.removeEventListener(n,e)),e=n=>(Eh=!0)&&a();Yu.forEach(n=>window.addEventListener(n,e))};u_();const gt=class gt{};gt.DEFAULT=1,gt.WALL_PAPER=2,gt.FLOOR=3,gt.LANDSCAPE=4,gt.POST_IT=5,gt.POSTER=6,gt.SOUND_SET=7,gt.TRAX_SONG=8,gt.PRESENT=9,gt.ECOTRON_BOX=10,gt.TROPHY=11,gt.CREDIT_FURNI=12,gt.PET_SHAMPOO=13,gt.PET_CUSTOM_PART=14,gt.PET_CUSTOM_PART_SHAMPOO=15,gt.PET_SADDLE=16,gt.GUILD_FURNI=17,gt.GAME_FURNI=18,gt.MONSTERPLANT_SEED=19,gt.MONSTERPLANT_REVIVAL=20,gt.MONSTERPLANT_REBREED=21,gt.MONSTERPLANT_FERTILIZE=22,gt.FIGURE_PURCHASABLE_SET=23;let ge=gt;class sa{constructor(e){e&&(this._locked=!1,this._id=e.itemId,this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem)}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(e){this._stuffData=e}get extra(){return this._extra}get recyclable(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(this._secondsToExpiration===-1)return-1;let e=-1;return this._hasRentPeriodStarted?(e=this._secondsToExpiration-(zn()-this._expirationTimeStamp)/1e3,e<0&&(e=0)):e=this._secondsToExpiration,e}get creationDay(){return this._creationDay}get creationMonth(){return this._creationMonth}get creationYear(){return this._creationYear}get slotId(){return this._slotId}get songId(){return this._songId}get locked(){return this._locked}set locked(e){this._locked=e}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get expirationTimeStamp(){return this._expirationTimeStamp}update(e){this._type=e.spriteId,this._ref=e.ref,this._category=e.category,this._groupable=e.isGroupable&&!e.rentable,this._tradeable=e.tradable,this._recyclable=e.isRecycleable,this._sellable=e.sellable,this._stuffData=e.stuffData,this._extra=e.extra,this._secondsToExpiration=e.secondsToExpiration,this._expirationTimeStamp=e.expirationTimeStamp,this._hasRentPeriodStarted=e.hasRentPeriodStarted,this._creationDay=e.creationDay,this._creationMonth=e.creationMonth,this._creationYear=e.creationYear,this._slotId=e.slotId,this._songId=e.songId,this._flatId=e.flatId,this._isRented=e.rentable,this._isWallItem=e.isWallItem}clone(){const e=new sa(null);return e._expirationTimeStamp=this._expirationTimeStamp,e._isWallItem=this._isWallItem,e._songId=this._songId,e._locked=this._locked,e._id=this._id,e._ref=this._ref,e._category=this._category,e._type=this._type,e._stuffData=this._stuffData,e._extra=this._extra,e._recyclable=this._recyclable,e._tradeable=this._tradeable,e._groupable=this._groupable,e._sellable=this._sellable,e._secondsToExpiration=this._secondsToExpiration,e._hasRentPeriodStarted=this._hasRentPeriodStarted,e._creationDay=this._creationDay,e._creationMonth=this._creationMonth,e._creationYear=this._creationYear,e._slotId=this._slotId,e._isRented=this._isRented,e._flatId=this._flatId,e}}class zc{constructor(e=-1,n=-1,s=null,r=null,o=-1){this._type=e,this._category=n,this._roomEngine=s,this._stuffData=r,this._extra=o,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=[]}clone(){const e=new zc;return e._type=this._type,e._category=this._category,e._roomEngine=this._roomEngine,e._stuffData=this._stuffData,e._extra=this._extra,e._isWallItem=this._isWallItem,e._iconUrl=this._iconUrl,e._name=this._name,e._description=this._description,e._locked=this._locked,e._selected=this._selected,e._hasUnseenItems=this._hasUnseenItems,e._items=this._items,e}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(e){return this._items[e]}getItemById(e){for(const n of this._items)if(n.id===e)return n;return null}getTradeItems(e){const n=[],s=this.getLastItem();if(!s)return n;let r=0,o=0;for(;o<this._items.length&&!(r>=e);){const c=this.getItemByIndex(o);!c.locked&&c.isTradable&&c.type===s.type&&(n.push(c),r++),o++}return n}push(e){const n=[...this._items];let s=0;for(;s<n.length;){let r=n[s];if(r.id===e.id){r=r.clone(),r.locked=!1,n.splice(s,1),n.push(r),this._items=n;return}s++}n.push(e),this._items=n,this._items.length===1&&this.prepareGroup()}pop(){const e=[...this._items];let n=null;if(e.length>0){const s=e.length-1;n=e[s],e.splice(s,1)}return this._items=e,n}remove(e){const n=[...this._items];let s=0;for(;s<n.length;){let r=n[s];if(r.id===e)return n.splice(s,1),this._items=n,r;s++}return null}getTotalCount(){if(this._category===ge.POST_IT){let e=0,n=0;for(;n<this._items.length;){const s=this.getItemByIndex(n);e=e+parseInt(s.stuffData.getLegacyString()),n++}return e}return this._items.length}getUnlockedCount(){if(this.category===ge.POST_IT)return this.getTotalCount();let e=0,n=0;for(;n<this._items.length;)this.getItemByIndex(n).locked||e++,n++;return e}getLastItem(){return this._items.length?this.getItemByIndex(this._items.length-1):null}unlockAllItems(){const e=[...this._items];let n=0;for(;n<e.length;){const s=e[n];if(s.locked){const r=s.clone();r.locked=!1,e[n]=r}n++}this._items=e}lockItemIds(e){const n=[...this._items];let s=0,r=!1;for(;s<n.length;){const o=n[s],c=e.indexOf(o.ref)>=0;if(o.locked!==c){r=!0;const u=o.clone();u.locked=c,n[s]=u}s++}return this._items=n,r}setName(){const e=this.getLastItem();if(!e){this._name="";return}let n="";switch(this._category){case ge.POSTER:n="poster_"+e.stuffData.getLegacyString()+"_name";break;case ge.TRAX_SONG:this._name="SONG_NAME";return;default:this.isWallItem?n="wallItem.name."+e.type:n="roomItem.name."+e.type}this._name=h(n)}setDescription(){this._description=""}setIcon(){if(this._iconUrl)return;let e=null;this.isWallItem?e=this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):e=this._roomEngine.getFurnitureFloorIconUrl(this._type),e&&(this._iconUrl=e)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(e){this._hasUnseenItems=e}get locked(){return this._locked}set locked(e){this._locked=e}get selected(){return this._selected}set selected(e){this._selected=e}get isWallItem(){const e=this.getItemByIndex(0);return e?e.isWallItem:!1}get isGroupable(){const e=this.getItemByIndex(0);return e?e.isGroupable:!1}get isSellable(){const e=this.getItemByIndex(0);return e?e.sellable:!1}get items(){return this._items}set items(e){this._items=e}}const Yc=(a,e,n,s=NaN)=>new zc(a,e,Y(),n,s),d_=(a,e,n)=>{const s=[];for(const o of a)o.type===e.type&&s.push(o);for(const o of s)if(o.getItemById(e.id))return o;const r=Yc(e.type,e.category,e.stuffData,e.extra);return r.push(e),n?(r.hasUnseenItems=!0,a.unshift(r)):a.push(r),r},m_=(a,e,n)=>{let s=null;for(const r of a)if(r.type===e.type&&r.isWallItem===e.isWallItem&&r.isGroupable)if(e.category===ge.POSTER){if(r.stuffData.getLegacyString()===e.stuffData.getLegacyString()){s=r;break}}else if(e.category===ge.GUILD_FURNI){if(e.stuffData.compare(r.stuffData)){s=r;break}}else{s=r;break}if(s){if(s.push(e),n){s.hasUnseenItems=!0;const r=a.indexOf(s);r>=0&&a.splice(r,1),a.unshift(s)}return s}return s=Yc(e.type,e.category,e.stuffData,e.extra),s.push(e),n?(s.hasUnseenItems=!0,a.unshift(s)):a.push(s),s},Ku=(a,e,n)=>{e.isGroupable?m_(a,e,n):d_(a,e,n)},h_=(a,e,n,s)=>{if(e===1)return a;s[n]=a;for(const o of s)if(!o)return null;const r=new Map;for(const o of s){for(const[c,u]of o)r.set(c,u);o.clear()}return s=null,r},g_=a=>{const e=[];for(const n of a){let s=n.getTotalCount();n.category===ge.POST_IT&&(s=1);let r=0;for(;r<s;)e.push(n.getItemByIndex(r).id),r++}return e};let Ch=!1,bh=-1;const f_=()=>Ch,pa=a=>Ch=a,Io=()=>bh,ll=a=>bh=a,ra=()=>{Io()!==-1&&(Y().cancelRoomObjectPlacement(),ll(-1),pa(!1))},_c=(a,e=!1)=>{const n=a.petData;if(!n)return!1;const s=Pr().getSession(1);return!s||!s.isRoomOwner&&!s.allowPets?!1:(te("inventory/hide"),Y().processRoomObjectPlacement($o.INVENTORY,-n.id,Z.UNIT,bt.PET,n.figureData.figuredata)&&(ll(n.id),pa(!0)),!0)},Eo=(a,e=!1)=>{if(!a||!a.getUnlockedCount())return!1;const n=a.getLastItem();if(!n)return!1;if(n.category===ge.FLOOR||n.category===ge.WALL_PAPER||n.category===ge.LANDSCAPE)return e||M(new oi(n.id)),!1;{te("inventory/hide");let s=0,r=!1;n.isWallItem?s=Z.WALL:s=Z.FLOOR,n.category===ge.POSTER?r=Y().processRoomObjectPlacement($o.INVENTORY,n.id,s,n.type,n.stuffData.getLegacyString()):r=Y().processRoomObjectPlacement($o.INVENTORY,n.id,s,n.type,n.extra.toString(),n.stuffData),r&&(ll(n.ref),pa(!0))}return!0},Sc=(a,e=!1)=>{const n=a.botData;if(!n)return!1;const s=Pr().getSession(1);return!s||!s.isRoomOwner?!1:(te("inventory/hide"),Y().processRoomObjectPlacement($o.INVENTORY,-n.id,Z.UNIT,bt.RENTABLE_BOT,n.figure)&&(ll(n.id),pa(!0)),!0)},nr=class nr{};nr.FURNI=1,nr.RENTABLE=2,nr.PET=3,nr.BADGE=4,nr.BOT=5,nr.GAMES=6;let ct=nr;const p_=a=>a.map(e=>e.petData.id),_h=(a,e,n=!0)=>{const s={petData:a};return n?e.unshift(s):e.push(s),s},Sh=(a,e)=>{let n=0;for(;n<e.length;){const s=e[n];if(s&&s.petData.id===a)return Io()===s.petData.id&&(ra(),te("inventory/open")),e.splice(n,1),s;n++}return null},I_=(a,e,n)=>{const s=p_(a),r=[],o=[];for(const c of e.keys())s.indexOf(c)===-1&&r.push(c);for(const c of s)!e.get(c)&&o.push(c);s.length;for(const c of o)Sh(c,a);for(const c of r){const u=e.get(c);u&&_h(u,a,n(ct.PET,u.id))}return a},E_=(a,e,n,s)=>{if(e===1)return a;s[n]=a;for(const o of s)if(!o)return null;const r=new Map;for(const o of s){for(const[c,u]of o)r.set(c,u);o.clear()}return s=null,r},Bs=class Bs{};Bs.TRADING_STATE_READY=0,Bs.TRADING_STATE_RUNNING=1,Bs.TRADING_STATE_COUNTDOWN=2,Bs.TRADING_STATE_CONFIRMING=3,Bs.TRADING_STATE_CONFIRMED=4,Bs.TRADING_STATE_COMPLETED=5,Bs.TRADING_STATE_CANCELLED=6;let Ot=Bs;class $u{constructor(e=-1,n="",s=new Qo,r=0,o=0,c=!1,u=!1){this.userId=e,this.userName=n,this.userItems=s,this.itemCount=r,this.creditsCount=o,this.accepts=c,this.canTrade=u}}const ts=class ts{};ts.ALERT_SCAM=0,ts.HOTEL_TRADING_DISABLED=1,ts.YOU_NOT_ALLOWED=2,ts.THEY_NOT_ALLOWED=4,ts.ROOM_DISABLED=6,ts.YOU_OPEN=7,ts.THEY_OPEN=8,ts.ERROR_WHILE_COMMIT=9,ts.THEY_CANCELLED=10;let hn=ts;const Qu=a=>{var e;return((e=z().getWallItemData(a))==null?void 0:e.isExternalImage)||!1},Xu=a=>{const e=new Qo;if(a.length)for(const s of a){const r=s.spriteId,o=s.category;let c=s.furniType+r;(!s.isGroupable||Qu(r))&&(c="itemid"+s.itemId),s.category===ge.POSTER?c=s.itemId+"poster"+s.stuffData.getLegacyString():s.category===ge.GUILD_FURNI&&(c="");let u=s.isGroupable&&!Qu(s.spriteId)?e.getValue(c):null;u||(u=Yc(r,o,s.stuffData),e.add(c,u)),u.push(new sa(s))}return e},C_=(a,e)=>{let n=a.toString();if(!(e instanceof ha))return n;let s=1;for(;s<5;)n=n+(","+e.getValue(s)),s++;return n};class ai{static getProductImageUrl(e,n,s){let r=null;switch(e){case Ro.S:r=Y().getFurnitureFloorIconUrl(n);break;case Ro.I:this.getProductCategory(Ro.I,n)===1&&(r=Y().getFurnitureWallIconUrl(n,s));break}return r}static getProductCategory(e,n){if(e===Ro.S)return 1;if(e===Ro.I){if(n===3001)return ge.WALL_PAPER;if(n===3002)return ge.FLOOR;if(n===4057)return ge.LANDSCAPE}return 1}}class Ei{static getRandomNumber(e){return Math.floor(Math.random()*e)}static getRandomElement(e){return e[this.getRandomNumber(e.length)]}static getRandomElements(e,n){const s=new Array(n);let r=e.length;const o=new Array(r);for(;n--;){var c=this.getRandomNumber(r);s[n]=e[c in o?o[c]:c],o[c]=--r in o?o[r]:r}return s}}const Dt=new Map;Dt.set("r","red");Dt.set("b","blue");Dt.set("g","green");Dt.set("y","yellow");Dt.set("w","white");Dt.set("o","orange");Dt.set("c","cyan");Dt.set("br","brown");Dt.set("pr","purple");Dt.set("pk","pink");Dt.set("red","red");Dt.set("blue","blue");Dt.set("green","green");Dt.set("yellow","yellow");Dt.set("white","white");Dt.set("orange","orange");Dt.set("cyan","cyan");Dt.set("brown","brown");Dt.set("purple","purple");Dt.set("pink","pink");const b_=a=>a.replace(/([\u00A0-\u9999<>&])(.|$)/g,(e,n,s)=>n!=="&"||s!=="#"?(/[\u00A0-\u9999<>&]/.test(s)&&(s="&#"+s.charCodeAt(0)+";"),"&#"+n.charCodeAt(0)+";"+s):e),__=a=>{let e="";if(a=b_(a),a.startsWith("@")&&a.indexOf("@",1)>-1){let n=null;for(;(n=/@[a-zA-Z]+@/g.exec(a))!==null;){const s=n[0].toString(),r=s.substr(1,s.length-2),o=a.replace(s,"");Dt.has(r)?e='<span style="color: '+Dt.get(r)+'">'+o+"</span>":e=o;break}}else e=a;return e},Nh=(a,e)=>window.localStorage.setItem(a,JSON.stringify(e)),On=class On{};On.CAMERA_SHUTTER="camera_shutter",On.CREDITS="credits",On.DUCKETS="duckets",On.MESSENGER_NEW_THREAD="messenger_new_thread",On.MESSENGER_MESSAGE_RECEIVED="messenger_message_received",On.MODTOOLS_NEW_TICKET="modtools_new_ticket",On.NOTIFICATION_CUSTOM="notification_custom",On.NOTIFICATION_MENTION="notification_mention",On.NOTIFICATION_SUCCESS="notification_success",On.NOTIFICATION_ERROR="notification_error",On.NOTIFICATION_ACHIEVEMENT="notification_achievement";let Rs=On;function S_(a){const e=a.parts;let n=0;for(const s of e)n=Math.max(n,s.colorLayerIndex);return n}function N_(a,e){return e=e.filter(n=>a.indexOf(n)===-1),[...a,...Ei.getRandomElements(e,Ei.getRandomNumber(e.length)+1)]}function v_(a,e,n=0,s=[]){if(!a)return null;const r=a.partSets.getValues().filter(o=>!o.isSelectable||o.gender!=="U"&&o.gender!==e||o.clubLevel>n||o.isSellable&&s.indexOf(o.id)===-1?null:o);return!r||!r.length?null:Ei.getRandomElement(r)}function T_(a,e,n=0){if(!a)return[];const s=a.colors.getValues().filter(r=>!r.isSelectable||r.clubLevel>n?null:r);return!s||!s.length?null:Ei.getRandomElements(s,S_(e))}function w_(a,e,n=0,s=[],r=[]){const o=xt().structure,c=new gf(""),u=N_(o.getMandatorySetTypeIds(e,n),Re.SET_TYPES);for(const d of r){const g=a.getPartSetId(d),m=a.getColorIds(d);c.updatePart(d,g,m)}for(const d of u){if(c.hasPartType(d))continue;const g=o.figureData.getSetType(d),m=v_(g,e,n,s);if(!m)continue;let f=[];m.isColorable&&(f=T_(o.figureData.getPalette(g.paletteID),m,n).map(p=>p.id)),c.updatePart(g.type,m.id,f)}return c.getFigureString()}class y_ extends il{init(){super.init(),this.addCategory(Re.HAIR),this.addCategory(Re.HAT),this.addCategory(Re.HEAD_ACCESSORIES),this.addCategory(Re.EYE_ACCESSORIES),this.addCategory(Re.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return Hs.HEAD}}class R_ extends il{init(){super.init(),this.addCategory(Re.TROUSERS),this.addCategory(Re.SHOES),this.addCategory(Re.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return Hs.LEGS}}class O_ extends il{init(){super.init(),this.addCategory(Re.SHIRT),this.addCategory(Re.CHEST_PRINTS),this.addCategory(Re.JACKET),this.addCategory(Re.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return Hs.TORSO}}const Fi=class Fi{};Fi.COLORMATRIX="colormatrix",Fi.COMPOSITE="composite";let oa=Fi;class k_{constructor(e,n){this.texture=e,this.imageUrl=n}}class A_{constructor(e,n){this.effectName=e,this.thumbnailUrl=n}}class x_{constructor(e,n,s){this._productName=e,this._customImage=n,this._furnitureClassName=s}get productName(){return this._productName}get customImage(){return this._customImage}get furnitureClassName(){return this._furnitureClassName}}const eo=class eo{};eo.STATE_UNLOCKED=1,eo.STATE_LOCKED_AVAILABLE=2,eo.STATE_LOCKED_EXPIRED=3,eo.STATE_LOCKED_FUTURE=4;let ln=eo;const Mo=class Mo{};Mo.TYPE_CHAT=1,Mo.TYPE_ROOM_INFO=2,Mo.TYPE_IM=3;let cs=Mo;const vh=()=>{const a=new Date;return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`},Ju=(a=0)=>{const e=a?new Date(Date.now()-a*1e3):new Date;return`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},Th=a=>{if(!a||!a.length)return null;const e=a.split("/"),n=e[0],s=e[1],r=parseInt(e[2]);return{username:n,figure:s,userId:r}},to=class to{constructor(){this.id=-1,this.name=null,this.gender=0,this.online=!1,this.followingAllowed=!1,this.figure=null,this.categoryId=0,this.motto=null,this.realName=null,this.lastAccess=null,this.persistedMessageUser=!1,this.vipMember=!1,this.pocketHabboUser=!1,this.relationshipStatus=-1,this.unread=0}populate(e){this.id=e.id,this.name=e.name,this.gender=e.gender,this.online=e.online,this.followingAllowed=e.followingAllowed,this.figure=e.figure,this.categoryId=e.categoryId,this.motto=e.motto,this.realName=e.realName,this.lastAccess=e.lastAccess,this.persistedMessageUser=e.persistedMessageUser,this.vipMember=e.vipMember,this.pocketHabboUser=e.pocketHabboUser,this.relationshipStatus=e.relationshipStatus}};to.RELATIONSHIP_NONE=0,to.RELATIONSHIP_HEART=1,to.RELATIONSHIP_SMILE=2,to.RELATIONSHIP_BOBBA=3;let fn=to;const Vi=class Vi{};Vi.GROUP_CHAT=0,Vi.PRIVATE_CHAT=1;let Rr=Vi;const Lo=class Lo{};Lo.HIDDEN=0,Lo.SHOW=1,Lo.UNREAD=2;let Ns=Lo;class Zu{populate(e){return e?(this._id=e.requestId,this._name=e.requesterName,this._figureString=e.figureString,this._requesterUserId=e.requesterUserId,!0):!1}get id(){return this._id}get name(){return this._name}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}class D_{constructor(e=0,n=0,s=0,r=[]){this.userFriendLimit=e,this.normalFriendLimit=n,this.extendedFriendLimit=s,this.categories=r}}const no=class no{constructor(e,n,s=0,r=null,o=0){this._type=o,this._senderId=e,this._message=n,this._secondsSinceSent=s,this._extraData=r,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}};no.CHAT=0,no.ROOM_INVITE=1,no.STATUS_NOTIFICATION=2,no.SECURITY_NOTIFICATION=3;let Ws=no;class P_{constructor(e,n=Rr.PRIVATE_CHAT){this._userId=e,this._chats=[],this._type=n}addChat(e){this._chats.push(e)}get userId(){return this._userId}get chats(){return this._chats}get type(){return this._type}set type(e){this._type=e}}const Uo=class Uo{constructor(e){this._threadId=++Uo.THREAD_ID,this._participant=e,this._groups=[],this._lastUpdated=new Date,this._unreadCount=0}addMessage(e,n,s=0,r=null,o=0){const c=e<0&&r,u=c?Th(r).userId:e,d=this.getLastGroup(u);if(!d)return;c&&(d.type=Rr.GROUP_CHAT);const g=new Ws(e,n,s,r,o);return d.addChat(g),this._lastUpdated=new Date,this._unreadCount++,g}getLastGroup(e){let n=this._groups[this._groups.length-1];return n&&n.userId===e||(n=new P_(e),this._groups.push(n)),n}setRead(){this._unreadCount=0}get threadId(){return this._threadId}get participant(){return this._participant}get groups(){return this._groups}get lastUpdated(){return this._lastUpdated}get unreadCount(){return this._unreadCount}get unread(){return this._unreadCount>0}};Uo.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",Uo.THREAD_ID=0;let Nc=Uo;function cl(a=0){te(a===0?"friends-messenger/toggle":`friends-messenger/${a}`)}const M_=()=>Am.RENDERER_VERSION,wh=()=>"2.2.0";function Ia(a){M(new Xo(a,!0))}function yh(a){te(`groups/manage/${a}`)}function ed(a,e){te(e?`group-members/${a}/${e}`:`group-members/${a}`)}const so=class so{constructor(e,n,s,r){this.type=e,this.key=n||0,this.color=s||0,this.position=r||4}get code(){return this.key===0&&this.type!==so.BASE?null:so.getCode(this.type,this.key,this.color,this.position)}static getCode(e,n,s,r){return e+(n<10?"0":"")+n+(s<10?"0":"")+s+r}};so.BASE="b",so.SYMBOL="s";let an=so;const Fo=class Fo{};Fo.NOT_MEMBER=0,Fo.MEMBER=1,Fo.REQUEST_PENDING=2;let Lt=Fo;const Vo=class Vo{};Vo.REGULAR=0,Vo.EXCLUSIVE=1,Vo.PRIVATE=2;let An=Vo;const L_=a=>{M(a.favourite?new ff(a.groupId):new pf(a.groupId))},Kc=a=>M(new If(a)),yt=class yt{};yt.NONE="NONE",yt.ERROR="ERROR",yt.REJECTED="REJECTED",yt.USER_CREATE="USER_CREATE",yt.USER_PENDING="USER_PENDING",yt.USER_ONGOING="USER_ONGOING",yt.USER_FEEDBACK="USER_FEEDBACK",yt.USER_NO_HELPERS="USER_NO_HELPERS",yt.USER_SOMETHING_WRONG="USER_SOMETHING_WRONG",yt.USER_THANKS="USER_THANKS",yt.USER_GUIDE_DISCONNECTED="USER_GUIDE_DISCONNECTED",yt.GUIDE_TOOL_MENU="GUIDE_TOOL_MENU",yt.GUIDE_ACCEPT="GUIDE_ACCEPT",yt.GUIDE_ONGOING="GUIDE_ONGOING",yt.GUIDE_CLOSED="GUIDE_CLOSED",yt.GUARDIAN_CHAT_REVIEW_ACCEPT="GUARDIAN_CHAT_REVIEW_ACCEPT",yt.GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_VOTERS",yt.GUARDIAN_CHAT_REVIEW_VOTE="GUARDIAN_CHAT_REVIEW_VOTE",yt.GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS="GUARDIAN_CHAT_REVIEW_WAIT_FOR_RESULTS",yt.GUARDIAN_CHAT_REVIEW_RESULTS="GUARDIAN_CHAT_REVIEW_RESULTS";let Me=yt;class td{constructor(e,n){this._message=e,this._roomId=n}get message(){return this._message}get roomId(){return this._roomId}}class nd{constructor(e){this._userId=e,this._messages=[]}addChat(e){this._messages.push(e)}get userId(){return this._userId}get messages(){return this._messages}}const Bo=class Bo{};Bo.ACTIVE="active",Bo.NONE="none",Bo.EXPIRED="expired";let bs=Bo;const U_="HC1",F_=["ACH_VipHC1","ACH_VipHC2","ACH_VipHC3","ACH_VipHC4","ACH_VipHC5","HC1","HC2","HC3","HC4","HC5"],V_=a=>{let e=null;return F_.forEach(n=>a.indexOf(n)>-1&&(e=n)),e||U_},Bi=class Bi{};Bi.TOO_MANY_PENDING_CALLS_CODE=1,Bi.HAS_ABUSIVE_CALL_CODE=2;let Ci=Bi;const B_=a=>a===1?"useless":a===2?"abusive":"resolved",Sr=class Sr{};Sr.SELECT_USER=0,Sr.SELECT_CHATS=1,Sr.SELECT_TOPICS=2,Sr.INPUT_REPORT_MESSAGE=3,Sr.REPORT_SUMMARY=4;let Zt=Sr;const fs=class fs{};fs.EMERGENCY=1,fs.GUIDE=2,fs.IM=3,fs.ROOM=4,fs.BULLY=6,fs.THREAD=7,fs.MESSAGE=8,fs.PHOTO=9;let lt=fs;class Rh{constructor(e=0,n=20){this._data=[e,n]}getMessageArray(){return this._data}dispose(){this._data=null}}class Oh{constructor(e){this._data=[e]}getMessageArray(){return this._data}dispose(){this._data=null}}class kh{constructor(e){this._data=[e]}getMessageArray(){return this._data}dispose(){this._data=null}}class Ah{constructor(){this._data=[]}getMessageArray(){return this._data}dispose(){this._data=null}}const ns=class ns extends dn{};ns.SHOW_CATALOG="CE_SHOW_CATALOG",ns.HIDE_CATALOG="CE_HIDE_CATALOG",ns.TOGGLE_CATALOG="CE_TOGGLE_CATALOG",ns.SOLD_OUT="CE_SOLD_OUT",ns.APPROVE_NAME_RESULT="CE_APPROVE_NAME_RESULT",ns.PURCHASE_APPROVED="CE_PURCHASE_APPROVED",ns.INIT_GIFT="CE_INIT_GIFT",ns.CATALOG_RESET="CE_RESET",ns.CATALOG_INVISIBLE_PAGE_VISITED="CE_CATALOG_INVISIBLE_PAGE_VISITED";let kr=ns;class G_ extends kr{constructor(e,n,s){super(kr.INIT_GIFT),this._pageId=e,this._offerId=n,this._extraData=s}get pageId(){return this._pageId}get offerId(){return this._offerId}get extraData(){return this._extraData}}const Gi=class Gi extends kr{constructor(e){super(Gi.POST_MARKETPLACE),this._item=e}get item(){return this._item}};Gi.POST_MARKETPLACE="CE_POST_MARKETPLACE";let bi=Gi;const Hi=class Hi extends dn{constructor(e){super(Hi.PURCHASE_SUCCESS),this._purchase=e}get purchase(){return this._purchase}};Hi.PURCHASE_SUCCESS="CPE_PURCHASE_SUCCESS";let Os=Hi;const Wi=class Wi extends dn{constructor(e){super(Wi.PURCHASE_FAILED),this._code=e}get code(){return this._code}};Wi.PURCHASE_FAILED="CPFE_PURCHASE_FAILED";let cr=Wi;const ji=class ji extends dn{constructor(e){super(ji.NOT_ALLOWED),this._code=e}get code(){return this._code}};ji.NOT_ALLOWED="CPNAE_NOT_ALLOWED";let aa=ji;const Nt=class Nt extends dn{};Nt.WIDGETS_INITIALIZED="CWE_CWE_WIDGETS_INITIALIZED",Nt.SELECT_PRODUCT="CWE_SELECT_PRODUCT",Nt.SET_EXTRA_PARM="CWE_CWE_SET_EXTRA_PARM",Nt.PURCHASE="CWE_PURCHASE",Nt.COLOUR_ARRAY="CWE_COLOUR_ARRAY",Nt.MULTI_COLOUR_ARRAY="CWE_MULTI_COLOUR_ARRAY",Nt.COLOUR_INDEX="CWE_COLOUR_INDEX",Nt.TEXT_INPUT="CWE_TEXT_INPUT",Nt.DROPMENU_SELECT="CWE_CWE_DROPMENU_SELECT",Nt.PURCHASE_OVERRIDE="CWE_PURCHASE_OVERRIDE",Nt.SELLABLE_PET_PALETTES="CWE_SELLABLE_PET_PALETTES",Nt.UPDATE_ROOM_PREVIEW="CWE_UPDATE_ROOM_PREVIEW",Nt.GUILD_SELECTED="CWE_GUILD_SELECTED",Nt.TOTAL_PRICE_WIDGET_INITIALIZED="CWE_TOTAL_PRICE_WIDGET_INITIALIZED",Nt.PRODUCT_OFFER_UPDATED="CWE_CWE_PRODUCT_OFFER_UPDATED",Nt.SET_PREVIEWER_STUFFDATA="CWE_CWE_SET_PREVIEWER_STUFFDATA",Nt.EXTRA_PARAM_REQUIRED_FOR_BUY="CWE_CWE_EXTRA_PARAM_REQUIRED_FOR_BUY",Nt.TOGGLE="CWE_CWE_TOGGLE",Nt.BUILDER_SUBSCRIPTION_UPDATED="CWE_CWE_BUILDER_SUBSCRIPTION_UPDATED",Nt.ROOM_CHANGED="CWE_CWE_ROOM_CHANGED",Nt.SHOW_WARNING_TEXT="CWE_CWE_SHOW_WARNING_TEXT";let sd=Nt;const qi=class qi extends dn{constructor(){super(qi.SOLD_OUT)}};qi.SOLD_OUT="CPSOE_SOLD_OUT";let ia=qi;const zi=class zi extends dn{constructor(e,n){super(zi.UPDATE_STUFF_DATA),this._offer=e,this._stuffData=n}get offer(){return this._offer}get stuffData(){return this._stuffData}};zi.UPDATE_STUFF_DATA="SRPSA_UPDATE_STUFF_DATA";let rd=zi;const Nr=class Nr extends dn{};Nr.SHOW_GUIDE_TOOL="GTE_SHOW_GUIDE_TOOL",Nr.HIDE_GUIDE_TOOL="GTE_HIDE_GUIDE_TOOL",Nr.TOGGLE_GUIDE_TOOL="GTE_TOGGLE_GUIDE_TOOL",Nr.CREATE_HELP_REQUEST="GTE_CREATE_HELP_REQUEST",Nr.CREATE_BULLY_REQUEST="GTE_CREATE_BULLY_REQUEST";let Cn=Nr;const hu=class hu extends dn{};hu.INIT="HC_NAME_CHANGE_INIT";let la=hu;const Yi=class Yi extends dn{constructor(e,n,s){super(Yi.FURNI_ADDED),this.id=e,this.spriteId=n,this.category=s}};Yi.FURNI_ADDED="IFAE_FURNI_ADDED";let ca=Yi;const Ki=class Ki extends dn{constructor(e,n,s,r){super(Ki.MENTION_ACTION),this._action=e,this._mentionId=n,this._success=s,this._message=r}get action(){return this._action}get mentionId(){return this._mentionId}get success(){return this._success}get message(){return this._message}};Ki.MENTION_ACTION="MENTION_ACTION";let _i=Ki;const $i=class $i extends dn{constructor(e){super($i.MENTION_COUNT),this._unreadCount=e}get unreadCount(){return this._unreadCount}};$i.MENTION_COUNT="MENTION_COUNT";let Si=$i;const Qi=class Qi extends dn{constructor(e,n){super(Qi.MENTIONS_LIST),this._totalCount=e,this._mentions=n}get totalCount(){return this._totalCount}get mentions(){return this._mentions}};Qi.MENTIONS_LIST="MENTIONS_LIST";let Ni=Qi;const Xi=class Xi extends dn{constructor(e,n,s,r){super(Xi.NOTIFICATION_BUBBLE),this._message=e,this._type=n,this._userId=s,this._imageUrl=r}get message(){return this._message}get type(){return this._type}get userId(){return this._userId}get imageUrl(){return this._imageUrl}};Xi.NOTIFICATION_BUBBLE="NOTIFICATION_BUBBLE";let od=Xi;const Go=class Go extends dn{};Go.SHOW_THUMBNAIL="NE_SHOW_THUMBNAIL",Go.HIDE_THUMBNAIL="NE_HIDE_THUMBNAIL",Go.TOGGLE_THUMBNAIL="NE_TOGGLE_THUMBNAIL";let Cs=Go;class H_{flush(){return this._totalCount=0,this._mentions=[],!0}parse(e){if(!e)return console.error(" [MENTIONS DEBUG] MentionsListParser: wrapper  null"),!1;console.log(" [MENTIONS DEBUG] Parsing MentionsListMessageEvent..."),this._totalCount=e.readInt();const n=e.readInt();console.log(" [MENTIONS DEBUG] Dados recebidos:",{totalCount:this._totalCount,listSize:n}),this._mentions=[];for(let s=0;s<n;s++){const r={id:e.readInt(),mentionerUsername:e.readString(),mentionerUserId:e.readInt(),roomName:e.readString(),roomId:e.readInt(),message:e.readString(),isRead:e.readBoolean(),timestamp:e.readInt()};console.log(` [MENTIONS DEBUG] Mention ${s+1}:`,r),this._mentions.push(r)}return console.log(" [MENTIONS DEBUG] Parser completo:",{totalCount:this._totalCount,mentionsCount:this._mentions.length}),nt(new Ni(this._totalCount,this._mentions)),!0}get totalCount(){return this._totalCount}get mentions(){return this._mentions}}class W_{flush(){return this._unreadCount=0,!0}parse(e){return e?(this._unreadCount=e.readInt(),nt(new Si(this._unreadCount)),!0):!1}get unreadCount(){return this._unreadCount}}class j_{flush(){return this._action=null,this._mentionId=0,this._success=!1,this._message=null,!0}parse(e){return e?(this._action=e.readString(),this._mentionId=e.readInt(),this._success=e.readBoolean(),this._message=e.readString(),nt(new _i(this._action,this._mentionId,this._success,this._message)),!0):!1}get action(){return this._action}get mentionId(){return this._mentionId}get success(){return this._success}get message(){return this._message}}class q_ extends Vc{constructor(e){super(e,H_)}getParser(){return this.parser}}class z_ extends Vc{constructor(e){super(e,W_)}getParser(){return this.parser}}class Y_ extends Vc{constructor(e){super(e,j_)}getParser(){return this.parser}}const ro=class ro{};ro.CUSTOM_NOTIFICATION_BUBBLE=8010,ro.MENTIONS_LIST=8011,ro.MENTION_COUNT=8012,ro.MENTION_ACTION_RESPONSE=8013;let ad=ro;const oo=class oo{};oo.REQUEST_MENTIONS_LIST=8014,oo.MARK_MENTION_READ=8015,oo.DELETE_MENTION=8016,oo.MARK_ALL_MENTIONS_READ=8017;let id=oo;const K_=()=>{console.log(" [MENTIONS] Inicializando sistema de Mentions...");const a=po();if(!a)return console.error(" [MENTIONS] Communication manager no disponvel"),!1;try{const e=a._messages;if(!e)return console.error(" [MENTIONS] No foi possvel acessar _messages"),!1;if(console.log(" [MENTIONS] Registrando composers..."),e.composers){const n=e.composers;n.set(8014,Rh),console.log("   RequestMentionsListMessageComposer (Header 8014)"),n.set(8015,Oh),console.log("   MarkMentionReadMessageComposer (Header 8015)"),n.set(8016,kh),console.log("   DeleteMentionMessageComposer (Header 8016)"),n.set(8017,Ah),console.log("   MarkAllMentionsReadMessageComposer (Header 8017)")}else return console.error(" [MENTIONS] messages.composers no disponvel"),!1;if(console.log(" [MENTIONS] Registrando eventos..."),e.events){const n=e.events;n.set(8011,q_),console.log("   MentionsListMessageEvent (Header 8011)"),n.set(8012,z_),console.log("   MentionCountMessageEvent (Header 8012)"),n.set(8013,Y_),console.log("   MentionActionMessageEvent (Header 8013)")}else return console.error(" [MENTIONS] messages.events no disponvel"),!1;return console.log(" [MENTIONS] Sistema de Mentions inicializado com sucesso!"),!0}catch(e){return console.error(" [MENTIONS] Erro ao registrar mensagens:",e),!1}},$_=a=>{switch(a){case 1:case 2:return"Normal";case 3:return"Automatic";case 4:return"Automatic IM";case 5:return"Guide System";case 6:return"IM";case 7:return"Room";case 8:return"Panic";case 9:return"Guardian";case 10:return"Automatic Helper";case 11:return"Discussion";case 12:return"Selfie";case 14:return"Photo";case 15:return"Ambassador"}return"Unknown"},sr=class sr{constructor(e,n,s,r,o){this._actionId=e,this._name=n,this._actionType=s,this._sanctionTypeId=r,this._actionLengthHours=o}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get sanctionTypeId(){return this._sanctionTypeId}get actionLengthHours(){return this._actionLengthHours}};sr.ALERT=1,sr.MUTE=2,sr.BAN=3,sr.KICK=4,sr.TRADE_LOCK=5,sr.MESSAGE=6;let We=sr;const ss=class ss{};ss.NONE=0,ss.START_DOORBELL=1,ss.START_PASSWORD=2,ss.STATE_PENDING_SERVER=3,ss.UPDATE_STATE=4,ss.STATE_WAITING=5,ss.STATE_NO_ANSWER=6,ss.STATE_WRONG_PASSWORD=7,ss.STATE_ACCEPTED=8;let qe=ss;const Ho=class Ho{};Ho.LIST=0,Ho.THUMBNAILS=1,Ho.FORCED_THUMBNAILS=2;let er=Ho;const Q_=()=>{const a=[];for(let e=10;e<=100;e=e+10)a.push(e);return a},ld=Q_(),Gr=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}];function vn(a){M(new ui(a,!1,!0))}const Gs=class Gs{};Gs.DEFAULT="default",Gs.MOTD="motd",Gs.MODERATION="moderation",Gs.EVENT="event",Gs.NITRO="nitro",Gs.SEARCH="search",Gs.ALERT="alert";let Ie=Gs;const Wo=class Wo{constructor(e,n=Ie.DEFAULT,s=null,r=null,o=null,c=null){Wo.ITEM_ID+=1,this._id=Wo.ITEM_ID,this._messages=e,this._alertType=n,this._clickUrl=s,this._clickUrlText=r,this._title=o,this._imageUrl=c}get id(){return this._id}get messages(){return this._messages}set alertType(e){this._alertType=e}get alertType(){return this._alertType}get clickUrl(){return this._clickUrl}get clickUrlText(){return this._clickUrlText}get title(){return this._title}get imageUrl(){return this._imageUrl}};Wo.ITEM_ID=-1;let vi=Wo;const vt=class vt{};vt.FRIENDOFFLINE="friendoffline",vt.FRIENDONLINE="friendonline",vt.THIRDPARTYFRIENDOFFLINE="thirdpartyfriendoffline",vt.THIRDPARTYFRIENDONLINE="thirdpartyfriendonline",vt.ACHIEVEMENT="achievement",vt.BADGE_RECEIVED="badge_received",vt.INFO="info",vt.RECYCLEROK="recyclerok",vt.RESPECT="respect",vt.CLUB="club",vt.SOUNDMACHINE="soundmachine",vt.PETLEVEL="petlevel",vt.CLUBGIFT="clubgift",vt.BUYFURNI="buyfurni",vt.VIP="vip",vt.ROOMMESSAGESPOSTED="roommessagesposted",vt.MENTION="mention",vt.SUCCESS="success",vt.WARNING="warning",vt.ERROR="error",vt.GIFT="gift";let Ct=vt;const jo=class jo{constructor(e,n=Ct.INFO,s=null,r=null){jo.ITEM_ID+=1,this._id=jo.ITEM_ID,this._message=e,this._notificationType=n,this._iconUrl=s,this._linkUrl=r}get id(){return this._id}get message(){return this._message}get notificationType(){return this._notificationType}get iconUrl(){return this._iconUrl}get linkUrl(){return this._linkUrl}};jo.ITEM_ID=-1;let vc=jo;const qo=class qo{constructor(e,n,s,r,o,c,u){qo.ITEM_ID+=1,this._id=qo.ITEM_ID,this._confirmType=e,this._message=n,this._onConfirm=s,this._onCancel=r,this._confirmText=o,this._cancelText=c,this._title=u}get id(){return this._id}get confirmType(){return this._confirmType}get message(){return this._message}get onConfirm(){return this._onConfirm}get onCancel(){return this._onCancel}get confirmText(){return this._confirmText}get cancelText(){return this._cancelText}get title(){return this._title}};qo.ITEM_ID=-1;let Tc=qo;const gu=class gu{};gu.DEFAULT="default";let cd=gu;class $c{constructor(){this._credits=0,this._activityPoints=new Map,this._clubDays=0,this._clubPeriods=0,this._isVIP=!1,this._pastClubDays=0,this._pastVipDays=0,this._isExpiring=!1,this._minutesUntilExpiration=0,this._minutesSinceLastModified=0,this._lastUpdated=0}static from(e){const n=new $c;return n._credits=e._credits,n._activityPoints=e._activityPoints,n._clubDays=e._clubDays,n._clubPeriods=e._clubPeriods,n._isVIP=e._isVIP,n._pastClubDays=e._pastClubDays,n._pastVipDays=e._pastVipDays,n._isExpiring=e._isExpiring,n._minutesUntilExpiration=e._minutesUntilExpiration,n._minutesSinceLastModified=e._minutesSinceLastModified,n._lastUpdated=e._lastUpdated,n}get credits(){return this._credits}set credits(e){this._lastUpdated=zn(),this._credits=e}get activityPoints(){return this._activityPoints}set activityPoints(e){this._lastUpdated=zn(),this._activityPoints=e}get clubDays(){return this._clubDays}set clubDays(e){this._lastUpdated=zn(),this._clubDays=e}get clubPeriods(){return this._clubPeriods}set clubPeriods(e){this._lastUpdated=zn(),this._clubPeriods=e}get hasClubLeft(){return this._clubDays>0||this._clubPeriods>0}get isVip(){return this._isVIP}set isVip(e){this._isVIP=e}get pastClubDays(){return this._pastClubDays}set pastClubDays(e){this._lastUpdated=zn(),this._pastClubDays=e}get pastVipDays(){return this._pastVipDays}set pastVipDays(e){this._lastUpdated=zn(),this._pastVipDays=e}get isExpiring(){return this._isExpiring}set isExpiring(e){this._isExpiring=e}get minutesUntilExpiration(){var e=(zn()-this._lastUpdated)/6e4,n=this._minutesUntilExpiration-e;return n>0?n:0}set minutesUntilExpiration(e){this._lastUpdated=zn(),this._minutesUntilExpiration=e}get minutesSinceLastModified(){return this._minutesSinceLastModified}set minutesSinceLastModified(e){this._lastUpdated=zn(),this._minutesSinceLastModified=e}get lastUpdated(){return this._lastUpdated}get clubLevel(){return this.clubDays===0&&this.clubPeriods===0?Nn.NO_CLUB:this.isVip?Nn.VIP:Nn.CLUB}}class Ea extends dn{}const zo=class zo extends Ea{constructor(e,n){super(e),this._id=-1,this._numQuestions=0,this._startMessage="",this._endMessage="",this._questionArray=null,this._pollType="",this._npsPoll=!1,this._id=n}get id(){return this._id}get summary(){return this._summary}set summary(e){this._summary=e}get headline(){return this._headline}set headline(e){this._headline=e}get numQuestions(){return this._numQuestions}set numQuestions(e){this._numQuestions=e}get startMessage(){return this._startMessage}set startMessage(e){this._startMessage=e}get endMessage(){return this._endMessage}set endMessage(e){this._endMessage=e}get questionArray(){return this._questionArray}set questionArray(e){this._questionArray=e}get pollType(){return this._pollType}set pollType(e){this._pollType=e}get npsPoll(){return this._npsPoll}set npsPoll(e){this._npsPoll=e}};zo.OFFER="RWPUW_OFFER",zo.ERROR="RWPUW_ERROR",zo.CONTENT="RWPUW_CONTENT";let tr=zo;const Ji=class Ji extends Ea{constructor(e,n=0,s=0,r=0){super(e),this._hue=n,this._saturation=s,this._lightness=r}get hue(){return this._hue}get saturation(){return this._saturation}get lightness(){return this._lightness}};Ji.PREVIEW="RWUBCPE_PREVIEW",Ji.CLEAR_PREVIEW="RWUBCPE_CLEAR_PREVIEW";let $n=Ji;const ao=class ao extends Ea{constructor(e,n){super(ao.CHAT_INPUT_CONTENT),this._chatMode="",this._userName="",this._chatMode=e,this._userName=n}get chatMode(){return this._chatMode}get userName(){return this._userName}};ao.CHAT_INPUT_CONTENT="RWUCICE_CHAT_INPUT_CONTENT",ao.WHISPER="whisper",ao.SHOUT="shout";let js=ao;const Zi=class Zi extends Ea{constructor(e,n,s,r,o,c,u){super(Zi.UPDATE_CHAT),this._objectId=e,this._category=n,this._botId=s,this._chat=r,this._automaticChat=o,this._chatDelay=c,this._mixSentences=u}get objectId(){return this._objectId}get category(){return this._category}get botId(){return this._botId}get chat(){return this._chat}get automaticChat(){return this._automaticChat}get chatDelay(){return this._chatDelay}get mixSentences(){return this._mixSentences}};Zi.UPDATE_CHAT="RWURBCE_UPDATE_CHAT";let Ti=Zi;const jn=class jn extends Ea{constructor(e,n,s,r){super(e),this._id=n,this._category=s,this._roomId=r}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}};jn.OBJECT_SELECTED="RWUROE_OBJECT_SELECTED",jn.OBJECT_DESELECTED="RWUROE_OBJECT_DESELECTED",jn.USER_REMOVED="RWUROE_USER_REMOVED",jn.FURNI_REMOVED="RWUROE_FURNI_REMOVED",jn.FURNI_ADDED="RWUROE_FURNI_ADDED",jn.USER_ADDED="RWUROE_USER_ADDED",jn.OBJECT_ROLL_OVER="RWUROE_OBJECT_ROLL_OVER",jn.OBJECT_ROLL_OUT="RWUROE_OBJECT_ROLL_OUT",jn.OBJECT_REQUEST_MANIPULATION="RWUROE_OBJECT_REQUEST_MANIPULATION",jn.OBJECT_DOUBLE_CLICKED="RWUROE_OBJECT_DOUBLE_CLICKED";let je=jn;class X_{constructor(e,n){this._data=[e,n]}getMessageArray(){return this._data}dispose(){}}const fu=class fu{constructor(e){this.type=e,this.id=0,this.category=0,this.name="",this.description="",this.image=null,this.isWallItem=!1,this.isStickie=!1,this.isRoomOwner=!1,this.roomControllerLevel=0,this.isAnyRoomController=!1,this.expiration=-1,this.purchaseCatalogPageId=-1,this.purchaseOfferId=-1,this.extraParam="",this.isOwner=!1,this.stuffData=null,this.groupId=0,this.ownerId=0,this.ownerName="",this.usagePolicy=0,this.rentCatalogPageId=-1,this.rentOfferId=-1,this.purchaseCouldBeUsedForBuyout=!1,this.rentCouldBeUsedForBuyout=!1,this.availableForBuildersClub=!1,this.tileSizeX=1,this.tileSizeY=1}};fu.FURNI="IFI_FURNI";let Ar=fu;class xh{constructor(e,n,s,r,o,c=!1){this.roomIndex=e,this.category=n,this.id=s,this.name=r,this.userType=o,this.isFriend=c}}const pu=class pu{constructor(e){this.type=e,this.level=0,this.maximumLevel=0,this.experience=0,this.levelExperienceGoal=0,this.energy=0,this.maximumEnergy=0,this.happyness=0,this.maximumHappyness=0,this.respectsPetLeft=0,this.respect=0,this.age=0,this.name="",this.id=-1,this.image=null,this.petType=0,this.petBreed=0,this.petFigure="",this.posture="std",this.isOwner=!1,this.ownerId=-1,this.ownerName="",this.canRemovePet=!1,this.roomIndex=0,this.unknownRarityLevel=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.skillTresholds=[],this.publiclyRideable=0,this.fullyGrown=!1,this.dead=!1,this.rarityLevel=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1}};pu.PET_INFO="IPI_PET_INFO";let xr=pu;const Iu=class Iu{constructor(e){this.type=e,this.name="",this.motto="",this.webID=0,this.figure="",this.badges=[],this.carryItem=0,this.roomIndex=0,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.ownerId=-1,this.ownerName="",this.botSkills=[]}};Iu.RENTABLE_BOT="IRBI_RENTABLE_BOT";let Dr=Iu;const ps=class ps{constructor(e){this.type=e,this.name="",this.motto="",this.achievementScore=0,this.webID=0,this.xp=0,this.userType=-1,this.figure="",this.badges=[],this.groupId=0,this.groupName="",this.groupBadgeId="",this.carryItem=0,this.roomIndex=0,this.isSpectatorMode=!1,this.allowNameChange=!1,this.amIOwner=!1,this.amIAnyRoomController=!1,this.roomControllerLevel=0,this.canBeKicked=!1,this.canBeBanned=!1,this.canBeMuted=!1,this.respectLeft=0,this.isIgnored=!1,this.isGuildRoom=!1,this.canTrade=!1,this.canTradeReason=0,this.targetRoomControllerLevel=0,this.isAmbassador=!1}get isOwnUser(){return this.type===ps.OWN_USER}};ps.OWN_USER="IUI_OWN_USER",ps.PEER="IUI_PEER",ps.BOT="IUI_BOT",ps.TRADE_REASON_OK=0,ps.TRADE_REASON_SHUTDOWN=2,ps.TRADE_REASON_NO_TRADING=3,ps.DEFAULT_BOT_BADGE_ID="BOT";let Rt=ps;class Hr{static getObjectName(e,n){const s=Oe();let r=-1,o=null,c=0;switch(n){case Z.FLOOR:case Z.WALL:{const u=Y().getRoomObject(s.roomId,e,n);if(!u)break;if(u.type.indexOf("poster")===0)o=h("${poster_"+parseInt(u.type.replace("poster",""))+"_name}");else{let d=null;const g=u.model.getValue(se.FURNITURE_TYPE_ID);if(n===Z.FLOOR?d=z().getFloorItemData(g):n===Z.WALL&&(d=z().getWallItemData(g)),!d)break;r=d.id,o=d.name}break}case Z.UNIT:{const u=s.userDataManager.getUserDataByIndex(e);if(!u)break;r=u.webID,o=u.name,c=u.type;break}}return!o||!o.length?null:new xh(e,n,r,o,c)}static getFurniInfo(e,n){const s=Oe(),r=new Ar(Ar.FURNI);r.id=e,r.category=n;const o=Y().getRoomObject(s.roomId,e,n);if(!o)return;const c=o.model;c.getValue(Ls.INFOSTAND_EXTRA_PARAM)&&(r.extraParam=c.getValue(Ls.INFOSTAND_EXTRA_PARAM));const u=c.getValue(se.FURNITURE_DATA_FORMAT),d=xm.getData(u);d.initializeFromRoomObjectModel(c),r.stuffData=d;const g=o.type;if(g.indexOf("poster")===0){const E=parseInt(g.replace("poster",""));r.name=h("${poster_"+E+"_name}"),r.description=h("${poster_"+E+"_desc}")}else{const E=c.getValue(se.FURNITURE_TYPE_ID);let b=null;n===Z.FLOOR?b=z().getFloorItemData(E):n===Z.WALL&&(b=z().getWallItemData(E)),b&&(r.name=b.name,r.description=b.description,r.purchaseOfferId=b.purchaseOfferId,r.purchaseCouldBeUsedForBuyout=b.purchaseCouldBeUsedForBuyout,r.rentOfferId=b.rentOfferId,r.rentCouldBeUsedForBuyout=b.rentCouldBeUsedForBuyout,r.availableForBuildersClub=b.availableForBuildersClub,r.tileSizeX=b.tileSizeX,r.tileSizeY=b.tileSizeY)}g.indexOf("post_it")>-1&&(r.isStickie=!0);const m=c.getValue(se.FURNITURE_EXPIRY_TIME),f=c.getValue(se.FURNITURE_EXPIRTY_TIMESTAMP);r.expiration=m<0?m:Math.max(0,m-(zn()-f)/1e3);let p=Y().getRoomObjectImage(s.roomId,e,n,new At(180),64,null);(!p.data||p.data.width>140||p.data.height>200)&&(p=Y().getRoomObjectImage(s.roomId,e,n,new At(180),1,null)),r.image=p.getImage(),r.isWallItem=n===Z.WALL,r.isRoomOwner=s.isRoomOwner,r.roomControllerLevel=s.controllerLevel,r.isAnyRoomController=z().isModerator,r.ownerId=c.getValue(se.FURNITURE_OWNER_ID),r.ownerName=c.getValue(se.FURNITURE_OWNER_NAME),r.usagePolicy=c.getValue(se.FURNITURE_USAGE_POLICY);const C=c.getValue(se.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);return C!==0&&(r.groupId=C),Jt(o)&&(r.isOwner=!0),r}static getUserInfo(e,n){const s=Oe();let r=Rt.OWN_USER;n.webID!==z().userId&&(r=Rt.PEER);const o=new Rt(r);o.isSpectatorMode=s.isSpectator,o.name=n.name,o.motto=n.custom,o.achievementScore=n.activityPoints,o.webID=n.webID,o.roomIndex=n.roomIndex,o.userType=bt.USER;const c=Y().getRoomObject(s.roomId,n.roomIndex,e);if(c&&(o.carryItem=c.model.getValue(se.FIGURE_CARRY_OBJECT)||0),r===Rt.OWN_USER&&(o.allowNameChange=z().canChangeName),o.amIOwner=s.isRoomOwner,o.isGuildRoom=s.isGuildRoom,o.roomControllerLevel=s.controllerLevel,o.amIAnyRoomController=z().isModerator,o.isAmbassador=z().isAmbassador,r===Rt.PEER){if(c){const g=c.model.getValue(se.FIGURE_FLAT_CONTROL);g!==null&&(o.targetRoomControllerLevel=g),o.canBeMuted=this.canBeMuted(o),o.canBeKicked=this.canBeKicked(o),o.canBeBanned=this.canBeBanned(o)}o.isIgnored=z().isUserIgnored(n.name),o.respectLeft=z().respectsLeft;const u=z().isSystemShutdown,d=s.tradeMode;if(u)o.canTrade=!1;else switch(d){case yl.ROOM_CONTROLLER_REQUIRED:{const g=o.roomControllerLevel!==Ke.NONE&&o.roomControllerLevel!==Ke.GUILD_MEMBER,m=o.targetRoomControllerLevel!==Ke.NONE&&o.targetRoomControllerLevel!==Ke.GUILD_MEMBER;o.canTrade=g||m;break}case yl.NO_TRADING:o.canTrade=!0;break;default:o.canTrade=!1;break}o.canTradeReason=Rt.TRADE_REASON_OK,u&&(o.canTradeReason=Rt.TRADE_REASON_SHUTDOWN),d!==yl.FREE_TRADING&&(o.canTradeReason=Rt.TRADE_REASON_NO_TRADING)}return o.groupId=n.groupId,o.groupBadgeId=z().getGroupBadge(o.groupId),o.groupName=n.groupName,o.badges=s.userDataManager.getUserBadges(n.webID),o.figure=n.figure,o}static getBotInfo(e,n){const s=Oe(),r=new Rt(Rt.BOT);r.name=n.name,r.motto=n.custom,r.webID=n.webID,r.roomIndex=n.roomIndex,r.userType=n.type;const o=Y().getRoomObject(s.roomId,n.roomIndex,e);return o&&(r.carryItem=o.model.getValue(se.FIGURE_CARRY_OBJECT)||0),r.amIOwner=s.isRoomOwner,r.isGuildRoom=s.isGuildRoom,r.roomControllerLevel=s.controllerLevel,r.amIAnyRoomController=z().isModerator,r.isAmbassador=z().isAmbassador,r.badges=[Rt.DEFAULT_BOT_BADGE_ID],r.figure=n.figure,r}static getRentableBotInfo(e,n){const s=Oe(),r=new Dr(Dr.RENTABLE_BOT);r.name=n.name,r.motto=n.custom,r.webID=n.webID,r.roomIndex=n.roomIndex,r.ownerId=n.ownerId,r.ownerName=n.ownerName,r.botSkills=n.botSkills;const o=Y().getRoomObject(s.roomId,n.roomIndex,e);return o&&(r.carryItem=o.model.getValue(se.FIGURE_CARRY_OBJECT)||0),r.amIOwner=s.isRoomOwner,r.roomControllerLevel=s.controllerLevel,r.amIAnyRoomController=z().isModerator,r.badges=[Rt.DEFAULT_BOT_BADGE_ID],r.figure=n.figure,r}static getPetInfo(e){const n=Oe(),s=n.userDataManager.getPetData(e.id);if(!s)return;const r=new go(s.figure);let o=null;r.typeId===qt.MONSTERPLANT&&(e.level>=e.adultLevel?o="std":o="grw"+e.level);const c=e.ownerId===z().userId,u=new xr(xr.PET_INFO);return u.name=s.name,u.id=e.id,u.ownerId=e.ownerId,u.ownerName=e.ownerName,u.rarityLevel=e.rarityLevel,u.petType=r.typeId,u.petBreed=r.paletteId,u.petFigure=s.figure,u.posture=o,u.isOwner=c,u.roomIndex=s.roomIndex,u.level=e.level,u.maximumLevel=e.maximumLevel,u.experience=e.experience,u.levelExperienceGoal=e.levelExperienceGoal,u.energy=e.energy,u.maximumEnergy=e.maximumEnergy,u.happyness=e.happyness,u.maximumHappyness=e.maximumHappyness,u.respect=e.respect,u.respectsPetLeft=z().respectsPetLeft,u.age=e.age,u.saddle=e.saddle,u.rider=e.rider,u.breedable=e.breedable,u.fullyGrown=e.fullyGrown,u.dead=e.dead,u.rarityLevel=e.rarityLevel,u.skillTresholds=e.skillTresholds,u.canRemovePet=!1,u.publiclyRideable=e.publiclyRideable,u.maximumTimeToLive=e.maximumTimeToLive,u.remainingTimeToLive=e.remainingTimeToLive,u.remainingGrowTime=e.remainingGrowTime,u.publiclyBreedable=e.publiclyBreedable,(c||n.isRoomOwner||z().isModerator||n.controllerLevel>=Ke.GUEST)&&(u.canRemovePet=!0),u}static checkGuildSetting(e){return e.isGuildRoom?e.roomControllerLevel>=Ke.GUILD_ADMIN:e.roomControllerLevel>=Ke.GUEST}static isValidSetting(e,n){const s=Oe();if(!s.isPrivateRoom)return!1;const r=s.moderationSettings;let o=!1;return r&&(o=n(e,r)),o&&e.targetRoomControllerLevel<Ke.ROOM_OWNER}static canBeMuted(e){const n=(s,r)=>{switch(r.allowMute){case os.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(s);default:return s.roomControllerLevel>=Ke.ROOM_OWNER}};return this.isValidSetting(e,n)}static canBeKicked(e){const n=(s,r)=>{switch(r.allowKick){case os.MODERATION_LEVEL_ALL:return!0;case os.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(s);default:return s.roomControllerLevel>=Ke.ROOM_OWNER}};return this.isValidSetting(e,n)}static canBeBanned(e){const n=(s,r)=>{switch(r.allowBan){case os.MODERATION_LEVEL_USER_WITH_RIGHTS:return this.checkGuildSetting(s);default:return s.roomControllerLevel>=Ke.ROOM_OWNER}};return this.isValidSetting(e,n)}}const Qt=class Qt{};Qt.GENERIC_SKILL=0,Qt.DRESS_UP=1,Qt.SETUP_CHAT=2,Qt.RANDOM_WALK=3,Qt.DANCE=4,Qt.CHANGE_BOT_NAME=5,Qt.SERVE_BEVERAGE=6,Qt.INCLIENT_LINK=7,Qt.NUX_PROCEED=8,Qt.CHANGE_BOT_MOTTO=9,Qt.NUX_TAKE_TOUR=10,Qt.NO_PICK_UP=12,Qt.NAVIGATOR_SEARCH=14,Qt.DONATE_TO_USER=24,Qt.DONATE_TO_ALL=25;let Qe=Qt;const el=class el{constructor(e=-1,n=-1,s=-1,r="",o="",c="",u=null,d=0,g=0,m=null,f=null,p=1){this.senderId=e,this.senderCategory=n,this.roomId=s,this.text=r,this.formattedText=o,this.username=c,this.location=u,this.type=d,this.styleId=g,this.imageUrl=m,this.color=f,this.id=-1,this.width=0,this.height=0,this.elementRef=null,this.skipMovement=!1,this.repeatCount=1,this._top=0,this._left=0,this.id=++el.BUBBLE_COUNTER,this.repeatCount=p}get top(){return this._top}set top(e){this._top=e,this.elementRef&&(this.elementRef.style.top=this._top+"px")}get left(){return this._left}set left(e){this._left=e,this.elementRef&&(this.elementRef.style.left=this._left+"px")}};el.BUBBLE_COUNTER=0;let wi=el;const Yo=class Yo{};Yo.CHAT_DEFAULT=0,Yo.CHAT_WHISPER=1,Yo.CHAT_SHOUT=2;let _s=Yo;class ud{constructor(e=0,n=0,s=0,r=0){this.id=e,this.type=n,this.color=s,this.light=r}}const J_=(a,e,n,s=0)=>!(a.left+s+a.width<e.left+s||a.left+s>e.left+s+e.width||a.top+a.height<e.top+n||a.top>e.top+n+e.height),io=class io{static savePreset(e,n,s,r,o){Oe().updateMoodlightData(e,n,s,r,o)}static changeState(){Oe().toggleMoodlightState()}static previewDimmer(e,n,s){Y().updateObjectRoomColor(Oe().roomId,e,n,s)}static scaleBrightness(e){return~~((e-this.MIN_BRIGHTNESS)*(100-0)/(this.MAX_BRIGHTNESS-this.MIN_BRIGHTNESS)+0)}};io.AVAILABLE_COLORS=[7665141,21495,15161822,15353138,15923281,8581961,0],io.HTML_COLORS=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],io.MIN_BRIGHTNESS=76,io.MAX_BRIGHTNESS=255;let Yn=io;const Z_=130,eS=100,tS=130,nS=100,sS=130,rS=100,Dh=a=>{let e=0,n=0,s=0,r=0;for(;r<a.length;){switch(r%3){case 0:e=e+a.charCodeAt(r)*37;break;case 1:n=n+a.charCodeAt(r)*37;break;case 2:s=s+a.charCodeAt(r)*37;break}r++}return e=e%eS+Z_,n=n%nS+tS,s=s%rS+sS,`rgb(${e},${n},${s})`},tl=class tl{static getMergedMannequinFigureContainer(e,n){const s=xt().createFigureContainer(e),r=xt().createFigureContainer(n);for(const o of this.MANNEQUIN_CLOTHING_PART_TYPES)s.removePart(o);for(const o of r.getPartTypeIds())s.updatePart(o,r.getPartSetId(o),r.getPartColorIds(o));return s}static transformAsMannequinFigure(e){for(const n of e.getPartTypeIds())this.MANNEQUIN_CLOTHING_PART_TYPES.indexOf(n)>=0||e.removePart(n);e.updatePart(this.MANNEQUIN_FIGURE[0],this.MANNEQUIN_FIGURE[1],this.MANNEQUIN_FIGURE[2])}};tl.MANNEQUIN_FIGURE=["hd",99999,[99998]],tl.MANNEQUIN_CLOTHING_PART_TYPES=[He.CHEST_ACCESSORY,He.COAT_CHEST,He.CHEST,He.LEGS,He.SHOES,He.WAIST_ACCESSORY];let ho=tl;const nl=class nl{};nl.WATER=0,nl.LIGHT=1;let dd=nl;const sl=class sl{};sl.POSTURE_STAND=0,sl.POSTURE_SIT=1;let yi=sl;class Qr{constructor(e,n,s){this._id=e,this._category=n,this._name=s}get id(){return this._id}get category(){return this._category}get name(){return this._name}}class oS{constructor(e,n,s,r,o,c,u){this.id=e,this.category=n,this.name=s,this.requestRoomObjectId=r,this.targetRoomObjectId=o,this.requestInventoryStripId=c,this.replace=u}}const Ri="0",Ph="1",rr=class rr{};rr.UNSTARTED=-1,rr.ENDED=0,rr.PLAYING=1,rr.PAUSED=2,rr.BUFFERING=3,rr.CUED=5;let ar=rr;const aS={boss_spawn:"./sounds/boss_spawn.mp3",boss_rage:"./sounds/boss_rage.mp3",boss_die:"./sounds/boss_die.mp3",boss_death:"./sounds/boss_die.mp3"},iS=(a,e=.5)=>{const n=aS[a];if(!n){console.warn(`[BOSS SFX] Som desconhecido: ${a}`);return}try{const s=new Audio(n);s.volume=Math.max(0,Math.min(1,e)),s.play().catch(r=>{console.error(`[BOSS SFX] Erro ao tocar ${a}:`,r)}),console.log(` [BOSS SFX] Tocando: ${a}`)}catch(s){console.error(`[BOSS SFX] Falha ao criar Audio para ${a}:`,s)}};function pn(a){M(new Ef(a))}const Ca=a=>{const e=Math.floor(a/2);return a%2?(e+.5).toString():e.toString()},Ze=class Ze{};Ze.TOGGLE_FURNI_STATE=0,Ze.RESET=1,Ze.SET_FURNI_STATE=3,Ze.MOVE_FURNI=4,Ze.GIVE_SCORE=6,Ze.CHAT=7,Ze.TELEPORT=8,Ze.JOIN_TEAM=9,Ze.LEAVE_TEAM=10,Ze.CHASE=11,Ze.FLEE=12,Ze.MOVE_AND_ROTATE_FURNI=13,Ze.GIVE_SCORE_TO_PREDEFINED_TEAM=14,Ze.TOGGLE_TO_RANDOM_STATE=15,Ze.MOVE_FURNI_TO=16,Ze.GIVE_REWARD=17,Ze.CALL_ANOTHER_STACK=18,Ze.KICK_FROM_ROOM=19,Ze.MUTE_USER=20,Ze.BOT_TELEPORT=21,Ze.BOT_MOVE=22,Ze.BOT_TALK=23,Ze.BOT_GIVE_HAND_ITEM=24,Ze.BOT_FOLLOW_AVATAR=25,Ze.BOT_CHANGE_FIGURE=26,Ze.BOT_TALK_DIRECT_TO_AVTR=27;let at=Ze;const et=class et{};et.STATES_MATCH=0,et.FURNIS_HAVE_AVATARS=1,et.ACTOR_IS_ON_FURNI=2,et.TIME_ELAPSED_MORE=3,et.TIME_ELAPSED_LESS=4,et.USER_COUNT_IN=5,et.ACTOR_IS_IN_TEAM=6,et.HAS_STACKED_FURNIS=7,et.STUFF_TYPE_MATCHES=8,et.STUFFS_IN_FORMATION=9,et.ACTOR_IS_GROUP_MEMBER=10,et.ACTOR_IS_WEARING_BADGE=11,et.ACTOR_IS_WEARING_EFFECT=12,et.NOT_STATES_MATCH=13,et.FURNI_NOT_HAVE_HABBO=14,et.NOT_ACTOR_ON_FURNI=15,et.NOT_USER_COUNT_IN=16,et.NOT_ACTOR_IN_TEAM=17,et.NOT_HAS_STACKED_FURNIS=18,et.NOT_FURNI_IS_OF_TYPE=19,et.NOT_STUFFS_IN_FORMATION=20,et.NOT_ACTOR_IN_GROUP=21,et.NOT_ACTOR_WEARS_BADGE=22,et.NOT_ACTOR_WEARING_EFFECT=23,et.DATE_RANGE_ACTIVE=24,et.ACTOR_HAS_HANDITEM=25;let dt=et;const md=a=>`${a.getFullYear()}/${("0"+(a.getMonth()+1)).slice(-2)}/${("0"+a.getDate()).slice(-2)} ${("0"+a.getHours()).slice(-2)}:${("0"+a.getMinutes()).slice(-2)}`,lo=class lo{};lo.STUFF_SELECTION_OPTION_NONE=0,lo.STUFF_SELECTION_OPTION_BY_ID=1,lo.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE=2,lo.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT=3;let he=lo;const lS=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
uniform mat3 projectionMatrix;
varying vec2 vTextureCoord;
void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,cS=`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 lineColor;
uniform vec3 color;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorLine = lineColor * currentColor.a;
    vec3 colorOverlay = color * currentColor.a;

    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {
        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);
    } else if(currentColor.a > 0.0) {
        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);
    }
}`;class uS extends Cf{constructor(e,n){super(lS,cS),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=e,this.color=n}get lineColor(){return this._lineColor}set lineColor(e){const n=this.uniforms.lineColor;typeof e=="number"?(en.hex2rgb(e,n),this._lineColor=e):(n[0]=e[0],n[1]=e[1],n[2]=e[2],this._lineColor=en.rgb2hex(n))}get color(){return this._color}set color(e){const n=this.uniforms.color;typeof e=="number"?(en.hex2rgb(e,n),this._color=e):(n[0]=e[0],n[1]=e[1],n[2]=e[2],this._color=en.rgb2hex(n))}}const qn=class qn{static show(e){qn.applySelectionShader(qn.getRoomObject(e))}static hide(e){qn.clearSelectionShader(qn.getRoomObject(e))}static clearSelectionShaderFromFurni(e){for(const n of e)qn.clearSelectionShader(qn.getRoomObject(n))}static applySelectionShaderToFurni(e){for(const n of e)qn.applySelectionShader(qn.getRoomObject(n))}static getRoomObject(e){const n=Y();return n.getRoomObject(n.activeRoomId,e,Z.FLOOR)}static applySelectionShader(e){if(!e)return;const n=e.visualization;if(n)for(const s of n.sprites)s.blendMode!==1&&(s.filters=[qn._selectionShader])}static clearSelectionShader(e){if(!e)return;const n=e.visualization;if(n)for(const s of n.sprites)s.filters=[]}};qn._selectionShader=new uS([1,1,1],[.6,.6,.6]);let Or=qn;const Co="	",on=class on{};on.AVATAR_SAYS_SOMETHING=0,on.AVATAR_WALKS_ON_FURNI=1,on.AVATAR_WALKS_OFF_FURNI=2,on.EXECUTE_ONCE=3,on.TOGGLE_FURNI=4,on.EXECUTE_PERIODICALLY=6,on.AVATAR_ENTERS_ROOM=7,on.GAME_STARTS=8,on.GAME_ENDS=9,on.SCORE_ACHIEVED=10,on.COLLISION=11,on.EXECUTE_PERIODICALLY_LONG=12,on.BOT_REACHED_STUFF=13,on.BOT_REACHED_AVATAR=14;let rn=on;const P=a=>{const{ref:e=null,innerRef:n=null,display:s=null,fit:r=!1,fitV:o=!1,grow:c=!1,shrink:u=!1,fullWidth:d=!1,fullHeight:g=!1,overflow:m=null,position:f=null,float:p=null,pointer:C=!1,visible:E=null,textColor:b=null,classNames:I=[],className:_="",style:S={},children:T=null,...R}=a,y=i.useMemo(()=>{const L=[];return s&&s.length&&L.push("d-"+s),(r||d)&&L.push("w-100"),(r||g)&&L.push("h-100"),o&&L.push("vw-100","vh-100"),c&&L.push("flex-grow-1"),u&&L.push("flex-shrink-0"),m&&L.push("overflow-"+m),f&&L.push("position-"+f),p&&L.push("float-"+p),C&&L.push("cursor-pointer"),E!==null&&L.push(E?"visible":"invisible"),b&&L.push("text-"+b),I.length&&L.push(...I),L},[s,r,o,c,u,d,g,m,f,p,C,E,b,I]),A=i.useMemo(()=>{let L=y.join(" ");return _.length&&(L+=" "+_),L.trim()},[y,_]),U=i.useMemo(()=>{let L={};return Object.keys(S).length&&(L={...L,...S}),L},[S]);return t("div",{ref:n,className:A,style:U,...R,children:T})},Mh=i.createContext({isCssGrid:!1}),dS=a=>t(Mh.Provider,{value:a.value,children:a.children}),mS=()=>i.useContext(Mh),re=a=>{const{inline:e=!1,gap:n=2,maxContent:s=!1,columnCount:r=0,center:o=!1,alignSelf:c=null,alignItems:u=null,justifyContent:d=null,fullHeight:g=!0,classNames:m=[],style:f={},...p}=a,C=i.useMemo(()=>{const b=[];return e?b.push("inline-grid"):b.push("grid"),n?b.push("gap-"+n):n===0&&b.push("gap-0"),s&&b.push("flex-basis-max-content"),c&&b.push("align-self-"+c),u&&b.push("align-items-"+u),d&&b.push("justify-content-"+d),!u&&!d&&o&&b.push("align-items-center","justify-content-center"),m.length&&b.push(...m),b},[e,n,s,c,u,d,o,m]),E=i.useMemo(()=>{let b={};return r&&(b["--bs-columns"]=r.toString()),Object.keys(f).length&&(b={...b,...f}),b},[r,f]);return t(dS,{value:{isCssGrid:!0},children:t(P,{fullHeight:g,classNames:C,style:E,...p})})},Le=a=>{const{columnMinWidth:e=40,columnMinHeight:n=40,columnCount:s=0,fullHeight:r=!1,maxContent:o=!0,overflow:c="auto",style:u={},...d}=a,g=i.useMemo(()=>{let m={};return m["--nitro-grid-column-min-height"]=n+"px",s>1&&(m.gridTemplateColumns=`repeat(auto-fill, minmax(${e}px, 1fr))`),Object.keys(u).length&&(m={...m,...u}),m},[e,n,s,u]);return t(re,{columnCount:s,fullHeight:r,overflow:c,style:g,...d})},w=a=>{const{display:e="flex",column:n=void 0,reverse:s=!1,gap:r=null,center:o=!1,alignSelf:c=null,alignItems:u=null,justifyContent:d=null,classNames:g=[],...m}=a,f=i.useMemo(()=>{const p=[];return n?s?p.push("flex-column-reverse"):p.push("flex-column"):s&&p.push("flex-row-reverse"),r&&p.push("gap-"+r),c&&p.push("align-self-"+c),u&&p.push("align-items-"+u),d&&p.push("justify-content-"+d),!u&&!d&&o&&p.push("align-items-center","justify-content-center"),g.length&&p.push(...g),p},[n,s,r,o,c,u,d,g]);return t(P,{display:e,classNames:f,...m})},D=a=>{const{variant:e="primary",size:n="sm",active:s=!1,disabled:r=!1,classNames:o=[],...c}=a,u=i.useMemo(()=>{const d=["btn"];return e&&d.push("btn-"+e),n&&d.push("btn-"+n),s&&d.push("active"),r&&d.push("disabled"),o.length&&d.push(...o),d},[e,n,s,r,o]);return t(w,{center:!0,classNames:u,...c})},vs=a=>{const{classNames:e=[],...n}=a,s=i.useMemo(()=>{const r=["btn-group"];return e.length&&r.push(...e),r},[e]);return t(P,{classNames:s,...n})},Lh=i.createContext({closers:null,setClosers:null,closeAll:null}),hS=a=>t(Lh.Provider,{...a}),gS=()=>i.useContext(Lh),Oi=a=>{const{alignItems:e="center",gap:n=1,children:s=null,...r}=a;return t(w,{alignItems:e,gap:n,...r,children:s})},ki=a=>{const{headerText:e="",isExpanded:n=!1,gap:s=0,classNames:r=[],children:o=null,...c}=a,[u,d]=i.useState(!1),{setClosers:g=null,closeAll:m=null}=gS(),f=()=>{m(),d(E=>!E)},p=i.useCallback(()=>d(!1),[]),C=i.useMemo(()=>{const E=["nitro-card-accordion-set"];return u&&E.push("active"),r&&r.length&&E.push(...r),E},[u,r]);return i.useEffect(()=>{d(n)},[n]),i.useEffect(()=>{const E=p;return g(b=>{const I=[...b];return I.push(E),I}),()=>{g(b=>{const I=[...b],_=I.indexOf(E);return _>=0&&I.splice(_,1),I})}},[p,g]),l(v,{classNames:C,gap:s,...c,children:[l(w,{pointer:!0,justifyContent:"between",className:"nitro-card-accordion-set-header px-2 py-1",onClick:f,children:[t(N,{children:e}),u&&t(kc,{className:"fa-icon"}),!u&&t(Ac,{className:"fa-icon"})]}),u&&t(v,{fullHeight:!0,overflow:"auto",gap:0,className:"nitro-card-accordion-set-content",children:o})]})},fS=a=>{const{...e}=a,[n,s]=i.useState([]),r=i.useCallback(()=>{for(const o of n)o()},[n]);return t(hS,{value:{closers:n,setClosers:s,closeAll:r},children:t(v,{gap:0,...e})})},ne=a=>{const{overflow:e="auto",classNames:n=[],...s}=a,r=i.useMemo(()=>{const o=["container-fluid","content-area"];return n.length&&o.push(...n),o},[n]);return t(v,{classNames:r,overflow:e,...s})},pS=i.createContext({theme:null}),IS=a=>t(pS.Provider,{value:a.value,children:a.children}),ae=a=>{const{headerText:e=null,isGalleryPhoto:n=!1,noCloseButton:s=!1,onReportPhoto:r=null,onCloseClick:o=null,justifyContent:c="center",alignItems:u="center",classNames:d=[],children:g=null,...m}=a,f=i.useMemo(()=>{const C=["drag-handler","container-fluid","nitro-card-header"];return d.length&&C.push(...d),C},[d]);return t(v,{center:!0,position:"relative",classNames:f,...m,children:l(w,{fullWidth:!0,center:!0,children:[t("span",{className:"nitro-card-header-text",children:e}),n&&t(P,{position:"absolute",className:"end-4 nitro-card-header-report-camera",onClick:r,children:t(xg,{className:"fa-icon"})}),t(w,{center:!0,position:"absolute",className:"end-2 nitro-card-header-close",onMouseDownCapture:C=>{C.stopPropagation(),C.nativeEvent.stopImmediatePropagation()},onClick:o,children:t(Ln,{className:"fa-icon w-12 h-12"})})]})})},Uh=a=>{const{justifyContent:e="center",classNames:n=[],variant:s="muted",...r}=a,o=i.useMemo(()=>{const c=["container-fluid","p-1"];return n.length&&c.push(...n),c.push("bg-"+s),c},[n,s]);return t(w,{justifyContent:e,classNames:o,...r})},co=class co{};co.CENTER="DWP_CENTER",co.TOP_CENTER="DWP_TOP_CENTER",co.TOP_LEFT="DWP_TOP_LEFT",co.NOTHING="DWP_NOTHING";let $t=co;const Ps=[],hd=0,gd=0,dr=a=>{const{uniqueKey:e=null,handleSelector:n=".drag-handler",windowPosition:s=$t.CENTER,disableDrag:r=!1,dragStyle:o={},children:c=null,offsetLeft:u=0,offsetTop:d=0}=a,[g,m]=i.useState(null),[f,p]=i.useState(null),[C,E]=i.useState({x:0,y:0}),[b,I]=i.useState(!1),[_,S]=i.useState(null),T=i.useRef(),R=i.useCallback(()=>{let H=400;for(const Q of Ps)H+=1,Q.style.zIndex=H.toString()},[]),y=i.useCallback(()=>{const H=Ps.indexOf(T.current);if(H===-1)Ps.push(T.current);else{if(H===Ps.length-1)return;H>=0&&(Ps.splice(H,1),Ps.push(T.current))}R()},[R]),A=i.useCallback(H=>{y()},[y]),U=i.useCallback(H=>{y()},[y]),L=i.useCallback((H,Q)=>{E({x:H,y:Q}),I(!0)},[]),O=i.useCallback(H=>{L(H.clientX,H.clientY)},[L]),k=i.useCallback(H=>{const Q=H.touches[0];L(Q.clientX,Q.clientY)},[L]),x=i.useCallback(H=>{m({x:H.clientX-C.x,y:H.clientY-C.y})},[C]),V=i.useCallback(H=>{const Q=H.touches[0];m({x:Q.clientX-C.x,y:Q.clientY-C.y})},[C]),B=i.useCallback(()=>{if(!T.current||!_)return;let H=f.x+g.x,Q=f.y+g.y;const ee=T.current.offsetLeft+H,me=T.current.offsetTop+Q;if(me<hd?Q=-T.current.offsetTop:me+_.offsetHeight>=document.body.offsetHeight-hd&&(Q=document.body.offsetHeight-T.current.offsetHeight-T.current.offsetTop),ee+T.current.offsetWidth<gd?H=-T.current.offsetLeft:ee>=document.body.offsetWidth-gd&&(H=document.body.offsetWidth-T.current.offsetWidth-T.current.offsetLeft),m({x:0,y:0}),p({x:H,y:Q}),I(!1),e!==null){const ve={...pi(`nitro.windows.${e}`)};ve.offset={x:H,y:Q},Nh(`nitro.windows.${e}`,ve)}},[_,g,f,e]),W=i.useCallback(H=>{B()},[B]),G=i.useCallback(H=>{B()},[B]);return i.useEffect(()=>{const H=T.current;if(!H)return;if(Ps.push(H),R(),!r){const me=H.querySelector(n);me&&S(me)}let Q=0,ee=0;switch(s){case $t.TOP_CENTER:H.style.top=50+d+"px",H.style.left=`calc(50vw - ${H.offsetWidth/2+u}px)`;break;case $t.CENTER:H.style.top=`calc(50vh - ${H.offsetHeight/2+d}px)`,H.style.left=`calc(50vw - ${H.offsetWidth/2+u}px)`;break;case $t.TOP_LEFT:H.style.top=50+d+"px",H.style.left=50+u+"px";break}return m({x:0,y:0}),p({x:Q,y:ee}),()=>{const me=Ps.indexOf(H);me>=0&&Ps.splice(me,1)}},[n,s,e,r,u,d,R]),i.useEffect(()=>{if(!f&&!g)return;const H=T.current;H&&(H.style.transform=`translate(${f.x+g.x}px, ${f.y+g.y}px)`,H.style.visibility="visible")},[f,g]),i.useEffect(()=>{if(_)return _.addEventListener(Ae.MOUSE_DOWN,O),_.addEventListener(kn.TOUCH_START,k),()=>{_.removeEventListener(Ae.MOUSE_DOWN,O),_.removeEventListener(kn.TOUCH_START,k)}},[_,O,k]),i.useEffect(()=>{if(b)return document.addEventListener(Ae.MOUSE_UP,W),document.addEventListener(kn.TOUCH_END,G),document.addEventListener(Ae.MOUSE_MOVE,x),document.addEventListener(kn.TOUCH_MOVE,V),()=>{document.removeEventListener(Ae.MOUSE_UP,W),document.removeEventListener(kn.TOUCH_END,G),document.removeEventListener(Ae.MOUSE_MOVE,x),document.removeEventListener(kn.TOUCH_MOVE,V)}},[b,W,x,G,V]),i.useEffect(()=>{if(!e)return;const H=pi(`nitro.windows.${e}`);!H||!H.offset||(m({x:0,y:0}),H.offset&&p(H.offset))},[e]),xc.createPortal(t(P,{position:"absolute",innerRef:T,className:"draggable-window",onMouseDownCapture:A,onTouchStartCapture:U,style:o,children:c}),document.getElementById("draggable-windows-container"))},ie=a=>{const{theme:e="primary",uniqueKey:n=null,handleSelector:s=".drag-handler",windowPosition:r=$t.CENTER,disableDrag:o=!1,overflow:c="hidden",position:u="relative",gap:d=0,classNames:g=[],...m}=a,f=i.useRef(),p=i.useMemo(()=>{const C=["nitro-card","rounded","shadow"];return C.push(`theme-${e||"primary"}`),g.length&&C.push(...g),C},[e,g]);return t(IS,{value:{theme:e},children:t(dr,{uniqueKey:n,handleSelector:s,windowPosition:r,disableDrag:o,children:t(v,{innerRef:f,overflow:c,position:u,gap:d,classNames:p,...m})})})},$e=a=>{const{figure:e="",gender:n="M",headOnly:s=!1,direction:r=0,scale:o=1,classNames:c=[],style:u={},...d}=a,[g,m]=i.useState(null),[f,p]=i.useState(-1),C=i.useRef(!1),E=i.useMemo(()=>{const I=["avatar-image"];return c.length&&I.push(...c),I},[c]),b=i.useMemo(()=>{let I={};return g&&g.length&&(I.backgroundImage=`url('${g}')`),o!==1&&(I.transform=`scale(${o})`,o%1||(I.imageRendering="pixelated")),Object.keys(u).length&&(I={...I,...u}),I},[g,o,u]);return i.useEffect(()=>{const I=xt().createAvatarImage(e,Fc.LARGE,n,{resetFigure:T=>{C.current||p(Math.random())},dispose:()=>{},disposed:!1},null);if(!I)return;let _=ci.FULL;s&&(_=ci.HEAD),I.setDirection(_,r);const S=I.getCroppedImage(_);S&&m(S.src),I.dispose()},[e,n,r,s,f]),i.useEffect(()=>(C.current=!1,()=>{C.current=!0}),[]),t(P,{classNames:E,style:b,...d})},Fh=a=>{const{imageUrl:e=null,fit:n=!0,style:s=null,...r}=a,o=i.useMemo(()=>{const c={...s};return e&&(c.background=`url(${e}) center no-repeat`),c},[s,e]);return t(P,{fit:n,style:o,...r})},ze=a=>{const{badgeCode:e=null,isGroup:n=!1,showInfo:s=!1,customTitle:r=null,isGrayscale:o=!1,scale:c=1,classNames:u=[],style:d={},children:g=null,...m}=a,[f,p]=i.useState(null),C=i.useMemo(()=>{const b=["badge-image"];return n&&b.push("group-badge"),o&&b.push("grayscale"),u.length&&b.push(...u),b},[u,n,o]),E=i.useMemo(()=>{let b={};return f&&(b.backgroundImage=`url(${n?f.src:X("badge.asset.url").replace("%badgename%",e.toString())})`,b.width=f.width,b.height=f.height,c!==1&&(b.transform=`scale(${c})`,c%1||(b.imageRendering="pixelated"),b.width=f.width*c,b.height=f.height*c)),Object.keys(d).length&&(b={...b,...d}),b},[f,c,d]);return i.useEffect(()=>{if(!e||!e.length)return;let b=!1;const I=S=>{if(S.badgeId!==e)return;const T=Ts.generateImage(new li(S.image));T.onload=()=>p(T),b=!0,z().events.removeEventListener(Rl.IMAGE_READY,I)};z().events.addEventListener(Rl.IMAGE_READY,I);const _=n?z().getGroupBadgeImage(e):z().getBadgeImage(e);if(_&&!b){const S=Ts.generateImage(new li(_));S.onload=()=>p(S)}return()=>z().events.removeEventListener(Rl.IMAGE_READY,I)},[e,n]),l(P,{classNames:C,style:E,...m,children:[s&&X("badge.descriptions.enabled",!0)&&l(P,{className:"badge-information text-black py-1 px-2 small",children:[t("div",{className:"fw-bold mb-1",children:n?r:fa(e)}),t("div",{children:n?h("group.badgepopup.body"):qc(e)})]}),g]})},ES=a=>{const{day:e="00",hour:n="00",minutes:s="00",seconds:r="00",classNames:o=[],children:c=null,...u}=a,d=i.useMemo(()=>{const g=["nitro-counter-time"];return o.length&&g.push(...o),g},[o]);return l(w,{gap:1,children:[t(P,{classNames:d,...u,children:l("div",{children:[e!="00"?e:n,e!="00"?h("countdown_clock_unit_days"):h("countdown_clock_unit_hours")]})}),t(P,{style:{marginTop:"3px"},children:":"}),t(P,{classNames:d,...u,children:l("div",{children:[s,h("countdown_clock_unit_minutes")]})}),t(P,{style:{marginTop:"3px"},children:":"}),t(P,{classNames:d,...u,children:l("div",{children:[r,h("countdown_clock_unit_seconds")]})}),c]})},mt=a=>{const{type:e="",classNames:n=[],style:s={},...r}=a,o=i.useMemo(()=>{const d=["nitro-currency-icon"];return n.length&&d.push(...n),d},[n]),c=i.useMemo(()=>{if(e.toString()==="conchas")return`url(${new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXkSURBVHgB7VZbbBRVGP7msrOX2e1e2u6F3W532wItFAuIUhWQolI1ESGCQR98MyaGB5EHRDQiqMEoBhM0BB4UCImSAEEwNARoKfdbgVK3S2FboO22u23Zzt5vM8dpLcnatIDGBx/4Jyczcy7fd77/cmaAxwbQDxmn8A/sYZM5uaWhtRaymsKyLOm9zkm8Y6g7TYk8+n2Xx8Ai/4aQkZs49DCrdsUXyz9YucZcaaUP7DsuzHCX681lRtwLpLBt3br9LyyYYbrha7vauHPzyhEyeuROxgMem8zhUFfVfHhk8/aN73AmQgooIsY6E5qJVfmES2QoS5ZJV772XOWi2gWuOS+/Ut3PlS7PCpFYKNDeLK+X5KYYuT+KQgu/8WBjQCBK3sAI6Ql2AxcTkohGY7C7rUgNZiDcExBjCSa5DKAzisxx313F4jmzUX+0Nb55zZslsY6WgAzEyi2bizw6IYbfF67Y5F348kS+/dwVUc0rOSlGIAoEnR0ClGoWfL4K4UgCLmc+1EoK3jv9Cl4eH4z1SIuXlGueqV19TYbRjJCx4xEOu4AverH2/U/fdnTe6pe0vJKhZTJWK6+ZQPDkLCdCAzH0+cPo6Y5DFWYRTihxo/k2Zk52ghCarjtwOb10yQLLuzs8YehsBQ9SmAGcJZ9s2fK7KiGImbhIS0YO2TiBRseh7XwAASEBY74W7Tf9MDv1yDoIhFtBVM8tgSQr7W0N4W5LPzehSCW9Nr+UUVDa0tGh+5tL1+7afcxmyGMuX+qglTYacdkbKV6Ou4nIRBqo5BwwsiIiwTRcxUYkpCQutnTCUmqRISW0tfvxZE0JWB2hPec6MHPZqq2jeXIIjXr3FJsjxcZEo4aj0oQGLyviJRaRG0nIkYQlz4LmlhC0LiXcTjMu1XWivNoJVYLB8TOtKCu3wjmnEA2nfEiK0cymH96bbnt26QaMlNgowpBweOeuPa6KIqbbH4MuqoTVpkZYVkFrKLT2BqF3aZAKJ1BcbIIvGASvYjGt3IGm+nY4TEaUT7Lj7K+3oGNYzJznVoT7o9CTe4fHdenV022ePJUSSWVCDKZC0Jn1yC/koNBwMBIlGEHequzSaZUunK734Am7E97rftyRS2T+sik4ecILhZLBrOmlCHQOov5MB/yBjBE5h0Bu4bMhf8spS/GrK8tmO7ju82GK1mbh9fmRp1HDYFWhrycOKo8g6IuCSbOwOI0413Ebi9+ajpO7vODkkpk9dyLONnnRdyOKZ1+ahsaT52KD7VcOjqVw6FQQd2797uPismKadWbSOiMPnXwJ6SQinRTEaAJ2Uz48XXcxo7oYl8624o25Vbh4sh0aG4enni9D4+lWxPsimDe3ItN6vQ+9p+rW5wrLVTgkmwr3/HFBa6hYzlsmWrK9EZKFSHEiDaKS5EAwkPQizFo9bt8UUDStYLhctHol7BVGHN3fDKvRhJqFT2SuD1CKn79eu7HH27A/16Wjj7ahd8Kb3ZaNuxt6k9mYKKXiDGEUcokk5bJQYKolHzdDg+jvCMNSVABa3ogyzuBaWxcW1lQSjZkn57tAb1+z6qvO+m1r8deBkhmPEPcnKAxTq1ZvPXRVooN4ptqNE8c9MKvVSKqBVECuR0sekEyDM7BEaVNRbpON+Poo6sSJxsje9R+9mBm4dmE02XCijEE4PGH+omWrTGUa7NvdhTJ7Hpy2CUA8g2AwBJMLiPqDomtGCa2xW6lrDV34renAwNX6fZu7z+z9Vl6eGhGTGQ0+FuGwaeUgzptaCN3rVaRnQKB8vb0oUBggYBCtp+MonWRnLu1o6Gm+eGzP3aYz2xC95RlZytwPzVi4437xVfrJ7i8P1XmrJ7m4iChIkXic0ifUlK+7i4TZpJhVV7Cf1zw9NZ32eEZwhjJexEOMGadfkU0NDBz56fsfA4OaOYQrsFoml7IDSdmV4Klgj0T/8s1nG/p8dXty1BA8gj3onyY34HmFUxbUStHEvYiU1dPRSFNy0HsbYyTFf2HjbYrFY/s/2J90enGRl39/awAAAABJRU5ErkJggg==",self.location).href})`;let d=X("currency.asset.icon.url","");return d=d.replace("%type%",e.toString()),`url(${d})`},[e]),u=i.useMemo(()=>{let d={};return d.backgroundImage=c,Object.keys(s).length&&(d={...d,...s}),d},[s,c]);return t(P,{classNames:o,style:u,...r})},Qc=a=>{const{productType:e="s",productClassId:n=-1,direction:s=2,extraData:r="",scale:o=1,style:c={},...u}=a,[d,g]=i.useState(null),m=i.useMemo(()=>{var p;let f={};return(p=d==null?void 0:d.src)!=null&&p.length&&(f.backgroundImage=`url('${d.src}')`,f.width=d.width,f.height=d.height),o!==1&&(f.transform=`scale(${o})`,o%1||(f.imageRendering="pixelated")),Object.keys(c).length&&(f={...f,...c}),f},[d,o,c]);return i.useEffect(()=>{let f=null;const p={imageReady:(C,E,b)=>{!b&&E&&(b=Ts.generateImage(E)),b.onload=()=>g(b)},imageFailed:null};switch(e.toLocaleLowerCase()){case Ee.FLOOR:f=Y().getFurnitureFloorImage(n,new At(s),64,p,0,r);break;case Ee.WALL:f=Y().getFurnitureWallImage(n,new At(s),64,p,0,r);break}if(f){const C=f.getImage();C.onload=()=>g(C)}},[e,n,s,r]),d?t(P,{classNames:["furni-image"],style:m,...u}):null},Vh=a=>{const{figure:e=null,userName:n=null,message:s=null,editable:r=!1,onChange:o=null}=a;return l(w,{overflow:"hidden",className:"nitro-gift-card text-black",children:[l("div",{className:"d-flex align-items-center justify-content-center gift-face flex-shrink-0",children:[!n&&t("div",{className:"gift-incognito"}),e&&t("div",{className:"gift-avatar",children:t($e,{figure:e,direction:2,headOnly:!0})})]}),t(w,{overflow:"hidden",className:"w-100 pt-4 pb-4 pe-4 ps-3",children:l(v,{grow:!0,overflow:"auto",justifyContent:"between",children:[!r&&t(N,{textBreak:!0,className:"gift-message",children:s}),r&&o!==null&&t("textarea",{className:"gift-message h-100",maxLength:140,value:s,onChange:c=>o(c.target.value),placeholder:h("catalog.gift_wrapping_new.message_hint")}),n&&t(N,{italics:!0,textEnd:!0,className:"pe-1",children:h("catalog.gift_wrapping_new.message_from",["name"],[n])})]})})]})},v=a=>{const{size:e=0,offset:n=0,column:s=!0,gap:r=2,classNames:o=[],...c}=a,{isCssGrid:u=!1}=mS(),d=i.useMemo(()=>{const g=[];if(e){let m=`col-${e}`;u&&(m=`g-${m}`),g.push(m)}if(n){let m=`offset-${n}`;u&&(m=`g-start-${n}`),g.push(m)}return o.length&&g.push(...o),g},[e,n,u,o]);return t(w,{classNames:d,column:s,gap:r,...c})},qs=a=>{const{count:e=0,position:n="absolute",classNames:s=[],children:r=null,...o}=a,c=i.useMemo(()=>{const u=["badge","border","border-black","bg-danger","px-1","nitro-item-count"];return s.length&&u.push(...s),u},[s]);return l(P,{position:"absolute",classNames:c,...o,children:[e,r]})},ua=a=>{const{value:e=0}=a,n=e.toString().split("");return t(j,{children:n.map((s,r)=>t("i",{className:"limited-edition-number n-"+s},r))})},Bh=a=>{const{uniqueNumber:e=0,uniqueSeries:n=0,classNames:s=[],children:r=null,...o}=a,c=i.useMemo(()=>{const u=["unique-compact-plate","z-index-1"];return s.length&&u.push(...s),u},[s]);return l(P,{classNames:c,...o,children:[t("div",{children:t(ua,{value:e})}),t("div",{children:t(ua,{value:n})}),r]})},CS=a=>{const{uniqueLimitedItemsLeft:e=0,uniqueLimitedSeriesSize:n=0,classNames:s=[],...r}=a,o=i.useMemo(()=>{const c=["unique-complete-plate"];return s.length&&c.push(...s),c},[s]);return t(P,{classNames:o,...r,children:l(v,{className:"plate-container",gap:0,children:[l(w,{justifyContent:"between",alignItems:"center",children:[h("unique.items.left"),t("div",{children:t(ua,{value:e})})]}),l(w,{justifyContent:"between",alignItems:"center",children:[h("unique.items.number.sold"),t("div",{children:t(ua,{value:n})})]})]})})},Se=a=>{const{itemImage:e=void 0,itemColor:n=void 0,itemActive:s=!1,itemCount:r=1,itemCountMinimum:o=1,itemUniqueSoldout:c=!1,itemUniqueNumber:u=-2,itemUnseen:d=!1,itemHighlight:g=!1,disabled:m=!1,center:f=!0,column:p=!0,style:C={},classNames:E=[],position:b="relative",overflow:I="hidden",children:_=null,...S}=a,T=i.useMemo(()=>{const y=["layout-grid-item","border","border-2","border-muted","rounded"];return s&&y.push("active"),(c||u>0)&&y.push("unique-item"),c&&y.push("sold-out"),d&&y.push("unseen"),g&&y.push("has-highlight"),m&&y.push("disabled"),e===null&&y.push("icon","loading-icon"),E.length&&y.push(...E),y},[s,c,u,d,g,m,e,E]),R=i.useMemo(()=>{let y={...C};return e&&!(c||u>0)&&(y.backgroundImage=`url(${e})`),n&&(y.backgroundColor=n),Object.keys(C).length&&(y={...y,...C}),y},[C,e,n,c,u]);return l(v,{center:f,pointer:!0,position:b,overflow:I,column:p,classNames:T,style:R,...S,children:[r>o&&t(qs,{count:r}),u>0&&l(j,{children:[t(P,{fit:!0,className:"unique-bg-override",style:{backgroundImage:`url(${e})`}}),t("div",{className:"position-absolute bottom-0 unique-item-counter",children:t(ua,{value:u})})]}),_]})},ks=a=>{const{imageUrl:e=null,className:n="",...s}=a;return t("img",{src:e,className:"no-select "+n,alt:"",...s})},Xc=a=>{const{...e}=a;return l(P,{classNames:["spinner-container"],...e,children:[t(P,{className:"spinner"}),t(P,{className:"spinner"}),t(P,{className:"spinner"})]})},bS=a=>{const{roomId:e=-1,textureReceiver:n=null,onClose:s=null}=a,r=i.useRef(),o=()=>{if(!r||!r.current)return null;const u=r.current.getBoundingClientRect();return new Dm(Math.floor(u.x),Math.floor(u.y),Math.floor(u.width),Math.floor(u.height))},c=()=>{ys(Rs.CAMERA_SHUTTER),n(Y().createTextureFromRoom(e,1,o()))};return t(dr,{handleSelector:".nitro-room-thumbnail-camera",children:l("div",{className:"nitro-room-thumbnail-camera px-2",children:[t("div",{ref:r,className:"camera-frame"}),l("div",{className:"d-flex align-items-end h-100 pb-2",children:[t("button",{className:"btn btn-sm btn-danger w-100 mb-1 me-2",onClick:s,children:h("cancel")}),t("button",{className:"btn btn-sm btn-success w-100 mb-1",onClick:c,children:h("navigator.thumbeditor.save")})]})]})})},ul=a=>{const{title:e="",onClose:n=null,classNames:s=[],children:r=null,type:o=Ie.DEFAULT,...c}=a,u=i.useMemo(()=>{const d=["nitro-alert"];return d.push("nitro-alert-"+o),s.length&&d.push(...s),d},[s,o]);return l(ie,{classNames:u,theme:"primary-slim",...c,children:[t(ae,{headerText:e,onCloseClick:n}),t(ne,{grow:!0,justifyContent:"between",overflow:"hidden",className:"text-black",gap:0,children:r})]})},Is=class Is{};Is.BOUNCE="bounce",Is.SLIDE_LEFT="slideLeft",Is.SLIDE_RIGHT="slideRight",Is.FLIP_X="flipX",Is.FADE_IN="fadeIn",Is.FADE_DOWN="fadeDown",Is.FADE_UP="fadeUp",Is.HEAD_SHAKE="headShake";let gn=Is;function _S(a,e,n=300){switch(a){case gn.BOUNCE:switch(e){default:return{};case Js:return{animationName:"bounceIn",animationDuration:`${n}ms`};case fr:return{animationName:"bounceOut",animationDuration:`${n}ms`}}case gn.SLIDE_LEFT:switch(e){default:return{};case Js:return{animationName:"slideInLeft",animationDuration:`${n}ms`};case fr:return{animationName:"slideOutLeft",animationDuration:`${n}ms`}}case gn.SLIDE_RIGHT:switch(e){default:return{};case Js:return{animationName:"slideInRight",animationDuration:`${n}ms`};case fr:return{animationName:"slideOutRight",animationDuration:`${n}ms`}}case gn.FLIP_X:switch(e){default:return{};case Js:return{animationName:"flipInX",animationDuration:`${n}ms`};case fr:return{animationName:"flipOutX",animationDuration:`${n}ms`}}case gn.FADE_UP:switch(e){default:return{};case Js:return{animationName:"fadeInUp",animationDuration:`${n}ms`};case fr:return{animationName:"fadeOutDown",animationDuration:`${n}ms`}}case gn.FADE_IN:switch(e){default:return{};case Js:return{animationName:"fadeIn",animationDuration:`${n}ms`};case fr:return{animationName:"fadeOut",animationDuration:`${n}ms`}}case gn.FADE_DOWN:switch(e){default:return{};case Js:return{animationName:"fadeInDown",animationDuration:`${n}ms`};case fr:return{animationName:"fadeOutUp",animationDuration:`${n}ms`}}case gn.HEAD_SHAKE:switch(e){default:return{};case Js:return{animationName:"headShake",animationDuration:`${n}ms`}}}return null}const ba=a=>{const{type:e=null,inProp:n=!1,timeout:s=300,className:r=null,children:o=null}=a,[c,u]=i.useState(!1);return i.useEffect(()=>{let d=null;return n?u(!0):d=setTimeout(()=>{u(!1),clearTimeout(s)},s),()=>{d&&clearTimeout(d)}},[n,s]),t(Dg,{in:n,timeout:s,children:d=>t("div",{className:(r??"")+" animate__animated",style:{..._S(e,d,s)},children:c&&o})})},Jc=a=>{const{fadesOut:e=!0,timeoutMs:n=8e3,onClose:s=null,overflow:r="hidden",classNames:o=[],...c}=a,[u,d]=i.useState(!1),g=i.useMemo(()=>{const m=["nitro-notification-bubble","rounded"];return o.length&&m.push(...o),m},[o]);return i.useEffect(()=>(d(!0),()=>d(!1)),[]),i.useEffect(()=>{if(!e)return;const m=setTimeout(()=>{d(!1),setTimeout(()=>s(),300)},n);return()=>clearTimeout(m)},[e,n,s]),t(ba,{type:gn.FADE_IN,inProp:u,timeout:300,children:t(w,{overflow:r,classNames:g,onClick:s,...c})})},Ss=a=>{const{figure:e="",typeId:n=-1,paletteId:s=-1,petColor:r=16777215,customParts:o=[],posture:c="std",headOnly:u=!1,direction:d=0,scale:g=1,style:m={},...f}=a,[p,C]=i.useState(null),[E,b]=i.useState(0),[I,_]=i.useState(0),S=i.useRef(!1),T=i.useMemo(()=>{let R={};return p&&p.length&&(R.backgroundImage=`url(${p})`),g!==1&&(R.transform=`scale(${g})`,g%1||(R.imageRendering="pixelated")),R.width=E,R.height=I,Object.keys(m).length&&(R={...R,...m}),R},[p,g,m,E,I]);return i.useEffect(()=>{let R=n,y=s,A=r,U=o,L=u;if(e&&e.length){const k=new go(e);R=k.typeId,y=k.paletteId,A=k.color,U=k.customParts}R===16&&(L=!1);const O=Y().getRoomObjectPetImage(R,y,A,new At(d*45),64,{imageReady:(k,x,V)=>{S.current||(V?(C(V.src),b(V.width),_(V.height)):x&&(C(Ts.generateImageUrl(x)),b(x.width),_(x.height)))},imageFailed:k=>{}},L,0,U,c);if(O){const k=O.getImage();k&&(C(k.src),b(k.width),_(k.height))}},[e,n,s,r,o,c,u,d]),i.useEffect(()=>(S.current=!1,()=>{S.current=!0}),[]),t(P,{classNames:["pet-image"],style:T,...f})},Zc=a=>{const{text:e="",progress:n=0,maxProgress:s=100,position:r="relative",justifyContent:o="center",classNames:c=[],children:u=null,...d}=a,g=i.useMemo(()=>{const m=["nitro-progress-bar","text-white"];return c.length&&m.push(...c),m},[c]);return l(v,{position:r,justifyContent:o,classNames:g,...d,children:[e&&e.length>0&&t(w,{fit:!0,center:!0,position:"absolute",className:"nitro-progress-bar-text small",children:e}),t(P,{className:"nitro-progress-bar-inner",style:{width:~~((n-0)*(100-0)/(s-0)+0)+"%"}}),u]})},eu=a=>{const{level:e=0,classNames:n=[],children:s=null,...r}=a,o=i.useMemo(()=>{const c=["nitro-rarity-level"];return n.length&&c.push(...n),c},[n]);return l(P,{classNames:o,...r,children:[t("div",{children:e}),s]})},dl=a=>{const{roomPreviewer:e=null,height:n=0,children:s=null}=a,[r,o]=i.useState(null),c=i.useRef(),u=d=>{e&&(d.shiftKey?e.changeRoomObjectDirection():e.changeRoomObjectState())};return i.useEffect(()=>{if(!e)return;const d=m=>{!e||!r||!c.current||(e.updatePreviewRoomView(),r.canvasUpdated&&(c.current.style.backgroundImage=`url(${Ts.generateImageUrl(r.master)})`))};if(!r&&c.current&&e){let f=document.defaultView.getComputedStyle(c.current,null).backgroundColor;f=en.rgbStringToHex(f),f=f.replace("#","0x"),e.backgroundColor=parseInt(f,16);const p=c.current.parentElement.clientWidth;e.getRoomCanvas(p,n);const C=e.getRenderingCanvas();o(C),C.canvasUpdated=!0,d()}zs().add(d);const g=new ResizeObserver(()=>{if(!e||!c.current)return;const m=c.current.parentElement.offsetWidth;e.modifyRoomCanvas(m,n),d()});return g.observe(c.current),()=>{g.disconnect(),zs().remove(d)}},[r,e,c,n]),l("div",{className:"room-preview-container",children:[t("div",{ref:c,className:"room-preview-image",style:{height:n},onClick:u}),s]})},ml=a=>{const{roomId:e=-1,customUrl:n=null,shrink:s=!0,overflow:r="hidden",classNames:o=[],children:c=null,...u}=a,d=i.useMemo(()=>{const m=["room-thumbnail","rounded","border"];return o.length&&m.push(...o),m},[o]),g=i.useMemo(()=>n&&n.length?X("image.library.url")+n:X("thumbnails.url").replace("%thumbnail%",e.toString()),[n,e]);return l(P,{shrink:s,overflow:r,classNames:d,...u,children:[g&&t("img",{alt:"",src:g}),c]})},Gh=a=>{const{color:e="",message:n="",date:s="",senderName:r="",customTitle:o=null,onCloseClick:c=null}=a;return t(dr,{handleSelector:".drag-handler",children:l(v,{gap:0,alignItems:"center",className:`nitro-layout-trophy trophy-${e}`,children:[l(w,{center:!0,fullWidth:!0,position:"relative",className:"trophy-header drag-handler",children:[t(P,{position:"absolute",pointer:!0,className:"trophy-close",onClick:c}),t(N,{bold:!0,children:h("widget.furni.trophy.title")})]}),l(v,{className:"trophy-content py-1",gap:1,children:[o&&t(N,{bold:!0,children:o}),n]}),l(w,{alignItems:"center",justifyContent:"between",className:"trophy-footer mt-1",children:[t(N,{bold:!0,children:s}),t(N,{bold:!0,children:r})]})]})})},Pn=a=>{const{userId:e=0,userName:n=null,classNames:s=[],pointer:r=!0,children:o=null,...c}=a,u=i.useMemo(()=>{const d=["nitro-friends-spritesheet","icon-profile-sm"];return s.length&&d.push(...s),d},[s]);return t(P,{classNames:u,pointer:r,onClick:d=>pn(e),...c,children:o})},Mn=a=>{const{isActive:e=!1,count:n=0,overflow:s="hidden",position:r="relative",pointer:o=!0,classNames:c=[],children:u=null,...d}=a,g=i.useMemo(()=>{const m=["nav-item","rounded-top","border"];return e&&m.push("active"),c.length&&m.push(...c),m},[e,c]);return l(w,{overflow:s,pointer:o,position:r,classNames:g,...d,children:[t(w,{shrink:!0,center:!0,children:u}),n>0&&t(qs,{count:n})]})},As=a=>{const{justifyContent:e="center",gap:n=1,classNames:s=[],children:r=null,...o}=a,c=i.useMemo(()=>{const u=["container-fluid","nitro-card-tabs","pt-1"];return s.length&&u.push(...s),u},[s]);return t(w,{justifyContent:e,gap:n,classNames:c,...o,children:r})},zt=(...a)=>a.filter(Boolean).join(" "),SS=a=>{const{classNames:e=[],...n}=a,s=i.useMemo(()=>{const r=["form-group"];return e.length&&r.push(...e),r},[e]);return t(w,{classNames:s,...n})},NS=a=>{const{variant:e="black",height:n=1,classNames:s=[],style:r={},...o}=a,c=i.useMemo(()=>{const d=[];return e&&d.push("bg-"+e),s.length&&d.push(...s),d},[e,s]),u=i.useMemo(()=>{let d={display:"list-item"};return n>0&&(d.height=n),Object.keys(r).length&&(d={...d,...r}),d},[n,r]);return t(P,{classNames:c,style:u,...o})},hl=a=>{var C,E;const{rows:e=[],overscan:n=5,scrollToBottom:s=!1,rowRender:r=null}=a,[o,c]=i.useState(e.length-1),u=i.useRef(null),{virtualItems:d=[],totalSize:g=0,scrollToIndex:m=null}=Pg({parentRef:u,size:e.length,overscan:n}),f=d.length>0&&((C=d==null?void 0:d[0])==null?void 0:C.start)||0,p=d.length>0?g-(((E=d==null?void 0:d[d.length-1])==null?void 0:E.end)||0):0;return i.useEffect(()=>{s&&m(o)},[s,o,m]),l(P,{fit:!0,innerRef:u,position:"relative",overflow:"auto",children:[f>0&&t("div",{style:{minHeight:`${f}px`}}),d.map(b=>{const I=e[b.index];return I?t("div",{"data-index":b.index,ref:b.measureRef,children:r(I)},b.key):t(i.Fragment,{},b.key)}),p>0&&t("div",{style:{minHeight:`${p}px`}})]})},N=a=>{const{variant:e="black",fontWeight:n=null,fontSize:s=0,align:r=null,bold:o=!1,underline:c=!1,italics:u=!1,truncate:d=!1,center:g=!1,textEnd:m=!1,small:f=!1,wrap:p=!1,noWrap:C=!1,textBreak:E=!1,...b}=a,I=i.useMemo(()=>{const _=["d-inline"];return e&&_.push("text-"+e),o&&_.push("fw-bold"),n&&_.push("fw-"+n),s&&_.push("fs-"+s),r&&_.push("text-"+r),c&&_.push("text-decoration-underline"),u&&_.push("fst-italic"),d&&_.push("text-truncate"),g&&_.push("text-center"),m&&_.push("text-end"),f&&_.push("small"),p&&_.push("text-wrap"),C&&_.push("text-nowrap"),E&&_.push("text-break"),_},[e,n,s,r,o,c,u,d,g,m,f,p,C,E]);return t(P,{classNames:I,...b})},vS=a=>{const{isError:e=!1,message:n="",percent:s=0}=a;return t(v,{fullHeight:!0,position:"relative",className:"nitro-loading",children:t(P,{fullHeight:!0,className:"container h-100",children:l(v,{fullHeight:!0,alignItems:"center",justifyContent:"end",children:[t(P,{className:"connecting-duck"}),t(v,{size:6,className:"text-center py-4",children:e&&n&&n.length?t(P,{className:"fs-4 text-shadow",children:n}):l(j,{children:[l(N,{fontSize:4,variant:"white",className:"text-shadow",children:[s.toFixed(),"%"]}),t(Zc,{progress:s,className:"mt-2 large"})]})})]})})})},Qs=(a,e,n,s=!0)=>{i.useEffect(()=>{if(!(!s||!e))return Array.isArray(a)?a.map(r=>e.addEventListener(r,n)):e.addEventListener(a,n),()=>{e&&(Array.isArray(a)?a.map(r=>e.removeEventListener(r,n)):e.removeEventListener(a,n))}},[a,e,s,n])},fd=(a,e)=>{const[n,s]=i.useState(()=>{try{return Wu()}catch{return null}}),r=i.useRef(null);return i.useEffect(()=>{if(n){r.current&&(clearInterval(r.current),r.current=null);return}return r.current=setInterval(()=>{try{const o=Wu();o&&(s(o),r.current&&(clearInterval(r.current),r.current=null))}catch{}},50),()=>{r.current&&(clearInterval(r.current),r.current=null)}},[n]),Qs(a,n==null?void 0:n.events,e)},TS=(a,e)=>Qs(a,_e().cameraManager.events,e),wS=(a,e)=>{var s;const n=(s=_e())==null?void 0:s.localization;return Qs(a,n==null?void 0:n.events,e,!!n)},Ir=(a,e)=>Qs(a,_e().events,e),Te=(a,e)=>{const n=Y(),s=(n==null?void 0:n.events)??null;return Qs(a,s,e,!!s)},Ye=(a,e)=>Qs(a,Pr().events,e),yS=(a,e)=>Qs(a,z().events,e),_r=(a,e,n=!0)=>Qs(a,_e().soundManager.events,e,n),F=(a,e)=>{i.useEffect(()=>{const n=new a(e);return po().registerMessageEvent(n),()=>po().removeMessageEvent(n)},[a,e])},RS=()=>{F(bf,a=>{const n=a.getParser().soundId;console.log(` [BOSS EVENT] Recebido comando de som: ${n}`),iS(n)})},st=(a,e,n=!0)=>Qs(a,ws,e,n),OS=()=>{const[a,e]=i.useState(!0),[n,s]=i.useState([]),[r,o]=i.useState(null),[c,u]=i.useState(-1),[d,g]=i.useState(0),m=i.useMemo(()=>{let _=0;return n.forEach(S=>_+=Sn.getAchievementCategoryTotalUnseen(S)),_},[n]),f=i.useMemo(()=>{let _=0;return n.forEach(S=>_+=S.getProgress()),_},[n]),p=i.useMemo(()=>{let _=0;return n.forEach(S=>_+=S.getMaxProgress()),_},[n]),C=i.useMemo(()=>~~((f-0)*(100-0)/(p-0)+0),[f,p]),E=i.useMemo(()=>r===null?null:n.find(_=>_.code===r),[n,r]),b=i.useMemo(()=>c===-1||!E?null:E.achievements.find(_=>_.achievementId===c),[E,c]),I=i.useCallback((_,S)=>{s(T=>{const R=[...T];for(const y of R)if(y.code===_)for(const A of y.achievements)A.achievementId===S&&(A.unseen=0);return R})},[]);return F(_f,_=>{const T=_.getParser().achievement;s(R=>{const y=[...R],A=y.findIndex(U=>U.code===T.category);if(A===-1){const U=new zu(T.category);U.achievements.push(T),y.push(U)}else{const U=un(y[A]),L=[...U.achievements],O=L.findIndex(x=>x.achievementId===T.achievementId);let k=null;O===-1?L.push(T):(k=L[O],L[O]=T),Sn.getAchievementIsIgnored(T)||(T.unseen++,k&&(T.unseen+=k.unseen)),U.achievements=L,y[A]=U}return y})}),F(Sf,_=>{const S=_.getParser(),T=[];for(const R of S.achievements){const y=R.category;let A=T.find(U=>U.code===y);A||(A=new zu(y),T.push(A)),A.achievements.push(R)}s(T)}),F(Nf,_=>{const S=_.getParser();g(S.score)}),i.useEffect(()=>{a&&(M(new vf),e(!1))},[a]),i.useEffect(()=>{!r||c===-1||I(r,c)},[r,c,I]),{achievementCategories:n,selectedCategoryCode:r,setSelectedCategoryCode:o,selectedAchievementId:c,setSelectedAchievementId:u,achievementScore:d,getTotalUnseen:m,getProgress:f,getMaxProgress:p,scaledProgressPercent:C,selectedCategory:E,selectedAchievement:b,setAchievementSeen:I}},gl=()=>Xe(OS),kS=()=>{const[a,e]=i.useState([]),[n,s]=i.useState([]),[r,o]=i.useState(-1),[c,u]=i.useState(10),[d,g]=i.useState(null);return TS(yf.INITIALIZED,m=>{e(Array.from(xo().effects.values()))}),F(Tf,m=>{const f=m.getParser();g({credits:f.creditPrice,duckets:f.ducketPrice,publishDucketPrice:f.publishDucketPrice})}),i.useEffect(()=>{if(!xo().isLoaded){xo().init(),M(new wf);return}},[]),{availableEffects:a,cameraRoll:n,setCameraRoll:s,selectedPictureIndex:r,setSelectedPictureIndex:o,myLevel:c,price:d}},Hh=()=>Xe(kS),pd=a=>a&&a.length?a.replace(/\\r/g,"\r"):"",Id=a=>{const e="0"+a;return e.substr(e.length-2,e.length)};let Oo=null;const AS=()=>{const[a,e]=i.useState([]),[n,s]=i.useState([]),[r,o]=i.useState([]),[c,u]=i.useState(!1),[d,g]=i.useState(!1),m=()=>X("notification",{}),f=O=>{const k=m();return k?k[O]:null},p=(O,k,x,V)=>{if(O.has(x))return O.get(x);const B=["notification",k,x].join(".");return _e().localization.hasValue(B)||V?h(B,Array.from(O.keys()),Array.from(O.values())):null},C=(O,k)=>{let x=O.get("image");return x||(x=X("image.library.notifications.url","").replace("%image%",k.replace(/\./g,"_"))),h(x)},E=i.useCallback((O,k=null,x=null,V=null,B=null,W=null)=>{(!B||!B.length)&&(B=h("notifications.broadcast.title")),(!k||!k.length)&&(k=Ie.DEFAULT);const G=new vi([pd(O)],k,x,V,B,W);e(H=>[G,...H])},[]),b=i.useCallback(()=>E(null,Ie.NITRO),[E]),I=i.useCallback((O,k,x=null,V=null)=>{if(c)return;const B=new vc(O,k,x,V);s(W=>[B,...W])},[c]),_=(O,k=null)=>{k||(k=new Map);const x=f("notification."+O);if(x)for(const Q in x)k.set(Q,x[Q]);O==="floorplan_editor.error"&&k.set("message",k.get("message").replace(/[^a-zA-Z._ ]/g,""));const V=p(k,O,"title",!0),B=p(k,O,"message",!0).replace(/\\r/g,"\r"),W=p(k,O,"linkTitle",!1),G=p(k,O,"linkUrl",!1),H=C(k,O);k.get("display")==="BUBBLE"?I(h(B),Ct.INFO,H,G):E(h(B),O,G,W,V,H),k.get("sound")&&ys(k.get("sound"))},S=i.useCallback((O,k,x,V=null,B=null,W=null,G=null)=>{(!V||!V.length)&&(V=h("generic.confirm")),(!B||!B.length)&&(B=h("generic.cancel")),(!W||!W.length)&&(W=h("notifications.broadcast.title"));const H=new Tc(G,O,k,x,V,B,W);o(Q=>[H,...Q])},[]),T=(O,k=null,x=!0)=>{E(O,Ie.DEFAULT,k,h("mod.alert.link"),h("mod.alert.title"))},R=i.useCallback((O,k="")=>{switch(O){case hn.ALERT_SCAM:E(h("inventory.trading.warning.other_not_offering"),null,null,null,h("inventory.trading.notification.title"));return;case hn.HOTEL_TRADING_DISABLED:case hn.YOU_NOT_ALLOWED:case hn.THEY_NOT_ALLOWED:case hn.ROOM_DISABLED:case hn.YOU_OPEN:case hn.THEY_OPEN:E(h(`inventory.trading.openfail.${O}`,["otherusername"],[k]),null,null,null,h("inventory.trading.openfail.title"));return;case hn.ERROR_WHILE_COMMIT:E(`${h("inventory.trading.notification.caption")}, ${h("inventory.trading.notification.commiterror.info")}`,null,null,null,h("inventory.trading.notification.title"));return;case hn.THEY_CANCELLED:E(h("inventory.trading.info.closed"),null,null,null,h("inventory.trading.notification.title"));return}},[E]),y=i.useCallback(O=>{e(k=>{const x=[...k],V=x.findIndex(B=>O===B);return V>=0&&x.splice(V,1),x})},[]),A=i.useCallback(O=>{s(k=>{const x=[...k],V=x.findIndex(B=>O===B);return V>=0&&x.splice(V,1),x})},[]),U=i.useCallback(O=>{o(k=>{const x=[...k],V=x.findIndex(B=>O===B);return V>=0&&x.splice(V,1),x})},[]);F(Rf,O=>{const k=O.getParser();if(k.userId!==z().userId)return;const x=h("notifications.text.respect.1"),V=h("notifications.text.respect.2",["count"],[k.respectsReceived.toString()]);I(x,Ct.RESPECT),I(V,Ct.RESPECT)}),F(Of,O=>{const k=O.getParser();E(k.message.replace(/\\r/g,"\r"),null,null,h("notifications.broadcast.title"))}),F(kf,O=>{const k=O.getParser(),x=h("achievements.levelup.desc"),V=fa(k.data.badgeCode),B=z().getBadgeUrl(k.data.badgeCode),W="questengine/achievements/"+k.data.category;I(x+" "+V,Ct.ACHIEVEMENT,B,W)}),F(Af,O=>{const k=O.getParser();k.numGifts<=0||I(k.numGifts.toString(),Ct.CLUBGIFT,null,"catalog/open/"+X("catalog.links")["hc.hc_gifts"])}),F(xf,O=>{const k=O.getParser();T(k.message,k.url,!1)}),F(Pm,O=>{const k=O.getParser();if(k.amountChanged<=0||k.type!==5)return;const x=X("currency.asset.icon.url","").replace("%type%",k.type.toString());I(h("notifications.text.loyalty.received",["AMOUNT"],[k.amountChanged.toString()]),Ct.INFO,x)}),F(Df,O=>{const k=O.getParser();T(k.message)}),F(Pf,O=>{const k=O.getParser();E(h("opening.hours."+(k.userThrowOutAtClose?"disconnected":"closed"),["h","m"],[Id(k.openHour),Id(k.openMinute)]),Ie.DEFAULT,null,null,h("opening.hours.title"))}),F(Mf,O=>{const k=O.getParser(),x=h("notifications.text."+(k.boughtAsGift?"petbought":"petreceived"));let V=null;const B=Y().getRoomObjectPetImage(k.pet.typeId,k.pet.paletteId,parseInt(k.pet.color,16),new At(45*3),64,null,!0);B&&(V=B.getImage().src),I(x,Ct.PETLEVEL,V)}),F(Lf,O=>{const x=O.getParser().messages.map(B=>pd(B)),V=new vi(x,Ie.MOTD,null,null,h("notifications.motd.title"));e(B=>[V,...B])}),F(Uf,O=>{const k=O.getParser();let x=null;const V=Y().getRoomObjectPetImage(k.figureData.typeId,k.figureData.paletteId,parseInt(k.figureData.color,16),new At(45*3),64,null,!0);V&&(x=V.getImage().src),I(h("notifications.text.petlevel",["pet_name","level"],[k.petName,k.level.toString()]),Ct.PETLEVEL,x)}),F(Ff,O=>{const k=O.getParser();u(!k.enabled)}),F(Vf,O=>{const k=O.getParser();if(!k.products||!k.products.length)return;const x=k.products[0];x&&I(h("notifications.text.club_gift.selected"),Ct.INFO,ai.getProductImageUrl(x.productType,x.furniClassId,x.extraParam))}),F(Bf,O=>{const k=O.getParser();E(h("maintenance.shutdown",["m","d"],[k.minutesUntilMaintenance.toString(),k.duration.toString()]),Ie.DEFAULT,null,null,h("opening.hours.title"))}),F(Gf,O=>{const k=O.getParser();T(k.message,k.url)}),F(Hf,O=>{const k=O.getParser();_(k.type,k.parameters)}),F(Wf,O=>{const k=O.getParser();E(h("opening.hours.shutdown",["m"],[k.openMinute.toString()]),Ie.DEFAULT,null,null,h("opening.hours.title"))}),F(jf,O=>{const k=O.getParser();E(h("opening.hours.disconnected",["h","m"],[k.openHour.toString(),k.openMinute.toString()]),Ie.DEFAULT,null,null,h("opening.hours.title"))}),F(qf,O=>{const k=O.getParser();switch(k.errorCode){default:case 0:E(h("connection.server.error.desc",["errorCode"],[k.errorCode.toString()]),Ie.ALERT,null,null,h("connection.server.error.title"));break;case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:case 1008:case 1009:case 1010:case 1011:case 1012:case 1013:case 1014:case 1015:case 1016:case 1017:case 1018:case 1019:O.connection.dispose();break;case 4013:E(h("connection.room.maintenance.desc"),Ie.ALERT,null,null,h("connection.room.maintenance.title"));break}}),F(zf,O=>{const k=O.getParser();E(h(k.alertMessage),Ie.DEFAULT,null,null,h(k.titleMessage?k.titleMessage:"notifications.broadcast.title"))});const L=i.useCallback(()=>{if(!d)if(mc.isRunning()){if(Oo)return;Oo=setTimeout(()=>{L()},mc.totalRunningTime+5e3)}else Oo&&(clearTimeout(Oo),Oo=null),I(h("mod.chatdisclaimer"),Ct.INFO),g(!0)},[d,I]);return F(Yf,L),F(Kf,O=>{const k=O.getParser();if(console.log(" [DEBUG] Custom Notification Received!",{message:k.message,type:k.type,userId:k.userId,imageUrl:k.imageUrl}),!k.message||!k.type){console.warn(" [DEBUG] Invalid notification data",k);return}let x=Ct.INFO;switch(k.type){case"mention":x=Ct.CUSTOM_MENTION;break;case"info":x=Ct.CUSTOM_INFO;break;case"success":x=Ct.CUSTOM_SUCCESS;break;case"warning":x=Ct.CUSTOM_WARNING;break;case"error":x=Ct.CUSTOM_ERROR;break;case"achievement":x=Ct.CUSTOM_ACHIEVEMENT;break;case"gift":x=Ct.CUSTOM_GIFT;break}let V=k.imageUrl||null,B=null;if(k.type==="mention"){const W=k.message.match(/^([^\s]+)\s+(mencionou|mentioned)/i);W&&W[1]&&(B=`follow:${W[1]}`),V||(V="./images/notifications/logo.gif")}else k.userId>0&&(B=`profile/${k.userId}`);if(console.log(" [DEBUG] Showing bubble:",{message:k.message,bubbleType:x,imageUrl:V,linkUrl:B}),I(k.message,x,V,B),k.type==="mention"){console.log(" [DEBUG] Playing mention sound");const W=new Audio("./sounds/notification_custom.mp3");W.volume=.5,W.play().catch(G=>{console.error(" [DEBUG] Sound error:",G)})}}),{alerts:a,bubbleAlerts:n,confirms:r,simpleAlert:E,showNitroAlert:b,showTradeAlert:R,showConfirm:S,showSingleBubble:I,closeAlert:y,closeBubbleAlert:A,closeConfirm:U}},Je=()=>Xe(AS),xS=(a,e)=>{const[n,s]=i.useState(()=>{if(typeof window>"u")return e;try{return pi(a)??e}catch{return e}});return[n,o=>{try{const c=o instanceof Function?o(n):o;s(c),typeof window<"u"&&Nh(a,c)}catch(c){Mm.error(c)}}]},fl=xS,DS=()=>fl(na.CATALOG_PLACE_MULTIPLE_OBJECTS,!1),Wh=()=>Xe(DS),PS=()=>fl(na.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1),jh=()=>Xe(PS),MS=-12345678,LS=()=>{const[a,e]=i.useState(!1),[n,s]=i.useState(!1),[r,o]=i.useState(-1),[c,u]=i.useState(-1),[d,g]=i.useState(Kn.NORMAL),[m,f]=i.useState(null),[p,C]=i.useState(null),[E,b]=i.useState(null),[I,_]=i.useState(null),[S,T]=i.useState([]),[R,y]=i.useState(null),[A,U]=i.useState([]),[L,O]=i.useState(null),[k,x]=i.useState(!1),[V,B]=i.useState({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null}),[W,G]=i.useState({}),[H,Q]=i.useState(!1),[ee,me]=Wh(),[ve,Fe]=jh(),[Ve,Pt]=i.useState(null),[ke,ut]=i.useState(null),[Gt,xe]=i.useState(0),[pe,pt]=i.useState(0),[Bt,Vn]=i.useState(0),[No,Fr]=i.useState(0),[yn,be]=i.useState(0),[Be,Bn]=i.useState(0),{simpleAlert:vo=null}=Je(),En=i.useRef(new br),nn=i.useCallback(()=>{o(-1),u(-1),f(null),C(null),b(null),_(null),T([]),y(null),U([]),e(!1)},[]),To=i.useCallback(q=>{if(!q)return Us.MISSING_OFFER;if(Gt<0||Gt>=pe)return Us.FURNI_LIMIT_REACHED;const $=Oe();if(!$)return Us.NOT_IN_ROOM;if(!$.isRoomOwner)return Us.NOT_ROOM_OWNER;if(No<=0){const J=Y();let oe=J.getRoomObjectCount($.roomId,Z.UNIT);for(;oe>0;){const fe=J.getRoomObjectByIndex($.roomId,oe,Z.UNIT),Pe=$.userDataManager.getUserDataByIndex(fe.id);if(Pe&&Pe.type===bt.USER&&Pe.roomIndex!==$.ownRoomIndex&&!Pe.isModerator)return Us.VISITORS_IN_ROOM;oe--}}return Us.OKAY},[Gt,pe,No]),Na=i.useCallback(q=>{const $=Oe();return!!(($&&q.page&&q.page.layoutCode!=="sold_ltd_items"&&d===Kn.NORMAL&&($.isRoomOwner||$.isGuildRoom&&$.controllerLevel>=Ke.GUILD_MEMBER)||d===Kn.BUILDER&&To(q)===Us.OKAY)&&q.pricingModel!==Yt.PRICING_MODEL_BUNDLE&&q.product.productType!==Ee.EFFECT&&q.product.productType!==Ee.HABBO_CLUB)},[d,To]),Vr=i.useCallback(q=>{if(!Na(q))return;const $=q.product;if(!$)return;let J=0;switch($.productType){case Ee.FLOOR:J=Z.FLOOR;break;case Ee.WALL:J=Z.WALL;break}Y().processRoomObjectPlacement($o.CATALOG,-q.offerId,J,$.productClassId,$.extraParam)&&(Pt(q),Q(!0),e(!1))},[Na]),wo=i.useCallback((q,$)=>{const J=Y();let oe=J.getRoomInstanceVariable(J.activeRoomId,se.ROOM_WALL_TYPE),fe=J.getRoomInstanceVariable(J.activeRoomId,se.ROOM_FLOOR_TYPE),Pe=J.getRoomInstanceVariable(J.activeRoomId,se.ROOM_LANDSCAPE_TYPE);switch(oe=oe&&oe.length?oe:"101",fe=fe&&fe.length?fe:"101",Pe=Pe&&Pe.length?Pe:"1.1",q){case"floor":J.updateRoomInstancePlaneType(J.activeRoomId,$,oe,Pe,!0);return;case"wallpaper":J.updateRoomInstancePlaneType(J.activeRoomId,fe,$,Pe,!0);return;case"landscape":J.updateRoomInstancePlaneType(J.activeRoomId,fe,oe,$,!0);return;default:J.updateRoomInstancePlaneType(J.activeRoomId,fe,oe,Pe,!0);return}},[]),Ds=i.useCallback(()=>{Ve&&(Y().cancelRoomObjectInsert(),Q(!1),Pt(null))},[Ve]),Br=i.useCallback((q=!0)=>{Q($=>($&&q&&te("catalog/open"),!1))},[]),va=i.useCallback((q=!1)=>{q||Br(),ut($=>{if($)switch($.category){case Z.FLOOR:Y().removeRoomObjectFloor($.roomId,$.objectId);break;case Z.WALL:{switch($.furniData.className){case"floor":case"wallpaper":case"landscape":wo("reset","");break;default:Y().removeRoomObjectWall($.roomId,$.objectId);break}break}default:Y().deleteRoomObject($.objectId,$.category);break}return null})},[Br,wo]),hr=i.useCallback((q,$)=>{if($.pageId===q&&$!==m)return $;for(const J of $.children){const oe=hr(q,J);if(oe)return oe}return null},[m]),Gn=i.useCallback((q,$)=>{if($.pageName===q&&$!==m)return $;for(const J of $.children){const oe=Gn(q,J);if(oe)return oe}return null},[m]),Ta=i.useCallback((q,$=!1)=>{if(!p||!p.size)return null;if($){const J=[],oe=p.get(q);if(oe&&oe.length)for(const fe of oe)fe.isVisible&&J.push(fe);if(J.length)return J}return p.get(q)},[p]),ce=i.useCallback((q,$)=>{q<0||(s(!0),o(q),q>-1&&M(new $f(q,$,d)))},[d]),le=i.useCallback((q,$,J,oe,fe,Pe)=>{const ot=new hi(q,$,J,oe,Pe);if(b(ot),u(Ce=>q!==-1?q:Ce),x(!1),fe>-1&&ot.offers.length){for(const Ce of ot.offers)if(Ce.offerId===fe){_(Ce);break}}},[]),ue=i.useCallback((q,$=-1)=>{if(Ds(),q.parent.pageName==="root"&&q.children.length){for(const fe of q.children)if(fe.isVisible){q=fe;break}}const J=[];let oe=q;for(;oe&&oe.pageName!=="root";)J.push(oe),oe=oe.parent;J.reverse(),T(fe=>{const Pe=fe.indexOf(q)>=0,ot=q.isOpen;for(const Ce of fe)Ce.deactivate(),J.indexOf(Ce)===-1&&Ce.close();for(const Ce of J)Ce.activate(),Ce.parent&&Ce.open(),Ce===q.parent&&Ce.children.length&&Ce.open();return Pe&&ot?q.close():q.open(),J}),q.pageId>-1&&ce(q.pageId,$)},[T,ce,Ds]),Ne=i.useCallback(q=>{if(q!==-1&&y(null),!a)En.current.requestById=q,e(!0);else{const $=hr(q,m);$&&ue($)}},[a,m,hr,ue]),Ge=i.useCallback(q=>{if(y(null),!a)En.current.requestByName=q,e(!0);else{const $=Gn(q,m);$&&ue($)}},[a,m,Gn,ue]),rt=i.useCallback(q=>{if(y(null),!a)En.current.requestedByOfferId=q,e(!0);else{const $=Ta(q);if(!$||!$.length)return;ue($[0],q)}},[a,Ta,ue]),Ht=i.useCallback(()=>{},[]);return F(Qf,q=>{const $=q.getParser(),J=new Map,oe=(fe,Pe,ot)=>{const Ce=new jb(fe,Pe,ot);for(const sn of Ce.offerIds)J.has(sn)?J.get(sn).push(Ce):J.set(sn,[Ce]);Pe++;for(const sn of fe.children)Ce.addChild(oe(sn,Pe,Ce));return Ce};f(oe($.root,0,null)),C(J)}),F(Xf,q=>{const $=q.getParser();if($.catalogType!==d)return;const J=[];for(const oe of $.offers){const fe=[],Pe=mo(oe.localizationId);for(const Ce of oe.products){const sn=Ec(Ce.furniClassId,Ce.productType);fe.push(new ir(Ce.productType,Ce.furniClassId,Ce.extraParam,Ce.productCount,Pe,sn,Ce.uniqueLimitedItem,Ce.uniqueLimitedSeriesSize,Ce.uniqueLimitedItemsLeft))}if(!fe.length)continue;const ot=new Yt(oe.offerId,oe.localizationId,oe.rent,oe.priceCredits,oe.priceActivityPoints,oe.priceActivityPointsType,oe.giftable,oe.clubLevel,fe,oe.bundlePurchaseAllowed);(d===Kn.NORMAL||ot.pricingModel!==Yt.PRICING_MODEL_BUNDLE&&ot.pricingModel!==Yt.PRICING_MODEL_MULTI)&&J.push(ot)}$.frontPageItems&&$.frontPageItems.length&&U($.frontPageItems),s(!1),r===$.pageId&&le($.pageId,$.layoutCode,new fh($.localization.images.concat(),$.localization.texts.concat()),J,$.offerId,$.acceptSeasonCurrencyAsCredits)}),F(Jf,q=>{const $=q.getParser();nt(new Os($.offer))}),F(Zf,q=>{const $=q.getParser();nt(new cr($.code))}),F(ep,q=>{const $=q.getParser();nt(new aa($.code))}),F(tp,q=>{q.getParser(),nt(new ia)}),F(np,q=>{const J=q.getParser().offer;if(!J||!J.products.length)return;J.products[0].uniqueLimitedItem;const fe=[],Pe=mo(J.localizationId);for(const Ce of J.products){const sn=Ec(Ce.furniClassId,Ce.productType);fe.push(new ir(Ce.productType,Ce.furniClassId,Ce.extraParam,Ce.productCount,Pe,sn,Ce.uniqueLimitedItem,Ce.uniqueLimitedSeriesSize,Ce.uniqueLimitedItemsLeft))}const ot=new Yt(J.offerId,J.localizationId,J.rent,J.priceCredits,J.priceActivityPoints,J.priceActivityPointsType,J.giftable,J.clubLevel,fe,J.bundlePurchaseAllowed);(d===Kn.NORMAL||ot.pricingModel!==Yt.PRICING_MODEL_BUNDLE&&ot.pricingModel!==Yt.PRICING_MODEL_MULTI)&&(ot.page=E,_(ot),ot.product&&ot.product.productType===Ee.WALL&&B(Ce=>{const sn={...Ce};return sn.extraData=ot.product.extraParam||null,sn}))}),F(sp,q=>{const $=q.getParser(),J=new qb($.productCode,$.palettes.slice());G(oe=>{const fe=[];oe.petPalettes&&fe.push(...oe.petPalettes);for(let Pe=0;Pe<fe.length;Pe++)if(fe[Pe].breed===J.breed){fe.splice(Pe,1);break}return fe.push(J),{...oe,petPalettes:fe}})}),F(rp,q=>{const $=q.getParser();G(J=>{const oe=$.offers;return{...J,clubOffers:oe}})}),F(op,q=>{const $=q.getParser();G(J=>{const oe=$.groups;return{...J,groups:oe}})}),F(ap,q=>{const $=q.getParser();G(J=>{const oe=new Jb($);return{...J,giftConfiguration:oe}})}),F(ip,q=>{const $=q.getParser();if(!$)return;let J="";$.result===1?J=h("inventory.marketplace.result.title.success"):J=h("inventory.marketplace.result.title.failure");const oe=h(`inventory.marketplace.result.${$.result}`);vo(oe,Ie.DEFAULT,null,null,J)}),F(Lm,q=>{const $=q.getParser();G(J=>({...J,clubGifts:$}))}),F(lp,q=>{const $=a;nn(),$&&vo(h("catalog.alert.published.description"),Ie.ALERT,null,null,h("catalog.alert.published.title"))}),F(cp,q=>{const $=q.getParser();xe($.furniCount),Ht()}),F(up,q=>{const $=q.getParser();pt($.furniLimit),Vn($.maxFurniLimit),Fr($.secondsLeft),be(zn()),Bn($.secondsLeftWithGrace),Ht()}),st(Os.PURCHASE_SUCCESS,q=>ys(Rs.CREDITS)),Te(_u.PLACED,q=>{if(!H||q.type!==_u.PLACED)return;if(va(!0),!Ve){Br();return}let $=!1;const J=Ve.product;if(q.category===Z.WALL)switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":$=q.placedOnFloor||q.placedOnWall;break;default:$=q.placedInRoom;break}else $=q.placedInRoom;if(!$){Br();return}switch(ut(new Zb(q.roomId,q.objectId,q.category,q.wallLocation,q.x,q.y,q.direction,Ve)),d){case Kn.NORMAL:{switch(q.category){case Z.FLOOR:Y().addFurnitureFloor(q.roomId,q.objectId,J.productClassId,new At(q.x,q.y,q.z),new At(q.direction),0,new hp);break;case Z.WALL:switch(J.furnitureData.className){case"floor":case"wallpaper":case"landscape":wo(J.furnitureData.className,J.extraParam);break;default:Y().addFurnitureWall(q.roomId,q.objectId,J.productClassId,new At(q.x,q.y,q.z),new At(q.direction*45),0,q.instanceData,0);break}}const oe=Y().getRoomObject(q.roomId,q.objectId,q.category);oe&&oe.model.setValue(se.FURNITURE_ALPHA_MULTIPLIER,.5),ve&&M(new rl(r,Ve.offerId,J.extraParam,1)),ee&&Vr(Ve);break}case Kn.BUILDER:{let oe=Ve.page.pageId;switch(oe===MS&&(oe=-1),q.category){case Z.FLOOR:M(new mp(oe,Ve.offerId,J.extraParam,q.x,q.y,q.direction));break;case Z.WALL:M(new dp(oe,Ve.offerId,J.extraParam,q.wallLocation));break}ee&&Vr(Ve);break}}}),st(ca.FURNI_ADDED,q=>{const $=Y();if(!(!ke||ke.productClassId!==q.spriteId||ke.roomId!==$.activeRoomId)){switch(q.category){case ge.FLOOR:{const J=$.getRoomInstanceVariable($.activeRoomId,se.ROOM_FLOOR_TYPE);ke.extraParam!==J&&M(new oi(q.id));break}case ge.WALL_PAPER:{const J=$.getRoomInstanceVariable($.activeRoomId,se.ROOM_WALL_TYPE);ke.extraParam!==J&&M(new oi(q.id));break}case ge.LANDSCAPE:{const J=$.getRoomInstanceVariable($.activeRoomId,se.ROOM_LANDSCAPE_TYPE);ke.extraParam!==J&&M(new oi(q.id));break}default:M(new gp(q.id,ke.category,ke.wallLocation,ke.x,ke.y,ke.direction))}ee||va()}}),i.useEffect(()=>()=>_(null),[E]),i.useEffect(()=>{if(!(!a||!m||!p||!En.current))switch(En.current.requestType){case br.REQUEST_TYPE_NONE:if(E)return;if(m.isBranch){for(const q of m.children)if(q&&q.isVisible){ue(q);return}}return;case br.REQUEST_TYPE_ID:Ne(En.current.requestById),En.current.resetRequest();return;case br.REQUEST_TYPE_OFFER:rt(En.current.requestedByOfferId),En.current.resetRequest();return;case br.REQUEST_TYPE_NAME:Ge(En.current.requestByName),En.current.resetRequest();return}},[a,m,p,E,ue,Ne,rt,Ge]),i.useEffect(()=>{!R&&E&&E.pageId===-1&&Ne(c)},[R,E,c,Ne]),i.useEffect(()=>{I&&B({quantity:1,extraData:null,extraParamRequired:!1,previewStuffData:null})},[I]),i.useEffect(()=>{!a||m||(M(new fp),M(new Um),M(new pp(d)),M(new Ip))},[a,m,d]),i.useEffect(()=>(O(new di(Y(),++di.PREVIEW_COUNTER)),()=>{O(q=>(q.dispose(),null))}),[]),{isVisible:a,setIsVisible:e,isBusy:n,pageId:r,previousPageId:c,currentType:d,rootNode:m,offersToNodes:p,currentPage:E,setCurrentPage:b,currentOffer:I,setCurrentOffer:_,activeNodes:S,searchResult:R,setSearchResult:y,frontPageItems:A,roomPreviewer:L,navigationHidden:k,setNavigationHidden:x,purchaseOptions:V,setPurchaseOptions:B,catalogOptions:W,setCatalogOptions:G,getNodeById:hr,getNodeByName:Gn,activateNode:ue,openPageById:Ne,openPageByName:Ge,openPageByOfferId:rt,requestOfferToMover:Vr}},Ue=()=>Xe(LS),US=1e3,FS=10,VS=1e3;let BS=0,GS=0;const HS=()=>{const[a,e]=i.useState([]),[n,s]=i.useState([]),[r,o]=i.useState([]),[c,u]=i.useState(!1),d=f=>{f.id=BS++,e(p=>{const C=[...p];return C.push(f),C.length>US&&C.shift(),C})},g=f=>{s(p=>{const C=[...p];return C.push(f),C.length>FS&&C.shift(),C})},m=f=>{f.id=GS++,o(p=>{const C=[...p];return C.push(f),C.length>VS&&C.shift(),C})};return Ye(tn.STARTED,f=>u(!0)),F(bo,f=>{if(!c)return;const p=f.getParser();n.length&&n[n.length-1].id===p.data.roomId||(d({id:-1,webId:-1,entityId:-1,name:p.data.roomName,timestamp:vh(),type:cs.TYPE_ROOM_INFO,roomId:p.data.roomId}),g({id:p.data.roomId,name:p.data.roomName}),u(!1))}),F(Fm,f=>{const p=f.getParser();m({id:-1,webId:p.senderId,entityId:-1,name:"",message:p.messageText,roomId:-1,timestamp:Ju(p.secondsSinceSent),type:cs.TYPE_IM})}),F(Vm,f=>{const p=f.getParser();m({id:-1,webId:p.senderId,entityId:-1,name:"",message:p.messageText,roomId:-1,timestamp:Ju(),type:cs.TYPE_IM})}),{addChatEntry:d,chatHistory:a,roomHistory:n,messengerHistory:r}},pl=()=>Xe(HS),WS=()=>{const[a,e]=i.useState([]),[n,s]=i.useState([]),[r,o]=i.useState([]),[c,u]=i.useState([]),[d,g]=i.useState(null),m=i.useMemo(()=>{const S=a.filter(T=>T.online);return S.sort((T,R)=>T.name<R.name?-1:T.name>R.name?1:0),S},[a]),f=i.useMemo(()=>{const S=a.filter(T=>!T.online);return S.sort((T,R)=>T.name<R.name?-1:T.name>R.name?1:0),S},[a]),p=S=>M(new ol(S.id)),C=(S,T)=>T!==S.relationshipStatus&&M(new ko(S.id,T)),E=S=>{for(const T of a)if(T.id===S)return T;return null},b=S=>!(S===z().userId||E(S)||n.find(T=>T.requesterUserId===S)||r.indexOf(S)>=0),I=(S,T)=>{if(!b(S))return!1;o(R=>{const y=[...R];return y.push(S),y}),M(new Bm(T))},_=(S,T)=>{S===-1&&!T?(M(new Su(!0)),s([])):s(R=>{const y=[...R],A=y.findIndex(U=>U.id===S);return A===-1?R:(M(T?new wp(y[A].id):new Su(!1,y[A].id)),y.splice(A,1),y)})};return F(Cp,S=>{const T=S.getParser();g(new D_(T.userFriendLimit,T.normalFriendLimit,T.extendedFriendLimit,T.categories)),M(new Ep)}),F(bp,S=>{const T=S.getParser();e(R=>{const y=[...R];for(const A of T.fragment){const U=y.findIndex(O=>O.id===A.id),L=new fn;L.populate(A),U>-1?y[U]=L:y.push(L)}return y})}),F(_p,S=>{const T=S.getParser();e(R=>{const y=[...R],A=U=>{const L=y.findIndex(O=>O.id===U.id);if(L===-1){const O=new fn;O.populate(U),y.unshift(O)}else y[L].populate(U)};for(const U of T.addedFriends)A(U);for(const U of T.updatedFriends)A(U);for(const U of T.removedFriendIds){const L=y.findIndex(O=>O.id===U);L>-1&&y.splice(L,1)}return y})}),F(Sp,S=>{const T=S.getParser();s(R=>{const y=[...R];for(const A of T.requests){const U=y.findIndex(L=>L.requesterUserId===A.requesterUserId);if(U>0)y[U]=un(y[U]),y[U].populate(A);else{const L=new Zu;L.populate(A),y.push(L)}}return y})}),F(Np,S=>{const R=S.getParser().request;s(y=>{const A=[...y];if(A.findIndex(L=>L.requesterUserId===R.requesterUserId)===-1){const L=new Zu;L.populate(R),A.push(L)}return A})}),i.useEffect(()=>{M(new vp);const S=setInterval(()=>M(new Tp),12e4);return()=>{clearInterval(S)}},[]),{friends:a,requests:n,sentRequests:r,dismissedRequestIds:c,setDismissedRequestIds:u,settings:d,onlineFriends:m,offlineFriends:f,getFriend:E,canRequestFriend:b,requestFriend:I,requestResponse:_,followFriend:p,updateRelationship:C}},Tn=()=>Xe(WS),jS=()=>{const[a,e]=i.useState([]),[n,s]=i.useState(-1),[r,o]=i.useState([]),[c,u]=i.useState(Ns.HIDDEN),{getFriend:d=null}=Tn(),{simpleAlert:g=null}=Je(),m=i.useMemo(()=>a.filter(b=>r.indexOf(b.threadId)===-1),[a,r]),f=i.useMemo(()=>n>0&&m.find(b=>b.threadId===n||null),[n,m]),p=b=>{let I=a.find(_=>_.participant&&_.participant.id===b);if(I){const _=r.indexOf(I.threadId);_>=0&&o(S=>{const T=[...S];return T.splice(_,1),T})}else{const _=d(b);if(!_)return null;I=new Nc(_),I.addMessage(null,h("messenger.moderationinfo"),0,null,Ws.SECURITY_NOTIFICATION),I.setRead(),e(S=>{const T=[...S];return T.push(I),T})}return I},C=b=>{o(I=>{const _=[...I];return _.indexOf(b)>=0?I:(_.push(b),_)}),n===b&&s(-1)},E=(b,I,_,S=0,T=null,R=Ws.CHAT)=>{if(!b||!_||!_.length)return;const y=I===z().userId;y&&_.length<=255&&M(new Rp(b.participant.id,_)),e(A=>{const U=[...A],L=U.findIndex(O=>O.threadId===b.threadId);return L===-1?A:(b=un(U[L]),y&&b.groups.length===1&&ys(Rs.MESSENGER_NEW_THREAD),b.addMessage(R===Ws.ROOM_INVITE?null:I,_,S,T,R),n===b.threadId&&b.setRead(),U[L]=b,!y&&b.unread&&ys(Rs.MESSENGER_MESSAGE_RECEIVED),U)})};return F(Fm,b=>{const I=b.getParser(),_=p(I.senderId);_&&E(_,I.senderId,I.messageText,I.secondsSinceSent,I.extraData)}),F(Vm,b=>{const I=b.getParser(),_=p(I.senderId);_&&E(_,I.senderId,I.messageText,0,null,Ws.ROOM_INVITE)}),F(yp,b=>{const I=b.getParser();g(`Received room invite error: ${I.errorCode},recipients: ${I.failedRecipients}`,Ie.DEFAULT,null,null,h("friendlist.alert.title"))}),i.useEffect(()=>{n<=0||e(b=>{const I=[...b],_=I.findIndex(S=>S.threadId===n);return _>=0&&(I[_]=un(I[_]),I[_].setRead()),I})},[n]),i.useEffect(()=>{u(b=>{if(!m.length)return Ns.HIDDEN;let I=!1;for(const _ of m)if(_.unreadCount>0){I=!0;break}return I?Ns.UNREAD:Ns.SHOW})},[m]),{messageThreads:a,activeThread:f,iconState:c,visibleThreads:m,getMessageThread:p,setActiveThreadId:s,closeThread:C,sendMessage:E}},qh=()=>Xe(jS),qS=()=>{const[a,e]=i.useState(!1),[n,s]=i.useState(null),[r,o]=i.useState(null),[c,u]=i.useState(null),[d,g]=i.useState(!1),[m,f]=i.useState(null);return F(Op,p=>{let C=p.getParser();!C||C&&!C.games.length||(o(C.games[0]),s(C.games))}),F(kp,p=>{let C=p.getParser();C&&u(C)}),F(Ap,p=>{let C=p.getParser();C&&g(C.isInMaintenance)}),F(xp,p=>{let C=p.getParser();if(C)switch(C.gameTypeId){case 2:return console.log("snowwar");default:return f(C.url)}}),i.useEffect(()=>{a&&(M(new Dp),Hc())},[a]),{isVisible:a,setIsVisible:e,games:n,accountStatus:c,selectedGame:r,setSelectedGame:o,gameOffline:d,gameURL:m,setGameURL:f}},Il=()=>Xe(qS),zS=()=>{const[a,e]=i.useState(null);return F(Pp,n=>{const s=n.getParser(),r={badgeBases:[],badgeSymbols:[],badgePartColors:[],groupColorsA:[],groupColorsB:[]};s.bases.forEach((c,u)=>r.badgeBases.push({id:u,images:c})),s.symbols.forEach((c,u)=>r.badgeSymbols.push({id:u,images:c})),s.partColors.forEach((c,u)=>r.badgePartColors.push({id:u,color:c})),s.colorsA.forEach((c,u)=>r.groupColorsA.push({id:u,color:c})),s.colorsB.forEach((c,u)=>r.groupColorsB.push({id:u,color:c}));const o=(c,u)=>c.id<u.id?-1:c.id>u.id?1:0;r.badgeBases.sort(o),r.badgeSymbols.sort(o),r.badgePartColors.sort(o),r.groupColorsA.sort(o),r.groupColorsB.sort(o),e(r)}),i.useEffect(()=>{M(new Mp)},[]),{groupCustomize:a}},_a=()=>Xe(zS),YS=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(null),{simpleAlert:r=null,showConfirm:o=null}=Je(),c=(u,d)=>{const g={reportType:u,reportedUserId:-1,reportedChats:[],cfhCategory:-1,cfhTopic:-1,roomId:-1,roomName:"",messageId:-1,threadId:-1,groupId:-1,extraData:"",roomObjectId:-1,message:"",currentStep:0};switch(u){case lt.BULLY:case lt.EMERGENCY:case lt.IM:g.reportedUserId=d.reportedUserId,g.currentStep=Zt.SELECT_CHATS;break;case lt.ROOM:g.roomId=d.roomId,g.roomName=d.roomName,g.currentStep=Zt.SELECT_TOPICS;break;case lt.THREAD:g.groupId=d.groupId,g.threadId=d.threadId,g.currentStep=Zt.SELECT_TOPICS;break;case lt.MESSAGE:g.groupId=d.groupId,g.threadId=d.threadId,g.messageId=d.messageId,g.currentStep=Zt.SELECT_TOPICS;break;case lt.PHOTO:g.extraData=d.extraData,g.roomId=d.roomId,g.reportedUserId=d.reportedUserId,g.roomObjectId=d.roomObjectId,g.currentStep=Zt.SELECT_TOPICS;break}e(g)};return F(Up,u=>{const d=u.getParser();let g=d.messageText;switch(d.resultType){case Ci.TOO_MANY_PENDING_CALLS_CODE:M(new Lp),r(h("help.cfh.error.pending"),Ie.MODERATION,null,null,h("help.cfh.error.title"));break;case Ci.HAS_ABUSIVE_CALL_CODE:r(h("help.cfh.error.abusive"),Ie.MODERATION,null,null,h("help.cfh.error.title"));break;default:g.trim().length===0&&(g=h("help.cfh.sent.text")),r(g,Ie.MODERATION,null,null,h("help.cfh.sent.title"))}}),F(Fp,u=>{const d=u.getParser(),g=d.messageText.length===0?h("help.cfh.closed."+B_(d.closeReason)):d.messageText;r(g,Ie.MODERATION,null,null,h("mod.alert.title"))}),F(Bp,u=>{const d=u.getParser();d.count>0&&o(h("help.emergency.pending.title")+`
`+d.pendingCalls[0].message,()=>{M(new Vp)},null,h("help.emergency.pending.button.discard"),h("help.emergency.pending.button.keep"),h("help.emergency.pending.message.subtitle"))}),F(Gp,u=>{r("Your pending calls were deleted",Ie.MODERATION,null,null,h("mod.alert.title"))}),F(Hp,u=>{const d=u.getParser();r(d.message,Ie.MODERATION,null,null,h("help.cfh.reply.title"))}),F(Wp,u=>{const d=u.getParser();r(h("help.emergency.global_mute.message"),Ie.MODERATION,d.infoUrl,h("help.emergency.global_mute.link"),h("help.emergency.global_mute.subtitle"))}),F(jp,u=>{const d=u.getParser();s(d)}),{activeReport:a,setActiveReport:e,sanctionInfo:n,setSanctionInfo:s,report:c}},Xn=()=>Xe(YS),El=()=>{const[a,e]=i.useState([]),n=i.useMemo(()=>!!a.length,[a]),s=i.useCallback(()=>{let o=-1;return e(c=>{const u=[...c];return o=u.length?u[u.length-1]+1:0,u.push(o),u}),o},[]),r=i.useCallback(o=>{e(c=>{const u=[...c],d=u.indexOf(o);return d===-1?c:(u.splice(d,1),u)})},[]);return{isVisible:n,activate:s,deactivate:r}},KS=a=>M(new zp(a)),$S=(a,e)=>M(new Yp(a,...e)),QS=()=>{const[a,e]=i.useState(new Map),n=i.useCallback(d=>{var g;return((g=a.get(d))==null?void 0:g.length)||0},[a]),s=i.useMemo(()=>{let d=0;for(const g of a.keys())d+=n(g);return d},[a,n]),r=i.useCallback(d=>{let g=!0;return e(m=>{if(!m.has(d))return g=!1,m;const f=new Map(m);return f.delete(d),KS(d),f}),g},[]),o=i.useCallback((d,g)=>{let m=!0;return e(f=>{if(!f.has(d))return m=!1,f;const p=new Map(f),C=p.get(d);if(C)for(const E of g)C.splice(C.indexOf(E),1);return $S(d,g),p}),m},[]),c=i.useCallback((d,g)=>a.has(d)?a.get(d).indexOf(g)>=0:!1,[a]),u=i.useCallback((d,g)=>{e(m=>{if(!m.has(d))return m;const f=new Map(m),p=f.get(d),C=p.indexOf(g);return C>=0&&p.splice(C,1),f})},[]);return F(qp,d=>{const g=d.getParser();e(m=>{const f=new Map(m);for(const p of g.categories){let C=f.get(p);C||(C=[],f.set(p,C));const E=g.getItemsByCategory(p);for(const b of E)C.indexOf(b)===-1&&C.push(b)}return f})}),{getCount:n,getFullCount:s,resetCategory:r,resetItems:o,isUnseen:c,removeUnseen:u}},Un=()=>Xe(QS),XS=()=>{const[a,e]=i.useState(!0),[n,s]=i.useState([]),[r,o]=i.useState(new Map),[c,u]=i.useState([]),[d,g]=i.useState(null),{isVisible:m=!1,activate:f=null,deactivate:p=null}=El(),{isUnseen:C=null,resetCategory:E=null}=Un(),b=X("user.badges.max.slots",5),I=R=>c.indexOf(R)>=0,_=()=>c.length<b,S=R=>{u(y=>{const A=[...y],U=A.indexOf(R);if(U===-1){if(!_())return y;A.push(R)}else A.splice(U,1);const L=new Xp;for(let O=0;O<b;O++)L.addActivatedBadge(A[O]??"");return M(L),A})},T=R=>n.indexOf(R)===-1?0:r.get(R)??0;return F(Kp,R=>{const y=R.getParser(),A=[];o(U=>{const L=new Map(U);return y.getAllBadgeCodes().forEach(O=>{const k=n.indexOf(O)>=0,x=y.getBadgeId(O);L.set(O,x),!k&&A.push(O)}),L}),u(y.getActiveBadgeCodes()),s(U=>[...U,...A])}),F($p,R=>{const y=R.getParser(),A=C(ct.BADGE,y.badgeId);s(U=>{const L=[...U];return A?L.unshift(y.badgeCode):L.push(y.badgeCode),L}),o(U=>{const L=new Map(U);return L.set(y.badgeCode,y.badgeId),L})}),i.useEffect(()=>{!n||!n.length||g(R=>{let y=R;return y&&n.indexOf(y)===-1&&(y=null),y||(y=n[0]),y})},[n]),i.useEffect(()=>{if(m)return()=>{E(ct.BADGE)}},[m,E]),i.useEffect(()=>{!m||!a||(M(new Qp),e(!1))},[m,a]),{badgeCodes:n,activeBadgeCodes:c,selectedBadgeCode:d,setSelectedBadgeCode:g,isWearingBadge:I,canWearBadges:_,toggleBadge:S,getBadgeId:T,activate:f,deactivate:p}},Cl=()=>Xe(XS),JS=()=>{const[a,e]=i.useState(!0),[n,s]=i.useState([]),[r,o]=i.useState(null),{isVisible:c=!1,activate:u=null,deactivate:d=null}=El(),{isUnseen:g=null,resetCategory:m=null}=Un();return F(Jp,f=>{const p=f.getParser();s(C=>{const E=[...C],b=E.map(_=>_.botData.id),I=[];for(const _ of p.items.values())b.indexOf(_.id)===-1&&I.push(_);for(const _ of b){let S=!0;for(const y of p.items.values())if(y.id===_){S=!1;break}if(!S)continue;const T=E.findIndex(y=>y.botData.id===_),R=E[T];T===-1||!R||(Io()===R.botData.id&&(ra(),te("inventory/open")),E.splice(T,1))}for(const _ of I){const S={botData:_};g(ct.BOT,_.id)?E.unshift(S):E.push(S)}return E})}),F(Zp,f=>{const p=f.getParser();s(C=>{const E=[...C];if(E.findIndex(S=>S.botData.id===p.item.id)>=0)return C;const I={botData:p.item};return g(ct.BOT,I.botData.id)?E.unshift(I):E.push(I),E})}),F(e0,f=>{const p=f.getParser();s(C=>{const E=[...C],b=E.findIndex(I=>I.botData.id===p.itemId);return b===-1?C:(E.splice(b,1),Io()===p.itemId&&(ra(),te("inventory/show")),E)})}),i.useEffect(()=>{!n||!n.length||o(f=>{let p=f;return p&&n.indexOf(p)===-1&&(p=null),p||(p=n[0]),p})},[n]),i.useEffect(()=>{if(c)return()=>{m(ct.BOT)}},[c,m]),i.useEffect(()=>{!c||!a||(M(new t0),e(!1))},[c,a]),{botItems:n,selectedBot:r,setSelectedBot:o,activate:u,deactivate:d}},zh=()=>Xe(JS);let Wa=null;const ZS=()=>{const[a,e]=i.useState(!0),[n,s]=i.useState([]),[r,o]=i.useState(null),{isVisible:c=!1,activate:u=null,deactivate:d=null}=El(),{isUnseen:g=null,resetCategory:m=null}=Un(),f=E=>{if(!(!n||!n.length))return n.filter(b=>b.type===E)},p=E=>{if(!(!n||!n.length)){for(const b of n){const I=b.getItemById(E);if(I&&I.isWallItem)return b}return null}},C=E=>{if(!(!n||!n.length)){for(const b of n){const I=b.getItemById(E);if(I&&!I.isWallItem)return b}return null}};return F(Gm,E=>{const b=E.getParser();s(I=>{const _=[...I];for(const S of b.items){let T=0,R=null;for(;T<_.length;){const y=_[T];let A=0;for(;A<y.items.length;){const U=y.items[A];if(U.id===S.itemId){U.update(S);const L=[...y.items];L[A]=U,y.items=L,R=y;break}A++}if(R)break;T++}if(R)R.hasUnseenItems=!0,_[T]=un(R);else{const y=new sa(S);Ku(_,y,g(ct.FURNI,S.itemId)),nt(new ca(y.id,y.type,y.category))}}return _})}),F(hc,E=>{const b=E.getParser();Wa||(Wa=new Array(b.totalFragments));const I=h_(b.fragment,b.totalFragments,b.fragmentNumber,Wa);I&&(s(_=>{const S=[..._],T=g_(S);for(const R of T){if(I.get(R))continue;let y=0;for(;y<S.length;){const A=S[y],U=A.remove(R);if(!U){y++;continue}Io()===U.ref&&(ra(),Eo(A)||te("inventory/show")),A.getTotalCount()<=0&&(S.splice(y,1),A.dispose());break}}for(const R of I.keys()){if(T.indexOf(R)>=0)continue;const y=I.get(R);if(!y)continue;const A=new sa(y);Ku(S,A,g(ct.FURNI,R)),nt(new ca(A.id,A.type,A.category))}return S}),Wa=null)}),F(n0,E=>{e(!0)}),F(Hm,E=>{const b=E.getParser();s(I=>{const _=[...I];let S=0;for(;S<_.length;){const T=_[S],R=T.remove(b.itemId);if(!R){S++;continue}Io()===R.ref&&(ra(),Eo(T)||te("inventory/show")),T.getTotalCount()<=0&&(_.splice(S,1),T.dispose());break}return _})}),F(s0,E=>{}),i.useEffect(()=>{!n||!n.length||o(E=>{let b=E;return b&&n.indexOf(b)===-1&&(b=null),b||(b=n[0]),b})},[n]),i.useEffect(()=>{if(c)return()=>{m(ct.FURNI)&&s(E=>{const b=[...E];for(const I of b)I.hasUnseenItems=!1;return b})}},[c,m]),i.useEffect(()=>{!c||!a||(M(new r0),e(!1))},[c,a]),{isVisible:c,groupItems:n,setGroupItems:s,selectedItem:r,setSelectedItem:o,activate:u,deactivate:d,getWallItemById:p,getFloorItemById:C,getItemsByType:f}},Lr=()=>Xe(ZS);let ja=null;const eN=()=>{const[a,e]=i.useState(!0),[n,s]=i.useState([]),[r,o]=i.useState(null),{isVisible:c=!1,activate:u=null,deactivate:d=null}=El(),{isUnseen:g=null,resetCategory:m=null}=Un();return F(o0,f=>{const p=f.getParser();ja||(ja=new Array(p.totalFragments));const C=E_(p.fragment,p.totalFragments,p.fragmentNumber,ja);C&&(s(E=>{const b=[...E];return I_(b,C,g),b}),ja=null)}),F(a0,f=>{const p=f.getParser();s(C=>{const E=[...C];return _h(p.pet,E,g(ct.PET,p.pet.id)),E})}),F(i0,f=>{const p=f.getParser();s(C=>{const E=[...C];return Sh(p.petId,E),E})}),i.useEffect(()=>{!n||!n.length||o(f=>{let p=f;return p&&n.indexOf(p)===-1&&(p=null),p||(p=n[0]),p})},[n]),i.useEffect(()=>{if(c)return()=>{m(ct.PET)}},[c,m]),i.useEffect(()=>{!c||!a||(M(new l0),e(!1))},[c,a]),{petItems:n,selectedPet:r,setSelectedPet:o,activate:u,deactivate:d}},Yh=()=>Xe(eN),tN=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(null),[r,o]=i.useState(Ot.TRADING_STATE_READY),{groupItems:c=[],setGroupItems:u=null,activate:d=null,deactivate:g=null}=Lr(),{simpleAlert:m=null,showTradeAlert:f=null}=Je(),p=r>=Ot.TRADING_STATE_RUNNING,C=()=>{switch(r){case Ot.TRADING_STATE_RUNNING:!n.itemCount&&!a.accepts&&m(h("inventory.trading.warning.other_not_offering"),null,null,null),a.accepts?M(new _0):M(new S0);return;case Ot.TRADING_STATE_CONFIRMING:M(new b0),o(Ot.TRADING_STATE_CONFIRMED);return}},E=I=>{const _=I.getLastItem();_&&M(new N0(_.id))},b=()=>{if(p)switch(r){case Ot.TRADING_STATE_RUNNING:M(new T0);return;default:M(new v0);return}};return F(c0,I=>{const _=I.getParser();!a||!n||(a.userId===_.userID?e(S=>{const T=un(S);return T.accepts=_.userAccepts,T}):n.userId===_.userID&&s(S=>{const T=un(S);return T.accepts=_.userAccepts,T}))}),F(d0,I=>{const _=I.getParser();_.reason===u0.ERROR_WHILE_COMMIT?f(hn.ERROR_WHILE_COMMIT):a&&_.userID!==a.userId&&f(hn.THEY_CANCELLED),e(null),s(null),o(Ot.TRADING_STATE_READY)}),F(m0,I=>{I.getParser(),e(null),s(null),o(Ot.TRADING_STATE_READY)}),F(h0,I=>{I.getParser(),o(Ot.TRADING_STATE_COUNTDOWN)}),F(g0,I=>{const _=I.getParser(),S=Xu(_.firstUserItemArray),T=Xu(_.secondUserItemArray);e(R=>{const y=un(R);y.userId===_.firstUserID?(y.creditsCount=_.firstUserNumCredits,y.itemCount=_.firstUserNumItems,y.userItems=S):(y.creditsCount=_.secondUserNumCredits,y.itemCount=_.secondUserNumItems,y.userItems=T);const A=[];for(const U of y.userItems.getValues()){let L=0;for(;L<U.getTotalCount();){const O=U.getItemByIndex(L);O&&A.push(O.ref),L++}}return u(U=>{const L=[...U];for(const O of L)O.lockItemIds(A);return L}),y}),s(R=>{const y=un(R);return y.userId===_.firstUserID?(y.creditsCount=_.firstUserNumCredits,y.itemCount=_.firstUserNumItems,y.userItems=S):(y.creditsCount=_.secondUserNumCredits,y.itemCount=_.secondUserNumItems,y.userItems=T),y})}),F(f0,I=>{I.getParser()}),F(p0,I=>{const _=I.getParser(),S=new $u,T=Oe().userDataManager.getUserData(_.userID);S.userItems=new Qo;const R=new $u,y=Oe().userDataManager.getUserData(_.otherUserID);R.userItems=new Qo,T.webID===z().userId?(S.userId=T.webID,S.userName=T.name,S.canTrade=_.userCanTrade,R.userId=y.webID,R.userName=y.name,R.canTrade=_.otherUserCanTrade):y.webID===z().userId&&(S.userId=y.webID,S.userName=y.name,S.canTrade=_.otherUserCanTrade,R.userId=T.webID,R.userName=T.name,R.canTrade=_.userCanTrade),e(S),s(R),o(Ot.TRADING_STATE_RUNNING)}),F(I0,I=>{const _=I.getParser();f(_.reason,_.otherUserName)}),F(E0,I=>{I.getParser(),f(hn.THEY_NOT_ALLOWED)}),F(C0,I=>{I.getParser(),f(hn.YOU_NOT_ALLOWED)}),i.useEffect(()=>{if(r===Ot.TRADING_STATE_READY)return;const I=d();return()=>g(I)},[r,d,g]),{ownUser:a,otherUser:n,tradeState:r,setTradeState:o,isTrading:p,groupItems:c,progressTrade:C,removeItem:E,stopTrading:b}},Kh=()=>Xe(tN),nN=()=>{const[a,e]=i.useState([]),[n,s]=i.useState(0),[r,o]=i.useState(0);return st(Ni.MENTIONS_LIST,m=>{var f;console.log(" [MENTIONS DEBUG] MentionsListEvent recebido:",{totalCount:m.totalCount,mentionsCount:((f=m.mentions)==null?void 0:f.length)||0,mentions:m.mentions}),e(m.mentions),o(m.totalCount)}),st(Si.MENTION_COUNT,m=>{s(m.unreadCount)}),st(_i.MENTION_ACTION,m=>{m.success&&(m.action==="delete"?e(f=>f.filter(p=>p.id!==m.mentionId)):m.action==="mark_read"?e(f=>f.map(p=>p.id===m.mentionId?{...p,isRead:!0}:p)):m.action==="mark_all_read"&&(e(f=>f.map(p=>({...p,isRead:!0}))),s(0)))}),{mentions:a,unreadCount:n,totalCount:r,requestMentionsList:(m=0,f=20)=>{console.log(" [MENTIONS DEBUG] Enviando RequestMentionsList:",{page:m,limit:f});const p=new Rh(m,f);console.log(" [MENTIONS DEBUG] Composer data:",p.getMessageArray()),M(p)},markMentionAsRead:m=>{M(new Oh(m))},deleteMention:m=>{M(new kh(m))},markAllMentionsAsRead:()=>{M(new Ah)}}},tu=()=>Xe(nN),sN=()=>{const[a,e]=i.useState(null),[n,s]=i.useState([]),[r,o]=i.useState([]),[c,u]=i.useState([]),[d,g]=i.useState([]),[m,f]=i.useState([]),[p,C]=i.useState([]),{simpleAlert:E=null}=Je(),b=x=>{n.indexOf(x)>=0||s(V=>[...V,x])},I=x=>{s(V=>{const B=[...V],W=B.indexOf(x);return W>=0&&B.splice(W),B})},_=x=>{n.indexOf(x)>=0?I(x):b(x)},S=x=>{r.indexOf(x)>=0||o(V=>[...V,x])},T=x=>{o(V=>{const B=[...V],W=B.indexOf(x);return W>=0&&B.splice(W),B})},R=x=>{r.indexOf(x)>=0?T(x):S(x)},y=x=>{c.indexOf(x)>=0||u(V=>[...V,x])},A=x=>{u(V=>{const B=[...V],W=B.indexOf(x);return W>=0&&B.splice(W),B})},U=x=>{c.indexOf(x)>=0?A(x):y(x)},L=x=>{d.indexOf(x)>=0||g(V=>[...V,x])},O=x=>{g(V=>{const B=[...V],W=B.indexOf(x);return W>=0&&B.splice(W),B})},k=x=>{r.indexOf(x)>=0?O(x):L(x)};return F(w0,x=>{const B=x.getParser().data;e(B),f(B.issues)}),F(y0,x=>{const V=x.getParser();f(B=>{const W=[...B],G=W.findIndex(H=>H.issueId===V.issueData.issueId);return G>=0?W[G]=V.issueData:(W.push(V.issueData),ys(Rs.MODTOOLS_NEW_TICKET)),W})}),F(R0,x=>{x.getParser()}),F(O0,x=>{x.getParser()&&E("Failed to pick issue",Ie.DEFAULT,null,null,"Error")}),F(k0,x=>{const V=x.getParser();f(B=>{const W=[...B],G=W.findIndex(H=>H.issueId===V.issueId);return G>=0&&W.splice(G,1),W})}),F(A0,x=>{x.getParser().success?E("Moderation action was successfull",Ie.MODERATION,null,null,"Success"):E("There was a problem applying tht moderation action",Ie.MODERATION,null,null,"Error")}),F(x0,x=>{const V=x.getParser();C(V.callForHelpCategories)}),F(D0,x=>{x.getParser()}),{settings:a,openRooms:n,openRoomChatlogs:r,openUserChatlogs:d,openUserInfos:c,cfhCategories:p,tickets:m,openRoomInfo:b,closeRoomInfo:I,toggleRoomInfo:_,openRoomChatlog:S,closeRoomChatlog:T,toggleRoomChatlog:R,openUserInfo:y,closeUserInfo:A,toggleUserInfo:U,openUserChatlog:L,closeUserChatlog:O,toggleUserChatlog:k}},So=()=>Xe(sN),rN=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(null),[r,o]=i.useState(null),[c,u]=i.useState(null),[d,g]=i.useState({roomInfo:null,state:qe.NONE}),[m,f]=i.useState(null),[p,C]=i.useState({settingsReceived:!1,homeRoomId:0,enteredGuestRoom:null,currentRoomOwner:!1,currentRoomId:0,currentRoomIsStaffPick:!1,createdFlatId:0,avatarId:0,roomPicker:!1,eventMod:!1,currentRoomRating:0,canRate:!0}),{simpleAlert:E=null}=Je();return F(P0,b=>{const I=b.getParser();M(new ui(I.roomId,!1,!1))}),F(M0,b=>{const I=b.getParser();I.canCreate||E(h(`navigator.cannotcreateevent.error.${I.errorCode}`),null,null,null,h("navigator.cannotcreateevent.title"))}),F(jm,b=>{M(new L0),M(new Wm)}),F(U0,b=>{const I=b.getParser();C(_=>{const S={..._};return S.eventMod=I.securityLevel>=mi.MODERATOR,S.roomPicker=I.securityLevel>=mi.COMMUNITY,S})}),F(F0,b=>{const I=b.getParser();vn(I.roomId)}),F(qm,b=>{const I=b.getParser();C(_=>{const S={..._};return S.enteredGuestRoom=null,S.currentRoomOwner=I.isOwner,S.currentRoomId=I.roomId,S}),M(new ui(I.roomId,!0,!1)),Jo.available&&Jo.call("legacyTrack","navigator","private",[I.roomId])}),F(bo,b=>{const I=b.getParser();if(I.roomEnter)g({roomInfo:null,state:qe.NONE}),C(_=>{const S={..._};return S.enteredGuestRoom=I.data,S.currentRoomIsStaffPick=I.staffPick,!(S.createdFlatId===I.data.roomId)&&I.data.displayRoomEntryAd&&X("roomenterad.habblet.enabled",!1)&&ma.openRoomEnterAd(),S.createdFlatId=0,S.enteredGuestRoom&&S.enteredGuestRoom.habboGroupId>0,S});else if(I.roomForward){if(I.data.ownerName!==z().userName&&!I.isGroupMember)switch(I.data.doorMode){case it.DOORBELL_STATE:g(_=>{const S={..._};return S.roomInfo=I.data,S.state=qe.START_DOORBELL,S});return;case it.PASSWORD_STATE:g(_=>{const S={..._};return S.roomInfo=I.data,S.state=qe.START_PASSWORD,S});return}if(I.data.doorMode===it.NOOB_STATE&&!z().isAmbassador&&!z().isRealNoob&&!z().isModerator)return;wr(I.data.roomId)}else C(_=>{const S={..._};return S.enteredGuestRoom=I.data,S.currentRoomIsStaffPick=I.staffPick,S})}),F(V0,b=>{const I=b.getParser();C(_=>{const S={..._};return S.currentRoomRating=I.totalLikes,S.canRate=I.canLike,S})}),F(B0,b=>{const I=b.getParser();(!I.userName||I.userName.length===0)&&g(_=>{const S={..._};return S.state=qe.STATE_WAITING,S})}),F(G0,b=>{const I=b.getParser();(!I.userName||I.userName.length===0)&&g(_=>{const S={..._};return S.state=qe.STATE_ACCEPTED,S})}),F(H0,b=>{const I=b.getParser();(!I.userName||I.userName.length===0)&&g(_=>{const S={..._};return S.state=qe.STATE_NO_ANSWER,S})}),F(W0,b=>{switch(b.getParser().errorCode){case-100002:g(_=>{const S={..._};return S.state=qe.STATE_WRONG_PASSWORD,S});return;case 4009:E(h("navigator.alert.need.to.be.vip"),Ie.DEFAULT,null,null,h("generic.alert.title"));return;case 4010:E(h("navigator.alert.invalid_room_name"),Ie.DEFAULT,null,null,h("generic.alert.title"));return;case 4011:E(h("navigator.alert.cannot_perm_ban"),Ie.DEFAULT,null,null,h("generic.alert.title"));return;case 4013:E(h("navigator.alert.room_in_maintenance"),Ie.DEFAULT,null,null,h("generic.alert.title"));return}}),F(j0,b=>{const I=b.getParser();u(I.topLevelContexts),o(I.topLevelContexts.length?I.topLevelContexts[0]:null)}),F(q0,b=>{const I=b.getParser();o(_=>{let S=_;if(S||(S=c&&c.length&&c[0]||null),!S)return null;if(I.result.code!==S.code&&c&&c.length)for(const T of c)T.code===I.result.code&&(S=T);for(const T of c)T.code===I.result.code&&(S=T);return S}),f(I.result)}),F(z0,b=>{const I=b.getParser();e(I.categories)}),F(Y0,b=>{const I=b.getParser();s(I.categories)}),F(K0,b=>{const I=b.getParser();wr(I.roomId)}),F($0,b=>{const I=b.getParser();let _=!1;if(C(R=>{_=R.settingsReceived;const y={...R};return y.homeRoomId=I.homeRoomId,y.settingsReceived=!0,y}),_)return;let S=-1,T=-1;X("friend.id")!==void 0&&parseInt(X("friend.id"))>0&&(S=0,M(new ol(parseInt(X("friend.id"))))),X("forward.type")!==void 0&&X("forward.id")!==void 0&&(S=parseInt(X("forward.type")),T=parseInt(X("forward.id"))),S===2?vn(T):S===-1&&I.roomIdToEnter>0&&(te("navigator/close"),I.roomIdToEnter!==I.homeRoomId?wr(I.roomIdToEnter):wr(I.homeRoomId))}),F(Q0,b=>{const I=b.getParser();switch(I.reason){case Ol.REASON_FULL:E(h("navigator.guestroomfull.text"),Ie.DEFAULT,null,null,h("navigator.guestroomfull.title"));break;case Ol.REASON_QUEUE_ERROR:E(h(`room.queue.error.${I.parameter}`),Ie.DEFAULT,null,null,h("room.queue.error.title"));break;case Ol.REASON_BANNED:E(h("navigator.banned.text"),Ie.DEFAULT,null,null,h("navigator.banned.title"));break;default:E(h("room.queue.error.title"),Ie.DEFAULT,null,null,h("room.queue.error.title"));break}Hc()}),F(X0,b=>te("navigator/show")),{categories:a,doorData:d,setDoorData:g,topLevelContext:r,topLevelContexts:c,searchResult:m,navigatorData:p}},Jn=()=>Xe(rN),oN=()=>{const[a,e]=i.useState(new $c),n=i.useMemo(()=>X("hc.disabled",!1),[]),s=i.useMemo(()=>n||a.clubDays>0?bs.ACTIVE:a.pastVipDays>0||a.pastVipDays>0?bs.EXPIRED:bs.NONE,[a,n]),r=o=>{if(o===-1)return a.credits;for(const[c,u]of a.activityPoints.entries())if(c===o)return u;return 0};return F(J0,o=>{const c=o.getParser();e(u=>{const d=un(u);return d.credits=parseFloat(c.credits),u.credits!==d.credits&&ys(Rs.CREDITS),d})}),F(Z0,o=>{const c=o.getParser();e(u=>{const d=un(u);return d.activityPoints=c.currencies,d})}),F(Pm,o=>{const c=o.getParser();e(u=>{const d=un(u);return d.activityPoints=new Map(d.activityPoints),d.activityPoints.set(c.type,c.amount),c.type===0&&ys(Rs.DUCKETS),d})}),F(tI,o=>{const c=o.getParser(),u=c.productName;u!=="club_habbo"&&u!=="habbo_club"||e(d=>{const g=un(d);return g.clubDays=Math.max(0,c.daysToPeriodEnd),g.clubPeriods=Math.max(0,c.periodsSubscribedAhead),g.isVip=c.isVip,g.pastClubDays=c.pastClubDays,g.pastVipDays=c.pastVipDays,g.isExpiring=c.responseType===eI.RESPONSE_TYPE_DISCOUNT_AVAILABLE,g.minutesUntilExpiration=c.minutesUntilExpiration,g.minutesSinceLastModified=c.minutesSinceLastModified,g})}),i.useEffect(()=>{if(n)return;M(new Nu("habbo_club"));const o=setInterval(()=>M(new Nu("habbo_club")),5e4);return()=>clearInterval(o)},[n]),i.useEffect(()=>{M(new nI)},[]),{purse:a,hcDisabled:n,clubStatus:s,getCurrencyAmount:r}},Ur=()=>Xe(oN),aN=(a,e)=>{i.useEffect(()=>{if(!a)return;const n=s=>e(s);return ws.addEventListener(je.FURNI_ADDED,n),()=>{ws.removeEventListener(je.FURNI_ADDED,n)}},[a,e])},Fn=(a,e)=>{i.useEffect(()=>{if(!a)return;const n=s=>e(s);return ws.addEventListener(je.FURNI_REMOVED,n),()=>{ws.removeEventListener(je.FURNI_REMOVED,n)}},[a,e])},iN=a=>{st(je.OBJECT_DESELECTED,a)},lN=a=>{st(je.OBJECT_ROLL_OUT,a)},cN=a=>{st(je.OBJECT_ROLL_OVER,a)},nu=a=>{st(je.OBJECT_SELECTED,a)},$h=(a,e)=>{i.useEffect(()=>{if(!a)return;const n=s=>e(s);return ws.addEventListener(je.USER_ADDED,n),()=>{ws.removeEventListener(je.USER_ADDED,n)}},[a,e])},Qh=(a,e)=>{i.useEffect(()=>{if(!a)return;const n=s=>e(s);return ws.addEventListener(je.USER_REMOVED,n),()=>{ws.removeEventListener(je.USER_REMOVED,n)}},[a,e])},uN=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(!1);return F(sI,r=>{const o=r.getParser();o&&e(o)}),{promoteInformation:a,isExtended:n,setPromoteInformation:e,setIsExtended:s}},su=()=>Xe(uN),dN=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(null),[r,o]=i.useState(null),[c,u]=i.useState(0),d=(m,f,p,C=!1)=>{if(!n)return;const E=en.hslToRGB(((m&255)<<16)+((f&255)<<8)+(p&255));C&&u(E),!m&&!f&&!p?n.tint=0:n.tint=E},g=m=>{if(!r)return;const f=m>>16&255,p=m>>8&255,C=m&255;r.red=f/255,r.green=p/255,r.blue=C/255};return st($n.PREVIEW,m=>d(m.hue,m.saturation,m.lightness)),st($n.CLEAR_PREVIEW,m=>{n&&(n.tint=c)}),Te(rI.ROOM_BACKGROUND_COLOR,m=>{Tr.isRoomPreviewerId(m.roomId)||(m.enable?d(m.hue,m.saturation,m.lightness,!0):d(0,0,0,!0))}),Te(oI.ROOM_COLOR,m=>{if(Tr.isRoomPreviewerId(m.roomId))return;let f=0,p=255;m.bgOnly||(f=m.color,p=m.brightness),g(en.hslToRGB((en.rgbToHSL(f)&16776960)+p))}),Te([xn.INITIALIZED,xn.DISPOSED],m=>{if(Tr.isRoomPreviewerId(m.roomId))return;const f=Oe();if(f)switch(m.type){case xn.INITIALIZED:qu(m.roomId),e(f);return;case xn.DISPOSED:e(null);return}}),Ye([tn.CREATED,tn.ENDED],m=>{switch(m.type){case tn.CREATED:r_(m.session);return;case tn.ENDED:e(null);return}}),Te([Tt.SELECTED,Tt.DESELECTED,Tt.ADDED,Tt.REMOVED,Tt.PLACED,Tt.REQUEST_MOVE,Tt.REQUEST_ROTATE,Tt.MOUSE_ENTER,Tt.MOUSE_LEAVE,Tt.DOUBLE_CLICK],m=>{if(Tr.isRoomPreviewerId(m.roomId))return;let f=null;switch(m.type){case Tt.SELECTED:a_(m)||(f=new je(je.OBJECT_SELECTED,m.objectId,m.category,m.roomId));break;case Tt.DESELECTED:f=new je(je.OBJECT_DESELECTED,m.objectId,m.category,m.roomId);break;case Tt.ADDED:{let p=null;switch(m.category){case Z.FLOOR:case Z.WALL:p=je.FURNI_ADDED;break;case Z.UNIT:p=je.USER_ADDED;break}p&&(f=new je(p,m.objectId,m.category,m.roomId));break}case Tt.REMOVED:{let p=null;switch(m.category){case Z.FLOOR:case Z.WALL:p=je.FURNI_REMOVED;break;case Z.UNIT:p=je.USER_REMOVED;break}p&&(f=new je(p,m.objectId,m.category,m.roomId));break}case Tt.REQUEST_MOVE:Zo(a,m.objectId,m.category)&&$r(m.objectId,m.category,is.OBJECT_MOVE);break;case Tt.REQUEST_ROTATE:Zo(a,m.objectId,m.category)&&$r(m.objectId,m.category,is.OBJECT_ROTATE_POSITIVE);break;case Tt.MOUSE_ENTER:f=new je(je.OBJECT_ROLL_OVER,m.objectId,m.category,m.roomId);break;case Tt.MOUSE_LEAVE:f=new je(je.OBJECT_ROLL_OUT,m.objectId,m.category,m.roomId);break;case Tt.DOUBLE_CLICK:f=new je(je.OBJECT_DOUBLE_CLICKED,m.objectId,m.category,m.roomId);break}f&&nt(f)}),i.useEffect(()=>{if(!a)return;const m=_e(),f=Y(),p=a.roomId,C=1,E=Math.floor(window.innerWidth),b=Math.floor(window.innerHeight),I=m.application.renderer;I&&(I.view.style.width=`${E}px`,I.view.style.height=`${b}px`,I.resolution=window.devicePixelRatio,I.resize(E,b));const _=f.getRoomInstanceDisplay(p,C,E,b,aI.SCALE_ZOOMED_IN),S=Y().getRoomInstanceRenderingCanvas(p,C);if(!_||!S)return;const T=new li(iI.WHITE),R=new lI,y=S.master;T.tint=0,T.width=E,T.height=b,y.addChildAt(T,0),y.filters=[R],s(T),o(R);const A=f.getRoomInstanceGeometry(p,C);if(A){const O=f.getRoomInstanceVariable(p,Oa.ROOM_MIN_X)||0,k=f.getRoomInstanceVariable(p,Oa.ROOM_MAX_X)||0,x=f.getRoomInstanceVariable(p,Oa.ROOM_MIN_Y)||0,V=f.getRoomInstanceVariable(p,Oa.ROOM_MAX_Y)||0;let B=(O+k)/2,W=(x+V)/2;const G=20;B=B+(G-1),W=W+(G-1);const H=Math.sqrt(G*G+G*G)*Math.tan(30/180*Math.PI);A.location=new At(B,W,H)}const U=m.application.stage;if(!U)return;U.addChild(_),qu(a.roomId);const L=O=>{const k=Math.floor(window.innerWidth),x=Math.floor(window.innerHeight);I.view.style.width=`${k}px`,I.view.style.height=`${x}px`,I.resolution=window.devicePixelRatio,I.resize(k,x),T.width=k,T.height=x,o_(k,x,1),m.application.render()};return window.addEventListener("resize",L),()=>{s(null),o(null),u(0),window.removeEventListener("resize",L)}},[a]),{roomSession:a}},De=()=>Xe(dN),mN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(0),{roomSession:c=null}=De(),u=()=>{const m=en.rgbToHSL(r),[f,p,C,E]=Ft.int_to_8BitVals(m);M(new cI(a,p,C,E))},d=()=>c.useMultistateItem(a),g=()=>{nt(new $n($n.CLEAR_PREVIEW)),e(-1),s(-1),o(0)};return Te(ye.REQUEST_BACKGROUND_COLOR,m=>{if(!Zo(c,m.objectId,m.category))return;const p=Y().getRoomObject(m.roomId,m.objectId,m.category).model;e(m.objectId),s(m.category);const C=parseInt(p.getValue(se.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),E=parseInt(p.getValue(se.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),b=parseInt(p.getValue(se.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS)),I=Ft.eight_bitVals_to_int(0,C,E,b),_=en.hslToRGB(I);o(_)}),Fn(a!==-1&&n!==-1,m=>{m.id!==a||m.category!==n||g()}),i.useEffect(()=>{if(a===-1||n===-1)return;const m=en.rgbToHSL(r),[f,p,C,E]=Ft.int_to_8BitVals(m);nt(new $n($n.PREVIEW,p,C,E))},[a,n,r]),{objectId:a,color:r,setColor:o,applyToner:u,toggleToner:d,onClose:g}},hN=mN,gN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState("1"),[c,u]=i.useState(""),[d,g]=i.useState(""),[m,f]=i.useState(""),[p,C]=i.useState(""),{simpleAlert:E=null}=Je(),b=()=>{e(-1),s(-1),o("1"),u(""),g(""),f(""),C("")};return Te([ye.REQUEST_BADGE_DISPLAY_ENGRAVING,ye.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING],I=>{const _=Y().getRoomObject(I.roomId,I.objectId,I.category);if(!_)return;const S=new ha;S.initializeFromRoomObjectModel(_.model),e(I.objectId),s(I.category),o("1"),u(fa(S.getValue(1))),g(qc(S.getValue(1))),f(S.getValue(2)),C(S.getValue(3))}),Te(ye.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED,I=>{const _=Y().getRoomObject(I.roomId,I.objectId,I.category);!_||_.model.getValue(se.FURNITURE_OWNER_ID)!==z().userId||E(`${h("resolution.failed.subtitle")} ${h("resolution.failed.text")}`,null,null,null,h("resolution.failed.title"))}),Fn(a!==-1&&n!==-1,I=>{I.id!==a||I.category!==n||b()}),{objectId:a,category:n,color:r,badgeName:c,badgeDesc:d,date:m,senderName:p,onClose:b}},fN=gN,wc="MONSTERPLANT_SEED_CONFIRMATION",yc="PURCHASABLE_CLOTHING_CONFIRMATION",Xh="GROUP_FURNITURE",Jh="EFFECTBOX_OPEN",Rc="MYSTERYTROPHY_OPEN_DIALOG",pN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(null),[r,o]=i.useState(null),[c,u]=i.useState(-1),[d,g]=i.useState(null),[m,f]=i.useState(!1),[p,C]=i.useState(-1),{roomSession:E=null}=De(),b=()=>{e(-1),g(null),f(!1),s(null)},I=()=>{o(null),u(-1)},_=S=>{if(S)switch(S){case"use_friend_furni":E.useMultistateItem(a);break;case"use_monsterplant_seed":o(wc),u(a);break;case"use_random_teleport":Y().useRoomObject(a,Z.FLOOR);break;case"use_purchaseable_clothing":o(yc),u(a);break;case"use_mystery_box":E.useMultistateItem(a);break;case"use_mystery_trophy":o(Rc),u(a);break;case"join_group":Kc(d.guildId),f(!0);return;case"go_to_group_homeroom":d&&vn(d.guildHomeRoomId);break}b()};return Te([ye.OPEN_FURNI_CONTEXT_MENU,ye.CLOSE_FURNI_CONTEXT_MENU,ye.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,ye.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,ye.REQUEST_EFFECTBOX_OPEN_DIALOG,ye.REQUEST_MYSTERYBOX_OPEN_DIALOG,ye.REQUEST_MYSTERYTROPHY_OPEN_DIALOG],S=>{const T=Y().getRoomObject(E.roomId,S.objectId,S.category);if(T)switch(C(T.model.getValue(se.FURNITURE_OWNER_ID)),S.type){case ye.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG:if(!Jt(T))return;u(T.id),o(wc),b();return;case ye.REQUEST_EFFECTBOX_OPEN_DIALOG:if(!Jt(T))return;u(T.id),o(Jh),b();return;case ye.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG:if(!Jt(T))return;u(T.id),o(yc),b();return;case ye.REQUEST_MYSTERYBOX_OPEN_DIALOG:E.useMultistateItem(T.id),b();return;case ye.REQUEST_MYSTERYTROPHY_OPEN_DIALOG:if(!Jt(T))return;u(T.id),o(Rc),b();return;case ye.OPEN_FURNI_CONTEXT_MENU:switch(e(T.id),S.contextMenu){case jt.FRIEND_FURNITURE:s(jt.FRIEND_FURNITURE);return;case jt.MONSTERPLANT_SEED:Jt(T)&&s(jt.MONSTERPLANT_SEED);return;case jt.MYSTERY_BOX:s(jt.MYSTERY_BOX);return;case jt.MYSTERY_TROPHY:Jt(T)&&s(jt.MYSTERY_TROPHY);return;case jt.RANDOM_TELEPORT:s(jt.RANDOM_TELEPORT);return;case jt.PURCHASABLE_CLOTHING:Jt(T)&&s(jt.PURCHASABLE_CLOTHING);return}return;case ye.CLOSE_FURNI_CONTEXT_MENU:T.id===a&&b();return}}),F(uI,S=>{const T=S.getParser();e(T.objectId),g(T),f(T.userIsMember),s(Xh)}),{objectId:a,mode:n,confirmMode:r,confirmingObjectId:c,groupData:d,isGroupMember:m,objectOwnerId:p,closeConfirm:I,processAction:_,onClose:b}},IN=pN,EN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState([]),[r,o]=i.useState(null),[c,u]=i.useState([]),[d,g]=i.useState(null),[m,f]=i.useState(new Map),[p,C]=i.useState(!1),{groupItems:E=[],getItemsByType:b=null,activate:I=null,deactivate:_=null}=Lr(),{simpleAlert:S=null}=Je(),T=r&&m.get(r.name)||null,R=()=>{s([]),o(null),u([]),f(new Map)},y=()=>{e(-1),R()},A=()=>{C(!0),M(new II(a,r.name))},U=L=>{o(L),m.get(L.name)||M(new EI(L.name))};return Te(ye.OPEN_WIDGET,L=>{L.widget===dI.CRAFTING&&(e(L.objectId),R(),M(new mI(L.objectId)))}),F(hI,L=>{const O=L.getParser();if(!O.isActive()){e(-1);return}s(k=>{const x=[];for(const V of O.recipes){const B=Y().roomContentLoader._activeObjectTypeIds.get(V.itemName),W=Y().getFurnitureFloorIconUrl(B);x.push({name:V.recipeName,localizedName:h("roomItem.name."+B),iconUrl:W})}return x}),g(O.ingredients)}),F(gI,L=>{const O=L.getParser();f(k=>{const x=new Map(k);return x.set(r.name,O.ingredients),x})}),F(fI,L=>{o(null),C(!1),L.getParser().result&&S(h("crafting.info.result.ok"))}),F(pI,L=>{}),i.useEffect(()=>{!d||!d.length||u(L=>{const O=[];for(const k of d){const x=Y().roomContentLoader._activeObjectTypeIds.get(k),V=Y().getFurnitureFloorIconUrl(x),B=b(x);let W=0;if(B)for(const G of B)W+=G.items.length;O.push({name:k,iconUrl:V,count:W})}return O})},[E,d,b]),i.useEffect(()=>{if(a===-1)return;const L=I();return()=>_(L)},[a,I,_]),{objectId:a,recipes:n,ingredients:c,selectedRecipe:r,requiredIngredients:T,isCrafting:p,selectRecipe:U,craft:A,onClose:y}},CN=EN,bN=()=>{const[a,e]=i.useState([]),[n,s]=i.useState(0),[r,o]=i.useState(0),[c,u]=i.useState(0),[d,g]=i.useState(0),[m,f]=i.useState(16777215),[p,C]=i.useState(255),[E,b]=i.useState(0),[I,_]=i.useState(0),[S,T]=i.useState(0),{roomSession:R=null}=De(),y=()=>R.isRoomOwner||R.controllerLevel>=Ke.GUEST||z().isModerator,A=L=>{const O=a[L-1];O&&(s(O.id),b(O.type),_(O.color),T(O.light))},U=()=>{if(r===0)return;const L=n-1;if(n<1||n>a.length)return;const O=a[L];!O||E===O.type&&I===O.color&&S===O.light||(e(k=>{const x=[...k];return x[L]=new ud(O.id,E,I,S),x}),Yn.savePreset(O.id,E,I,S,!0))};return Te(ye.REQUEST_DIMMER,L=>{y()&&R.requestMoodlightSettings()}),Ye(CI.ROOM_DIMMER_PRESETS,L=>{const O=[];let k=0;for(;k<L.presetCount;){const x=L.getPreset(k);x&&O.push(new ud(x.id,x.type,x.color,x.brightness)),k++}e(O),s(L.selectedPresetId)}),Te(bI.ROOM_COLOR,L=>{Tr.isRoomPreviewerId(L.roomId)||(u(r),o(L.state),s(L.presetId),g(L.effectId),b(L.effectId),f(L.color),_(L.color),C(L.brightness),T(L.brightness))}),i.useEffect(()=>{r===0&&c===0||Yn.previewDimmer(I,S,E===2)},[r,c,I,S,E]),{presets:a,selectedPresetId:n,dimmerState:r,lastDimmerState:c,effectId:d,color:m,brightness:p,selectedEffectId:E,setSelectedEffectId:b,selectedColor:I,setSelectedColor:_,selectedBrightness:S,setSelectedBrightness:T,selectPresetId:A,applyChanges:U}},_N=bN,SN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(0),c=()=>{e(-1),s(-1),o(0)},u=()=>{Oe().connection.send(new _I(a)),c()};return Te(ye.REQUEST_CREDITFURNI,d=>{const g=Y().getRoomObject(d.roomId,d.objectId,d.category);!g||!Jt(g)||(e(d.objectId),s(d.category),o(g.model.getValue(se.FURNITURE_CREDIT_VALUE)||0))}),Fn(a!==-1&&n!==-1,d=>{d.id!==a||d.category!==n||c()}),{objectId:a,value:r,redeem:u,onClose:c}},NN=SN,vN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(-1),[c,u]=i.useState([]),{roomSession:d=null}=De(),g=()=>{e(-1),s(-1),o(-1),u([])};return Te(ye.REQUEST_EXTERNAL_IMAGE,m=>{const f=Y().getRoomObject(m.roomId,m.objectId,m.category),p=Y().getRoomObjects(d==null?void 0:d.roomId,Z.WALL);if(!f)return;const C=[];p.forEach(b=>{if(b.type!=="external_image_wallitem_poster_small")return null;const I=b.model.getValue(se.FURNITURE_DATA),_=JSON.parse(I);C.push(_)}),e(m.objectId),s(m.category),u(C);const E=JSON.parse(f.model.getValue(se.FURNITURE_DATA));o(b=>{let I=0;return E&&(I=C.findIndex(_=>_.u===E.u)),I<0&&(I=0),I})}),Fn(a!==-1&&n!==-1,m=>{m.id!==a||m.category!==n||g()}),{objectId:a,currentPhotoIndex:r,currentPhotos:c,onClose:g}},TN=vN,wN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(0),[c,u]=i.useState([]),[d,g]=i.useState([]),[m,f]=i.useState(null),[p,C]=i.useState(0),E=()=>{e(-1),s(-1),o(0),u([]),g([]),f(null)},b=I=>{Oe().connection.send(new TI(a,I)),E()};return F(SI,I=>{const _=I.getParser();e(_.furniId),C(_.start?1:2)}),F(NI,I=>E()),F(vI,I=>E()),Te(ye.REQUEST_FRIEND_FURNITURE_ENGRAVING,I=>{const _=Y().getRoomObject(I.roomId,I.objectId,I.category);if(!_)return;const S=_.model.getValue(se.FURNITURE_DATA),T=_.model.getValue(se.FURNITURE_FRIENDFURNI_ENGRAVING);S[0]!=="1"||S.length!==6||(e(I.objectId),s(I.category),o(T),u([S[1],S[2]]),g([S[3],S[4]]),f(S[5]),C(0))}),Fn(a!==-1&&n!==-1,I=>{I.id!==a||I.category!==n||E()}),{objectId:a,type:r,usernames:c,figures:d,date:m,stage:p,onClose:E,respond:b}},yN=wN,RN=["perteam","mostwins","classic"],ON=["alltime","daily","weekly","monthly"],kN=()=>{const[a,e]=i.useState(new Map),{roomSession:n=null}=De(),s=o=>RN[o],r=o=>ON[o];return Te(ye.REQUEST_HIGH_SCORE_DISPLAY,o=>{const c=Y().getRoomObject(o.roomId,o.objectId,o.category);if(!c)return;const u=c.model.getValue(se.FURNITURE_DATA_FORMAT),d=xm.getData(u);d.initializeFromRoomObjectModel(c.model),e(g=>{const m=new Map(g);return m.set(c.id,d),m})}),Te(ye.REQUEST_HIDE_HIGH_SCORE_DISPLAY,o=>{o.roomId===n.roomId&&e(c=>{const u=new Map(c);return u.delete(o.objectId),u})}),{stuffDatas:a,getScoreType:s,getClearType:r}},AN=kN,xN="internalLink",DN=()=>(Te(ye.REQUEST_INTERNAL_LINK,a=>{const e=Y().getRoomObject(a.roomId,a.objectId,a.category);if(!e)return;let s=e.model.getValue(se.FURNITURE_DATA)[xN];(!s||!s.length)&&(s=e.model.getValue(se.FURNITURE_INTERNAL_LINK)),s&&s.length&&te(s)}),{}),PN=DN,MN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(null),[c,u]=i.useState(null),[d,g]=i.useState(Nn.NO_CLUB),[m,f]=i.useState(null),p=()=>{e(-1),s(-1),o(null),u(null),f(null)},C=()=>{a!==-1&&(M(new wI(a)),p())},E=()=>{a!==-1&&(M(new gc(a)),p())},b=()=>{a!==-1&&M(new yI(a,m))};return Te(ye.REQUEST_MANNEQUIN,I=>{const _=Y().getRoomObject(I.roomId,I.objectId,I.category);if(!_)return;const S=_.model,T=S.getValue(se.FURNITURE_MANNEQUIN_FIGURE)||null,R=S.getValue(se.FURNITURE_MANNEQUIN_GENDER)||null,y=xt().createFigureContainer(T),A=xt().getFigureClubLevel(y,R,ho.MANNEQUIN_CLOTHING_PART_TYPES);e(I.objectId),s(I.category),o(T),u(R),g(A),f(S.getValue(se.FURNITURE_MANNEQUIN_NAME)||null)}),Fn(a!==-1&&n!==-1,I=>{I.id!==a||I.category!==n||p()}),{objectId:a,figure:r,gender:c,clubLevel:d,name:m,setName:f,saveFigure:C,wearFigure:E,saveName:b,onClose:p}},LN=MN,UN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(-1),[c,u]=i.useState(new Qo),[d,g]=i.useState([]),{roomSession:m=null}=De(),{showSingleBubble:f=null,simpleAlert:p=null}=Je(),C=()=>{e(-1),s(-1)},E=i.useCallback((S,T)=>M(new RI(S,T)),[]),b=i.useCallback(S=>M(new OI(S)),[]),I=i.useCallback((S,T)=>M(new gc(S,T)),[]);Te(ye.REQUEST_PLAYLIST_EDITOR,S=>{var R,y,A;const T=Y().getRoomObject(S.roomId,S.objectId,S.category);if(T){if(Jt(T)){e(S.objectId),s(S.category),(R=_e().soundManager.musicController)==null||R.requestUserSongDisks(),(A=(y=_e().soundManager.musicController)==null?void 0:y.getRoomItemPlaylist())==null||A.requestPlayList();return}(m.isRoomOwner||m.controllerLevel>=Ke.GUEST||z().isModerator)&&M(new gc(S.objectId,-2))}}),Fn(a!==-1&&n!==-1,S=>{S.id!==a||S.category!==n||C()}),_r(zm.NPE_SONG_CHANGED,S=>{o(S.position)}),_r(kI.NOTIFY_PLAYED_SONG,S=>{f(h("soundmachine.notification.playing",["songname","songauthor"],[S.name,S.creator]),Ct.SOUNDMACHINE)}),_r(AI.SDIR_SONG_DISK_INVENTORY_RECEIVENT_EVENT,S=>{var T;u((T=_e().soundManager.musicController)==null?void 0:T.songDiskInventory.clone())}),_r(vu.PLUE_PLAY_LIST_UPDATED,S=>{var T,R;g((R=(T=_e().soundManager.musicController)==null?void 0:T.getRoomItemPlaylist())==null?void 0:R.entries.concat())}),_r(vu.PLUE_PLAY_LIST_FULL,S=>{p(h("playlist.editor.alert.playlist.full"),Ie.ALERT,"","",h("playlist.editor.alert.playlist.full.title"))});const _=S=>{var T,R;a!==-1&&(S instanceof hc?S.getParser().fragmentNumber===0&&((T=_e().soundManager.musicController)==null||T.requestUserSongDisks()):(R=_e().soundManager.musicController)==null||R.requestUserSongDisks())};return F(hc,_),F(Hm,_),F(Gm,_),{objectId:a,diskInventory:c,playlist:d,currentPlayingIndex:r,onClose:C,addToPlaylist:E,removeFromPlaylist:b,togglePlayPause:I}},FN=UN,Ed="floor",VN="wallpaper",Cd="landscape",BN="poster",GN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(null),[c,u]=i.useState(null),[d,g]=i.useState(!1),[m,f]=i.useState(null),[p,C]=i.useState(null),[E,b]=i.useState(-1),[I,_]=i.useState(null),[S,T]=i.useState(!1),[R,y]=i.useState(null),{roomSession:A=null}=De(),U=()=>{e(-1),s(-1),o(null),u(null),g(!1),f(null),C(null),b(-1),_(null),T(!1),y(null)},L=()=>{a!==-1&&(A.openGift(a),Y().changeObjectModelData(Y().activeRoomId,a,Z.FLOOR,se.FURNITURE_DISABLE_PICKING_ANIMATION,1))},O=i.useMemo(()=>({imageReady:(k,x,V)=>{!V&&x&&(V=Ts.generateImage(x)),y(V.src)},imageFailed:null}),[]);return Ye(xI.RSPE_PRESENT_OPENED,k=>{let x=null;k.itemType===Ee.FLOOR?x=z().getFloorItemData(k.classId):k.itemType===Ee.WALL&&(x=z().getWallItemData(k.classId));let V=!1;if(k.placedInRoom){const B=Y().getRoomObject(A.roomId,k.placedItemId,Z.FLOOR);B&&(V=Jt(B))}switch(k.itemType){case Ee.WALL:{if(x)switch(x.className){case Ed:case Cd:case VN:let B=null;x.className===Ed?B=h("inventory.furni.item.floor.name"):x.className===Cd?B=h("inventory.furni.item.landscape.name"):B=h("inventory.furni.item.wallpaper.name"),u(B);break;case BN:{const W=k.productCode;let G=null;W.indexOf("poster")===0&&(G=W.replace("poster",""));const H=z().getProductData(W);let Q=null;H?Q=H.name:x&&(Q=x.name),u(Q),y(Y().getFurnitureWallIconUrl(k.classId,G));break}default:{u(x.name||null),y(Y().getFurnitureWallIconUrl(k.classId));break}}break}case Ee.HABBO_CLUB:u(h("widget.furni.present.hc"));break;default:{if(k.placedItemType===Ee.PET){const W=k.petFigureString;if(W&&W.length){const G=new go(W),H=Y().getRoomObjectPetImage(G.typeId,G.paletteId,G.color,new At(90),64,O,!0,0,G.customParts);H&&y(H.getImage().src)}}else{const W=Y().getFurnitureFloorImage(k.classId,new At(90),64,O);W&&y(W.getImage().src)}const B=z().getProductData(k.productCode);u(B&&B.name||x.name);break}}e(0),s(k.classId),o(k.itemType),g(V),b(k.placedItemId),_(k.placedItemType),T(k.placedInRoom)}),Te(ye.REQUEST_PRESENT,k=>{const x=Y().getRoomObject(k.roomId,k.objectId,k.category);if(!x)return null;U(),e(k.objectId),s(-1),u(x.model.getValue(se.FURNITURE_DATA)||""),g(Jt(x)),f(x.model.getValue(se.FURNITURE_PURCHASER_NAME)||null),C(x.model.getValue(se.FURNITURE_PURCHASER_FIGURE)||null)}),Fn(a!==-1,k=>{k.id===a&&U(),k.id===E&&S&&T(!1)}),{objectId:a,classId:n,itemType:r,text:c,isOwnerOfFurniture:d,senderName:m,senderFigure:p,placedItemId:E,placedItemType:I,placedInRoom:S,imageUrl:R,openPresent:L,onClose:U}},HN=GN,WN="internalLink",jN=()=>{const[a,e]=i.useState(0);return Te(ye.REQUEST_ROOM_LINK,n=>{const s=Y().getRoomObject(n.roomId,n.objectId,n.category);if(!s)return;let o=s.model.getValue(se.FURNITURE_DATA)[WN];(!o||!o.length)&&(o=s.model.getValue(se.FURNITURE_INTERNAL_LINK)),!(!o||!o.length)&&(o=parseInt(o,10),!isNaN(o)&&(e(o),M(new ui(o,!1,!1))))}),F(bo,n=>{!a||n.getParser().data.roomId!==a||e(0)}),{}},qN=jN,zN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(""),[c,u]=i.useState(""),[d,g]=i.useState("0"),[m,f]=i.useState(""),[p,C]=i.useState(!1),{getWallItemById:E=null}=Lr(),b=()=>{M(new PI(a,c,d,m)),e(-1),s(-1),o(""),u(""),g("0"),f(""),C(!1)};return F(DI,I=>{const _=I.getParser();e(_.itemId),s(Z.WALL);const S=E(_.itemId);let T="post_it";if(S){const R=Y().getFurnitureWallName(S.type);R.match("post_it_")&&(T=R)}o(T),u(_.location),g("FFFF33"),f(""),C(!0)}),{objectId:a,color:d,setColor:g,text:m,setText:f,canModify:p,onClose:b}},YN=zN,Gl=40,KN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(0),[c,u]=i.useState(-1),d=()=>{e(-1),s(-1),o(0),u(-1)},g=(m,f=!1)=>{m||(m=0),m=Math.abs(m),f||m>Gl&&(m=Gl),o(parseFloat(m.toFixed(2))),f||u(m*100)};return F(MI,m=>{const f=m.getParser();a===f.furniId&&g(f.height,!0)}),Te(ye.REQUEST_STACK_HEIGHT,m=>{if(!Zo(Oe(),m.objectId,m.category))return;const f=Y().getRoomObject(m.roomId,m.objectId,m.category);f&&(e(m.objectId),s(m.category),o(f.getLocation().z),u(-1))}),Fn(a!==-1&&n!==-1,m=>{m.id!==a||m.category!==n||d()}),i.useEffect(()=>{if(a===-1||c===-1)return;const m=setTimeout(()=>M(new fc(a,~~c)),10);return()=>clearTimeout(m)},[a,c]),{objectId:a,height:r,maxHeight:Gl,onClose:d,updateHeight:g}},$N=KN,QN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState("0"),[c,u]=i.useState(""),[d,g]=i.useState(""),[m,f]=i.useState(!1),p=()=>{e(-1),s(-1),o("0"),u(""),g(""),f(!1)},C=I=>{I!==r&&(o(I),Y().modifyRoomObjectData(a,n,I,c))},E=I=>{u(I),Y().modifyRoomObjectData(a,n,r,I)},b=()=>Y().deleteRoomObject(a,n);return Te(ye.REQUEST_STICKIE,I=>{const _=Y().getRoomObject(I.roomId,I.objectId,I.category);if(!_)return;const S=_.model.getValue(se.FURNITURE_ITEMDATA);if(S.length<6)return;let T=null,R=null;S.indexOf(" ")>0?(T=S.slice(0,S.indexOf(" ")),R=S.slice(S.indexOf(" ")+1,S.length)):T=S,e(I.objectId),s(I.category),o(T||"0"),u(R||""),g(_.type||"post_it"),f(Oe().isRoomOwner||z().isModerator||Jt(_))}),Fn(a!==-1&&n!==-1,I=>{I.id!==a||I.category!==n||p()}),{objectId:a,color:r,text:c,type:d,canModify:m,updateColor:C,updateText:E,trash:b,onClose:p}},XN=QN,JN=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState("1"),[c,u]=i.useState(""),[d,g]=i.useState(""),[m,f]=i.useState(""),p=()=>{e(-1),s(-1),o("1"),u(""),g(""),f("")};return Te(ye.REQUEST_TROPHY,C=>{const E=Y().getRoomObject(C.roomId,C.objectId,C.category);if(!E)return;let b=E.model.getValue(se.FURNITURE_DATA);E.model.getValue(se.FURNITURE_EXTRAS),e(C.objectId),s(C.category),o(E.model.getValue(se.FURNITURE_COLOR)||"1");const I=b.substring(0,b.indexOf("	"));b=b.substring(I.length+1,b.length);const _=b.substring(0,b.indexOf("	")),S=b.substr(_.length+1,b.length);u(I),g(_),f(S)}),Fn(a!==-1&&n!==-1,C=>{C.id!==a||C.category!==n||p()}),{objectId:a,color:r,senderName:c,date:d,message:m,onClose:p}},ZN=JN,ev=0,tv=1,nv=2,sv=3,rv=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(-1),[r,o]=i.useState(null),[c,u]=i.useState(null),[d,g]=i.useState(null),[m,f]=i.useState(-1),[p,C]=i.useState(null),[E,b]=i.useState(null),[I,_]=i.useState(!1),S=()=>{e(-1),s(-1),o(null),u(null),g(null),f(-1),C(null),b(null),_(!1)},T=()=>M(new ka(a,ev)),R=()=>M(new ka(a,tv)),y=()=>I&&r&&r.length&&M(new ka(a,nv)),A=()=>I&&r&&r.length&&M(new ka(a,sv)),U=L=>{if(p===L){C(null),M(new Tu(a,""));return}C(L),M(new Tu(a,L))};return Te(ye.REQUEST_YOUTUBE,L=>{if(Tr.isRoomPreviewerId(L.roomId))return;const O=Y().getRoomObject(L.roomId,L.objectId,L.category);O&&(e(L.objectId),s(L.category),_(z().hasSecurity(mi.EMPLOYEE)||Jt(O)),M(new LI(L.objectId)))}),F(UI,L=>{const O=L.getParser();a===-1||a!==O.furniId||(o(O.videoId),u(O.startAtSeconds),g(O.endAtSeconds),f(O.state))}),F(FI,L=>{const O=L.getParser();a===-1||a!==O.furniId||(b(O.playlists),C(O.selectedPlaylistId),o(null),f(-1),g(null),u(null))}),F(VI,L=>{const O=L.getParser();if(!(a===-1||a!==O.furniId))switch(O.commandId){case 1:f(ar.PLAYING);break;case 2:f(ar.PAUSED);break}}),Fn(a!==-1&&n!==-1,L=>{L.id!==a||L.category!==n||S()}),{objectId:a,videoId:r,videoStart:c,videoEnd:d,currentVideoState:m,selectedVideo:p,playlists:E,onClose:S,previous:T,next:R,pause:y,play:A,selectVideo:U}},ov=rv,av=()=>{const[a,e]=i.useState(null),[n,s]=i.useState([]),[r,o]=i.useState(""),[c,u]=i.useState([]),[d,g]=i.useState(0),[m,f]=i.useState(he.STUFF_SELECTION_OPTION_NONE),{showConfirm:p=null}=Je(),C=()=>{const b=I=>{I&&(I instanceof Ym?M(new jI(I.id,n,r,c,d,I.stuffTypeSelectionCode)):I instanceof Km?M(new qI(I.id,n,r,c,I.stuffTypeSelectionCode)):I instanceof $m&&M(new zI(I.id,n,r,c,I.stuffTypeSelectionCode)))};n_(a.id)?b(a):p(h("wiredfurni.nonowner.change.confirm.body"),()=>{b(a)},null,null,null,h("wiredfurni.nonowner.change.confirm.title"))},E=(b,I)=>{!a||!m||b<=0||u(_=>{const S=[..._],T=_.indexOf(b);return T>=0?(S.splice(T,1),Or.hide(b)):S.length<a.maximumItemSelectionCount&&(S.push(b),Or.show(b)),S})};return F(BI,b=>{b.getParser(),e(null)}),F(GI,b=>{const I=b.getParser();e(I.definition)}),F(HI,b=>{const I=b.getParser();e(I.definition)}),F(WI,b=>{const I=b.getParser();e(I.definition)}),i.useEffect(()=>{if(a)return()=>{s([]),o(""),g(0),u(b=>(b&&b.length&&Or.clearSelectionShaderFromFurni(b),[])),f(he.STUFF_SELECTION_OPTION_NONE)}},[a]),{trigger:a,setTrigger:e,intParams:n,setIntParams:s,stringParam:r,setStringParam:o,furniIds:c,setFurniIds:u,actionDelay:d,setActionDelay:g,setAllowsFurni:f,saveWired:C,selectObjectForWired:E}},we=()=>Xe(av),iv=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(null),[r,o]=i.useState([]),[c,u]=i.useState([]),[d,g]=i.useState(null),[m,f]=i.useState(-1),[p,C]=i.useState(!1),{friends:E=[]}=Tn(),{selectObjectForWired:b=null}=we(),{roomSession:I=null}=De(),_=U=>{o(L=>{const O=[...L];return O.splice(U,1),O})},S=()=>{C(!p)},T=U=>{u(L=>{const O=[...L],k=O.splice(U,1)[0];return d===k&&g(null),O})},R=U=>{g(U),u([])},y=(U,L)=>{const O=Hr.getObjectName(U,L);O&&(s(O),L!==Z.UNIT&&u([]))},A=(U,L)=>{let O=null;switch(L){case Z.FLOOR:case Z.WALL:O=Hr.getFurniInfo(U,L),O&&b(U,L);break;case Z.UNIT:{const k=I.userDataManager.getUserDataByIndex(U);if(!k)break;switch(k.type){case bt.PET:I.userDataManager.requestPetInfo(k.webID),f(k.webID);break;case bt.USER:O=Hr.getUserInfo(L,k);break;case bt.BOT:O=Hr.getBotInfo(L,k);break;case bt.RENTABLE_BOT:O=Hr.getRentableBotInfo(L,k);break}}}O&&e(O)};return Ye(YI.USER_DATA_UPDATED,U=>{if(!U.addedUsers.length)return;let L=[];U.addedUsers.forEach(O=>{O.webID!==z().userId&&E.find(k=>k.id===O.webID)&&L.push(new xh(O.roomIndex,Z.UNIT,O.webID,O.name,O.type,!0))}),L.length&&o(O=>{const k=[...O];return L.forEach(x=>{const V=k.findIndex(B=>B.id===x.id);V>-1&&k.splice(V,1),k.push(x)}),k})}),Ye(KI.PET_INFO,U=>{const L=U.petInfo;if(!L||L.id!==m)return;const O=Hr.getPetInfo(L);O&&(e(O),f(-1))}),Ye($I.PET_STATUS_UPDATE,U=>{}),Te(wu.USE_PRODUCT_FROM_INVENTORY,U=>{}),Te(wu.USE_PRODUCT_FROM_ROOM,U=>{const L=Y().getRoomObject(I.roomId,U.objectId,Z.FLOOR);if(!L||!Jt(L))return;const O=L.model.getValue(se.FURNITURE_OWNER_ID),k=L.model.getValue(se.FURNITURE_TYPE_ID),x=z().getFloorItemData(k),V=x.customParams.split(" "),B=V.length?parseInt(V[0]):-1;if(B===-1)return;const W=[],G=Y().getRoomObjects(I.roomId,Z.UNIT);for(const H of G){const Q=I.userDataManager.getUserDataByIndex(H.id);let ee=!1;if(!(!Q||Q.type!==bt.PET)){if(Q.ownerId===O){Q.hasSaddle&&x.specialType===ge.PET_SADDLE&&(ee=!0);const me=Q.figure.split(" ");if((me.length?parseInt(me[0]):-1)===B){if(x.specialType===ge.MONSTERPLANT_REVIVAL&&!Q.canRevive||x.specialType===ge.MONSTERPLANT_REBREED&&(Q.petLevel<7||Q.canRevive||Q.canBreed)||x.specialType===ge.MONSTERPLANT_FERTILIZE&&(Q.petLevel>=7||Q.canRevive))continue;W.push(new oS(Q.roomIndex,Z.UNIT,Q.name,U.objectId,H.id,-1,ee))}}}}g(null),W.length&&u(W)}),Te(Tt.REQUEST_MANIPULATION,U=>{Zo(I,U.objectId,U.category)&&C(!0)}),nu(U=>{A(U.id,U.category)}),iN(U=>{e(null),u([])}),cN(U=>{a||U.category!==Z.UNIT||y(U.id,U.category)}),lN(U=>{!n||U.category!==Z.UNIT||n.roomIndex!==U.id||s(null)}),st([je.FURNI_REMOVED,je.USER_REMOVED],U=>{if(n&&n.category===U.category&&n.roomIndex===U.id&&s(null),U.category===Z.UNIT){let L=r.findIndex(O=>O.roomIndex===U.id);L>-1&&o(O=>O.filter(k=>k.roomIndex===U.id)),L=c.findIndex(O=>O.id===U.id),L>-1&&u(O=>O.filter(k=>k.id!==U.id))}else U.category===Z.FLOOR&&c.findIndex(O=>O.id===U.id)>-1&&u(O=>O.filter(k=>k.requestRoomObjectId!==U.id));a&&(a instanceof Ar?a.id===U.id&&e(null):(a instanceof Rt||a instanceof Dr||a instanceof xr)&&a.roomIndex===U.id&&e(null))}),i.useEffect(()=>{a&&(s(null),o([]),u([]))},[a]),i.useEffect(()=>{n&&o([])},[n]),i.useEffect(()=>{I.isDecorating=p},[I,p]),{toggleIsDecorating:S,avatarInfo:a,setAvatarInfo:e,activeNameBubble:n,setActiveNameBubble:s,nameBubbles:r,productBubbles:c,confirmingProduct:d,isDecorating:p,setIsDecorating:C,removeNameBubble:_,removeProductBubble:T,updateConfirmingProduct:R,getObjectName:y}},Zh=iv,eg=i.createContext({isActive:!1,selectedUsers:[],startGroupWhisper:()=>{},addUser:()=>!1,removeUser:()=>{},clearGroupWhisper:()=>{},getWhisperCommand:()=>""}),ru=()=>i.useContext(eg),lv=({children:a})=>{const[e,n]=i.useState(!1),[s,r]=i.useState([]),o=i.useCallback(m=>{n(!0),r([m])},[]),c=i.useCallback(m=>!e||s.some(p=>p.roomIndex===m.roomIndex)?!1:(r(p=>[...p,m]),!0),[e,s]),u=i.useCallback(m=>{r(f=>f.filter(p=>p.roomIndex!==m))},[]),d=i.useCallback(()=>{n(!1),r([])},[]),g=i.useCallback(()=>s.length===0?"":`:whisper ${s.map(f=>`@${f.name}`).join(" ")} `,[s]);return t(eg.Provider,{value:{isActive:e,selectedUsers:s,startGroupWhisper:o,addUser:c,removeUser:u,clearGroupWhisper:d,getWhisperCommand:g},children:a})},cv=()=>{const[a,e]=i.useState(""),[n,s]=i.useState(!1),[r,o]=i.useState(!1),[c,u]=i.useState(!1),[d,g]=i.useState(!1),[m,f]=i.useState(0),{showNitroAlert:p=null,showConfirm:C=null}=Je(),{roomSession:E=null}=De(),{isActive:b,addUser:I,clearGroupWhisper:_,selectedUsers:S}=ru(),T=(R,y,A="",U=0)=>{if(R==="")return null;const L=R.split(" ");if(L.length>0){const O=L[0];let k="";if(L.length>1&&(k=L[1]),O.charAt(0)===":"&&k==="x"){const x=Y().selectedAvatarId;if(x>-1){const V=E.userDataManager.getUserDataByIndex(x);V&&(k=V.name,R=R.replace(" x"," "+V.name))}}switch(O.toLowerCase()){case":shake":return Ru.init(2500,5e3),Ru.turnVisualizationOn(),null;case":rotate":return yu.init(2500,5e3),yu.turnVisualizationOn(),null;case":d":case";d":Dn()===Nn.VIP&&E.sendExpressionMessage(Es.LAUGH.ordinal);break;case"o/":case"_o/":return E.sendExpressionMessage(Es.WAVE.ordinal),null;case":kiss":if(Dn()===Nn.VIP)return E.sendExpressionMessage(Es.BLOW.ordinal),null;break;case":jump":if(Dn()===Nn.VIP)return E.sendExpressionMessage(Es.JUMP.ordinal),null;break;case":idle":return E.sendExpressionMessage(Es.IDLE.ordinal),null;case"_b":return E.sendExpressionMessage(Es.RESPECT.ordinal),null;case":sign":return E.sendSignMessage(parseInt(k)),null;case":iddqd":case":flip":return Y().events.dispatchEvent(new pc(E.roomId,-1,!0)),null;case":zoom":return Y().events.dispatchEvent(new pc(E.roomId,parseFloat(k),!1)),null;case":screenshot":const x=Y().createTextureFromRoom(E.roomId,1),V=new Image;return V.src=Ts.generateImageUrl(x),window.open("").document.write(V.outerHTML),null;case":pickall":return(E.isRoomOwner||z().isModerator)&&C(h("room.confirm.pick_all"),()=>{z().sendSpecialCommandMessage(":pickall")},null,null,null,h("generic.alert.title")),null;case":ejectall":return(E.isRoomOwner||z().isModerator||E.controllerLevel>=Ke.GUEST)&&C(h("room.confirm.eject_all"),()=>{z().sendSpecialCommandMessage(":ejectall")},null,null,null,h("generic.alert.title")),null;case":furni":return te("furni-chooser/"),null;case":chooser":return te("user-chooser/"),null;case":floor":case":bcfloor":return E.controllerLevel>=Ke.ROOM_OWNER&&te("floor-editor/show"),null;case":togglefps":return zs().maxFPS>0?zs().maxFPS=0:zs().maxFPS=X("system.animation.fps"),null;case":client":case":nitro":case":billsonnn":return p(),null;case":settings":return(E.isRoomOwner||z().isModerator)&&M(new Qm(E.roomId)),null}}switch(y){case _s.CHAT_DEFAULT:E.sendChatMessage(R,U);break;case _s.CHAT_SHOUT:E.sendShoutMessage(R,U);break;case _s.CHAT_WHISPER:if(b&&S.length>0){const k=`:whisper ${S.map(x=>`@${x.name}`).join(" ")} ${R}`;z().sendSpecialCommandMessage(k),_()}else E.sendWhisperMessage(A,R,U);break}};return Ye(Wn.FLOOD_EVENT,R=>{g(!0),f(parseFloat(R.message))}),nu(R=>{if(R.category!==Z.UNIT)return;const y=E.userDataManager.getUserDataByIndex(R.id);y&&(b?I({name:y.name,roomIndex:R.id}):e(y.name))}),Te(Tt.DESELECTED,R=>e("")),i.useEffect(()=>{if(!d)return;let R=0;const y=setInterval(()=>{f(A=>(R=(A||0)-1,R)),R<0&&(clearInterval(y),g(!1))},1e3);return()=>clearInterval(y)},[d]),i.useEffect(()=>{if(!c)return;let R=null;return c&&(R=setTimeout(()=>{u(!1),s(!1)},1e4)),()=>clearTimeout(R)},[c]),i.useEffect(()=>{n?r||(o(!0),E.sendChatTypingMessage(n)):r&&(o(!1),E.sendChatTypingMessage(n))},[E,n,r]),{selectedUsername:a,floodBlocked:d,floodBlockedSeconds:m,setIsTyping:s,setIsIdle:u,sendChat:T}},ou=cv,bd=new Map,_d=new Map,Sd=new Map,uv=()=>{const[a,e]=i.useState([]),[n,s]=i.useState({mode:wt.CHAT_MODE_FREE_FLOW,weight:wt.CHAT_BUBBLE_WIDTH_NORMAL,speed:wt.CHAT_SCROLL_SPEED_NORMAL,distance:50,protection:wt.FLOOD_FILTER_NORMAL}),{roomSession:r=null}=De(),{addChatEntry:o}=pl(),c=i.useRef(!1),u=i.useMemo(()=>{if(!n)return 6e3;switch(n.speed){case wt.CHAT_SCROLL_SPEED_FAST:return 3e3;case wt.CHAT_SCROLL_SPEED_NORMAL:return 6e3;case wt.CHAT_SCROLL_SPEED_SLOW:return 12e3}},[n]),d=f=>{const p=xt().createAvatarImage(f,Fc.LARGE,null,{resetFigure:b=>{c.current||d(b)},dispose:()=>{},disposed:!1});if(!p)return;const C=p.getCroppedImage(ci.HEAD),E=p.getPartColor(He.CHEST);return bd.set(f,E&&E.rgb||16777215),p.dispose(),_d.set(f,C.src),C.src},g=f=>{let p=_d.get(f);return p||(p=d(f)),p},m=(f,p,C,E=64,b=null)=>{let I=Sd.get(f+b);if(I)return I;const _=new go(f),S=_.typeId,T=Y().getRoomObjectPetImage(S,_.paletteId,_.color,new At(p*45),E,null,!1,0,_.customParts,b);return T&&(I=Ts.generateImageUrl(T.data),Sd.set(f+b,I)),I};return Ye(Wn.CHAT_EVENT,f=>{const p=Y().getRoomObject(r.roomId,f.objectId,Z.UNIT),C=p?ph(r.roomId,p==null?void 0:p.id,Z.UNIT):new Ys,E=p?r.userDataManager.getUserDataByIndex(f.objectId):new QI(-1);let b="",I=0,_=null,S=f.chatType,T=f.style,R=0,y=f.message;if(E){R=E.type;const L=E.figure;switch(R){case bt.PET:_=m(L,2,!0,64,p.model.getValue(se.FIGURE_POSTURE)),new go(L).typeId;break;case bt.USER:_=g(L);break;case bt.RENTABLE_BOT:case bt.BOT:T=ZI.BOT;break}I=bd.get(L),b=E.name}switch(S){case Wn.CHAT_TYPE_RESPECT:y=h("widgets.chatbubble.respect",["username"],[b]),X("respect.options").enabled&&ys(X("respect.options").sound);break;case Wn.CHAT_TYPE_PETREVIVE:case Wn.CHAT_TYPE_PET_REBREED_FERTILIZE:case Wn.CHAT_TYPE_PET_SPEED_FERTILIZE:{let L="widget.chatbubble.petrevived";S===Wn.CHAT_TYPE_PET_REBREED_FERTILIZE?L="widget.chatbubble.petrefertilized;":S===Wn.CHAT_TYPE_PET_SPEED_FERTILIZE&&(L="widget.chatbubble.petspeedfertilized");let O=null;if(Y().getRoomObject(r.roomId,f.extraParam,Z.UNIT)){const x=r.userDataManager.getUserDataByIndex(p.id);x&&(O=x.name)}y=h(L,["petName","userName"],[b,O]);break}case Wn.CHAT_TYPE_PETRESPECT:y=h("widget.chatbubble.petrespect",["petname"],[b]);break;case Wn.CHAT_TYPE_PETTREAT:y=h("widget.chatbubble.pettreat",["petname"],[b]);break;case Wn.CHAT_TYPE_HAND_ITEM_RECEIVED:y=h("widget.chatbubble.handitem",["username","handitem"],[b,h("handitem"+f.extraParam)]);break;case Wn.CHAT_TYPE_MUTE_REMAINING:{const L=(f.extraParam>0?Math.floor(f.extraParam/3600):0).toString(),O=(f.extraParam>0?Math.floor(f.extraParam%3600/60):0).toString(),k=(f.extraParam%60).toString();y=h("widget.chatbubble.mutetime",["hours","minutes","seconds"],[L,O,k]);break}}const A=__(y),U=I&&("#"+I.toString(16).padStart(6,"0")||null);e(L=>{const O=L[L.length-1];if(O&&O.senderId===E.roomIndex&&O.text===y&&O.type===S&&O.styleId===T){const x=new wi(O.senderId,O.senderCategory,O.roomId,O.text,O.formattedText,O.username,new Ys(C.x,C.y),O.type,O.styleId,O.imageUrl,O.color,O.repeatCount+1);x.id=O.id,x.top=O.top,x.left=O.left,x.width=O.width,x.height=O.height,x.elementRef=O.elementRef;const V=[...L];return V[V.length-1]=x,V}const k=new wi(E.roomIndex,Z.UNIT,r.roomId,y,A,b,new Ys(C.x,C.y),S,T,_,U,1);return[...L,k]}),o({id:-1,webId:E.webID,entityId:E.roomIndex,name:b,imageUrl:_,style:T,chatType:S,entityType:E.type,message:A,timestamp:vh(),type:cs.TYPE_CHAT,roomId:r.roomId,color:U})}),Te(XI.ROOM_DRAG,f=>{if(!a.length||f.roomId!==r.roomId)return;const p=f.offsetX;a.forEach(C=>C.elementRef&&(C.left+=p))}),F(bo,f=>{const p=f.getParser();p.roomEnter&&s(p.chat)}),F(JI,f=>{const p=f.getParser();s(p.chat)}),i.useEffect(()=>(c.current=!1,()=>{c.current=!0}),[]),{chatMessages:a,setChatMessages:e,chatSettings:n,getScrollSpeed:u}},dv=uv,mv=()=>{const[a,e]=i.useState([]),n=o=>{a.indexOf(o)>=0||e([...a,o])},s=o=>{const c=a.indexOf(o);if(c===-1)return;const u=[...a];u.splice(c,1),e(u)},r=(o,c)=>{Oe().sendDoorbellApprovalMessage(o,c),s(o)};return Ye(kl.DOORBELL,o=>n(o.userName)),Ye(kl.RSDE_REJECTED,o=>s(o.userName)),Ye(kl.RSDE_ACCEPTED,o=>s(o.userName)),{users:a,addUser:n,removeUser:s,answer:r}},hv=mv,gv=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(!1),r=()=>s(!1);return F(eE,o=>{const c=o.getParser();s(!0),e(c.words)}),{wordsFilter:a,isVisible:n,setWordsFilter:e,onClose:r}},fv=gv,pv=()=>{const[a,e]=i.useState([]),{requests:n=[],dismissedRequestIds:s=[],setDismissedRequestIds:r=null}=Tn(),o=i.useMemo(()=>a.filter(u=>s.indexOf(u.request.requesterUserId)===-1),[a,s]),c=u=>{r(d=>{if(d.indexOf(u)>=0)return d;const g=[...d];return g.push(u),g})};return $h(!0,u=>{if(u.category!==Z.UNIT)return;const d=Oe().userDataManager.getUserDataByIndex(u.id);if(!d||d.type!==Ou.getTypeNumber(Ou.USER))return;const g=n.find(f=>f.requesterUserId===d.webID);if(!g||a.find(f=>f.request.requesterUserId===d.webID))return;const m=[...a];m.push({roomIndex:d.roomIndex,request:g}),e(m)}),Qh(!0,u=>{if(u.category!==Z.UNIT)return;const d=a.findIndex(m=>m.roomIndex===u.id);if(d===-1)return;const g=[...a];g.splice(d,1),e(g)}),i.useEffect(()=>{const u=[];for(const d of n){const g=Oe().userDataManager.getUserData(d.requesterUserId);g&&u.push({roomIndex:g.roomIndex,request:d})}e(u)},[n]),{displayedRequests:o,hideFriendRequest:c}},Iv=pv,Ev=()=>{const[a,e]=i.useState(null),{roomSession:n=null}=De(),s=()=>e(null),r=c=>c&&Y().selectRoomObject(Oe().roomId,c.id,c.category),o=()=>{const c=z(),u=Y().getRoomObjects(n.roomId,Z.WALL),d=Y().getRoomObjects(n.roomId,Z.FLOOR),g=u.map(f=>{if(f.id<0)return null;let p=f.type;if(p.startsWith("poster"))p=h(`poster_${p.replace("poster","")}_name`);else{const C=f.model.getValue(se.FURNITURE_TYPE_ID),E=c.getWallItemData(C);E&&E.name.length&&(p=E.name)}return new Qr(f.id,Z.WALL,p)}),m=d.map(f=>{if(f.id<0)return null;let p=f.type;const C=f.model.getValue(se.FURNITURE_TYPE_ID),E=c.getFloorItemData(C);return E&&E.name.length&&(p=E.name),new Qr(f.id,Z.FLOOR,p)});e([...g,...m].sort((f,p)=>f.name<p.name?-1:1))};return aN(!!a,c=>{if(c.id<0)return;const u=Y().getRoomObject(Oe().roomId,c.id,c.category);if(!u)return;let d=null;switch(c.category){case Z.WALL:{let g=u.type;if(g.startsWith("poster"))g=h(`poster_${g.replace("poster","")}_name`);else{const m=u.model.getValue(se.FURNITURE_TYPE_ID),f=z().getWallItemData(m);f&&f.name.length&&(g=f.name)}d=new Qr(u.id,Z.WALL,g);break}case Z.FLOOR:{let g=u.type;const m=u.model.getValue(se.FURNITURE_TYPE_ID),f=z().getFloorItemData(m);f&&f.name.length&&(g=f.name),d=new Qr(u.id,Z.FLOOR,g)}}e(g=>[...g,d].sort((m,f)=>m.name<f.name?-1:1))}),Fn(!!a,c=>{c.id<0||e(u=>{const d=[...u];for(let g=0;g<d.length;g++){const m=d[g];if(!(m.id!==c.id||m.category!==c.category)){d.splice(g,1);break}}return d})}),{items:a,onClose:s,selectItem:r,populateChooser:o}},Cv=Ev,bv=()=>{const[a,e]=i.useState(!1),[n,s]=i.useState(-1),[r,o]=i.useState(""),[c,u]=i.useState(""),[d,g]=i.useState(""),m=()=>{g(""),u(""),o(""),s(-1),e(!1)},f=()=>{M(new tE(n,c))},p=E=>{u(E),d.length>0&&g("")},C=E=>{if(!(!E||E===0))switch(E){case 1:return h("catalog.alert.petname.long");case 2:return h("catalog.alert.petname.short");case 3:return h("catalog.alert.petname.chars");case 4:default:return h("catalog.alert.petname.bobba")}};return Ye(ku.RSOPPE_OPEN_PET_PACKAGE_REQUESTED,E=>{if(!E)return;const b=Y().getRoomObject(E.session.roomId,E.objectId,Z.FLOOR);s(E.objectId),o(b.type),e(!0)}),Ye(ku.RSOPPE_OPEN_PET_PACKAGE_RESULT,E=>{E&&(E.nameValidationStatus===0&&m(),E.nameValidationStatus!==0&&g(C(E.nameValidationStatus)))}),{isVisible:a,errorResult:d,petName:c,objectType:r,onChangePetName:p,onConfirm:f,onClose:m}},_v=bv,Sv=()=>{const{roomSession:a=null}=De(),e=r=>a.sendPollStartMessage(r),n=r=>a.sendPollRejectMessage(r),s=(r,o,c)=>a.sendPollAnswerMessage(r,o,c);return Ye(Al.OFFER,r=>{const o=new tr(tr.OFFER,r.id);o.summary=r.summary,o.headline=r.headline,nt(o)}),Ye(Al.ERROR,r=>{const o=new tr(tr.ERROR,r.id);o.summary=r.summary,o.headline=r.headline,nt(o)}),Ye(Al.CONTENT,r=>{const o=new tr(tr.CONTENT,r.id);o.startMessage=r.startMessage,o.endMessage=r.endMessage,o.numQuestions=r.numQuestions,o.questionArray=r.questionArray,o.npsPoll=r.npsPoll,nt(o)}),{startPoll:e,rejectPoll:n,answerPoll:s}},Nv=Sv,vv=()=>{const[a,e]=i.useState(!1),n=i.useCallback(()=>{e(!0)},[]),s=i.useCallback(()=>{e(!1)},[]);return{isVisible:a,open:n,close:s}},tg=()=>Xe(vv),Tv="room.style.editor",Ks={hue:0,saturation:0,lightness:50},Et=(...a)=>console.log("[RoomStyleEditor]",...a),Wr=(...a)=>console.warn("[RoomStyleEditor]",...a),$s=(a,e,n)=>Math.min(Math.max(a,e),n),Rn=a=>({hue:Math.round(a.hue),saturation:Math.round(a.saturation),lightness:Math.round(a.lightness)}),Wt=a=>Rn(a??Ks),wv=a=>typeof a!="number"||Number.isNaN(a)||a<0?Ks.hue:$s(Math.round(a),0,360),Nd=(a,e=Ks.lightness)=>typeof a!="number"||Number.isNaN(a)||a<0?e:$s(Math.round(a),0,100),ng=a=>$s(Math.round($s(a,0,360)/360*255),0,255),Ai=a=>$s(Math.round($s(a,0,100)/100*255),0,255),Hl=(a,e)=>{if(!a||e+2>=a.length)return null;const n=a[e],s=a[e+1],r=a[e+2];return[n,s,r].some(o=>typeof o!="number"||Number.isNaN(o))||[n,s,r].some(o=>o<0)?null:{hue:wv(n),saturation:Nd(s,Ks.saturation),lightness:Nd(r,Ks.lightness)}},vd=a=>{if(!a)return-1;const e=ng(a.hue),n=Ai(a.saturation),s=Ai(a.lightness),r=Ft.eight_bitVals_to_int(0,e,n,s);return en.hslToRGB(r)},jr=(a,e)=>!a&&!e?!0:!a||!e?!1:Math.round(a.hue)===Math.round(e.hue)&&Math.round(a.saturation)===Math.round(e.saturation)&&Math.round(a.lightness)===Math.round(e.lightness),yv=()=>{const{roomSession:a=null}=De(),e=i.useRef(new Map),[n,s]=i.useState(!1),[r,o]=i.useState(null),[c,u]=i.useState(Ks),[d,g]=i.useState(Ks),[m,f]=i.useState(Ks),[p,C]=i.useState(null),E=i.useRef(null),[b,I]=i.useState({wall:!1,floor:!1,background:!1}),_=i.useCallback(()=>I({wall:!1,floor:!1,background:!1}),[]),S=i.useCallback(G=>I(H=>({...H,[G]:!0})),[]),T=i.useCallback((G,H)=>{G&&(Et("rememberColors",{roomId:G,colors:H}),e.current.set(G,{wall:H.wall?Rn(H.wall):null,floor:H.floor?Rn(H.floor):null,background:H.background?Rn(H.background):null}))},[]),R=i.useCallback(G=>{if(!G)return null;const H=e.current.get(G)??null;return Et("getCachedColors",{roomId:G,cached:H}),H},[]),y=i.useCallback(G=>{if(Et("previewBackgroundColor:input",G?{hue:G.hue,saturation:G.saturation,lightness:G.lightness}:"clear"),!G){nt(new $n($n.CLEAR_PREVIEW));return}const H=ng(G.hue),Q=Ai(G.saturation),ee=Ai(G.lightness);Et("previewBackgroundColor:encoded",{hue:H,saturation:Q,lightness:ee}),nt(new $n($n.PREVIEW,H,Q,ee))},[]),A=i.useCallback((G,H)=>{if(Et("applyRoomPreview:start",{roomId:(a==null?void 0:a.roomId)??null,wallOverride:G??"inherit",floorOverride:H??"inherit"}),!a){Wr("applyRoomPreview abortado: sem roomSession");return}const Q=Y();if(!Q){Wr("applyRoomPreview abortado: RoomEngine indisponvel");return}if(typeof Q.updateRoomPlaneColor!="function"){Wr("applyRoomPreview abortado: updateRoomPlaneColor no existe no RoomEngine atual");return}const ee=typeof G>"u"?null:G,me=typeof H>"u"?null:H;Et("applyRoomPreview:targets",{wallTarget:ee?{hue:ee.hue,saturation:ee.saturation,lightness:ee.lightness}:null,floorTarget:me?{hue:me.hue,saturation:me.saturation,lightness:me.lightness}:null});const ve=ee?vd(ee):-1,Fe=me?vd(me):-1;Et("applyRoomPreview:encoded",{encodedWall:ve,encodedFloor:Fe}),Q.updateRoomPlaneColor(a.roomId,ve,Fe)},[a]),U=i.useCallback(()=>{const G=E.current,H=G!=null&&G.wall?Wt(G.wall):null,Q=G!=null&&G.floor?Wt(G.floor):null,ee=G!=null&&G.background?Wt(G.background):null;(b.wall||b.floor)&&A(b.wall?H:G!=null&&G.wall?Wt(G.wall):void 0,b.floor?Q:G!=null&&G.floor?Wt(G.floor):void 0),b.background&&y(ee||null),Et("close editor",{restoringInitialColors:!!G,previewDirty:b,wallResetTarget:H?{hue:H.hue,saturation:H.saturation,lightness:H.lightness}:null,floorResetTarget:Q?{hue:Q.hue,saturation:Q.saturation,lightness:Q.lightness}:null}),_(),s(!1),o(null)},[A,y,b,_]),L=i.useCallback(G=>{if(!G){Wr("openEditor chamado sem payload");return}Et("openEditor:payload",G);const H=G.hslValues||[];Et("openEditor:hslValues",H);const Q={wall:Hl(H,0),floor:Hl(H,3),background:Hl(H,6)},ee=R(G.roomId),me={wall:Q.wall??(ee==null?void 0:ee.wall)??null,floor:Q.floor??(ee==null?void 0:ee.floor)??null,background:Q.background??(ee==null?void 0:ee.background)??null};Et("openEditor:colors",{parsedColors:Q,cachedColors:ee,resolvedColors:me});const ve={wall:me.wall?Rn(me.wall):null,floor:me.floor?Rn(me.floor):null,background:me.background?Rn(me.background):null};E.current=ve,C(ve),u(Wt(me.wall)),g(Wt(me.floor)),f(Wt(me.background)),_(),o(G),s(!0)},[_,R,T]);F(nE,G=>{const H=G.getParser();if(!H){Wr("RoomStyleEditorMessageEvent recebido sem parser vlido");return}Et("RoomStyleEditorMessageEvent:raw",{roomId:H.roomId,roomName:H.roomName,ownerId:H.ownerId,ownerName:H.ownerName,canEdit:H.canEdit,hslValues:H.hslValues});const Q={roomId:H.roomId,roomName:H.roomName,ownerId:H.ownerId,ownerName:H.ownerName,canEdit:H.canEdit,hslValues:H.hslValues||[]};Et("RoomStyleEditorMessageEvent:payload",Q),L(Q)}),F(sE,G=>{const H=G.getParser();if(!H||H.alertKey!==Tv)return;Wr("Recebeu BubbleAlertMessageEvent, fallback ativado",H.alertData);const Q=H.alertData,ee={roomId:Number((Q==null?void 0:Q.get("roomId"))||(a==null?void 0:a.roomId)||0),roomName:(Q==null?void 0:Q.get("roomName"))||"Room",ownerId:Number((Q==null?void 0:Q.get("ownerId"))||0),ownerName:(Q==null?void 0:Q.get("ownerName"))||"",canEdit:!!a&&(a.isRoomOwner||a.controllerLevel>=Ke.GUEST),hslValues:[]};L(ee)});const O=i.useCallback(()=>{if(!r||!r.canEdit)return;const G=E.current??p,H=Wt(G==null?void 0:G.wall),Q=Wt(G==null?void 0:G.floor),ee=Wt(G==null?void 0:G.background),me=!G||!jr(H,c),ve=!G||!jr(Q,d),Fe=!G||!jr(ee,m);if(!me&&!ve&&!Fe){Et("applyChanges ignorado: nenhuma alterao pendente");return}Et("applyChanges:diff",{initialColors:G,current:{wallColor:c,floorColor:d,backgroundColor:m},changes:{wall:me,floor:ve,background:Fe}});const Ve=[];if(me&&Ve.push({type:"wall",color:c}),ve&&Ve.push({type:"floor",color:d}),Fe&&Ve.push({type:"background",color:m}),Ve.forEach(({type:ke,color:ut})=>{const Gt=$s(Math.round(ut.hue),0,360),xe=$s(Math.round(ut.saturation),0,100),pe=$s(Math.round(ut.lightness),0,100);Et(`[${ke.toUpperCase()}] Enviando cor aplicada`,{hue:Gt,saturation:xe,lightness:pe}),M(new rE(ke,Gt,xe,pe))}),Et("applyChanges:preview",{wallChanged:me,floorChanged:ve,backgroundChanged:Fe}),me||ve){const ke=me?c:G!=null&&G.wall?Wt(G.wall):void 0,ut=ve?d:G!=null&&G.floor?Wt(G.floor):void 0;Et("applyChanges:preview:roomPlanes",{wallPreview:ke?{hue:ke.hue,saturation:ke.saturation,lightness:ke.lightness}:null,floorPreview:ut?{hue:ut.hue,saturation:ut.saturation,lightness:ut.lightness}:null}),A(ke,ut)}Fe&&(Et("applyChanges:preview:background",{backgroundColor:{hue:m.hue,saturation:m.saturation,lightness:m.lightness}}),y(m));const Pt={wall:Rn(c),floor:Rn(d),background:Rn(m)};E.current=Pt,C(Pt),r!=null&&r.roomId&&T(r.roomId,Pt),_(),U()},[r,p,c,d,m,A,y,T,_,U]),k=i.useCallback(G=>{Et("updateWallColor:start",{newColor:G,currentWallColor:c,currentFloorColor:d}),u(Rn(G)),S("wall");const H=E.current??p,Q=H!=null&&H.floor?Wt(H.floor):void 0;Et("updateWallColor:preserving",{snapshot:H,floorPreserve:Q?{hue:Q.hue,saturation:Q.saturation,lightness:Q.lightness}:"undefined"}),A(G,Q)},[A,S,p,c,d]),x=i.useCallback(G=>{Et("updateFloorColor:start",{newColor:G,currentWallColor:c,currentFloorColor:d}),g(Rn(G)),S("floor");const H=E.current??p,Q=H!=null&&H.wall?Wt(H.wall):void 0;Et("updateFloorColor:preserving",{snapshot:H,wallPreserve:Q?{hue:Q.hue,saturation:Q.saturation,lightness:Q.lightness}:"undefined"}),A(Q,G)},[A,S,p,c,d]),V=i.useCallback(G=>{Et("updateBackgroundColor",G),f(Rn(G)),S("background"),y(G)},[S,y]),B=i.useMemo(()=>{if(!p)return!1;const G=Wt(p.wall),H=Wt(p.floor),Q=Wt(p.background);return!(jr(G,c)&&jr(H,d)&&jr(Q,m))},[p,c,d,m]);return{canOpen:i.useMemo(()=>!!a&&(a.isRoomOwner||a.controllerLevel>=Ke.GUEST),[a]),data:r,isVisible:n,close:U,applyChanges:O,wallColor:c,floorColor:d,backgroundColor:m,setWallColor:k,setFloorColor:x,setBackgroundColor:V,hasPendingChanges:B,canEdit:!!(r!=null&&r.canEdit)}},sg=()=>Xe(yv),Rv=()=>{const[a,e]=i.useState(!1),n=i.useCallback(()=>{e(!0)},[]),s=i.useCallback(()=>{e(!1)},[]);return{isVisible:a,open:n,close:s}},rg=()=>Xe(Rv),Ov=()=>{const[a,e]=i.useState(null);De();const n=()=>e(null),s=o=>o&&Y().selectRoomObject(Oe().roomId,o.id,o.category),r=()=>{const o=Oe(),c=Y().getRoomObjects(o.roomId,Z.UNIT);e(c.map(u=>{if(u.id<0)return null;const d=o.userDataManager.getUserDataByIndex(u.id);return d?new Qr(d.roomIndex,Z.UNIT,d.name):null}).sort((u,d)=>u.name<d.name?-1:1))};return $h(!!a,o=>{if(o.id<0)return;const c=Oe().userDataManager.getUserDataByIndex(o.id);c&&e(u=>{const d=[...u];return d.push(new Qr(c.roomIndex,Z.UNIT,c.name)),d.sort((g,m)=>g.name<m.name?-1:1),d})}),Qh(!!a,o=>{o.id<0||e(c=>{const u=[...c];for(let d=0;d<u.length;d++){const g=u[d];if(!(g.id!==o.id||g.category!==o.category)){u.splice(d,1);break}}return u})}),{items:a,onClose:n,selectItem:s,populateChooser:r}},kv=Ov,Td=4e3,Av=3,xv=()=>{const[a,e]=i.useState(-1),[n,s]=i.useState(null),[r,o]=i.useState(!1),[c,u]=i.useState(null),[d,g]=i.useState(new Map),[m,f]=i.useState(new Map),{answerPoll:p=null}=Nv(),{roomSession:C=null}=De(),E=()=>{e(-1),s(null)},b=I=>{r||!n||(p(a,n.id,[I]),o(!0))};return Ye(xl.ANSWERED,I=>{const _=C.userDataManager.getUserData(I.userId);_&&(g(I.answerCounts),f(S=>{if(!S.has(_.roomIndex)){const T=new Map(m);return T.set(_.roomIndex,{value:I.value,secondsLeft:Av}),T}return S}),Y().updateRoomObjectUserGesture(C.roomId,_.roomIndex,uo.getGestureId(I.value==="0"?uo.GESTURE_SAD:uo.GESTURE_SMILE)))}),Ye(xl.FINISHED,I=>{n&&n.id===I.questionId&&(g(I.answerCounts),o(!0),u(_=>(_&&clearTimeout(_),setTimeout(()=>E(),Td)))),f(new Map)}),Ye(xl.QUESTION,I=>{e(I.id),s(I.question),o(!1),g(new Map),f(new Map),u(_=>{if(_&&clearTimeout(_),I.duration>0){const S=I.duration<1e3?Td:I.duration;return setTimeout(()=>E(),S)}return null})}),i.useEffect(()=>{const I=()=>{f(S=>{const T=[];if(S.forEach((y,A)=>{y.secondsLeft--,y.secondsLeft<=0&&T.push(A)}),T.length===0)return S;const R=new Map(S);return T.forEach(y=>R.delete(y)),R})},_=setInterval(()=>I(),1e3);return()=>clearInterval(_)},[]),i.useEffect(()=>()=>{u(I=>(I&&clearTimeout(I),null))},[]),{question:n,answerSent:r,answerCounts:d,userAnswers:m,vote:b}},Dv=xv,Pv=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(null),[r,o]=i.useState(0),[c,u]=i.useState(0),[d,g]=i.useState(0),[m,f]=i.useState(!1),[p,C]=i.useState(!1),[E,b]=fl("nitro.screensize",{width:window.innerWidth,height:window.innerHeight}),I=()=>{if(z().isModerator)return!0;const y=Oe();return y?!!(y.isRoomOwner||y.controllerLevel>=Ke.GUILD_ADMIN):!1},_=(y=null)=>{if(y===!0){f(!0);return}if(y===!1){f(I());return}f(I())},S=y=>{o(y),M(new uE(y))},T=y=>{z().giveRespect(y),u(z().respectsLeft)},R=y=>{z().givePetRespect(y),g(z().respectsPetLeft)};return F(jm,y=>{const A=y.getParser();e(A.userInfo),s(A.userInfo.figure),u(A.userInfo.respectsRemaining),g(A.userInfo.respectsPetRemaining)}),F(oE,y=>{const A=y.getParser();_(A.isBuilder)}),F(aE,()=>{_()}),F(iE,()=>{_(!0)}),F(lE,()=>{_(!1)}),F(cE,y=>{const A=y.getParser();s(A.figure)}),F(Xm,y=>{const A=y.getParser();o(A.chatType)}),i.useEffect(()=>{const y=pi("nitro.screensize");if(y&&(y.width!==window.innerWidth||y.height!==window.innerHeight)){let U=window.localStorage.length;for(;U>0;){const L=window.localStorage.key(U);L&&L.startsWith("nitro.window")&&window.localStorage.removeItem(L),U--}}const A=U=>b({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[b]),i.useEffect(()=>{m||_()},[]),i.useEffect(()=>{m||C(!1)},[m]),{userInfo:a,userFigure:n,chatStyleId:r,userRespectRemaining:c,petRespectRemaining:d,respectUser:T,respectPet:R,updateChatStyleId:S,canUseBuilder:m,isBuilderVisible:p,setIsBuilderVisible:C}},Zn=()=>Xe(Pv),Mv=a=>i.useEffect(a,[]),og=a=>Mv(()=>a()),ag=a=>{const{achievement:e=null,scale:n=1,...s}=a;return e?t(ze,{badgeCode:Sn.getAchievementBadgeCode(e),isGrayscale:!Sn.getAchievementHasStarted(e),scale:n,...s}):null},Lv=a=>{const{achievement:e=null}=a,{selectedAchievement:n=null,setSelectedAchievementId:s=null}=gl();return e?t(Se,{itemActive:n===e,itemUnseen:e.unseen>0,onClick:r=>s(e.achievementId),children:t(ag,{achievement:e})}):null},Uv=a=>{const{achievements:e=null}=a;return t(Le,{columnCount:6,columnMinWidth:50,columnMinHeight:50,children:e&&e.length>0&&e.map((n,s)=>t(Lv,{achievement:n},s))})},Fv=a=>{const{achievement:e=null}=a;return e?l(w,{shrink:!0,className:"bg-muted rounded p-2 text-black",gap:2,overflow:"hidden",children:[l(v,{center:!0,gap:1,children:[t(ag,{className:"nitro-achievements-badge-image",achievement:e,scale:2}),t(N,{fontWeight:"bold",children:h("achievements.details.level",["level","limit"],[Sn.getAchievementLevel(e).toString(),e.levelCount.toString()])})]}),l(v,{fullWidth:!0,justifyContent:"center",overflow:"hidden",children:[l(v,{gap:1,children:[t(N,{fontWeight:"bold",truncate:!0,children:fa(Sn.getAchievementBadgeCode(e))}),t(N,{textBreak:!0,children:qc(Sn.getAchievementBadgeCode(e))})]}),(e.levelRewardPoints>0||e.scoreLimit>0)&&l(v,{gap:1,children:[e.levelRewardPoints>0&&l(w,{alignItems:"center",gap:1,children:[t(N,{truncate:!0,className:"small",children:h("achievements.details.reward")}),l(w,{center:!0,className:"fw-bold small",gap:1,children:[e.levelRewardPoints,t(mt,{type:e.levelRewardPointType})]})]}),e.scoreLimit>0&&t(Zc,{text:h("achievements.details.progress",["progress","limit"],[(e.currentPoints+e.scoreAtStartOfLevel).toString(),(e.scoreLimit+e.scoreAtStartOfLevel).toString()]),progress:e.currentPoints+e.scoreAtStartOfLevel,maxProgress:e.scoreLimit+e.scoreAtStartOfLevel})]})]})]}):null},Vv=a=>{const{category:e=null}=a,{selectedAchievement:n=null,setSelectedAchievementId:s=null}=gl();return i.useEffect(()=>{var r,o;e&&(n||s((o=(r=e==null?void 0:e.achievements)==null?void 0:r[0])==null?void 0:o.achievementId))},[e,n,s]),e?l(v,{fullHeight:!0,justifyContent:"between",children:[t(Uv,{achievements:e.achievements}),!!n&&t(Fv,{achievement:n})]}):null},Bv=a=>{const{category:e=null,selectedCategoryCode:n=null,setSelectedCategoryCode:s=null}=a;if(!e)return null;const r=Sn.getAchievementCategoryProgress(e),o=Sn.getAchievementCategoryMaxProgress(e),c=Sn.getAchievementCategoryImageUrl(e,r),u=Sn.getAchievementCategoryTotalUnseen(e);return l(Se,{itemActive:n===e.code,itemCount:u,itemCountMinimum:0,gap:1,onClick:d=>s(e.code),children:[t(N,{fullWidth:!0,center:!0,small:!0,className:"pt-1",children:h(`quests.${e.code}.name`)}),t(Fh,{position:"relative",imageUrl:c,children:l(N,{fullWidth:!0,center:!0,position:"absolute",variant:"white",style:{fontSize:12,bottom:9},children:[r," / ",o]})})]})},Gv=a=>{const{categories:e=null,selectedCategoryCode:n=null,setSelectedCategoryCode:s=null}=a;return t(Le,{columnCount:3,columnMinWidth:90,columnMinHeight:100,children:e&&e.length>0&&e.map((r,o)=>t(Bv,{category:r,selectedCategoryCode:n,setSelectedCategoryCode:s},o))})},Hv=a=>{const[e,n]=i.useState(!1),{achievementCategories:s=[],selectedCategoryCode:r=null,setSelectedCategoryCode:o=null,achievementScore:c=0,getProgress:u=0,getMaxProgress:d=0,selectedCategory:g=null}=gl();return i.useEffect(()=>{const m={linkReceived:f=>{const p=f.split("/");if(!(p.length<2))switch(p[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(C=>!C);return}},eventUrlPrefix:"achievements/"};return _t(m),()=>St(m)},[]),e?l(ie,{uniqueKey:"achievements",className:"nitro-achievements",theme:"primary-slim",children:[t(ae,{headerText:h("inventory.achievements"),onCloseClick:m=>n(!1)}),g&&l(Uh,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",gap:3,children:[t(P,{onClick:m=>o(null),className:"nitro-achievements-back-arrow"}),l(v,{grow:!0,gap:0,children:[t(N,{fontSize:4,fontWeight:"bold",className:"text-small",children:h(`quests.${g.code}.name`)}),t(N,{children:h("achievements.details.categoryprogress",["progress","limit"],[g.getProgress().toString(),g.getMaxProgress().toString()])})]}),t(ks,{imageUrl:Sn.getAchievementCategoryImageUrl(g,null,!0)})]}),l(ne,{gap:1,children:[!g&&l(j,{children:[t(Gv,{categories:s,selectedCategoryCode:r,setSelectedCategoryCode:o}),l(v,{grow:!0,justifyContent:"end",gap:1,children:[t(N,{small:!0,center:!0,children:h("achievements.categories.score",["score"],[c.toString()])}),t(Zc,{text:h("achievements.categories.totalprogress",["progress","limit"],[u.toString(),d.toString()]),progress:u,maxProgress:d})]})]}),g&&t(Vv,{category:g})]})]}):null},lr=a=>{const{icon:e=null,selected:n=!1,classNames:s=[],children:r=null,...o}=a,c=i.useMemo(()=>{const u=["nitro-avatar-editor-spritesheet"];return e&&e.length&&u.push(e+"-icon"),n&&u.push("selected"),s.length&&u.push(...s),u},[e,n,s]);return t(P,{classNames:c,...o})},Wv=a=>{const{figureData:e=null}=a,[n,s]=i.useState(-1),r=o=>{o<Aa.MIN_DIRECTION&&(o=Aa.MAX_DIRECTION+(o+1)),o>Aa.MAX_DIRECTION&&(o=o-(Aa.MAX_DIRECTION+1)),e.direction=o};return i.useEffect(()=>{if(e)return e.notify=()=>s(o=>o+1),()=>{e.notify=null}},[e]),l(v,{className:"figure-preview-container",overflow:"hidden",position:"relative",children:[t($e,{figure:e.getFigureString(),direction:e.direction,scale:2}),t(lr,{className:"avatar-spotlight",icon:"spotlight"}),t(P,{className:"avatar-shadow"}),l(P,{className:"arrow-container",children:[t(lr,{pointer:!0,icon:"arrow-left",onClick:o=>r(e.direction+1)}),t(lr,{pointer:!0,icon:"arrow-right",onClick:o=>r(e.direction-1)})]})]})},jv=a=>{const{partItem:e=null,children:n=null,...s}=a,[r,o]=i.useState(-1),c=X("hc.disabled",!1);return i.useEffect(()=>{const u=()=>o(d=>d+1);return e.notify=u,()=>e.notify=null},[e]),l(Se,{itemImage:e.isClear?void 0:e.imageUrl,itemActive:e.isSelected,...s,children:[!c&&e.isHC&&t(mt,{className:"position-absolute end-1 bottom-1",type:"hc"}),e.isClear&&t(lr,{icon:"clear"}),e.isSellable&&t(lr,{icon:"sellable",position:"absolute",className:"end-1 bottom-1"}),n]})},qv=a=>{const{model:e=null,category:n=null,setMaxPaletteCount:s=null}=a,r=i.useRef(null),o=i.useCallback(c=>{const u=n.parts.indexOf(c);if(u===-1)return;e.selectPart(n.name,u);const d=n.getCurrentPart();s(d.maxColorIndex||1)},[e,n,s]);return i.useEffect(()=>{!e||!n||!r||!r.current||(r.current.scrollTop=0)},[e,n]),t(Le,{innerRef:r,columnCount:3,columnMinHeight:50,children:n.parts.length>0&&n.parts.map((c,u)=>t(jv,{partItem:c,onClick:d=>o(c)},u))})},zv=a=>{const{colorItem:e=null,children:n=null,...s}=a,[r,o]=i.useState(-1),c=X("hc.disabled",!1);return i.useEffect(()=>{const u=()=>o(d=>d+1);return e.notify=u,()=>e.notify=null},[e]),l(Se,{itemHighlight:!0,itemColor:e.color,itemActive:e.isSelected,className:"clear-bg",...s,children:[!c&&e.isHC&&t(mt,{className:"position-absolute end-1 bottom-1",type:"hc"}),n]})},wd=a=>{const{model:e=null,category:n=null,paletteSet:s=[],paletteIndex:r=-1}=a,o=i.useRef(null),c=i.useCallback(u=>{const d=s.indexOf(u);d!==-1&&e.selectColor(n.name,d,r)},[e,n,s,r]);return i.useEffect(()=>{!e||!n||!o||!o.current||(o.current.scrollTop=0)},[e,n]),t(Le,{innerRef:o,gap:1,columnCount:5,columnMinWidth:30,children:s.length>0&&s.map((u,d)=>t(zv,{colorItem:u,onClick:g=>c(u)},d))})},Yv=a=>{const{model:e=null,gender:n=null,setGender:s=null}=a,[r,o]=i.useState(null),[c,u]=i.useState(1),d=i.useCallback(g=>{const m=e.categories.get(g);if(m){m.init(),o(m);for(const f of m.parts)if(!(!f||!f.isSelected)){u(f.maxColorIndex||1);break}}},[e]);return i.useEffect(()=>{e.init();for(const g of e.categories.keys()){d(g);break}},[e,d]),!e||!r?null:l(re,{children:[l(v,{size:2,children:[e.canSetGender&&l(j,{children:[t(w,{center:!0,pointer:!0,className:"category-item",onClick:g=>s(Re.MALE),children:t(lr,{icon:"male",selected:n===Re.MALE})}),t(w,{center:!0,pointer:!0,className:"category-item",onClick:g=>s(Re.FEMALE),children:t(lr,{icon:"female",selected:n===Re.FEMALE})})]}),!e.canSetGender&&e.categories&&e.categories.size>0&&Array.from(e.categories.keys()).map(g=>{const m=e.categories.get(g);return t(w,{center:!0,pointer:!0,className:"category-item",onClick:f=>d(g),children:t(lr,{icon:m.name,selected:r===m})},g)})]}),t(v,{size:5,overflow:"hidden",children:t(qv,{model:e,category:r,setMaxPaletteCount:u})}),l(v,{size:5,overflow:"hidden",children:[c>=1&&t(wd,{model:e,category:r,paletteSet:r.getPalette(0),paletteIndex:0}),c===2&&t(wd,{model:e,category:r,paletteSet:r.getPalette(1),paletteIndex:1})]})]})},Kv=a=>{const{figureData:e=null,savedFigures:n=[],setSavedFigures:s=null,loadAvatarInEditor:r=null}=a,o=X("hc.disabled",!1),c=i.useCallback(g=>{if(g>=n.length||g<0)return;const[m,f]=n[g];r(m.getFigureString(),f)},[n,r]),u=i.useCallback(g=>{if(!e||g>=n.length||g<0)return;const m=[...n],f=e.getFigureString(),p=e.gender;m[g]=[xt().createFigureContainer(f),p],s(m),M(new dE(g+1,f,p))},[e,n,s]),d=i.useMemo(()=>{if(!n||!n.length)return[];const g=[];return n.forEach(([m,f],p)=>{let C=0;m&&(C=xt().getFigureClubLevel(m,f)),g.push(l(Se,{position:"relative",overflow:"hidden",className:"nitro-avatar-editor-wardrobe-figure-preview",children:[m&&t($e,{figure:m.getFigureString(),gender:f,direction:2}),t(P,{className:"avatar-shadow"}),!o&&C>0&&t(mt,{className:"position-absolute top-1 start-1",type:"hc"}),l(w,{gap:1,className:"button-container",children:[t(D,{variant:"link",fullWidth:!0,onClick:E=>u(p),children:h("avatareditor.wardrobe.save")}),m&&t(D,{variant:"link",fullWidth:!0,onClick:E=>c(p),disabled:C>Dn(),children:h("generic_usable.button.use")})]})]},p))}),g},[n,o,u,c]);return t(Le,{columnCount:5,columnMinWidth:80,columnMinHeight:140,children:d})},$v="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",Qv="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",Xv=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(null),[o,c]=i.useState(null),[u,d]=i.useState(null),[g,m]=i.useState(null),[f,p]=i.useState([]),[C,E]=i.useState([]),[b,I]=i.useState([]),[_,S]=i.useState(!1),[T,R]=i.useState(null),[y,A]=i.useState(null),[U,L]=i.useState(!0),[O,k]=i.useState(!1),x=i.useMemo(()=>X("avatar.wardrobe.max.slots",10),[]);F(mE,ee=>{const me=ee.getParser();p(me.figureSetIds),E(me.boundsFurnitureNames)}),F(hE,ee=>{const me=ee.getParser(),ve=[];let Fe=0;for(;Fe<x;)ve.push([null,null]),Fe++;for(let[Ve,[Pt,ke]]of me.looks.entries()){const ut=xt().createFigureContainer(Pt);ve[Ve-1]=[ut,ke]}I(ve)});const V=i.useCallback(ee=>{u&&m(u.get(ee))},[u]),B=i.useCallback(()=>{const ee=new Map;ee.set(Hs.GENERIC,new l_),ee.set(Hs.HEAD,new y_),ee.set(Hs.TORSO,new O_),ee.set(Hs.LEGS,new R_),d(ee)},[]),W=i.useCallback(()=>{const ee=new Map,me=new Re,ve=new Re;me.loadAvatarData($v,Re.MALE),ve.loadAvatarData(Qv,Re.FEMALE),ee.set(Re.MALE,me),ee.set(Re.FEMALE,ve),r(ee),c(ee.get(Re.MALE))},[]),G=i.useCallback((ee,me,ve=!0)=>{me=kt.getGender(me);let Fe=o;me!==Fe.gender&&(Fe=s.get(me)),ee!==Fe.getFigureString()&&Fe.loadAvatarData(ee,me),Fe!==o&&c(Fe),ve&&(R(o.getFigureString()),A(o.gender))},[s,o]),H=i.useCallback(ee=>{switch(ee){case ms.ACTION_CLEAR:G(o.getFigureStringWithFace(0,!1),o.gender,!1),B();return;case ms.ACTION_RESET:G(T,y),B();return;case ms.ACTION_RANDOMIZE:const me=w_(o,o.gender,Dn(),f,[Re.FACE]);G(me,o.gender,!1),B();return;case ms.ACTION_SAVE:M(new Jm(o.gender,o.getFigureString())),n(!1);return}},[o,T,y,f,G,B]),Q=i.useCallback(ee=>{ee=kt.getGender(ee),c(s.get(ee))},[s]);return i.useEffect(()=>{const ee={linkReceived:me=>{const ve=me.split("/");if(!(ve.length<2))switch(ve[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(Fe=>!Fe);return}},eventUrlPrefix:"avatar-editor/"};return _t(ee),()=>St(ee)},[]),i.useEffect(()=>{I(new Array(x))},[x]),i.useEffect(()=>{_&&(m(null),M(new gE))},[_]),i.useEffect(()=>{g&&S(!1)},[g]),i.useEffect(()=>{u&&V(Hs.GENERIC)},[u,V]),i.useEffect(()=>{if(o)return kt.CURRENT_FIGURE=o,B(),()=>kt.CURRENT_FIGURE=null},[o,B]),i.useEffect(()=>(kt.FIGURE_SET_IDS=f,kt.BOUND_FURNITURE_NAMES=C,B(),()=>{kt.FIGURE_SET_IDS=null,kt.BOUND_FURNITURE_NAMES=null}),[f,C,B]),i.useEffect(()=>{if(e&&!s){W(),k(!0);return}},[e,s,W]),i.useEffect(()=>{!e||!O||!U||(G(z().figure,z().gender),L(!1))},[e,O,U,G]),i.useEffect(()=>{if(!e)return()=>{L(!0)}},[e]),!e||!o?null:l(ie,{uniqueKey:"avatar-editor",className:"nitro-avatar-editor",children:[t(ae,{headerText:h("avatareditor.title"),onCloseClick:ee=>n(!1)}),l(As,{children:[u&&u.size>0&&Array.from(u.keys()).map(ee=>{const me=g&&g.name===ee;return t(Mn,{isActive:me,onClick:ve=>V(ee),children:h(`avatareditor.category.${ee}`)},ee)}),t(Mn,{isActive:_,onClick:ee=>S(!0),children:h("avatareditor.category.wardrobe")})]}),t(ne,{children:l(re,{children:[l(v,{size:9,overflow:"hidden",children:[g&&!_&&t(Yv,{model:g,gender:o.gender,setGender:Q}),_&&t(Kv,{figureData:o,savedFigures:b,setSavedFigures:I,loadAvatarInEditor:G})]}),l(v,{size:3,overflow:"hidden",children:[t(Wv,{figureData:o}),l(v,{grow:!0,gap:1,children:[l(vs,{children:[t(D,{variant:"secondary",onClick:ee=>H(ms.ACTION_RESET),children:t(Mg,{className:"fa-icon"})}),t(D,{variant:"secondary",onClick:ee=>H(ms.ACTION_CLEAR),children:t(Dc,{className:"fa-icon"})}),t(D,{variant:"secondary",onClick:ee=>H(ms.ACTION_RANDOMIZE),children:t(Lg,{className:"fa-icon"})})]}),t(D,{className:"w-100",variant:"success",onClick:ee=>H(ms.ACTION_SAVE),children:h("avatareditor.save")})]})]})]})})]})},Jv=5,Zv=a=>{const{onClose:e=null,onEdit:n=null,onDelete:s=null}=a,{cameraRoll:r=null,setCameraRoll:o=null,selectedPictureIndex:c=-1,setSelectedPictureIndex:u=null}=Hh(),{simpleAlert:d=null}=Je(),g=i.useRef(),m=c>-1?r[c]:null,f=()=>{if(!g||!g.current)return null;const C=g.current.getBoundingClientRect();return new Dm(Math.floor(C.x),Math.floor(C.y),Math.floor(C.width),Math.floor(C.height))},p=()=>{if(c>-1){u(-1);return}const C=Y().createTextureFromRoom(Oe().roomId,1,f()),E=[...r];E.length>=Jv&&(d(h("camera.full.body")),E.pop()),ys(Rs.CAMERA_SHUTTER),E.push(new k_(C,Ts.generateImageUrl(C))),o(E)};return t(dr,{uniqueKey:"nitro-camera-capture",children:l(v,{center:!0,className:"nitro-camera-capture",gap:0,children:[m&&t("img",{alt:"",className:"camera-area",src:m.imageUrl}),l("div",{className:"camera-canvas drag-handler",children:[t("div",{className:"position-absolute header-close",onClick:e,children:t(Ln,{className:"fa-icon"})}),!m&&t("div",{ref:g,className:"camera-area camera-view-finder"}),m&&t("div",{className:"camera-area camera-frame",children:l("div",{className:"camera-frame-preview-actions w-100 position-absolute bottom-0 py-2 text-center",children:[t("button",{className:"btn btn-success me-3",title:h("camera.editor.button.tooltip"),onClick:n,children:h("camera.editor.button.text")}),t("button",{className:"btn btn-danger",onClick:s,children:h("camera.delete.button.text")})]})}),t("div",{className:"d-flex justify-content-center",children:t("div",{className:"camera-button",title:h("camera.take.photo.button.tooltip"),onClick:p})})]}),r.length>0&&t(w,{gap:2,justifyContent:"center",className:"camera-roll d-flex justify-content-center py-2",children:r.map((C,E)=>t("img",{alt:"",src:C.imageUrl,onClick:b=>u(E)},E))})]})})},eT=a=>{const{base64Url:e=null,onCloseClick:n=null,onCancelClick:s=null,price:r=null}=a,[o,c]=i.useState(null),[u,d]=i.useState(null),[g,m]=i.useState(0),[f,p]=i.useState(!1),[C,E]=i.useState(!1),[b,I]=i.useState(0),_=i.useMemo(()=>X("camera.publish.disabled",!1),[]);F(fE,T=>{m(R=>R+1),E(!1)}),F(pE,T=>{const R=T.getParser();d(R.extraDataId),I(R.secondsToWait),p(R.ok),E(!1)}),F(IE,T=>{const R=T.getParser();c(X("camera.url")+"/"+R.url)});const S=(T,R=null)=>{switch(T){case"close":n();return;case"buy":if(C)return;E(!0),M(new CE(""));return;case"publish":if(C)return;E(!0),M(new EE);return;case"cancel":s();return}};return i.useEffect(()=>{e&&Y().saveBase64AsScreenshot(e)},[e]),r?l(ie,{className:"nitro-camera-checkout",theme:"primary-slim",children:[t(ae,{headerText:h("camera.confirm_phase.title"),onCloseClick:T=>S("close")}),l(ne,{children:[l(w,{center:!0,children:[o&&o.length&&t(ks,{className:"picture-preview border",imageUrl:o}),(!o||!o.length)&&t(w,{center:!0,className:"picture-preview border",children:t(N,{bold:!0,children:h("camera.loading")})})]}),l(w,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[l(v,{size:_?10:6,gap:1,children:[t(N,{bold:!0,children:h("camera.purchase.header")}),(r.credits>0||r.duckets>0)&&l(w,{gap:1,children:[t(N,{children:h("catalog.purchase.confirmation.dialog.cost")}),r.credits>0&&l(w,{gap:1,children:[t(N,{bold:!0,children:r.credits}),t(mt,{type:-1})]}),r.duckets>0&&l(w,{gap:1,children:[t(N,{bold:!0,children:r.duckets}),t(mt,{type:5})]})]}),g>0&&l(N,{children:[t(N,{bold:!0,children:h("camera.purchase.count.info")})," ",g,t("u",{className:"ms-1 cursor-pointer",onClick:()=>te("inventory/toggle"),children:h("camera.open.inventory")})]})]}),t(w,{alignItems:"center",children:t(D,{variant:"success",disabled:C,onClick:T=>S("buy"),children:h(g?"camera.buy.another.button.text":"buy")})})]}),!_&&l(w,{justifyContent:"between",alignItems:"center",className:"bg-muted rounded p-2",children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h(f?"camera.publish.successful":"camera.publish.explanation")}),t(N,{children:h(f?"camera.publish.success.short.info":"camera.publish.detailed.explanation")}),f&&t("a",{href:u,rel:"noreferrer",target:"_blank",children:h("camera.link.to.published")}),!f&&r.publishDucketPrice>0&&l(w,{gap:1,children:[t(N,{children:h("catalog.purchase.confirmation.dialog.cost")}),l(w,{gap:1,children:[t(N,{bold:!0,children:r.publishDucketPrice}),t(mt,{type:5})]})]}),b>0&&t("div",{className:"mt-1 text-center fw-bold",children:h("camera.publish.wait",["minutes"],[Math.ceil(b/60).toString()])})]}),!f&&t(w,{className:"d-flex align-items-end",children:t(D,{variant:"success",disabled:C||b>0,onClick:T=>S("publish"),children:h("camera.publish.button.text")})})]}),t(N,{center:!0,children:h("camera.warning.disclaimer")}),t(w,{justifyContent:"end",children:t(D,{onClick:T=>S("cancel"),children:h("generic.cancel")})})]})]}):null},tT=a=>{const{effect:e=null,thumbnailUrl:n=null,isActive:s=!1,isLocked:r=!1,selectEffect:o=null,removeEffect:c=null}=a;return l(Se,{title:h(r?`camera.effect.required.level ${e.minLevel}`:`camera.effect.name.${e.name}`),itemActive:s,onClick:u=>!s&&o(),children:[s&&t(D,{variant:"danger",className:"rounded-circle remove-effect",onClick:c,children:t(Ln,{className:"fa-icon"})}),!r&&n&&n.length>0&&t("div",{className:"effect-thumbnail-image border",children:t("img",{alt:"",src:n})}),r&&l(N,{center:!0,bold:!0,children:[t("div",{children:t(vm,{className:"fa-icon"})}),e.minLevel]})]})},nT=a=>{const{myLevel:e=0,selectedEffects:n=[],effects:s=[],thumbnails:r=[],processAction:o=null}=a;return t(re,{columnCount:3,overflow:"auto",children:s&&s.length>0&&s.map((c,u)=>{const d=r.find(m=>m.effectName===c.name),g=n.findIndex(m=>m.effect.name===c.name)>-1;return t(tT,{effect:c,thumbnailUrl:d&&d.thumbnailUrl||null,isActive:g,isLocked:c.minLevel>e,selectEffect:()=>o("select_effect",c.name),removeEffect:()=>o("remove_effect",c.name)},u)})})},yd=[oa.COLORMATRIX,oa.COMPOSITE],sT=a=>{const{picture:e=null,availableEffects:n=null,myLevel:s=1,onClose:r=null,onCancel:o=null,onCheckout:c=null}=a,[u,d]=i.useState(yd[0]),[g,m]=i.useState(null),[f,p]=i.useState([]),[C,E]=i.useState([]),[b,I]=i.useState(!1),_=i.useMemo(()=>n.filter(k=>k.colorMatrix),[n]),S=i.useMemo(()=>n.filter(k=>k.texture),[n]),T=i.useCallback(()=>u===oa.COLORMATRIX?_:S,[u,_,S]),R=i.useCallback(k=>!k||!k.length||!f||!f.length?-1:f.findIndex(x=>x.effect.name===k),[f]),y=i.useMemo(()=>R(g),[g,R]),A=i.useMemo(()=>g&&f[y]||null,[g,y,f]),U=i.useCallback(k=>{const x=y;x!==-1&&p(V=>{const B=[...V],W=B[x];return B[y]=new Dl(W.effect,k),B})},[y,p]),L=i.useMemo(()=>xo().applyEffects(e.texture,f,b).src,[e,f,b]),O=i.useCallback((k,x=null)=>{switch(k){case"close":r();return;case"cancel":o();return;case"checkout":c(L);return;case"change_tab":d(String(x));return;case"select_effect":{if(R(x)>=0)return;const B=n.find(W=>W.name===x);if(!B)return;p(W=>[...W,new Dl(B,1)]),m(B.name);return}case"remove_effect":{let V=R(x);if(V===-1)return;p(B=>{const W=[...B];return W.splice(V,1),W}),g===x&&m(null);return}case"clear_effects":m(null),p([]);return;case"download":{const V=new Image;V.src=L,window.open("").document.write(V.outerHTML);return}case"zoom":I(!b);return}},[b,n,g,L,R,o,c,r,I,p]);return i.useEffect(()=>{const k=[];for(const x of n)k.push(new A_(x.name,xo().applyEffects(e.texture,[new Dl(x,1)],!1).src));E(k)},[e,n]),l(ie,{className:"nitro-camera-editor",children:[t(ae,{headerText:h("camera.editor.button.text"),onCloseClick:k=>O("close")}),t(As,{children:yd.map(k=>t(Mn,{isActive:u===k,onClick:x=>O("change_tab",k),children:t("i",{className:"icon icon-camera-"+k})},k))}),t(ne,{children:l(re,{children:[t(v,{size:5,overflow:"hidden",children:t(nT,{myLevel:s,selectedEffects:f,effects:T(),thumbnails:C,processAction:O})}),l(v,{size:7,justifyContent:"between",overflow:"hidden",children:[l(v,{center:!0,children:[t(ks,{imageUrl:L,className:"picture-preview"}),g&&l(v,{center:!0,fullWidth:!0,gap:1,children:[t(N,{children:h("camera.effect.name."+g)}),t(Vt,{className:"nitro-slider",min:0,max:1,step:.01,value:A.alpha,onChange:k=>U(k),renderThumb:(k,x)=>t("div",{...k,children:x.valueNow})})]})]}),l(w,{justifyContent:"between",children:[l(vs,{children:[t(D,{onClick:k=>O("clear_effects"),children:t(Dc,{className:"fa-icon"})}),t(D,{onClick:k=>O("download"),children:t(Ug,{className:"fa-icon"})}),l(D,{onClick:k=>O("zoom"),children:[b&&t(Fg,{className:"fa-icon"}),!b&&t(Vg,{className:"fa-icon"})]})]}),l(w,{gap:1,children:[t(D,{onClick:k=>O("cancel"),children:h("generic.cancel")}),t(D,{onClick:k=>O("checkout"),children:h("camera.preview.button.text")})]})]})]})]})})]})},qr=0,qa=1,Rd=2,Od=3,rT=a=>{const[e,n]=i.useState(qr),[s,r]=i.useState(null),{availableEffects:o=[],selectedPictureIndex:c=-1,cameraRoll:u=[],setCameraRoll:d=null,myLevel:g=0,price:m={credits:0,duckets:0,publishDucketPrice:0}}=Hh(),f=C=>{switch(C){case"close":n(qr);return;case"edit":n(Rd);return;case"delete":d(E=>{const b=[...E];return b.splice(c,1),b});return;case"editor_cancel":n(qa);return}},p=C=>{r(C),n(Od)};return Ye(tn.ENDED,C=>n(qr)),i.useEffect(()=>{const C={linkReceived:E=>{const b=E.split("/");if(!(b.length<2))switch(b[1]){case"show":n(qa);return;case"hide":n(qr);return;case"toggle":n(I=>I?qr:qa);return}},eventUrlPrefix:"camera/"};return _t(C),()=>St(C)},[]),e===qr?null:l(j,{children:[e===qa&&t(Zv,{onClose:()=>f("close"),onEdit:()=>f("edit"),onDelete:()=>f("delete")}),e===Rd&&t(sT,{picture:u[c],myLevel:g,onClose:()=>f("close"),onCancel:()=>f("editor_cancel"),onCheckout:p,availableEffects:o}),e===Od&&t(eT,{base64Url:s,onCloseClick:()=>f("close"),onCancelClick:()=>f("editor_cancel"),price:m})]})},oT=a=>{const{itemId:e=-1,state:n=null,product:s=null,active:r=!1,onClick:o=null}=a,c=u=>{let d=z().getFloorItemDataByName(u),g=null;return d?g=Y().getFurnitureFloorIconUrl(d.id):(d=z().getWallItemDataByName(u),d&&(g=Y().getFurnitureWallIconUrl(d.id))),g};return l(v,{fit:!0,center:!0,pointer:!0,className:`campaign-spritesheet campaign-day-generic-bg rounded calendar-item ${r?"active":""}`,onClick:()=>o(e),children:[n===ln.STATE_UNLOCKED&&t(w,{center:!0,className:"campaign-spritesheet unlocked-bg",children:t(w,{center:!0,className:"campaign-spritesheet campaign-opened",children:s&&t(ks,{imageUrl:s.customImage?X("image.library.url")+s.customImage:c(s.productName)})})}),n!==ln.STATE_UNLOCKED&&l(w,{center:!0,className:"campaign-spritesheet locked-bg",children:[n===ln.STATE_LOCKED_AVAILABLE&&t(P,{className:"campaign-spritesheet available"}),(n===ln.STATE_LOCKED_EXPIRED||n===ln.STATE_LOCKED_FUTURE)&&t(P,{className:"campaign-spritesheet unavailable"})]})]})},Wl=5,aT=a=>{const{onClose:e=null,campaignName:n=null,currentDay:s=null,numDays:r=null,missedDays:o=null,openedDays:c=null,openPackage:u=null,receivedProducts:d=null}=a,[g,m]=i.useState(s),[f,p]=i.useState(Math.max(0,g-1)),C=T=>c.includes(T)?ln.STATE_UNLOCKED:T>s?ln.STATE_LOCKED_FUTURE:o.includes(T)?ln.STATE_LOCKED_EXPIRED:ln.STATE_LOCKED_AVAILABLE,E=T=>{switch(C(T)){case ln.STATE_UNLOCKED:return h("campaign.calendar.info.unlocked");case ln.STATE_LOCKED_FUTURE:return h("campaign.calendar.info.future");case ln.STATE_LOCKED_EXPIRED:return h("campaign.calendar.info.expired");default:return h("campaign.calendar.info.available.desktop")}},b=()=>{const T=g+1;T!==r&&(m(T),f+Wl<T+1&&p(f+1))},I=()=>{const T=g-1;T<0||(m(T),f>T&&p(f-1))},_=T=>{if(g===T){C(T)===ln.STATE_LOCKED_AVAILABLE&&u(T,!1);return}m(T)},S=()=>{const T=g;C(T)!==ln.STATE_UNLOCKED&&u(T,!0)};return l(ie,{className:"nitro-campaign-calendar",theme:"primary-slim",children:[t(ae,{headerText:h(`campaign.calendar.${n}.title`),onCloseClick:e}),l(ne,{children:[l(re,{fullHeight:!1,justifyContent:"between",alignItems:"center",children:[t(v,{size:1}),t(v,{size:10,children:l(w,{justifyContent:"between",alignItems:"center",gap:1,children:[l(v,{gap:1,children:[t(N,{fontSize:3,children:h("campaign.calendar.heading.day",["number"],[(g+1).toString()])}),t(N,{children:E(g)})]}),t("div",{children:z().isModerator&&t(D,{variant:"danger",onClick:S,children:"Force open"})})]})}),t(v,{size:1})]}),l(w,{fullHeight:!0,gap:2,children:[t(w,{center:!0,children:t(P,{pointer:!0,className:"campaign-spritesheet prev",onClick:I})}),t(v,{center:!0,fullWidth:!0,children:t(re,{fit:!0,columnCount:Wl,gap:1,children:[...Array(Wl)].map((T,R)=>{const y=f+R;return t(v,{overflow:"hidden",children:t(oT,{itemId:y,state:C(y),active:g===y,product:d.has(y)?d.get(y):null,onClick:_})},R)})})}),t(w,{center:!0,children:t(P,{pointer:!0,className:"campaign-spritesheet next",onClick:b})})]})]})]})},iT=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(-1),[o,c]=i.useState(new Map),[u,d]=i.useState(!1),g=(m,f=!1)=>{e&&(r(m),M(f?new bE(e.campaignName,m):new _E(e.campaignName,m)))};return F(SE,m=>{const f=m.getParser();f&&n(f.calendarData)}),F(NE,m=>{const f=m.getParser();if(!f)return;const p=s;f.doorOpened&&(n(C=>{const E=C.clone();return E.openedDays.push(s),E}),c(C=>{const E=new Map(C);return E.set(p,new x_(f.productName,f.customImage,f.furnitureClassName)),E})),r(-1)}),i.useEffect(()=>{const m={linkReceived:f=>{const p=f.split("/");if(!(p.length<2))switch(p[1]){case"calendar":d(!0);break}},eventUrlPrefix:"openView/"};return _t(m),()=>St(m)},[]),t(j,{children:e&&u&&t(aT,{onClose:()=>d(!1),campaignName:e.campaignName,currentDay:e.currentDay,numDays:e.campaignDays,openedDays:e.openedDays,missedDays:e.missedDays,openPackage:g,receivedProducts:o})})},ig=a=>{const{icon:e=0}=a,n=i.useMemo(()=>X("catalog.asset.icon.url").replace("%name%",e.toString()),[e]);return t(ks,{imageUrl:n,style:{width:20,height:20}})},lT=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(0),[o,c]=i.useState(0),[u,d]=i.useState(""),[g,m]=i.useState(""),[f,p]=i.useState(!0),[C,E]=i.useState(""),[b,I]=i.useState([]),[_,S]=i.useState(0),[T,R]=i.useState(0),[y,A]=i.useState(0),[U,L]=i.useState(0),[O,k]=i.useState(0),[x,V]=i.useState(!1),{catalogOptions:B=null}=Ue(),{friends:W}=Tn(),{giftConfiguration:G=null}=B,[H,Q]=i.useState([]),[ee,me]=i.useState([]),[ve,Fe]=i.useState(!0),Ve=i.useCallback(()=>{n(!1),r(0),c(0),d(""),m(""),p(!0),E(""),S(0),R(0),Fe(!1),me([]),b.length&&A(b[0].id)},[b]),Pt=i.useMemo(()=>G?G.defaultStuffTypes.findIndex(be=>be===H[_])>-1:!1,[H,G,_]),ke=i.useMemo(()=>G?(H[_]*1e3+G.ribbonTypes[T]).toString():"",[G,_,T,H]),ut=i.useMemo(()=>{if(!G||Pt)return!1;const be=H[_];return!(be===8||be>=3&&be<=6)},[G,_,Pt,H]),Gt=i.useMemo(()=>Pt?H[_]:y,[Pt,H,_,y]),xe=W.filter(be=>be.id!==-1),pe=be=>{const Be=be.target.value;let Bn=[];Be.length>0&&(Bn=xe.sort().filter(vo=>vo.name.includes(Be))),m(Be),Fe(!0),me(Bn)},pt=be=>{m(be),Fe(!1)},Bt=i.useCallback(be=>{switch(be){case"prev_box":S(Be=>Be===0?U:Be-1);return;case"next_box":S(Be=>Be===U?0:Be+1);return;case"prev_ribbon":R(Be=>Be===0?O:Be-1);return;case"next_ribbon":R(Be=>Be===O?0:Be+1);return;case"buy":if(!g||g.length===0){V(!0);return}M(new vE(s,o,u,g,C,Gt,_,T,f));return}},[Gt,u,U,O,C,o,s,g,_,T,f]);F(TE,be=>V(!0)),st([Os.PURCHASE_SUCCESS,kr.INIT_GIFT],be=>{switch(be.type){case Os.PURCHASE_SUCCESS:Ve();return;case kr.INIT_GIFT:const Be=be;Ve(),r(Be.pageId),c(Be.offerId),d(Be.extraData),n(!0);return}}),i.useEffect(()=>{V(!1)},[g]);const Vn=i.useCallback(()=>{G&&Q(be=>{let Be=[...G.boxTypes];return Be.push(G.defaultStuffTypes[Math.floor(Math.random()*(G.defaultStuffTypes.length-1))]),L(Be.length-1),k(Be.length-1),Be})},[G]);if(i.useEffect(()=>{if(!G)return;const be=[];for(const Be of G.stuffTypes){const Bn=z().getFloorItemData(Be);Bn&&Bn.colors&&Bn.colors.length>0&&be.push({id:Be,color:Ft.makeColorNumberHex(Bn.colors[0])})}Vn(),be.length&&(A(be[0].id),I(be))},[G,Vn]),i.useEffect(()=>{e&&Vn()},[Vn,e]),!G||!G.isEnabled||!e)return null;const No="catalog.gift_wrapping_new.box."+(Pt?"default":H[_]),Fr=`catalog.gift_wrapping_new.ribbon.${T}`,yn="catalog.gift_wrapping_new."+(Pt?"freeprice":"price");return l(ie,{uniqueKey:"catalog-gift",className:"nitro-catalog-gift",theme:"primary-slim",children:[t(ae,{headerText:h("catalog.gift_wrapping.title"),onCloseClick:Ve}),l(ne,{className:"text-black",children:[l(SS,{column:!0,children:[t(N,{children:h("catalog.gift_wrapping.receiver")}),t("input",{type:"text",className:zt("form-control form-control-sm",x&&"is-invalid"),value:g,onChange:be=>pe(be)}),ee.length>0&&ve&&t(v,{className:"autocomplete-gift-container",children:ee.map(be=>t(P,{className:"autocomplete-gift-item",onClick:Be=>pt(be.name),children:be.name},be.id))}),x&&t(P,{className:"invalid-feedback",children:h("catalog.gift_wrapping.receiver_not_found.title")})]}),t(Vh,{figure:z().figure,userName:z().userName,message:C,editable:!0,onChange:be=>E(be)}),l(P,{className:"form-check",children:[t("input",{className:"form-check-input",type:"checkbox",name:"showMyFace",checked:f,onChange:be=>p(Be=>!Be)}),t("label",{className:"form-check-label",children:h("catalog.gift_wrapping.show_face.title")})]}),l(w,{alignItems:"center",gap:2,children:[y&&t(P,{className:"gift-preview",children:t(Qc,{productType:Ee.FLOOR,productClassId:Gt,extraData:ke})}),l(v,{gap:1,children:[l(w,{gap:2,children:[l(vs,{children:[t(D,{variant:"primary",onClick:()=>Bt("prev_box"),children:t(bn,{className:"fa-icon"})}),t(D,{variant:"primary",onClick:()=>Bt("next_box"),children:t(_n,{className:"fa-icon"})})]}),l(v,{gap:1,children:[t(N,{fontWeight:"bold",children:h(No)}),l(w,{alignItems:"center",gap:1,children:[h(yn,["price"],[G.price.toString()]),t(mt,{type:-1})]})]})]}),l(w,{alignItems:"center",gap:2,className:ut?"":"opacity-50 pointer-events-none",children:[l(vs,{children:[t(D,{variant:"primary",onClick:()=>Bt("prev_ribbon"),children:t(bn,{className:"fa-icon"})}),t(D,{variant:"primary",onClick:()=>Bt("next_ribbon"),children:t(_n,{className:"fa-icon"})})]}),t(N,{fontWeight:"bold",children:h(Fr)})]})]})]}),l(v,{gap:1,className:ut?"":"opacity-50 pointer-events-none",children:[t(N,{fontWeight:"bold",children:h("catalog.gift_wrapping.pick_color")}),t(vs,{fullWidth:!0,children:b.map(be=>t(D,{variant:"dark",active:be.id===y,disabled:!ut,style:{backgroundColor:be.color},onClick:()=>A(be.id)},be.id))})]}),l(w,{justifyContent:"between",alignItems:"center",children:[t(D,{variant:"link",onClick:Ve,className:"text-black",children:h("cancel")}),t(D,{variant:"success",onClick:()=>Bt("buy"),children:h("catalog.gift_wrapping.give_gift")})]})]})]})},cT=a=>{const[e,n]=i.useState(""),{currentType:s=null,rootNode:r=null,offersToNodes:o=null,searchResult:c=null,setSearchResult:u=null,setCurrentPage:d=null}=Ue();return i.useEffect(()=>{let g=e==null?void 0:e.toLocaleLowerCase().replace(" ","");if(!g||!g.length){u(null);return}const m=setTimeout(()=>{const f=z().getAllFurnitureData({loadFurnitureData:null});if(!f||!f.length)return;const p=[],C=[];for(const I of f){if(s===Kn.BUILDER&&!I.availableForBuildersClub||s===Kn.NORMAL&&I.excludeDynamic)continue;const _=[I.className,I.name,I.description].join(" ").replace(/ /gi,"").toLowerCase();if(s===Kn.BUILDER&&I.purchaseOfferId===-1&&I.rentOfferId===-1)I.furniLine!==""&&C.indexOf(I.furniLine)<0&&_.indexOf(g)>=0&&C.push(I.furniLine);else if([...ju(o,I.purchaseOfferId),...ju(o,I.rentOfferId)].length&&(_.indexOf(g)>=0&&p.push(I),p.length===250))break}const E=[];for(const I of p)E.push(new Qb(I));let b=[];gh(g,C,r,b),u(new e_(g,E,b.filter(I=>I.isVisible))),d(new hi(-1,"default_3x3",new fh([],[]),E,!1,1))},300);return()=>clearTimeout(m)},[o,s,r,e,d,u]),l(w,{gap:1,children:[t(w,{fullWidth:!0,alignItems:"center",position:"relative",children:t("input",{type:"text",className:"form-control form-control-sm",placeholder:h("generic.search"),value:e,onChange:g=>n(g.target.value)})}),(!e||!e.length)&&t(D,{variant:"primary",className:"catalog-search-button",children:t(Pc,{className:"fa-icon"})}),e&&!!e.length&&t(D,{variant:"primary",className:"catalog-search-button",onClick:g=>n(""),children:t(Ln,{className:"fa-icon"})})]})},lg=a=>{const{node:e=null,child:n=!1}=a;return t(j,{children:e&&e.children.length>0&&e.children.map((s,r)=>s.isVisible?t(cg,{node:s,child:n},r):null)})},cg=a=>{const{node:e=null,child:n=!1}=a,{activateNode:s=null}=Ue();return l(P,{className:"nitro-catalog-navigation-section",children:[l(Se,{gap:1,column:!1,itemActive:e.isActive,onClick:r=>s(e),className:n?"inset":"",children:[t(ig,{icon:e.iconId}),t(N,{grow:!0,truncate:!0,children:e.localization}),e.isBranch&&l(j,{children:[e.isOpen&&t(kc,{className:"fa-icon"}),!e.isOpen&&t(Ac,{className:"fa-icon"})]})]}),e.isOpen&&e.isBranch&&t(lg,{node:e,child:!0})]})},uT=a=>{const{node:e=null}=a,{searchResult:n=null}=Ue();return l(j,{children:[t(cT,{}),t(v,{fullHeight:!0,className:"nitro-catalog-navigation-grid-container rounded p-1",overflow:"hidden",children:l(Le,{id:"nitro-catalog-main-navigation",gap:1,columnCount:1,children:[n&&n.filteredNodes.length>0&&n.filteredNodes.map((s,r)=>t(cg,{node:s},r)),!n&&t(lg,{node:e})]})})]})},dT=a=>{const{columnCount:e=5,...n}=a,[s,r]=i.useState(!1),[o,c]=i.useState(null),{currentOffer:u=null,setPurchaseOptions:d=null}=Ue(),{badgeCodes:g=[],activate:m=null,deactivate:f=null}=Cl(),p=i.useMemo(()=>{if(!o)return null;const C=new ha;return C.setValue(["0",o,"",""]),C},[o]);return i.useEffect(()=>{u&&d(C=>{const E={...C};return E.extraParamRequired=!0,E.extraData=p&&p.getValue(1)||null,E.previewStuffData=p,E})},[u,p,d]),i.useEffect(()=>{if(!s)return;const C=m();return()=>f(C)},[s,m,f]),i.useEffect(()=>(r(!0),()=>r(!1)),[]),t(Le,{columnCount:e,...n,children:g&&g.length>0&&g.map((C,E)=>t(Se,{itemActive:o===C,onClick:b=>c(C),children:t(ze,{badgeCode:C})},E))})},bl=a=>{const{currentPage:e=null,setCurrentOffer:n=null}=Ue();return i.useEffect(()=>{!e||!e.offers.length||n(e.offers[0])},[e,n]),null},au=a=>{const{offer:e=null,selectOffer:n=null,itemActive:s=!1,...r}=a,[o,c]=i.useState(!1),{requestOfferToMover:u=null}=Ue(),{isVisible:d=!1}=Lr(),g=i.useMemo(()=>e.pricingModel===Yt.PRICING_MODEL_BUNDLE?null:e.product.getIconUrl(e),[e]),m=p=>{switch(p.type){case Ae.MOUSE_DOWN:n(e),c(!0);return;case Ae.MOUSE_UP:c(!1);return;case Ae.ROLL_OUT:if(!o||!s||!d)return;u(e);return}},f=e.product;return f?t(Se,{itemImage:g,itemCount:e.pricingModel===Yt.PRICING_MODEL_MULTI?f.productCount:1,itemUniqueSoldout:f.uniqueLimitedItemSeriesSize&&!f.uniqueLimitedItemsLeft,itemUniqueNumber:f.uniqueLimitedItemSeriesSize,itemActive:s,onMouseDown:m,onMouseUp:m,onMouseOut:m,...r,children:e.product.productType===Ee.ROBOT&&t($e,{figure:e.product.extraParam,headOnly:!0,direction:3})}):null},Sa=a=>{const{columnCount:e=5,children:n=null,...s}=a,{currentOffer:r=null,setCurrentOffer:o=null,currentPage:c=null,setPurchaseOptions:u=null}=Ue(),d=i.useRef();if(i.useEffect(()=>{d&&d.current&&(d.current.scrollTop=0)},[c]),!c)return null;const g=m=>{m.activate(),!m.isLazy&&(o(m),m.product&&m.product.productType===Ee.WALL&&u(f=>{const p={...f};return p.extraData=m.product.extraParam||null,p}))};return l(Le,{innerRef:d,columnCount:e,...s,children:[c.offers&&c.offers.length>0&&c.offers.map((m,f)=>t(au,{itemActive:r&&r.offerId===m.offerId,offer:m,selectOffer:g},f)),n]})},_l=a=>{const{children:e=null,...n}=a,{currentOffer:s=null}=Ue();return!s||s.pricingModel!==Yt.PRICING_MODEL_SINGLE||!s.product.isUniqueLimitedItem?null:l(P,{...n,children:[t(CS,{className:"mx-auto",uniqueLimitedItemsLeft:s.product.uniqueLimitedItemsLeft,uniqueLimitedSeriesSize:s.product.uniqueLimitedItemSeriesSize}),e]})},us=a=>{const{noGiftOption:e=!1,purchaseCallback:n=null}=a;i.useState(!1);const[s,r]=i.useState(tt.NONE);fl(na.CATALOG_SKIP_PURCHASE_CONFIRMATION,!1);const{currentOffer:o=null,currentPage:c=null,purchaseOptions:u=null,setPurchaseOptions:d=null}=Ue(),{getCurrencyAmount:g=null}=Ur(),m=i.useCallback(E=>{switch(E.type){case Os.PURCHASE_SUCCESS:r(tt.NONE);return;case cr.PURCHASE_FAILED:r(tt.FAILED);return;case aa.NOT_ALLOWED:r(tt.FAILED);return;case ia.SOLD_OUT:r(tt.SOLD_OUT);return}},[]);st(Os.PURCHASE_SUCCESS,m),st(cr.PURCHASE_FAILED,m),st(aa.NOT_ALLOWED,m),st(ia.SOLD_OUT,m);const f=i.useMemo(()=>{if(!o||u.extraParamRequired&&(!u.extraData||!u.extraData.length))return!1;if(o.pricingModel===Yt.PRICING_MODEL_SINGLE){const E=o.product;if(E&&E.isUniqueLimitedItem)return!E.uniqueLimitedItemsLeft}return!1},[o,u]),p=(E=!1)=>{if(!o)return;if(Dn()<o.clubLevel){te("habboUI/open/hccenter");return}if(E){nt(new G_(o.page.pageId,o.offerId,u.extraData));return}if(r(tt.PURCHASE),n){n();return}let b=o.page.pageId;M(new rl(b,o.offerId,u.extraData,u.quantity))};return i.useEffect(()=>{o&&r(tt.NONE)},[o,d]),i.useEffect(()=>{let E=null;return(s===tt.CONFIRM||s===tt.FAILED)&&(E=setTimeout(()=>r(tt.NONE),3e3)),()=>{E&&clearTimeout(E)}},[s]),o?l(j,{children:[t(()=>{const E=o.priceInCredits*u.quantity,b=o.priceInActivityPoints*u.quantity;if(Dn()<o.clubLevel)return t(D,{variant:"danger",disabled:!0,children:h("catalog.alert.hc.required")});if(f)return t(D,{variant:"danger",disabled:!0,children:h("catalog.alert.limited_edition_sold_out.title")});if(E>g(-1))return t(D,{variant:"danger",disabled:!0,children:h("catalog.alert.notenough.title")});if(b>g(o.activityPointType))return t(D,{variant:"danger",disabled:!0,children:h("catalog.alert.notenough.activitypoints.title."+o.activityPointType)});switch(s){case tt.CONFIRM:return t(D,{variant:"warning",onClick:I=>p(),children:h("catalog.marketplace.confirm_title")});case tt.PURCHASE:return t(D,{disabled:!0,children:t(Xc,{})});case tt.FAILED:return t(D,{variant:"danger",children:h("generic.failed")});case tt.SOLD_OUT:return t(D,{variant:"danger",children:h("generic.failed")+" - "+h("catalog.alert.limited_edition_sold_out.title")});case tt.NONE:default:return t(D,{disabled:u.extraParamRequired&&(!u.extraData||!u.extraData.length),onClick:I=>r(tt.CONFIRM),children:h("catalog.purchase_confirmation."+(o.isRentOffer?"rent":"buy"))})}},{}),!e&&!o.isRentOffer&&t(D,{disabled:u.quantity>1||!o.giftable||f||u.extraParamRequired&&(!u.extraData||!u.extraData.length),onClick:E=>p(!0),children:h("catalog.purchase_confirmation.gift")})]}):null},ug=a=>{const{offer:e=null,separator:n=!1}=a,{purchaseOptions:s=null}=Ue(),{quantity:r=1}=s;return e?l(j,{children:[e.priceInCredits>0&&l(w,{alignItems:"center",gap:1,children:[t(N,{bold:!0,children:e.priceInCredits*r}),t(mt,{type:-1})]}),n&&e.priceInCredits>0&&e.priceInActivityPoints>0&&t(da,{size:"xs",color:"black",className:"fa-icon"}),e.priceInActivityPoints>0&&l(w,{alignItems:"center",gap:1,children:[t(N,{bold:!0,children:e.priceInActivityPoints*r}),t(mt,{type:e.activityPointType})]})]}):null},Xs=a=>{const{gap:e=1,...n}=a,{currentOffer:s=null}=Ue();return t(v,{gap:e,...n,children:t(ug,{offer:s})})},mr=a=>{const{currentOffer:e=null,roomPreviewer:n=null,purchaseOptions:s=null}=Ue(),{previewStuffData:r=null}=s;return i.useEffect(()=>{if(!e||e.pricingModel===Yt.PRICING_MODEL_BUNDLE||!n)return;const o=e.product;if(o)switch(n.reset(!1),o.productType){case Ee.FLOOR:{if(!o.furnitureData)return;if(o.furnitureData.specialType===ge.FIGURE_PURCHASABLE_SET){const u=z().getFloorItemData(o.furnitureData.id).customParams.split(",").map(m=>parseInt(m)),d=[];for(const m of u)xt().isValidFigureSetForGender(m,z().gender)&&d.push(m);const g=xt().getFigureStringWithFigureIds(z().figure,z().gender,d);n.addAvatarIntoRoom(g,o.productClassId)}else n.addFurnitureIntoRoom(o.productClassId,new At(90),r,o.extraParam);return}case Ee.WALL:{if(!o.furnitureData)return;switch(o.furnitureData.specialType){case ge.FLOOR:n.updateObjectRoom(o.extraParam);return;case ge.WALL_PAPER:n.updateObjectRoom(null,o.extraParam);return;case ge.LANDSCAPE:{n.updateObjectRoom(null,null,o.extraParam);const c=z().getWallItemDataByName("window_double_default");c&&n.addWallItemIntoRoom(c.id,new At(90),c.customParams);return}default:n.updateObjectRoom("default","default","default"),n.addWallItemIntoRoom(o.productClassId,new At(90),o.extraParam);return}}case Ee.ROBOT:n.addAvatarIntoRoom(o.extraParam,0);return;case Ee.EFFECT:n.addAvatarIntoRoom(z().figure,o.productClassId);return}},[e,r,n]),e?e.pricingModel===Yt.PRICING_MODEL_BUNDLE?t(v,{fit:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(Le,{fullWidth:!0,columnCount:4,className:"nitro-catalog-layout-bundle-grid",children:e.products.length>0&&e.products.map((o,c)=>t(Se,{itemImage:o.getIconUrl(e),itemCount:o.productCount},c))})}):t(dl,{roomPreviewer:n,height:140}):null},mT=a=>{const{page:e=null}=a,{currentOffer:n=null}=Ue();return l(j,{children:[t(bl,{}),l(re,{children:[l(v,{size:7,overflow:"hidden",children:[t(Sa,{shrink:!0}),l(v,{gap:1,overflow:"hidden",children:[t(N,{truncate:!0,shrink:!0,fontWeight:"bold",children:h("catalog_selectbadge")}),t(dT,{})]})]}),l(v,{center:!n,size:5,overflow:"hidden",children:[!n&&l(j,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),n&&l(j,{children:[t(P,{position:"relative",overflow:"hidden",children:t(mr,{})}),l(v,{grow:!0,gap:1,children:[t(_l,{fullWidth:!0}),t(N,{grow:!0,truncate:!0,children:n.localizationName}),t(w,{justifyContent:"end",children:t(Xs,{alignItems:"end"})}),t(us,{})]})]})]})]})]})},ur=a=>{const{...e}=a,{currentOffer:n=null}=Ue();return!n||!n.badgeCode||!n.badgeCode.length?null:t(ze,{badgeCode:n.badgeCode,...e})},hT=1,gT=100,iu=a=>{const{currentOffer:e=null,purchaseOptions:n=null,setPurchaseOptions:s=null}=Ue(),{quantity:r=1}=n,o=c=>{isNaN(c)&&(c=1),c=Math.max(c,hT),c=Math.min(c,gT),c!==r&&s(u=>{const d={...u};return d.quantity=c,d})};return!e||!e.bundlePurchaseAllowed?null:l(j,{children:[t(N,{children:h("catalog.bundlewidget.spinner.select.amount")}),l(w,{alignItems:"center",gap:1,children:[t(Tm,{className:"text-black cursor-pointer fa-icon",onClick:c=>o(r-1)}),t("input",{type:"number",className:"form-control form-control-sm quantity-input",value:r,onChange:c=>o(c.target.valueAsNumber)}),t(wm,{className:"text-black cursor-pointer fa-icon",onClick:c=>o(r+1)})]})]})},fT=a=>{const{page:e=null}=a,[n,s]=i.useState(new Map),{currentOffer:r=null,setCurrentOffer:o=null}=Ue(),[c,u]=i.useState(!1),d=(C,E)=>!C.product.furnitureData.colorIndex||!E.product.furnitureData.colorIndex||C.product.furnitureData.colorIndex>E.product.furnitureData.colorIndex?1:C==E?0:-1,g=(C,E)=>C.product.furnitureData.className>E.product.furnitureData.className?1:C==E?0:-1,m=C=>{C.activate(),o(C)},f=(C,E)=>{const b=`${E}*${C}`,I=e.offers.findIndex(_=>_.product.furnitureData.fullName===b);I>-1&&m(e.offers[I])},p=i.useMemo(()=>{const C=[],E=new Map,b=new Map;return e.offers.sort(d),e.offers.forEach(I=>{if(!I.product)return;const _=I.product.furnitureData;if(!_||!_.hasIndexedColor)C.push(I);else{const S=_.className,T=_.colorIndex;b.has(S)||b.set(S,[]);let R=16777215;if(_.colors){for(let y of _.colors)y!==16777215&&(R=y);b.get(S).indexOf(R)===-1&&(b.get(S)[T]=R)}E.has(S)||(C.push(I),E.set(S,!0))}}),C.sort(g),s(b),C},[e.offers]);return l(re,{children:[t(v,{size:7,overflow:"hidden",children:l(Le,{columnCount:5,children:[(!c||!r||!n.has(r.product.furnitureData.className))&&p.map((C,E)=>t(au,{itemActive:r&&(r.product.furnitureData.hasIndexedColor?r.product.furnitureData.className===C.product.furnitureData.className:r.offerId===C.offerId),offer:C,selectOffer:m},E)),c&&r&&n.has(r.product.furnitureData.className)&&n.get(r.product.furnitureData.className).map((C,E)=>t(Se,{itemHighlight:!0,itemActive:r.product.furnitureData.colorIndex===E,itemColor:en.int2rgb(C),className:"clear-bg",onClick:b=>f(E,r.product.furnitureData.className)},E))]})}),l(v,{center:!r,size:5,overflow:"hidden",children:[!r&&l(j,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(j,{children:[l(P,{position:"relative",overflow:"hidden",children:[t(mr,{}),t(ur,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),r.product.furnitureData.hasIndexedColor&&t(D,{position:"absolute",className:"bottom-1 start-1",onClick:C=>u(E=>!E),children:t(ym,{className:"fa-icon"})})]}),l(v,{grow:!0,gap:1,children:[t(_l,{fullWidth:!0}),t(N,{grow:!0,truncate:!0,children:r.localizationName}),l(w,{justifyContent:"between",children:[t(v,{gap:1,children:t(iu,{})}),t(Xs,{justifyContent:"end",alignItems:"end"})]}),t(us,{})]})]})]})]})},dg=a=>{const{imageUrl:e=null}=a,[n,s]=i.useState("");return i.useEffect(()=>{s(e??X("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder"))},[e]),t(w,{center:!0,fullWidth:!0,className:"nitro-catalog-header",children:t("img",{src:n,onError:({currentTarget:r})=>{r.src=X("catalog.asset.image.url").replace("%name%","catalog_header_roombuilder")}})})},pT=a=>{const{page:e=null}=a,{currentOffer:n=null,currentPage:s=null}=Ue();return t(j,{children:l(re,{children:[l(v,{size:7,overflow:"hidden",children:[X("catalog.headers")&&t(dg,{imageUrl:s.localization.getImage(0)}),t(Sa,{})]}),l(v,{center:!n,size:5,overflow:"hidden",children:[!n&&l(j,{children:[!!e.localization.getImage(1)&&t(ks,{imageUrl:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),n&&l(j,{children:[l(w,{center:!0,overflow:"hidden",style:{height:140},children:[n.product.productType!==Ee.BADGE&&l(j,{children:[t(mr,{}),t(ur,{className:"bg-muted rounded bottom-1 end-1"})]}),n.product.productType===Ee.BADGE&&t(ur,{className:"scale-2"})]}),l(v,{grow:!0,gap:1,children:[t(_l,{fullWidth:!0}),t(N,{grow:!0,truncate:!0,children:n.localizationName}),l(w,{justifyContent:"between",children:[t(v,{gap:1,children:t(iu,{})}),t(Xs,{justifyContent:"end",alignItems:"end"})]}),t(us,{})]})]})]})]})})},IT=a=>{const{...e}=a,{currentOffer:n=null,purchaseOptions:s=null}=Ue(),{previewStuffData:r=null}=s,o=i.useMemo(()=>{if(!n||!r)return null;const c=r.getValue(2);return!c||!c.length?null:c},[n,r]);return o?t(ze,{badgeCode:o,isGroup:!0,...e}):null},mg=a=>{const[e,n]=i.useState(0),{currentOffer:s=null,catalogOptions:r=null,setPurchaseOptions:o=null}=Ue(),{groups:c=null}=r,u=i.useMemo(()=>{if(!c||!c.length)return null;const g=c[e];if(!g)return null;const m=new ha;return m.setValue(["0",g.groupId.toString(),g.badgeCode,g.colorA,g.colorB]),m},[e,c]);if(i.useEffect(()=>{s&&o(g=>{const m={...g};return m.extraParamRequired=!0,m.extraData=u&&u.getValue(1)||null,m.previewStuffData=u,m})},[s,u,o]),i.useEffect(()=>{M(new Zm)},[]),!c||!c.length)return l(P,{className:"bg-muted rounded p-1 text-black text-center",children:[h("catalog.guild_selector.members_only"),t(D,{className:"mt-1",children:h("catalog.guild_selector.find_groups")})]});const d=c[e];return l(w,{gap:1,children:[!!d&&l(w,{overflow:"hidden",className:"rounded border",children:[t(P,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+d.colorA}}),t(P,{fullHeight:!0,style:{width:"20px",backgroundColor:"#"+d.colorB}})]}),t("select",{className:"form-select form-select-sm",value:e,onChange:g=>n(parseInt(g.target.value)),children:c.map((g,m)=>t("option",{value:m,children:g.groupName},m))})]})},ET=a=>{const{page:e=null}=a,{currentOffer:n=null}=Ue();return l(re,{children:[t(v,{size:7,overflow:"hidden",children:t(Sa,{})}),l(v,{center:!n,size:5,overflow:"hidden",children:[!n&&l(j,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),n&&l(j,{children:[l(P,{position:"relative",overflow:"hidden",children:[t(mr,{}),t(IT,{position:"absolute",className:"bottom-1 end-1"})]}),l(v,{grow:!0,gap:1,children:[t(N,{truncate:!0,children:n.localizationName}),t(P,{grow:!0,children:t(mg,{})}),t(w,{justifyContent:"end",children:t(Xs,{alignItems:"end"})}),t(us,{})]})]})]})]})},CT=a=>{const{page:e=null}=a;i.useState(0);const{currentOffer:n=null,setCurrentOffer:s=null,catalogOptions:r=null}=Ue();return i.useEffect(()=>{M(new Zm)},[e]),l(j,{children:[t(bl,{}),l(re,{children:[t(v,{className:"bg-muted rounded p-2 text-black",size:7,overflow:"hidden",children:t(P,{className:"overflow-auto",dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})}),t(v,{size:5,overflow:"hidden",gap:1,children:!!n&&t(j,{children:l(v,{grow:!0,gap:1,children:[t(N,{truncate:!0,children:n.localizationName}),t(P,{grow:!0,children:t(mg,{})}),t(w,{justifyContent:"end",children:t(Xs,{alignItems:"end"})}),t(us,{noGiftOption:!0})]})})})]})]})},bT=a=>{const{page:e=null}=a;return l(re,{children:[l(v,{size:7,overflow:"hidden",className:"bg-muted rounded p-2 text-black",children:[t(P,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(P,{overflow:"auto",dangerouslySetInnerHTML:{__html:e.localization.getText(0)}}),t(P,{dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})]}),l(v,{center:!0,size:5,overflow:"hidden",children:[t(ks,{imageUrl:e.localization.getImage(1)}),t(D,{onClick:()=>te("groups/create"),children:h("catalog.start.guild.purchase.button")})]})]})},_T=a=>{const{page:e=null}=a;return t("div",{className:"h-100 nitro-catalog-layout-info-loyalty text-black d-flex flex-row",children:t("div",{className:"overflow-auto h-100 d-flex flex-column info-loyalty-content",children:t("div",{dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})})})},hg=a=>{const{page:e=null}=a,n=e.localization.getImage(1);return l(v,{grow:!0,className:"bg-muted rounded text-black p-2",overflow:"hidden",children:[l(w,{alignItems:"center",gap:2,children:[n&&t("img",{alt:"",src:n}),t(P,{className:"fs-5",dangerouslySetInnerHTML:{__html:e.localization.getText(1)}})]}),t(v,{grow:!0,alignItems:"center",overflow:"auto",children:t(P,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}})}),t(w,{alignItems:"center",children:t(P,{className:"fw-bold",dangerouslySetInnerHTML:{__html:e.localization.getText(3)}})})]})},ST=a=>t(hg,{...a}),NT=a=>{const{page:e=null}=a,[n,s]=i.useState(""),[r,o]=i.useState(""),[c,u]=i.useState(-1),[d,g]=i.useState([]),[m,f]=i.useState(!1),[p,C]=i.useState(1),{categories:E=null}=Jn(),{setIsVisible:b=null}=Ue(),{promoteInformation:I,isExtended:_,setIsExtended:S}=su();i.useEffect(()=>{_&&(u(I.data.flatId),s(I.data.eventName),o(I.data.eventDescription),C(I.data.categoryId),f(_),S(!1))},[_,n,r,p]);const T=()=>{u(-1),s(""),o(""),C(1),S(!1),b(!1)},R=()=>{const y=e.pageId,A=e.offers.length>=1?e.offers[0].offerId:-1,U=c,L=n,O=r,k=p;M(new RE(y,A,U,L,m,O,k)),T()};return F(wE,y=>{const A=y.getParser();A&&g(A.rooms)}),i.useEffect(()=>{M(new yE),M(new Wm)},[]),l(j,{children:[t(N,{bold:!0,center:!0,children:h("roomad.catalog_header")}),l(v,{size:12,overflow:"hidden",className:"text-black",children:[t(P,{children:h("roomad.catalog_text",["duration"],["120"])}),l(P,{className:"bg-muted rounded p-1",children:[l(v,{gap:2,children:[t(N,{bold:!0,children:h("navigator.category")}),t("select",{className:"form-select form-select-sm",value:p,onChange:y=>C(parseInt(y.target.value)),disabled:m,children:E&&E.map((y,A)=>t("option",{value:y.id,children:h(y.name)},A))})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("roomad.catalog_name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:64,value:n,onChange:y=>s(y.target.value),readOnly:m})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("roomad.catalog_description")}),t("textarea",{className:"form-control form-control-sm",maxLength:64,value:r,onChange:y=>o(y.target.value),readOnly:m})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("roomad.catalog_roomname")}),l("select",{className:"form-select form-select-sm",value:c,onChange:y=>u(parseInt(y.target.value)),disabled:m,children:[t("option",{value:-1,disabled:!0,children:h("roomad.catalog_roomname")}),d&&d.map((y,A)=>t("option",{value:y.roomId,children:y.roomName},A))]})]}),t(v,{gap:1,children:t(D,{variant:!n||!r||c===-1?"danger":"success",onClick:R,disabled:!n||!r||c===-1,children:h(m?"roomad.extend.event":"buy")})})]})]})]})},gg=a=>{const{columnCount:e=5,children:n=null,...s}=a,{currentOffer:r=null}=Ue(),o=i.useRef();return i.useEffect(()=>{o&&o.current&&(o.current.scrollTop=0)},[r]),r?l(Le,{innerRef:o,columnCount:5,...s,children:[r.products&&r.products.length>0&&r.products.map((c,u)=>t(Se,{itemImage:c.getIconUrl(),itemCount:c.productCount},u)),n]}):null},fg=a=>{const{gap:e=1,...n}=a,{currentOffer:s=null}=Ue();return t(w,{gap:e,alignItems:"center",classNames:["bg-muted","p-1","rounded"],...n,children:t(ug,{separator:!0,offer:s})})},vT=a=>{const{page:e=null}=a;return l(j,{children:[t(bl,{}),l(re,{children:[l(v,{size:7,overflow:"hidden",children:[!!e.localization.getText(2)&&t(N,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(v,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(gg,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),l(v,{size:5,overflow:"hidden",gap:1,children:[!!e.localization.getText(1)&&t(N,{center:!0,small:!0,overflow:"auto",children:e.localization.getText(1)}),l(v,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!e.localization.getImage(1)&&t("img",{alt:"",className:"flex-grow-1",src:e.localization.getImage(1)}),t(ur,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),t(fg,{position:"absolute",className:"bottom-0 end-0"})]}),t(v,{gap:1,children:t(us,{})})]})]})]})},TT=a=>{const{page:e=null}=a;return l(j,{children:[t(bl,{}),l(re,{children:[l(v,{size:7,overflow:"hidden",children:[!!e.localization.getText(2)&&t(N,{dangerouslySetInnerHTML:{__html:e.localization.getText(2)}}),t(v,{grow:!0,overflow:"hidden",className:"bg-muted p-2 rounded",children:t(gg,{fullWidth:!0,className:"nitro-catalog-layout-bundle-grid"})})]}),l(v,{size:5,overflow:"hidden",gap:1,children:[!!e.localization.getText(1)&&t(N,{center:!0,small:!0,overflow:"auto",children:e.localization.getText(1)}),l(v,{grow:!0,position:"relative",overflow:"hidden",gap:0,children:[!!e.localization.getImage(1)&&t("img",{alt:"",className:"flex-grow-1",src:e.localization.getImage(1)}),t(ur,{position:"absolute",className:"bg-muted rounded bottom-0 start-0"}),t(fg,{position:"absolute",className:"bottom-0 end-0"})]}),t(v,{gap:1,children:t(us,{})})]})]})]})},wT=a=>{const{page:e=null}=a,[n,s]=i.useState(-1),[r,o]=i.useState(""),{currentOffer:c=null,currentPage:u=null}=Ue(),d=g=>{var m;return(m=_e().soundManager.musicController)==null?void 0:m.playSong(g,Ao.PRIORITY_PURCHASE_PREVIEW,15,0,0,0)};return F(OE,g=>{const m=g.getParser();m.officialSongId===r&&s(m.songId)}),i.useEffect(()=>{if(!c)return;const g=c.product;if(g){if(g.extraParam.length>0){const m=parseInt(g.extraParam);m>0?s(m):(o(g.extraParam),M(new kE(g.extraParam)))}else o(""),s(-1);return()=>{var m;return(m=_e().soundManager.musicController)==null?void 0:m.stop(Ao.PRIORITY_PURCHASE_PREVIEW)}}},[c]),i.useEffect(()=>()=>{var g;return(g=_e().soundManager.musicController)==null?void 0:g.stop(Ao.PRIORITY_PURCHASE_PREVIEW)},[]),t(j,{children:l(re,{children:[l(v,{size:7,overflow:"hidden",children:[X("catalog.headers")&&t(dg,{imageUrl:u.localization.getImage(0)}),t(Sa,{})]}),l(v,{center:!c,size:5,overflow:"hidden",children:[!c&&l(j,{children:[!!e.localization.getImage(1)&&t(ks,{imageUrl:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),c&&l(j,{children:[l(w,{center:!0,overflow:"hidden",style:{height:140},children:[c.product.productType!==Ee.BADGE&&l(j,{children:[t(mr,{}),t(ur,{className:"bg-muted rounded bottom-1 end-1"})]}),c.product.productType===Ee.BADGE&&t(ur,{className:"scale-2"})]}),l(v,{grow:!0,gap:1,children:[t(_l,{fullWidth:!0}),t(N,{grow:!0,truncate:!0,children:c.localizationName}),n>-1&&t(D,{onClick:()=>d(n),children:h("play_preview_button")}),l(w,{justifyContent:"between",children:[t(v,{gap:1,children:t(iu,{})}),t(Xs,{justifyContent:"end",alignItems:"end"})]}),t(us,{})]})]})]})]})})},yT=["floors","walls","views"],RT=a=>{const{columnCount:e=5,children:n=null,...s}=a,[r,o]=i.useState(null),[c,u]=i.useState(-1),[d,g]=i.useState(null),{currentPage:m=null,currentOffer:f=null,setCurrentOffer:p=null,setPurchaseOptions:C=null}=Ue(),E=i.useRef(),b=_=>{_&&g(S=>{const T=[...S];return T[c]=_,T})};if(i.useEffect(()=>{if(!m)return;const _=[[],[],[]];for(const S of m.offers){if(S.pricingModel!==Yt.PRICING_MODEL_SINGLE&&S.pricingModel!==Yt.PRICING_MODEL_MULTI)continue;const T=S.product;if(!T||T.productType!==Ee.WALL&&T.productType!==Ee.FLOOR||!T.furnitureData)continue;switch(T.furnitureData.className){case"floor":_[0].push(S);break;case"wallpaper":_[1].push(S);break;case"landscape":_[2].push(S);break}}o(_),u(0),g([_[0][0],_[1][0],_[2][0]])},[m]),i.useEffect(()=>{c===-1||!d||p(d[c])},[c,d,p]),i.useEffect(()=>{c===-1||!d||!f||C(_=>{const S={..._};return S.extraData=d[c].product.extraParam,S.extraParamRequired=!0,S})},[f,c,d,C]),i.useEffect(()=>{E&&E.current&&(E.current.scrollTop=0)},[c]),!r||c===-1)return null;const I=r[c];return l(j,{children:[t(vs,{children:yT.map((_,S)=>t(D,{active:c===S,onClick:T=>u(S),children:h(`catalog.spaces.tab.${_}`)},S))}),l(Le,{innerRef:E,columnCount:e,...s,children:[I&&I.length>0&&I.map((_,S)=>t(au,{itemActive:f&&f===_,offer:_,selectOffer:T=>b(T)},S)),n]})]})},OT=a=>{const{page:e=null}=a,{currentOffer:n=null,roomPreviewer:s=null}=Ue();return i.useEffect(()=>{s.updatePreviewObjectBoundingRectangle(new Ys)},[s]),l(re,{children:[t(v,{size:7,overflow:"hidden",children:t(RT,{})}),l(v,{center:!n,size:5,overflow:"hidden",children:[!n&&l(j,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),n&&l(j,{children:[t(P,{position:"relative",overflow:"hidden",children:t(mr,{})}),l(v,{grow:!0,gap:1,children:[t(N,{grow:!0,truncate:!0,children:n.localizationName}),t(w,{justifyContent:"end",children:t(Xs,{alignItems:"end"})}),t(us,{})]})]})]})]})},kT=a=>{const{page:e=null}=a,[n,s]=i.useState(""),{currentOffer:r=null,setPurchaseOptions:o=null}=Ue();return i.useEffect(()=>{r&&o(c=>{const u={...c};return u.extraData=n,u})},[r,n,o]),l(re,{children:[l(v,{size:7,overflow:"hidden",children:[t(Sa,{}),t("textarea",{className:"flex-grow-1 form-control w-100",defaultValue:n||"",onChange:c=>s(c.target.value)})]}),l(v,{center:!r,size:5,overflow:"hidden",children:[!r&&l(j,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),r&&l(j,{children:[t(mr,{}),l(v,{grow:!0,gap:1,children:[t(N,{grow:!0,truncate:!0,children:r.localizationName}),t(w,{justifyContent:"end",children:t(Xs,{alignItems:"end"})}),t(us,{})]})]})]})]})},AT=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(tt.NONE),{currentPage:o=null,catalogOptions:c=null}=Ue(),{purse:u=null,getCurrencyAmount:d=null}=Ur(),{clubOffers:g=null}=c,m=i.useCallback(S=>{switch(S.type){case Os.PURCHASE_SUCCESS:r(tt.NONE);return;case cr.PURCHASE_FAILED:r(tt.FAILED);return}},[]);st(Os.PURCHASE_SUCCESS,m),st(cr.PURCHASE_FAILED,m);const f=i.useCallback(S=>{let T="";return S.months>0&&(T=h("catalog.vip.item.header.months",["num_months"],[S.months.toString()])),S.extraDays>0&&(T!==""&&(T+=" "),T+=" "+h("catalog.vip.item.header.days",["num_days"],[S.extraDays.toString()])),T},[]),p=i.useCallback(()=>{if(!u)return"";const S=u.clubDays>0||u.clubPeriods>0?"extension.":"subscription.",T=e.months===0?"days":"months",R=e.months===0?e.extraDays:e.months;return h("catalog.vip.buy.confirm."+S+T).replace("%NUM_"+T.toUpperCase()+"%",R.toString())},[e,u]),C=i.useCallback(()=>{let S=h("catalog.vip.buy.confirm.end_date");return S=S.replace("%month%",e.month.toString()),S=S.replace("%day%",e.day.toString()),S=S.replace("%year%",e.year.toString()),S},[e]),E=i.useMemo(()=>{const S=u.clubDays,R=u.clubPeriods*31+S;return h("catalog.vip.extend.info",["days"],[R.toString()])},[u]),b=i.useCallback(()=>{e&&(r(tt.PURCHASE),M(new rl(o.pageId,e.offerId,null,1)))},[e,o]),I=i.useCallback(S=>{r(tt.NONE),n(S)},[]),_=i.useCallback(()=>{if(!e)return null;if(e.priceCredits>d(-1))return t(D,{fullWidth:!0,variant:"danger",children:h("catalog.alert.notenough.title")});if(e.priceActivityPoints>d(e.priceActivityPointsType))return t(D,{fullWidth:!0,variant:"danger",children:h("catalog.alert.notenough.activitypoints.title."+e.priceActivityPointsType)});switch(s){case tt.CONFIRM:return t(D,{fullWidth:!0,variant:"warning",onClick:b,children:h("catalog.marketplace.confirm_title")});case tt.PURCHASE:return t(D,{fullWidth:!0,variant:"primary",disabled:!0,children:t(Xc,{})});case tt.FAILED:return t(D,{fullWidth:!0,variant:"danger",disabled:!0,children:h("generic.failed")});case tt.NONE:default:return t(D,{fullWidth:!0,variant:"success",onClick:()=>r(tt.CONFIRM),children:h("buy")})}},[e,s,b,d]);return i.useEffect(()=>{g||M(new AE(1))},[g]),l(re,{children:[l(v,{fullHeight:!0,size:7,overflow:"hidden",justifyContent:"between",children:[t(Le,{columnCount:1,className:"nitro-catalog-layout-vip-buy-grid",children:g&&g.length>0&&g.map((S,T)=>l(Se,{column:!1,center:!1,alignItems:"center",justifyContent:"between",itemActive:e===S,className:"p-1",onClick:()=>I(S),children:[t("i",{className:"icon-hc-banner"}),l(v,{justifyContent:"end",gap:0,children:[t(N,{textEnd:!0,children:f(S)}),l(w,{justifyContent:"end",gap:1,children:[S.priceCredits>0&&l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(N,{children:S.priceCredits}),t(mt,{type:-1})]}),S.priceActivityPoints>0&&l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(N,{children:S.priceActivityPoints}),t(mt,{type:S.priceActivityPointsType})]})]})]})]},T))}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:h("catalog.vip.buy.hccenter")}})]}),l(v,{size:5,overflow:"hidden",children:[l(v,{fullHeight:!0,center:!0,overflow:"hidden",children:[o.localization.getImage(1)&&t("img",{alt:"",src:o.localization.getImage(1)}),t(N,{center:!0,overflow:"auto",dangerouslySetInnerHTML:{__html:E}})]}),e&&l(v,{fullWidth:!0,grow:!0,justifyContent:"end",children:[l(w,{alignItems:"end",children:[l(v,{grow:!0,gap:0,children:[t(N,{fontWeight:"bold",children:p()}),t(N,{children:C()})]}),l(v,{gap:1,children:[e.priceCredits>0&&l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(N,{children:e.priceCredits}),t(mt,{type:-1})]}),e.priceActivityPoints>0&&l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(N,{children:e.priceActivityPoints}),t(mt,{type:e.priceActivityPointsType})]})]})]}),_()]})]})]})},xT=a=>{const{text:e=null}=a,[n,s]=i.useState(""),[r,o]=i.useState(!1),{simpleAlert:c=null}=Je(),u=()=>{!n||!n.length||r||(M(new PE(n)),o(!0))};return F(xE,d=>{const g=d.getParser();let m=h("catalog.alert.voucherredeem.ok.description");g.productName&&(m=h("catalog.alert.voucherredeem.ok.description.furni",["productName","productDescription"],[g.productName,g.productDescription])),c(m,null,null,null,h("catalog.alert.voucherredeem.ok.title")),o(!1),s("")}),F(DE,d=>{const g=d.getParser();c(h(`catalog.alert.voucherredeem.error.description.${g.errorCode}`),null,null,null,h("catalog.alert.voucherredeem.error.title")),o(!1)}),l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:e,value:n,onChange:d=>s(d.target.value)}),t(D,{variant:"primary",onClick:u,disabled:r,children:t(Bg,{className:"fa-icon"})})]})},za=a=>{const{item:e=null,position:n="relative",pointer:s=!0,overflow:r="hidden",fullHeight:o=!0,classNames:c=[],children:u=null,...d}=a,g=i.useMemo(()=>{const f=["rounded","nitro-front-page-item"];return c.length&&f.push(...c),f},[c]);if(!e)return null;const m=X("image.library.url")+e.itemPromoImage;return l(Fh,{imageUrl:m,classNames:g,position:n,fullHeight:o,pointer:s,overflow:r,...d,children:[t(N,{position:"absolute",variant:"white",className:"bg-dark rounded p-2 m-2 bottom-0",children:e.itemName}),u]})},DT=a=>{const{page:e=null,hideNavigation:n=null}=a,{frontPageItems:s=[]}=Ue(),r=i.useCallback(o=>{switch(o.type){case Au.ITEM_CATALOGUE_PAGE:te(`catalog/open/${o.catalogPageLocation}`);return;case Au.ITEM_PRODUCT_OFFER:te(`catalog/open/${o.productOfferId}`);return}},[]);return i.useEffect(()=>{n()},[e,n]),l(re,{children:[t(v,{size:4,children:s[0]&&t(za,{item:s[0],onClick:o=>r(s[0])})}),l(v,{size:8,children:[s[1]&&t(za,{item:s[1],onClick:o=>r(s[1])}),s[2]&&t(za,{item:s[2],onClick:o=>r(s[2])}),s[3]&&t(za,{item:s[3],onClick:o=>r(s[3])}),t(xT,{text:e.localization.getText(1)})]})]})},Oc=1,ii=2,pg=a=>{const{offerData:e=null,type:n=ii,onClick:s=null}=a,r=i.useMemo(()=>e?h((e.furniType===2?"wallItem":"roomItem")+`.name.${e.furniId}`):"",[e]),o=i.useCallback(()=>{if(!e)return"";if(e.status===ta.SOLD)return h("catalog.marketplace.offer.sold");if(e.timeLeftMinutes<=0)return h("catalog.marketplace.offer.expired");const c=Math.max(1,e.timeLeftMinutes),u=Math.floor(c/60);let g=c-u*60+" "+h("catalog.marketplace.offer.minutes");return u>0&&(g=u+" "+h("catalog.marketplace.offer.hours")+" "+g),h("catalog.marketplace.offer.time_left",["time"],[g])},[e]);return l(Se,{shrink:!0,center:!1,column:!1,alignItems:"center",className:"p-1",children:[t(v,{style:{width:40,height:40},children:t(Se,{column:!1,itemImage:Xb(e.furniType===ea.TYPE_FLOOR?Ee.FLOOR:Ee.WALL,e.furniId,e.extraData),itemUniqueNumber:e.isUniqueLimitedItem?e.stuffData.uniqueNumber:0})}),l(v,{grow:!0,gap:0,children:[t(N,{fontWeight:"bold",children:r}),n===Oc&&l(j,{children:[t(N,{children:h("catalog.marketplace.offer.price_own_item",["price"],[e.price.toString()])}),t(N,{children:o()})]}),n===ii&&l(j,{children:[t(N,{children:h("catalog.marketplace.offer.price_public_item",["price","average"],[e.price.toString(),e.averagePrice>0?e.averagePrice.toString():"-"])}),t(N,{children:h("catalog.marketplace.offer_count",["count"],[e.offerCount.toString()])})]})]}),l(v,{gap:1,children:[n===Oc&&e.status!==ta.SOLD&&t(D,{variant:"secondary",onClick:()=>s(e),children:h("catalog.marketplace.offer.pick")}),n===ii&&l(j,{children:[t(D,{variant:"secondary",onClick:()=>s(e),children:h("buy")}),t(D,{variant:"secondary",disabled:!0,children:h("catalog.marketplace.view_more")})]})]})]})},PT=a=>{const[e,n]=i.useState(0),[s,r]=i.useState([]),{simpleAlert:o=null}=Je();F(ME,g=>{const m=g.getParser();if(!m)return;const f=m.offers.map(p=>{const C=new ea(p.offerId,p.furniId,p.furniType,p.extraData,p.stuffData,p.price,p.status,p.averagePrice,p.offerCount);return C.timeLeftMinutes=p.timeLeftMinutes,C});n(m.creditsWaiting),r(f)}),F(LE,g=>{const m=g.getParser();if(m){if(!m.success){o(h("catalog.marketplace.cancel_failed"),Ie.DEFAULT,null,null,h("catalog.marketplace.operation_failed.topic"));return}r(f=>f.filter(p=>p.offerId!==m.offerId))}});const c=i.useMemo(()=>s.filter(g=>g.status===ta.SOLD),[s]),u=i.useCallback(()=>{r(g=>{const m=c.map(f=>f.offerId);return g.filter(f=>m.indexOf(f.offerId)===-1)}),M(new UE)},[c]),d=g=>{M(new VE(g.offerId))};return i.useEffect(()=>{M(new FE)},[]),l(v,{overflow:"hidden",children:[e<=0&&t(N,{center:!0,className:"bg-muted rounded p-1",children:h("catalog.marketplace.redeem.no_sold_items")}),e>0&&l(v,{center:!0,gap:1,className:"bg-muted rounded p-2",children:[t(N,{children:h("catalog.marketplace.redeem.get_credits",["count","credits"],[c.length.toString(),e.toString()])}),t(D,{className:"mt-1",onClick:u,children:h("catalog.marketplace.offer.redeem")})]}),l(v,{gap:1,overflow:"hidden",children:[t(N,{truncate:!0,shrink:!0,fontWeight:"bold",children:h("catalog.marketplace.items_found",["count"],[s.length.toString()])}),t(v,{overflow:"auto",className:"nitro-catalog-layout-marketplace-grid",children:s.length>0&&s.map(g=>t(pg,{offerData:g,type:Oc,onClick:d},g.offerId))})]})]})},MT=a=>{const{searchType:e=null,sortTypes:n=null,onSearch:s=null}=a,[r,o]=i.useState(n?n[0]:3),[c,u]=i.useState(""),[d,g]=i.useState(0),[m,f]=i.useState(0),p=i.useCallback(E=>{o(E),(e===Xt.BY_ACTIVITY||e===Xt.BY_VALUE)&&s({minPrice:-1,maxPrice:-1,query:"",type:E})},[s,e]),C=i.useCallback(()=>{const E=d>0?d:-1,b=m>0?m:-1;s({minPrice:E,maxPrice:b,type:r,query:c})},[m,d,s,c,r]);return i.useEffect(()=>{if(!n||!n.length)return;const E=n[0];o(E),(e===Xt.BY_ACTIVITY||Xt.BY_VALUE===e)&&s({minPrice:-1,maxPrice:-1,query:"",type:E})},[s,e,n]),l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("catalog.marketplace.sort_order")}),t("select",{className:"form-select form-select-sm",value:r,onChange:E=>p(parseInt(E.target.value)),children:n.map(E=>t("option",{value:E,children:h(`catalog.marketplace.sort.${E}`)},E))})]}),e===Xt.ADVANCED&&l(j,{children:[l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("catalog.marketplace.search_name")}),t("input",{className:"form-control form-control-sm",type:"text",value:c,onChange:E=>u(E.target.value)})]}),l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("catalog.marketplace.search_price")}),l(w,{fullWidth:!0,gap:1,children:[t("input",{className:"form-control form-control-sm",type:"number",min:0,value:d,onChange:E=>g(E.target.valueAsNumber)}),t("input",{className:"form-control form-control-sm",type:"number",min:0,value:m,onChange:E=>f(E.target.valueAsNumber)})]})]}),t(D,{variant:"secondary",className:"mx-auto",onClick:C,children:h("generic.search")})]})]})},LT=[1,2],UT=[3,4,5,6],FT=[1,2,3,4,5,6],VT=a=>{const[e,n]=i.useState(Xt.BY_ACTIVITY),[s,r]=i.useState(0),[o,c]=i.useState(new Map),[u,d]=i.useState({minPrice:-1,maxPrice:-1,query:"",type:3}),{getCurrencyAmount:g=null}=Ur(),{simpleAlert:m=null,showConfirm:f=null}=Je(),p=i.useCallback(b=>{d(b),M(new BE(b.minPrice,b.maxPrice,b.query,b.type))},[]),C=i.useMemo(()=>{switch(e){case Xt.BY_ACTIVITY:return UT;case Xt.BY_VALUE:return LT;case Xt.ADVANCED:return FT}return[]},[e]),E=i.useCallback(b=>{if(b.price>g(-1)){m(h("catalog.alert.notenough.credits.description"),Ie.DEFAULT,null,null,h("catalog.alert.notenough.title"));return}const I=b.offerId;f(h("catalog.marketplace.confirm_header"),()=>{M(new xu(I))},null,null,null,h("catalog.marketplace.confirm_title"))},[g,m,f]);return F(GE,b=>{const I=b.getParser();if(!I)return;const _=new Map;I.offers.forEach(S=>{const T=new ea(S.offerId,S.furniId,S.furniType,S.extraData,S.stuffData,S.price,S.status,S.averagePrice,S.offerCount);T.timeLeftMinutes=S.timeLeftMinutes,_.set(S.offerId,T)}),r(I.totalItemsFound),c(_)}),F(HE,b=>{const I=b.getParser();if(I)switch(I.result){case 1:p(u);break;case 2:c(_=>{const S=new Map(_);return S.delete(I.requestedOfferId),S}),m(h("catalog.marketplace.not_available_header"),Ie.DEFAULT,null,null,h("catalog.marketplace.not_available_title"));break;case 3:c(_=>{const S=new Map(_),T=S.get(I.requestedOfferId);return T&&(T.offerId=I.offerId,T.price=I.newPrice,T.offerCount--,S.set(T.offerId,T)),S.delete(I.requestedOfferId),S}),f(h("catalog.marketplace.confirm_higher_header")+`
`+h("catalog.marketplace.confirm_price",["price"],[I.newPrice.toString()]),()=>{M(new xu(I.offerId))},null,null,null,h("catalog.marketplace.confirm_higher_title"));break;case 4:m(h("catalog.alert.notenough.credits.description"),Ie.DEFAULT,null,null,h("catalog.alert.notenough.title"));break}}),l(j,{children:[l(vs,{children:[t(D,{active:e===Xt.BY_ACTIVITY,onClick:()=>n(Xt.BY_ACTIVITY),children:h("catalog.marketplace.search_by_activity")}),t(D,{active:e===Xt.BY_VALUE,onClick:()=>n(Xt.BY_VALUE),children:h("catalog.marketplace.search_by_value")}),t(D,{active:e===Xt.ADVANCED,onClick:()=>n(Xt.ADVANCED),children:h("catalog.marketplace.search_advanced")})]}),t(MT,{sortTypes:C,searchType:e,onSearch:p}),l(v,{gap:1,overflow:"hidden",children:[t(N,{truncate:!0,shrink:!0,fontWeight:"bold",children:h("catalog.marketplace.items_found",["count"],[o.size.toString()])}),t(v,{className:"nitro-catalog-layout-marketplace-grid",overflow:"auto",children:Array.from(o.values()).map((b,I)=>t(pg,{offerData:b,type:ii,onClick:E},I))})]})]})},BT=a=>{const{page:e=null}=a,[n,s]=i.useState(-1),[r,o]=i.useState([]),[c,u]=i.useState(-1),[d,g]=i.useState([]),[m,f]=i.useState(-1),[p,C]=i.useState(!1),[E,b]=i.useState("");i.useState(!0);const[I,_]=i.useState(-1),{currentOffer:S=null,setCurrentOffer:T=null,setPurchaseOptions:R=null,catalogOptions:y=null,roomPreviewer:A=null}=Ue(),{petPalettes:U=null}=y,L=i.useMemo(()=>!d.length||m===-1?16777215:d[m][0],[d,m]),O=i.useMemo(()=>n===-1||!r.length||c===-1?"":h(`pet.breed.${n}.${r[c].breedId}`),[n,r,c]),k=i.useMemo(()=>{if(!r.length||c===-1)return"";const B=r[c].paletteId;let W=16777215;if(n<=7){if(m===-1)return"";W=d[m][0]}let G=W.toString(16).toUpperCase();for(;G.length<6;)G="0"+G;return`${B}
${G}`},[r,c,n,d,m]),x=i.useMemo(()=>{let B="";switch(I){case 1:B="catalog.alert.petname.long";break;case 2:B="catalog.alert.petname.short";break;case 3:B="catalog.alert.petname.chars";break;case 4:B="catalog.alert.petname.bobba";break}return!B||!B.length?"":h(B)},[I]),V=i.useCallback(()=>{if(I===-1){M(new WE(E,1));return}if(I===0){M(new rl(e.pageId,S.offerId,`${E}
${k}`,1));return}},[e,S,E,k,I]);return F(jE,B=>{const W=B.getParser();_(W.result),W.result===0?V():nt(new cr(-1))}),i.useEffect(()=>{if(!e||!e.offers.length)return;const B=e.offers[0];T(B),s(Kb(B.localizationId)),C(!1)},[e,T]),i.useEffect(()=>{if(!S)return;const B=S.product.productData;if(B){if(U)for(const W of U){if(W.breed!==B.type)continue;const G=[];for(const H of W.palettes)H.sellable&&G.push(H);u(G.length?0:-1),o(G);return}u(-1),o([]),M(new qE(B.type))}},[S,U]),i.useEffect(()=>{if(n===-1)return;const B=$b(n,r);f(B.length?0:-1),g(B)},[n,r]),i.useEffect(()=>{if(!A||(A.reset(!1),n===-1||!r.length||c===-1))return;let B=`${n} ${r[c].paletteId}`;n<=7&&(B+=` ${L.toString(16)}`),A.addPetIntoRoom(B)},[A,n,r,c,L]),i.useEffect(()=>{_(-1)},[E]),S?l(re,{children:[t(v,{size:7,overflow:"hidden",children:l(Le,{columnCount:5,children:[!p&&r.length>0&&r.map((B,W)=>t(Se,{itemActive:c===W,onClick:G=>u(W),children:t(Ss,{typeId:n,paletteId:B.paletteId,direction:2,headOnly:!0})},W)),p&&d.length>0&&d.map((B,W)=>t(Se,{itemHighlight:!0,itemActive:m===W,itemColor:en.int2rgb(B[0]),className:"clear-bg",onClick:G=>f(W)},W))]})}),l(v,{center:!S,size:5,overflow:"hidden",children:[!S&&l(j,{children:[!!e.localization.getImage(1)&&t("img",{alt:"",src:e.localization.getImage(1)}),t(N,{center:!0,dangerouslySetInnerHTML:{__html:e.localization.getText(0)}})]}),S&&l(j,{children:[l(P,{position:"relative",overflow:"hidden",children:[t(mr,{}),t(ur,{position:"absolute",className:"bg-muted rounded bottom-1 end-1"}),n>-1&&n<=7&&t(D,{position:"absolute",className:"bottom-1 start-1",onClick:B=>C(!p),children:t(ym,{className:"fa-icon"})})]}),l(v,{grow:!0,gap:1,children:[t(N,{truncate:!0,children:O}),l(v,{grow:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:h("widgets.petpackage.name.title"),value:E,onChange:B=>b(B.target.value)}),I>0&&t(P,{className:"invalid-feedback d-block m-0",children:x})]}),t(w,{justifyContent:"end",children:t(Xs,{justifyContent:"end",alignItems:"end"})}),t(us,{purchaseCallback:V})]})]})]})]}):null},GT=a=>{const{offer:e=null,isAvailable:n=!1,daysRequired:s=0,onSelect:r=null}=a,o=i.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0];return ai.getProductImageUrl(u.productType,u.furniClassId,u.extraParam)},[e]),c=i.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0],d=ai.getProductCategory(u.productType,u.furniClassId)===2?"wallItem.name."+u.furniClassId:"roomItem.name."+u.furniClassId;return h(d)},[e]);return i.useCallback(()=>{if(!e||!e.products.length)return"";const u=e.products[0],d=ai.getProductCategory(u.productType,u.furniClassId)===2?"wallItem.desc."+u.furniClassId:"roomItem.desc."+u.furniClassId;return h(d)},[e]),i.useCallback(()=>Math.floor(s/31),[s]),l(Se,{center:!1,column:!1,alignItems:"center",className:"p-1",children:[t(ks,{imageUrl:o()}),t(N,{grow:!0,fontWeight:"bold",children:c()}),t(D,{variant:"secondary",onClick:()=>r(e.localizationId),disabled:!n,children:h("catalog.club_gift.select")})]})},HT=a=>{const{purse:e=null}=Ur(),{catalogOptions:n=null,setCatalogOptions:s=null}=Ue(),{clubGifts:r=null}=n,{showConfirm:o=null}=Je(),c=i.useCallback(()=>r?r.giftsAvailable>0?h("catalog.club_gift.available",["amount"],[r.giftsAvailable.toString()]):r.daysUntilNextGift>0?h("catalog.club_gift.days_until_next",["days"],[r.daysUntilNextGift.toString()]):e.isVip?h("catalog.club_gift.not_available"):h("catalog.club_gift.no_club"):"",[r,e]),u=i.useCallback(g=>{o(h("catalog.club_gift.confirm"),()=>{M(new zE(g)),s(m=>(m.clubGifts.giftsAvailable--,{...m}))},null)},[s,o]),d=i.useMemo(()=>r.offers.sort((m,f)=>r.getOfferExtraData(m.offerId).daysRequired-r.getOfferExtraData(f.offerId).daysRequired),[r]);return l(j,{children:[t(N,{truncate:!0,shrink:!0,fontWeight:"bold",children:c()}),t(Le,{columnCount:1,className:"nitro-catalog-layout-vip-gifts-grid",children:r.offers.length>0&&d.map(g=>t(GT,{offer:g,isAvailable:r.getOfferExtraData(g.offerId).isSelectable&&r.giftsAvailable>0,onSelect:u,daysRequired:r.getOfferExtraData(g.offerId).daysRequired},g.offerId))})]})},WT=(a,e)=>{if(!a)return null;const n={page:a,hideNavigation:e};switch(a.layoutCode){case"frontpage_featured":return null;case"frontpage4":return t(DT,{...n});case"pets":return t(BT,{...n});case"pets2":return t(ST,{...n});case"pets3":return t(hg,{...n});case"vip_buy":return t(AT,{...n});case"guild_frontpage":return t(bT,{...n});case"guild_forum":return t(CT,{...n});case"guild_custom_furni":return t(ET,{...n});case"club_gifts":return t(HT,{...n});case"marketplace_own_items":return t(PT,{...n});case"marketplace":return t(VT,{...n});case"single_bundle":return t(TT,{...n});case"room_bundle":return t(vT,{...n});case"spaces_new":return t(OT,{...n});case"trophies":return t(kT,{...n});case"info_loyalty":return t(_T,{...n});case"badge_display":return t(mT,{...n});case"roomads":return t(NT,{...n});case"default_3x3_color_grouping":return t(fT,{...n});case"soundmachine":return t(wT,{...n});case"bots":case"default_3x3":default:return t(pT,{...n})}},jT=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(0),[o,c]=i.useState("0"),{catalogOptions:u=null,setCatalogOptions:d=null}=Ue(),{marketplaceConfiguration:g=null}=u,{showConfirm:m=null}=Je(),f=I=>{c(I);const _=parseInt(I);isNaN(_)||_===s||r(parseInt(I))};if(F(YE,I=>{const _=I.getParser();d(S=>{const T={...S};return T.marketplaceConfiguration=_,T})}),st(bi.POST_MARKETPLACE,I=>n(I.item)),i.useEffect(()=>{!e||g||M(new KE)},[e,g]),i.useEffect(()=>{if(e)return()=>r(0)},[e]),!g||!e)return null;const p=e?h(e.isWallItem?"wallItem.name."+e.type:"roomItem.name."+e.type):"",C=e?h(e.isWallItem?"wallItem.desc."+e.type:"roomItem.desc."+e.type):"",E=()=>Math.max(Math.ceil(g.commission*.01*s),1),b=()=>{!e||s<g.minimumPrice||m(h("inventory.marketplace.confirm_offer.info",["furniname","price"],[p,s.toString()]),()=>{M(new $E(s,e.isWallItem?2:1,e.id)),n(null)},()=>{n(null)},null,null,h("inventory.marketplace.confirm_offer.title"))};return l(ie,{className:"nitro-catalog-layout-marketplace-post-offer",theme:"primary-slim",children:[t(ae,{headerText:h("inventory.marketplace.make_offer.title"),onCloseClick:I=>n(null)}),t(ne,{overflow:"hidden",children:l(re,{fullHeight:!0,children:[t(v,{center:!0,className:"bg-muted rounded p-2",size:4,overflow:"hidden",children:t(Qc,{productType:e.isWallItem?Ee.WALL:Ee.FLOOR,productClassId:e.type,extraData:e.extra.toString()})}),l(v,{size:8,justifyContent:"between",overflow:"hidden",children:[l(v,{grow:!0,gap:1,children:[t(N,{fontWeight:"bold",children:p}),t(N,{truncate:!0,shrink:!0,children:C})]}),l(v,{overflow:"auto",children:[t(N,{italics:!0,children:h("inventory.marketplace.make_offer.expiration_info",["time"],[g.offerTime.toString()])}),l("div",{className:"input-group has-validation",children:[t("input",{className:"form-control form-control-sm",type:"number",min:0,value:o,onChange:I=>f(I.target.value),placeholder:h("inventory.marketplace.make_offer.price_request")}),(s<g.minimumPrice||isNaN(s))&&t(P,{className:"invalid-feedback d-block",children:h("inventory.marketplace.make_offer.min_price",["minprice"],[g.minimumPrice.toString()])}),s>g.maximumPrice&&!isNaN(s)&&t(P,{className:"invalid-feedback d-block",children:h("inventory.marketplace.make_offer.max_price",["maxprice"],[g.maximumPrice.toString()])}),!(s<g.minimumPrice||s>g.maximumPrice||isNaN(s))&&t(P,{className:"invalid-feedback d-block",children:h("inventory.marketplace.make_offer.final_price",["commission","finalprice"],[E().toString(),(s+E()).toString()])})]}),t(D,{disabled:s<g.minimumPrice||s>g.maximumPrice||isNaN(s),onClick:b,children:h("inventory.marketplace.make_offer.post")})]})]})]})})]})},qT=a=>{const{isVisible:e=!1,setIsVisible:n=null,rootNode:s=null,currentPage:r=null,navigationHidden:o=!1,setNavigationHidden:c=null,activeNodes:u=[],searchResult:d=null,setSearchResult:g=null,openPageByName:m=null,openPageByOfferId:f=null,activateNode:p=null,getNodeById:C}=Ue();return i.useEffect(()=>{const E={linkReceived:b=>{const I=b.split("/");if(!(I.length<2))switch(I[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(_=>!_);return;case"open":if(I.length>2)if(I.length===4)switch(I[2]){case"offerId":f(parseInt(I[3]));return}else m(I[2]);else n(!0);return}},eventUrlPrefix:"catalog/"};return _t(E),()=>St(E)},[n,f,m]),l(j,{children:[e&&l(ie,{uniqueKey:"catalog",className:"nitro-catalog",style:X("catalog.headers")?{width:710}:{},children:[t(ae,{headerText:h("catalog.title"),onCloseClick:E=>n(!1)}),t(As,{children:s&&s.children.length>0&&s.children.map(E=>E.isVisible?t(Mn,{isActive:E.isActive,onClick:b=>{d&&g(null),p(E)},children:l(w,{gap:X("catalog.tab.icons")?1:0,alignItems:"center",children:[X("catalog.tab.icons")&&t(ig,{icon:E.iconId}),E.localization]})},E.pageId):null)}),t(ne,{children:l(re,{children:[!o&&t(v,{size:3,overflow:"hidden",children:u&&u.length>0&&t(uT,{node:u[0]})}),t(v,{size:o?12:9,overflow:"hidden",children:WT(r,()=>c(!0))})]})})]}),t(lT,{}),t(jT,{})]})},zT=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(""),{chatHistory:o=[]}=pl(),c=i.useRef(null),u=i.useMemo(()=>{if(s.length===0)return o;let d=s.toLowerCase();return o.filter(g=>g.message&&g.message.toLowerCase().includes(d)||g.name&&g.name.toLowerCase().includes(d))},[o,s]);return i.useEffect(()=>{c&&c.current&&e&&(c.current.scrollTop=c.current.scrollHeight)},[e]),i.useEffect(()=>{const d={linkReceived:g=>{const m=g.split("/");if(!(m.length<2))switch(m[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(f=>!f);return}},eventUrlPrefix:"chat-history/"};return _t(d),()=>St(d)},[]),e?l(ie,{uniqueKey:"chat-history",className:"nitro-chat-history",theme:"primary-slim",children:[t(ae,{headerText:h("room.chathistory.button.text"),onCloseClick:d=>n(!1)}),l(ne,{innerRef:c,overflow:"hidden",gap:2,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:h("generic.search"),value:s,onChange:d=>r(d.target.value)}),t(hl,{rows:u,scrollToBottom:!0,rowRender:d=>l(w,{alignItems:"center",className:"p-1",gap:2,children:[t(N,{variant:"muted",children:d.timestamp}),d.type===cs.TYPE_CHAT&&l("div",{className:"bubble-container",style:{position:"relative"},children:[d.style===0&&t("div",{className:"user-container-bg",style:{backgroundColor:d.color}}),l("div",{className:`chat-bubble bubble-${d.style} type-${d.chatType}`,style:{maxWidth:"100%"},children:[t("div",{className:"user-container",children:d.imageUrl&&d.imageUrl.length>0&&t("div",{className:"user-image",style:{backgroundImage:`url(${d.imageUrl})`}})}),l("div",{className:"chat-content",children:[t("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${d.name}: `}}),t("span",{className:"message",dangerouslySetInnerHTML:{__html:`${d.message}`}})]})]})]}),d.type===cs.TYPE_ROOM_INFO&&l(j,{children:[t("i",{className:"icon icon-small-room"}),t(N,{textBreak:!0,wrap:!0,grow:!0,children:d.name})]})]})})]})]}):null},Qn=32,Er=64,Do="x0123456789abcdefghijklmnopq",vr=class vr{};vr.DOOR=0,vr.UP=1,vr.DOWN=2,vr.SET=3,vr.UNSET=4;let Ut=vr;const YT={x:"101010",0:"0065ff",1:"0091ff",2:"00bcff",3:"00e8ff",4:"00ffea",5:"00ffbf",6:"00ff93",7:"00ff68",8:"00ff3d",9:"19ff00",a:"44ff00",b:"70ff00",c:"9bff00",d:"f2ff00",e:"ffe000",f:"ffb500",g:"ff8900",h:"ff5e00",i:"ff3200",j:"ff0700",k:"ff0023",l:"ff007a",m:"ff00a5",n:"ff00d1",o:"ff00fc",p:"d600ff",q:"aa00ff"};class KT{constructor(){this._currentAction=Ut.SET,this._currentHeight=Do[1]}get currentAction(){return this._currentAction}set currentAction(e){this._currentAction=e}get currentHeight(){return this._currentHeight}set currentHeight(e){this._currentHeight=e}clear(){this._currentAction=Ut.SET,this._currentHeight=Do[1]}}class Ya{constructor(e,n){this._height=e,this._isBlocked=n}get height(){return this._height}set height(e){this._height=e}get isBlocked(){return this._isBlocked}set isBlocked(e){this._isBlocked=e}}const $T=(a,e)=>{let n=a*Qn/2-e*Qn/2;const s=a*Qn/4+e*Qn/4;return n=n+1024,[n,s]},QT=(a,e)=>{const n=a-1024,s=(n/(Qn/2)+e/(Qn/4))/2,r=(e/(Qn/4)-n/(Qn/2))/2;return[s,r]},xi=a=>{switch(a=parseInt(a.toString()),a){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}},Ka=a=>{switch(a){case .25:return 0;case .5:return 1;case 2:return 3;default:return 2}},rs=class rs extends QE{constructor(){const e=Qn*Er+20,n=Qn*Er/2+100;super({width:e,height:n,backgroundColor:0,antialias:!0,autoDensity:!0,resolution:1,sharedLoader:!0,sharedTicker:!0}),this._tilemap=[],this._doorLocation=new Ys(0,0),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile=new Ys(-1,-1),this._actionSettings=new KT}initialize(){if(this._isInitialized)return;const e=eh().getCollection("floor_editor");e&&(this._assetCollection=e,this._tilemapRenderer=new XE(e.baseTexture),this.registerEventListeners(),this.stage.addChild(this._tilemapRenderer),this._isInitialized=!0)}registerEventListeners(){const e=new Ys;this._tilemapRenderer.containsPoint=n=>(this._tilemapRenderer.worldTransform.applyInverse(n,e),this.tileHitDetection(e,!1)),this._tilemapRenderer.on("pointerup",()=>{this._isHolding=!1}),this._tilemapRenderer.on("pointerout",()=>{this._isHolding=!1}),this._tilemapRenderer.on("pointerdown",n=>{if(!(n.data.originalEvent instanceof PointerEvent)&&!(n.data.originalEvent instanceof TouchEvent))return;const s=n.data.originalEvent;if(s instanceof MouseEvent&&s.button===2)return;const r=n.data.global;this.tileHitDetection(r,!0)}),this._tilemapRenderer.on("click",n=>{if(!(n.data.originalEvent instanceof PointerEvent)||n.data.originalEvent.button===2)return;const r=n.data.global;this.tileHitDetection(r,!0,!0)})}tileHitDetection(e,n,s=!1){const r=this._tilemapRenderer.pointsBuf,o=Gg,c=r.length;n&&(this._isHolding=!0);for(let u=0;u<c;u+=o){const d=u+o,g=r.slice(u,d),m=Qn,f=Qn/2,p=Math.floor(e.x),C=Math.floor(e.y),E=g[2],b=g[3],I=E+m/2,_=b+f/2,S=Math.abs(p-I),T=Math.abs(C-_);if(S/(m*.5)+T/(f*.5)<=1){if(this._isHolding){const[y,A]=QT(E,b);s?this.onClick(y,A):(this._lastUsedTile.x!==y||this._lastUsedTile.y!==A)&&(this._lastUsedTile.x=y,this._lastUsedTile.y=A,this.onClick(y,A))}return!0}}return!1}onClick(e,n){const s=this._tilemap[n][e],r=Do.indexOf(s.height);let o=0;switch(this._actionSettings.currentAction){case Ut.DOOR:s.height!=="x"&&(this._doorLocation.x=e,this._doorLocation.y=n,this.renderTiles());return;case Ut.UP:if(s.height==="x")return;o=r+1;break;case Ut.DOWN:if(s.height==="x"||r<=1)return;o=r-1;break;case Ut.SET:o=Do.indexOf(this._actionSettings.currentHeight);break;case Ut.UNSET:o=0;break}if(o===-1||r===o)return;o>0&&(e+1>this._width&&(this._width=e+1),n+1>this._height&&(this._height=n+1));const c=Do[o];c&&(s.isBlocked||(this._tilemap[n][e].height=c,this.renderTiles()))}renderTiles(){this.tilemapRenderer.clear();for(let e=0;e<this._tilemap.length;e++)for(let n=0;n<this.tilemap[e].length;n++){const s=this.tilemap[e][n];let r=s.height;this._doorLocation.x===n&&this._doorLocation.y===e&&(r=rs.TILE_DOOR),s.isBlocked&&(r=rs.TILE_BLOCKED);const[o,c]=$T(n,e);this._tilemapRenderer.tile(this._assetCollection.getTexture(`floor_editor_${r}`),o,c)}}setTilemap(e,n){this._tilemap=[];const s=e.split("\r");let r=0,o=s.length;for(let c=0;c<o;c++){const u=s[c];if(u.length===0){s.splice(c,1),o=s.length,c--;continue}u.length>r&&(r=u.length)}for(let c=0;c<o;c++){this._tilemap[c]=[];const u=s[c];for(let d=0;d<r;d++){const g=n[c]&&n[c][d]||!1,m=u[d];m!=="x"&&m!=="X"&&m?this._tilemap[c][d]=new Ya(m,g):this._tilemap[c][d]=new Ya("x",g)}for(let d=r;d<Er;d++)this.tilemap[c][d]=new Ya("x",!1)}for(let c=o;c<Er;c++){this.tilemap[c]||(this.tilemap[c]=[]);for(let u=0;u<Er;u++)this.tilemap[c][u]=new Ya("x",!1)}this._width=r,this._height=o}getCurrentTilemapString(){if(this._tilemap[this._height-1][this._width-1].height==="x"){this._width=-1,this._height=-1;for(let s=Er-1;s>=0;s--)if(this._tilemap[s])for(let r=Er-1;r>=0;r--){if(!this._tilemap[s][r])continue;this._tilemap[s][r].height!=="x"&&(r+1>this._width&&(this._width=r+1),s+1>this._height&&(this._height=s+1))}}const n=[];for(let s=0;s<this._height;s++){const r=[];for(let o=0;o<this._width;o++){const c=this._tilemap[s][o];r[o]=c.height}n[s]=r.join("")}return n.join("\r")}clear(){this._tilemapRenderer.interactive=!1,this._tilemap=[],this._doorLocation.set(-1,-1),this._width=0,this._height=0,this._isHolding=!1,this._lastUsedTile.set(-1,-1),this._actionSettings.clear(),this._tilemapRenderer.clear()}get tilemapRenderer(){return this._tilemapRenderer}get tilemap(){return this._tilemap}get doorLocation(){return this._doorLocation}set doorLocation(e){this._doorLocation=e}get actionSettings(){return this._actionSettings}static get instance(){return rs._INSTANCE||(rs._INSTANCE=new rs),rs._INSTANCE}};rs._INSTANCE=null,rs.TILE_BLOCKED="r_blocked",rs.TILE_DOOR="r_door";let Kt=rs;const Ig=i.createContext({originalFloorplanSettings:null,setOriginalFloorplanSettings:null,visualizationSettings:null,setVisualizationSettings:null}),XT=a=>t(Ig.Provider,{...a}),lu=()=>i.useContext(Ig),JT=a=>{const{gap:e=1,children:n=null,...s}=a,[r,o]=i.useState(!1),[c,u]=i.useState(!1),{originalFloorplanSettings:d=null,setOriginalFloorplanSettings:g=null,setVisualizationSettings:m=null}=lu(),f=i.useRef(null);F(JE,C=>{const E=C.getParser();g(b=>{const I={...b};return I.reservedTiles=E.blockedTilesMap,Kt.instance.setTilemap(I.tilemap,I.reservedTiles),I}),o(!0),f.current.scrollTo(Kt.instance.view.width/3,0)}),F(ZE,C=>{const E=C.getParser();g(b=>{const I={...b};return I.entryPoint=[E.x,E.y],I.entryPointDir=E.direction,I}),m(b=>{const I={...b};return I.entryPointDir=E.direction,I}),Kt.instance.doorLocation=new Ys(E.x,E.y),u(!0)});const p=C=>{const E=f.current;if(E)switch(C){case"up":E.scrollBy({top:-10});break;case"down":E.scrollBy({top:10});break;case"left":E.scrollBy({left:-10});break;case"right":E.scrollBy({left:10});break}};return i.useEffect(()=>()=>{Kt.instance.clear(),m(C=>({wallHeight:d.wallHeight,thicknessWall:d.thicknessWall,thicknessFloor:d.thicknessFloor,entryPointDir:C.entryPointDir}))},[d.thicknessFloor,d.thicknessWall,d.wallHeight,m]),i.useEffect(()=>{!c||!r||Kt.instance.renderTiles()},[c,r]),i.useEffect(()=>{M(new eC),M(new tC),Kt.instance.tilemapRenderer.interactive=!0,f.current&&f.current.appendChild(Kt.instance.renderer.view)},[]),l(v,{gap:e,...s,children:[l(re,{overflow:"hidden",gap:1,children:[t(v,{center:!0,size:1,children:t(D,{className:"d-md-none",onClick:C=>p("left"),children:t(Rm,{className:"fa-icon"})})}),l(v,{overflow:"hidden",size:10,gap:1,children:[t(w,{justifyContent:"center",className:"d-md-none",children:t(D,{shrink:!0,onClick:C=>p("up"),children:t(Hg,{className:"fa-icon"})})}),t(P,{overflow:"auto",innerRef:f}),t(w,{justifyContent:"center",className:"d-md-none",children:t(D,{shrink:!0,onClick:C=>p("down"),children:t(Wg,{className:"fa-icon"})})})]}),t(v,{center:!0,size:1,children:t(D,{className:"d-md-none",onClick:C=>p("right"),children:t(Om,{className:"fa-icon"})})})]}),n]})},kd=a=>a.replace(/\r\n|\r|\n/g,`
`).toLowerCase(),ZT=a=>{const{onCloseClick:e=null}=a,[n,s]=i.useState(""),{originalFloorplanSettings:r=null}=lu(),o=()=>{M(new th(n.split(`
`).join("\r"),r.entryPoint[0],r.entryPoint[1],r.entryPointDir,xi(r.thicknessWall),xi(r.thicknessFloor),r.wallHeight-1))};return og(()=>{s(kd(r.tilemap))}),l(ie,{theme:"primary-slim",className:"floorplan-import-export",children:[t(ae,{headerText:h("floor.plan.editor.import.export"),onCloseClick:e}),l(ne,{children:[t("textarea",{className:"h-100",value:n,onChange:c=>s(c.target.value)}),l(w,{justifyContent:"between",children:[t(D,{onClick:c=>s(kd(r.tilemap)),children:h("floor.plan.editor.revert.to.last.received.map")}),t(D,{onClick:o,children:h("floor.plan.editor.save")})]})]})]})},Ad=0,$a=16,ew=0,tw=26,nw=a=>{const{visualizationSettings:e=null,setVisualizationSettings:n=null}=lu(),[s,r]=i.useState(Ut.SET),[o,c]=i.useState(0),u=b=>{r(b),Kt.instance.actionSettings.currentAction=b},d=()=>{n(b=>{const I={...b};return I.entryPointDir<7?++I.entryPointDir:I.entryPointDir=0,I})},g=b=>{(isNaN(b)||b<=0)&&(b=0),b>26&&(b=26),c(b),Kt.instance.actionSettings.currentHeight=b.toString(36)},m=b=>{n(I=>{const _={...I};return _.thicknessFloor=b,_})},f=b=>{n(I=>{const _={...I};return _.thicknessWall=b,_})},p=b=>{(isNaN(b)||b<=0)&&(b=Ad),b>$a&&(b=$a),n(I=>{const _={...I};return _.wallHeight=b,_})},C=()=>{let b=e.wallHeight+1;b>$a&&(b=$a),p(b)},E=()=>{let b=e.wallHeight-1;b<=0&&(b=Ad),p(b)};return l(v,{children:[l(w,{gap:1,children:[l(v,{size:5,gap:1,children:[t(N,{bold:!0,children:h("floor.plan.editor.draw.mode")}),l(w,{gap:3,children:[l(w,{gap:1,children:[t(Se,{itemActive:s===Ut.SET,onClick:b=>u(Ut.SET),children:t("i",{className:"icon icon-set-tile"})}),t(Se,{itemActive:s===Ut.UNSET,onClick:b=>u(Ut.UNSET),children:t("i",{className:"icon icon-unset-tile"})})]}),l(w,{gap:1,children:[t(Se,{itemActive:s===Ut.UP,onClick:b=>u(Ut.UP),children:t("i",{className:"icon icon-increase-height"})}),t(Se,{itemActive:s===Ut.DOWN,onClick:b=>u(Ut.DOWN),children:t("i",{className:"icon icon-decrease-height"})})]}),t(Se,{itemActive:s===Ut.DOOR,onClick:b=>u(Ut.DOOR),children:t("i",{className:"icon icon-set-door"})})]})]}),l(v,{alignItems:"center",size:4,children:[t(N,{bold:!0,children:h("floor.plan.editor.enter.direction")}),t("i",{className:`icon icon-door-direction-${e.entryPointDir} cursor-pointer`,onClick:d})]}),l(v,{size:3,children:[t(N,{bold:!0,children:h("floor.editor.wall.height")}),l(w,{alignItems:"center",gap:1,children:[t(Tm,{className:"cursor-pointer fa-icon",onClick:E}),t("input",{type:"number",className:"form-control form-control-sm quantity-input",value:e.wallHeight,onChange:b=>p(b.target.valueAsNumber)}),t(wm,{className:"cursor-pointer fa-icon",onClick:C})]})]})]}),l(w,{gap:1,children:[l(v,{size:6,children:[l(N,{bold:!0,children:[h("floor.plan.editor.tile.height"),": ",o]}),t(Vt,{className:"nitro-slider",min:ew,max:tw,step:1,value:o,onChange:b=>g(b),renderThumb:({style:b,...I},_)=>t("div",{style:{backgroundColor:`#${YT[_.valueNow.toString(33)]}`,...b},...I,children:_.valueNow})})]}),l(v,{size:6,children:[t(N,{bold:!0,children:h("floor.plan.editor.room.options")}),l(w,{className:"align-items-center",children:[l("select",{className:"form-control form-control-sm",value:e.thicknessWall,onChange:b=>f(parseInt(b.target.value)),children:[t("option",{value:0,children:h("navigator.roomsettings.wall_thickness.thinnest")}),t("option",{value:1,children:h("navigator.roomsettings.wall_thickness.thin")}),t("option",{value:2,children:h("navigator.roomsettings.wall_thickness.normal")}),t("option",{value:3,children:h("navigator.roomsettings.wall_thickness.thick")})]}),l("select",{className:"form-control form-control-sm",value:e.thicknessFloor,onChange:b=>m(parseInt(b.target.value)),children:[t("option",{value:0,children:h("navigator.roomsettings.floor_thickness.thinnest")}),t("option",{value:1,children:h("navigator.roomsettings.floor_thickness.thin")}),t("option",{value:2,children:h("navigator.roomsettings.floor_thickness.normal")}),t("option",{value:3,children:h("navigator.roomsettings.floor_thickness.thick")})]})]})]})]})]})},sw=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(!1),[o,c]=i.useState({tilemap:"",reservedTiles:[],entryPoint:[0,0],entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),[u,d]=i.useState({entryPointDir:2,wallHeight:-1,thicknessWall:1,thicknessFloor:1}),g=()=>{M(new th(Kt.instance.getCurrentTilemapString(),Kt.instance.doorLocation.x,Kt.instance.doorLocation.y,u.entryPointDir,xi(u.thicknessWall),xi(u.thicknessFloor),u.wallHeight-1))},m=()=>{d({wallHeight:o.wallHeight,thicknessWall:o.thicknessWall,thicknessFloor:o.thicknessFloor,entryPointDir:o.entryPointDir}),Kt.instance.doorLocation=new Ys(o.entryPoint[0],o.entryPoint[1]),Kt.instance.setTilemap(o.tilemap,o.reservedTiles),Kt.instance.renderTiles()};return Te(xn.DISPOSED,f=>n(!1)),F(nC,f=>{const p=f.getParser();c(C=>{const E={...C};return E.tilemap=p.model,E.wallHeight=p.wallHeight+1,E}),d(C=>{const E={...C};return E.wallHeight=p.wallHeight+1,E})}),F(sC,f=>{const p=f.getParser();c(C=>{const E={...C};return E.thicknessFloor=Ka(p.thicknessFloor),E.thicknessWall=Ka(p.thicknessWall),E}),d(C=>{const E={...C};return E.thicknessFloor=Ka(p.thicknessFloor),E.thicknessWall=Ka(p.thicknessWall),E})}),i.useEffect(()=>{const f={linkReceived:p=>{const C=p.split("/");if(!(C.length<2))switch(C[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(E=>!E);return}},eventUrlPrefix:"floor-editor/"};return _t(f),()=>St(f)},[]),i.useEffect(()=>{Kt.instance.initialize()},[]),l(XT,{value:{originalFloorplanSettings:o,setOriginalFloorplanSettings:c,visualizationSettings:u,setVisualizationSettings:d},children:[e&&l(ie,{uniqueKey:"floorpan-editor",className:"nitro-floorplan-editor",theme:"primary-slim",children:[t(ae,{headerText:h("floor.plan.editor.title"),onCloseClick:()=>n(!1)}),l(ne,{overflow:"hidden",children:[t(nw,{}),t(JT,{overflow:"hidden"}),l(w,{justifyContent:"between",children:[t(D,{onClick:m,children:h("floor.plan.editor.reload")}),l(vs,{children:[t(D,{disabled:!0,children:h("floor.plan.editor.preview")}),t(D,{onClick:f=>r(!0),children:h("floor.plan.editor.import.export")}),t(D,{onClick:g,children:h("floor.plan.editor.save")})]})]})]})]}),s&&t(ZT,{onCloseClick:()=>r(!1)})]})},rw=a=>{const{friend:e=null}=a,[n,s]=i.useState(!1),{followFriend:r=null}=Tn(),o=i.useRef();return i.useEffect(()=>{const c=u=>{const d=o.current;d&&u.target!==d&&!d.contains(u.target)&&s(!1)};return document.addEventListener(Ae.MOUSE_CLICK,c),()=>document.removeEventListener(Ae.MOUSE_CLICK,c)},[]),e?l("div",{ref:o,className:"btn btn-success friend-bar-item "+(n?"friend-bar-item-active":""),onClick:c=>s(u=>!u),children:[l("div",{className:`friend-bar-item-head position-absolute ${e.id>0?"avatar":"group"}`,children:[e.id>0&&t($e,{headOnly:!0,figure:e.figure,direction:2}),e.id<=0&&t(ze,{isGroup:!0,badgeCode:e.figure})]}),t("div",{className:"text-truncate",children:e.name}),n&&l("div",{className:"d-flex justify-content-between",children:[t(P,{className:"nitro-friends-spritesheet icon-friendbar-chat cursor-pointer",onClick:c=>cl(e.id)}),e.followingAllowed&&t(P,{className:"nitro-friends-spritesheet icon-friendbar-visit cursor-pointer",onClick:c=>r(e)}),t(P,{className:"nitro-friends-spritesheet icon-profile cursor-pointer",onClick:c=>pn(e.id)})]})]}):l("div",{ref:o,className:"btn btn-primary friend-bar-item friend-bar-search",children:[t("div",{className:"friend-bar-item-head position-absolute"}),t("div",{className:"text-truncate",children:h("friend.bar.find.title")})]})},jl=6,ow=a=>{const{onlineFriends:e=null}=a,[n,s]=i.useState(0),r=i.useRef();return l(w,{innerRef:r,alignItems:"center",className:"friend-bar",children:[t(D,{variant:"black",className:"friend-bar-button",disabled:n<=0,onClick:o=>s(n-1),children:t(bn,{className:"fa-icon"})}),Array.from(Array(jl),(o,c)=>t(rw,{friend:e[n+c]||null},c)),t(D,{variant:"black",className:"friend-bar-button",disabled:!(e.length>jl&&n+jl<=e.length-1),onClick:o=>s(n+1),children:t(_n,{className:"fa-icon"})})]})},aw=a=>{const{friend:e=null,selected:n=!1,selectFriend:s=null}=a,[r,o]=i.useState(!1),{followFriend:c=null,updateRelationship:u=null}=Tn(),d=C=>{C.stopPropagation(),c(e)},g=C=>{C.stopPropagation(),cl(e.id)},m=C=>{C.stopPropagation(),o(!0)},f=(C,E)=>{C.stopPropagation(),u(e,E),o(!1)},p=()=>{if(!e)return"none";switch(e.relationshipStatus){case fn.RELATIONSHIP_HEART:return"heart";case fn.RELATIONSHIP_SMILE:return"smile";case fn.RELATIONSHIP_BOBBA:return"bobba";default:return"none"}};return e?l(Oi,{justifyContent:"between",className:`px-2 py-1 ${n&&"bg-primary text-white"}`,onClick:C=>s(e.id),children:[l(w,{alignItems:"center",gap:1,children:[t(P,{onClick:C=>C.stopPropagation(),children:t(Pn,{userId:e.id})}),t("div",{children:e.name})]}),l(w,{alignItems:"center",gap:1,children:[!r&&l(j,{children:[e.followingAllowed&&t(P,{pointer:!0,onClick:d,className:"nitro-friends-spritesheet icon-follow",title:h("friendlist.tip.follow")}),e.online&&t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-chat",onClick:g,title:h("friendlist.tip.im")}),e.id>0&&t(P,{className:`nitro-friends-spritesheet icon-${p()} cursor-pointer`,onClick:m,title:h("infostand.link.relationship")})]}),r&&l(j,{children:[t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-heart",onClick:C=>f(C,fn.RELATIONSHIP_HEART)}),t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-smile",onClick:C=>f(C,fn.RELATIONSHIP_SMILE)}),t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba",onClick:C=>f(C,fn.RELATIONSHIP_BOBBA)}),t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-none",onClick:C=>f(C,fn.RELATIONSHIP_NONE)})]})]})]}):null},xd=a=>{const{list:e=null,selectedFriendsIds:n=null,selectFriend:s=null}=a;return!e||!e.length?null:t(j,{children:e.map((r,o)=>t(aw,{friend:r,selected:n&&n.indexOf(r.id)>=0,selectFriend:s},o))})},iw=a=>{const{request:e=null}=a,{requestResponse:n=null}=Tn();return e?l(Oi,{justifyContent:"between",className:"px-2 py-1",children:[l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:e.id}),t("div",{children:e.name})]}),l(w,{alignItems:"center",gap:1,children:[t(P,{className:"nitro-friends-spritesheet icon-accept cursor-pointer",onClick:s=>n(e.id,!0)}),t(P,{className:"nitro-friends-spritesheet icon-deny cursor-pointer",onClick:s=>n(e.id,!1)})]})]}):null},lw=a=>{const{children:e=null,...n}=a,{requests:s=[],requestResponse:r=null}=Tn();return s.length?l(ki,{...n,children:[l(v,{fullHeight:!0,justifyContent:"between",gap:1,children:[t(v,{gap:0,children:s.map((o,c)=>t(iw,{request:o},c))}),t(w,{justifyContent:"center",className:"px-2 py-1",children:t(D,{onClick:o=>r(-1,!1),children:h("friendlist.requests.dismissall")})})]}),e]}):null},cw=a=>{const{selectedFriendsIds:e=null,removeFriendsText:n=null,removeSelectedFriends:s=null,onCloseClick:r=null}=a;return l(ie,{className:"nitro-friends-remove-confirmation",theme:"primary-slim",children:[t(ae,{headerText:h("friendlist.removefriendconfirm.title"),onCloseClick:r}),l(ne,{className:"text-black",children:[t("div",{children:n}),l(w,{gap:1,children:[t(D,{fullWidth:!0,variant:"danger",disabled:e.length===0,onClick:s,children:h("generic.ok")}),t(D,{fullWidth:!0,onClick:r,children:h("generic.cancel")})]})]})]})},uw=a=>{const{selectedFriendsIds:e=null,onCloseClick:n=null,sendRoomInvite:s=null}=a,[r,o]=i.useState("");return l(ie,{className:"nitro-friends-room-invite",uniqueKey:"nitro-friends-room-invite",theme:"primary-slim",children:[t(ae,{headerText:h("friendlist.invite.title"),onCloseClick:n}),l(ne,{className:"text-black",children:[h("friendlist.invite.summary",["count"],[e.length.toString()]),t("textarea",{className:"form-control",value:r,maxLength:255,onChange:c=>o(c.target.value)}),t(N,{center:!0,className:"bg-muted rounded p-1",children:h("friendlist.invite.note")}),l(w,{gap:1,children:[t(D,{fullWidth:!0,variant:"success",disabled:r.length===0||e.length===0,onClick:()=>s(r),children:h("friendlist.invite.send")}),t(D,{fullWidth:!0,onClick:n,children:h("generic.cancel")})]})]})]})},dw=a=>{const{...e}=a,[n,s]=i.useState(""),[r,o]=i.useState(null),[c,u]=i.useState(null),{canRequestFriend:d=null,requestFriend:g=null}=Tn();return F(rC,m=>{const f=m.getParser();o(f.friends),u(f.others)}),i.useEffect(()=>{if(!n||!n.length)return;const m=setTimeout(()=>{!n||!n.length||M(new oC(n))},500);return()=>clearTimeout(m)},[n]),l(ki,{...e,children:[t("input",{type:"text",className:"search-input form-control form-control-sm w-100 rounded-0",placeholder:h("generic.search"),value:n,maxLength:50,onChange:m=>s(m.target.value)}),l(v,{children:[r&&l(j,{children:[r.length===0&&t(N,{bold:!0,small:!0,className:"px-2 py-1",children:h("friendlist.search.nofriendsfound")}),r.length>0&&l(v,{gap:0,children:[t(N,{bold:!0,small:!0,className:"px-2 py-1",children:h("friendlist.search.friendscaption",["cnt"],[r.length.toString()])}),t("hr",{className:"mx-2 mt-0 mb-1 text-black"}),t(v,{gap:0,children:r.map(m=>l(Oi,{justifyContent:"between",className:"px-2 py-1",children:[l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:m.avatarId}),t("div",{children:m.avatarName})]}),t(w,{alignItems:"center",gap:1,children:m.isAvatarOnline&&t(P,{className:"nitro-friends-spritesheet icon-chat cursor-pointer",onClick:f=>cl(m.avatarId),title:h("friendlist.tip.im")})})]},m.avatarId))})]})]}),c&&l(j,{children:[c.length===0&&t(N,{bold:!0,small:!0,className:"px-2 py-1",children:h("friendlist.search.noothersfound")}),c.length>0&&l(v,{gap:0,children:[t(N,{bold:!0,small:!0,className:"px-2 py-1",children:h("friendlist.search.otherscaption",["cnt"],[c.length.toString()])}),t("hr",{className:"mx-2 mt-0 mb-1 text-black"}),t(v,{gap:0,children:c.map(m=>l(Oi,{justifyContent:"between",className:"px-2 py-1",children:[l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:m.avatarId}),t("div",{children:m.avatarName})]}),t(w,{alignItems:"center",gap:1,children:d(m.avatarId)&&t(P,{className:"nitro-friends-spritesheet icon-add cursor-pointer",onClick:f=>g(m.avatarId,m.avatarName),title:h("friendlist.tip.addfriend")})})]},m.avatarId))})]})]})]})]})},mw=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState([]),[o,c]=i.useState(!1),[u,d]=i.useState(!1),{onlineFriends:g=[],offlineFriends:m=[],requests:f=[],requestFriend:p=null}=Tn(),C=i.useMemo(()=>{if(!s||!s.length)return"";const _=[];for(const S of s){let T=g.find(R=>R.id===S);T||(T=m.find(R=>R.id===S)),T&&_.push(T.name)}return h("friendlist.removefriendconfirm.userlist",["user_names"],[_.join(", ")])},[m,g,s]),E=i.useCallback(_=>{_<0||r(S=>{const T=[...S],R=T.indexOf(_);return R>-1?T.splice(R,1):T.push(_),T})},[r]),b=_=>{!s.length||!_||!_.length||_.length>255||(M(new aC(_,s)),c(!1))},I=()=>{s.length!==0&&(r(_=>(M(new iC(..._)),[])),d(!1))};return i.useEffect(()=>{const _={linkReceived:S=>{const T=S.split("/");if(!(T.length<2))switch(T[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(R=>!R);return;case"request":if(T.length<4)return;p(parseInt(T[2]),T[3])}},eventUrlPrefix:"friends/"};return _t(_),()=>St(_)},[p]),e?l(j,{children:[l(ie,{className:"nitro-friends",uniqueKey:"nitro-friends",theme:"primary-slim",children:[t(ae,{headerText:h("friendlist.friends"),onCloseClick:_=>n(!1)}),l(ne,{overflow:"hidden",gap:1,className:"text-black p-0",children:[l(fS,{fullHeight:!0,overflow:"hidden",children:[t(ki,{headerText:h("friendlist.friends")+` (${g.length})`,isExpanded:!0,children:t(xd,{list:g,selectedFriendsIds:s,selectFriend:E})}),t(ki,{headerText:h("friendlist.friends.offlinecaption")+` (${m.length})`,children:t(xd,{list:m,selectedFriendsIds:s,selectFriend:E})}),t(lw,{headerText:h("friendlist.tab.friendrequests")+` (${f.length})`,isExpanded:!0}),t(dw,{headerText:h("people.search.title")})]}),s&&s.length>0&&l(w,{gap:1,className:"p-1",children:[t(D,{fullWidth:!0,onClick:()=>c(!0),children:h("friendlist.tip.invite")}),t(D,{fullWidth:!0,variant:"danger",onClick:_=>d(!0),children:h("generic.delete")})]})]})]}),o&&t(uw,{selectedFriendsIds:s,onCloseClick:()=>c(!1),sendRoomInvite:b}),u&&t(cw,{selectedFriendsIds:s,removeFriendsText:C,onCloseClick:()=>d(!1),removeSelectedFriends:I})]}):null},hw=a=>{const{thread:e=null,group:n=null}=a,s=i.useMemo(()=>n.type===Rr.GROUP_CHAT&&Th(n.chats[0].extraData),[n]),r=i.useMemo(()=>!e||!n?!1:!!(n.type===Rr.PRIVATE_CHAT&&n.userId===z().userId||s&&n.chats.length&&s.userId===z().userId),[e,n,s]);return!e||!n?null:n.userId?l(w,{fullWidth:!0,justifyContent:r?"end":"start",gap:2,children:[l(P,{shrink:!0,className:"message-avatar",children:[n.type===Rr.PRIVATE_CHAT&&!r&&t($e,{figure:e.participant.figure,direction:2}),s&&!r&&t($e,{figure:s.figure,direction:2})]}),l(P,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(r?"right":"left"),children:[l(P,{className:"fw-bold",children:[r&&z().userName,!r&&(s?s.username:e.participant.name)]}),n.chats.map((o,c)=>t(P,{className:"text-break",children:o.message},c))]}),r&&t(P,{shrink:!0,className:"message-avatar",children:t($e,{figure:z().figure,direction:4})})]}):t(j,{children:n.chats.map((o,c)=>t(w,{fullWidth:!0,gap:2,justifyContent:"start",children:l(P,{className:"w-100 text-break",children:[o.type===Ws.SECURITY_NOTIFICATION&&l(w,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-muted",children:[t(P,{className:"nitro-friends-spritesheet icon-warning flex-shrink-0"}),t(P,{children:o.message})]}),o.type===Ws.ROOM_INVITE&&l(w,{gap:2,alignItems:"center",className:"bg-light rounded mb-2 px-2 py-1 small text-black",children:[t(P,{className:"messenger-notification-icon flex-shrink-0"}),l(P,{children:[h("messenger.invitation")+" ",o.message]})]})]})},c))})},gw=a=>{const{thread:e=null}=a;return e.setRead(),t(j,{children:e.groups.length>0&&e.groups.map((n,s)=>t(hw,{thread:e,group:n},s))})},fw=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(-1),[o,c]=i.useState(""),{visibleThreads:u=[],activeThread:d=null,getMessageThread:g=null,sendMessage:m=null,setActiveThreadId:f=null,closeThread:p=null}=qh(),{report:C=null}=Xn(),E=i.useRef(),b=()=>d&&d.participant&&M(new ol(d.participant.id)),I=()=>d&&d.participant&&pn(d.participant.id),_=()=>{!d||!o.length||(m(d,z().userId,o),c(""))},S=T=>{T.key==="Enter"&&_()};return i.useEffect(()=>{const T={linkReceived:R=>{const y=R.split("/");if(y.length===2){if(y[1]==="open"){n(!0);return}if(y[1]==="toggle"){n(U=>!U);return}const A=g(parseInt(y[1]));if(!A)return;f(A.threadId),n(!0)}},eventUrlPrefix:"friends-messenger/"};return _t(T),()=>St(T)},[g,f]),i.useEffect(()=>{!e||!d||(E.current.scrollTop=E.current.scrollHeight)},[e,d]),i.useEffect(()=>{if(e&&!d){s>0?f(s):u.length>0&&f(u[0].threadId);return}!e&&d&&(r(d.threadId),f(-1))},[e,d,s,u,f]),e?l(ie,{className:"nitro-friends-messenger",uniqueKey:"nitro-friends-messenger",theme:"primary-slim",children:[t(ae,{headerText:h("messenger.window.title",["OPEN_CHAT_COUNT"],[u.length.toString()]),onCloseClick:T=>n(!1)}),t(ne,{children:l(re,{overflow:"hidden",children:[l(v,{size:4,overflow:"hidden",children:[t(N,{bold:!0,children:h("toolbar.icon.label.messenger")}),t(v,{fit:!0,overflow:"auto",children:t(v,{children:u&&u.length>0&&u.map(T=>l(Se,{itemActive:d===T,onClick:R=>f(T.threadId),children:[T.unread&&t(qs,{count:T.unreadCount}),l(w,{fullWidth:!0,alignItems:"center",gap:1,children:[l(w,{alignItems:"center",className:"friend-head px-1",children:[T.participant.id>0&&t($e,{figure:T.participant.figure,headOnly:!0,direction:3}),T.participant.id<=0&&t(ze,{isGroup:!0,badgeCode:T.participant.figure})]}),t(N,{truncate:!0,grow:!0,children:T.participant.name})]})]},T.threadId))})})]}),t(v,{size:8,overflow:"hidden",children:d&&l(j,{children:[t(N,{bold:!0,center:!0,children:h("messenger.window.separator",["FRIEND_NAME"],[d.participant.name])}),l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[l(w,{gap:1,children:[l(vs,{children:[t(D,{onClick:b,children:t(P,{className:"nitro-friends-spritesheet icon-follow"})}),t(D,{onClick:I,children:t(P,{className:"nitro-friends-spritesheet icon-profile-sm"})})]}),t(D,{variant:"danger",onClick:()=>C(lt.IM,{reportedUserId:d.participant.id}),children:h("messenger.window.button.report")})]}),t(D,{onClick:T=>p(d.threadId),children:t(Ln,{className:"fa-icon"})})]}),t(v,{fit:!0,className:"bg-muted p-2 rounded chat-messages",children:t(v,{innerRef:E,overflow:"auto",children:t(gw,{thread:d})})}),l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",maxLength:255,placeholder:h("messenger.window.input.default",["FRIEND_NAME"],[d.participant.name]),value:o,onChange:T=>c(T.target.value),onKeyDown:S}),t(D,{variant:"success",onClick:_,children:h("widgets.chatinput.say")})]})]})})]})})]}):null},pw=a=>{const{settings:e=null,onlineFriends:n=[]}=Tn();return e?l(j,{children:[xc.createPortal(t(ow,{onlineFriends:n}),document.getElementById("toolbar-friend-bar-container")),t(mw,{}),t(fw,{})]}):null},Iw=()=>{const{games:a,selectedGame:e,setSelectedGame:n}=Il(),s=o=>{let c=["game-icon"];return e===o&&c.push("selected"),c.join(" ")},r=o=>`url(${o.assetUrl}${o.gameNameId}_icon.png)`;return l(P,{fullWidth:!0,className:"gameList-container bg-dark p-1",children:[h("gamecenter.game_list_title"),t(w,{gap:3,children:a&&a.map((o,c)=>t(P,{className:s(o),onClick:u=>n(o),style:{backgroundImage:r(o)}},c))})]})},Ew=()=>{const{gameURL:a,setGameURL:e}=Il(),[n,s]=i.useState(0),r=i.useRef();return i.useEffect(()=>{if(!r||r&&!r.current)return;s(0);let o=document.createElement("iframe");o.src=a,o.classList.add("game-center-stage"),o.classList.add("h-100"),o.onload=()=>{s(c=>c+=1)},r.current.innerHTML="",r.current.appendChild(o)},[r,a]),i.useEffect(()=>{n>1&&(e(null),M(new lC))},[n,e]),a?t(P,{innerRef:r,className:"game-center-stage"}):null},Cw=()=>{const{selectedGame:a,accountStatus:e}=Il();i.useEffect(()=>{a&&(M(new cC(a.gameId)),M(new uC(a.gameId)))},[a]);const n=()=>Ft.uintHexColor(a.bgColor),s=()=>`url(${a.assetUrl}${a.gameNameId}_theme.png)`,r=()=>Ft.uintHexColor(a.textColor),o=()=>{M(new dC(a.gameId))};return l(w,{className:"game-view py-4",fullHeight:!0,style:{backgroundColor:n(),backgroundImage:s(),color:r()},children:[l(w,{className:"w-75",column:!0,alignItems:"center",gap:2,children:[t(N,{bold:!0,children:h(`gamecenter.${a.gameNameId}.description_title`)}),t("img",{src:a.assetUrl+a.gameNameId+"_logo.png"}),(e.hasUnlimitedGames||e.freeGamesLeft>0)&&t(j,{children:l(D,{variant:"light",position:"relative",className:"px-4",onClick:o,children:[h("gamecenter.play_now"),!e.hasUnlimitedGames&&t(qs,{className:"me-n1 mt-n1",count:e.freeGamesLeft})]})}),t(N,{bold:!0,className:"w-50",center:!0,children:h(`gamecenter.${a.gameNameId}.description_content`)})]}),t(P,{className:"w-25"})]})},bw=()=>{const{isVisible:a,setIsVisible:e,games:n,accountStatus:s}=Il();if(i.useEffect(()=>{const r=()=>{e(c=>!c)},o={linkReceived:c=>{switch(c.split("/")[1]){case"toggle":r();break}},eventUrlPrefix:"games/"};return _t(o),()=>St(o)},[]),!(!a||!n||!s))return l(w,{position:"absolute",className:"top-0 bottom-0 start-0 end-0 bg-black",justifyContent:"center",children:[l(w,{className:"game-center-main",column:!0,children:[t(Cw,{}),t(Iw,{})]}),t(Ew,{})]})},_w=[0,1,2,3,4,5,6,7,8],Sw=a=>{const{badgeParts:e=[],setBadgeParts:n=null}=a,[s,r]=i.useState(-1),{groupCustomize:o=null}=_a(),c=(u,d,g)=>{const m=[...e];m[u][d]=g,n(m),d==="key"&&r(-1)};return!e||!e.length?null:l(j,{children:[s<0&&e&&e.length>0&&e.map((u,d)=>l(w,{alignItems:"center",justifyContent:"between",gap:2,className:"bg-muted rounded px-2 py-1",children:[l(w,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:g=>r(d),children:[e[d].code&&e[d].code.length>0&&t(ze,{badgeCode:e[d].code,isGroup:!0}),(!e[d].code||!e[d].code.length)&&t(w,{center:!0,className:"badge-image group-badge",children:t(da,{className:"fa-icon"})})]}),u.type!==an.BASE&&t(re,{gap:1,columnCount:3,children:_w.map((g,m)=>t(P,{pointer:!0,className:`group-badge-position-swatch ${e[d].position===g?"active":""}`,onClick:f=>c(d,"position",g)},m))}),t(re,{gap:1,columnCount:8,children:o.badgePartColors.length>0&&o.badgePartColors.map((g,m)=>t(P,{pointer:!0,className:`group-badge-color-swatch ${e[d].color===m+1?"active":""}`,style:{backgroundColor:"#"+g.color},onClick:f=>c(d,"color",m+1)},m))})]},d)),s>=0&&l(re,{gap:1,columnCount:5,children:[e[s].type===an.SYMBOL&&t(v,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:u=>c(s,"key",0),children:t(w,{center:!0,className:"badge-image group-badge",children:t(Ln,{className:"fa-icon"})})}),(e[s].type===an.BASE?o.badgeBases:o.badgeSymbols).map((u,d)=>t(v,{pointer:!0,center:!0,className:"bg-muted rounded p-1",onClick:g=>c(s,"key",u.id),children:t(ze,{badgeCode:an.getCode(e[s].type,u.id,e[s].color,4),isGroup:!0})},d))]})]})},Eg=a=>{const{groupData:e=null,setGroupData:n=null,setCloseAction:s=null,skipDefault:r=null}=a,[o,c]=i.useState(null),{groupCustomize:u=null}=_a(),d=()=>{if(!o||!o.length)return"";let m="";return o.forEach(f=>f.code&&(m+=f.code)),m},g=i.useCallback(()=>{if(!e||!o||!o.length)return!1;if(e.groupBadgeParts===o)return!0;if(e.groupId<=0)return n(f=>{const p={...f};return p.groupBadgeParts=o,p}),!0;const m=[];return o.forEach(f=>{f.code&&(m.push(f.key),m.push(f.color),m.push(f.position))}),M(new mC(e.groupId,m)),!0},[e,o,n]);return i.useEffect(()=>{if(e.groupBadgeParts)return;const m=[new an(an.BASE,u.badgeBases[0].id,u.badgePartColors[0].id),new an(an.SYMBOL,0,u.badgePartColors[0].id),new an(an.SYMBOL,0,u.badgePartColors[0].id),new an(an.SYMBOL,0,u.badgePartColors[0].id),new an(an.SYMBOL,0,u.badgePartColors[0].id)];n(f=>({...f,groupBadgeParts:m}))},[e.groupBadgeParts,u,n]),i.useEffect(()=>{if(e.groupId<=0){c(e.groupBadgeParts?[...e.groupBadgeParts]:null);return}c(e.groupBadgeParts)},[e]),i.useEffect(()=>(s({action:g}),()=>s(null)),[s,g]),l(re,{overflow:"hidden",gap:1,children:[t(v,{size:2,children:t(w,{center:!0,className:"bg-muted rounded p-1",children:t(ze,{badgeCode:d(),isGroup:!0})})}),t(v,{size:10,overflow:"auto",children:t(Sw,{badgeParts:o,setBadgeParts:c})})]})},Cg=a=>{const{groupData:e=null,setGroupData:n=null,setCloseAction:s=null}=a,[r,o]=i.useState(null),{groupCustomize:c=null}=_a(),u=m=>m===0?c.groupColorsA.find(f=>f.id===r[m]).color:c.groupColorsB.find(f=>f.id===r[m]).color,d=(m,f)=>{o(p=>{const C=[...p];return C[m]=f,C})},g=i.useCallback(()=>!e||!r||!r.length?!1:e.groupColors===r?!0:e.groupId<=0?(n(m=>{const f={...m};return f.groupColors=[...r],f}),!0):(M(new hC(e.groupId,r[0],r[1])),!0),[e,r,n]);return i.useEffect(()=>{if(!c.groupColorsA||!c.groupColorsB||e.groupColors)return;const m=[c.groupColorsA[0].id,c.groupColorsB[0].id];n(f=>({...f,groupColors:m}))},[c,e.groupColors,n]),i.useEffect(()=>{if(e.groupId<=0){o(e.groupColors?[...e.groupColors]:null);return}o(e.groupColors)},[e]),i.useEffect(()=>(s({action:g}),()=>s(null)),[s,g]),r?l(re,{overflow:"hidden",children:[l(v,{size:2,gap:1,children:[t(N,{bold:!0,children:h("group.edit.color.guild.color")}),e.groupColors&&e.groupColors.length>0&&l(w,{overflow:"hidden",className:"rounded border",children:[t(P,{className:"group-color-swatch",style:{backgroundColor:"#"+u(0)}}),t(P,{className:"group-color-swatch",style:{backgroundColor:"#"+u(1)}})]})]}),l(v,{size:5,gap:1,overflow:"hidden",children:[t(N,{bold:!0,children:h("group.edit.color.primary.color")}),t(Le,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:e.groupColors&&c.groupColorsA&&c.groupColorsA.map((m,f)=>t("div",{className:zt("group-badge-color-swatch cursor-pointer",e.groupColors[0]===m.id&&"active"),style:{backgroundColor:"#"+m.color},onClick:()=>d(0,m.id)},f))})]}),l(v,{size:5,gap:1,overflow:"hidden",children:[t(N,{bold:!0,children:h("group.edit.color.secondary.color")}),t(Le,{gap:1,columnCount:7,columnMinWidth:16,columnMinHeight:16,children:e.groupColors&&c.groupColorsB&&c.groupColorsB.map((m,f)=>t("div",{className:zt("group-badge-color-swatch cursor-pointer",e.groupColors[1]===m.id&&"active"),style:{backgroundColor:"#"+m.color},onClick:()=>d(1,m.id)},f))})]})]}):null},Nw=a=>{const{groupData:e=null,setGroupData:n=null,purchaseCost:s=0}=a,{groupCustomize:r=null}=_a(),o=()=>{if(!e||!e.groupBadgeParts||!e.groupBadgeParts.length)return"";let u="";return e.groupBadgeParts.forEach(d=>d.code&&(u+=d.code)),u},c=u=>u===0?r.groupColorsA.find(d=>d.id===e.groupColors[u]).color:r.groupColorsB.find(d=>d.id===e.groupColors[u]).color;return e?l(re,{overflow:"hidden",gap:1,children:[l(v,{size:3,children:[l(v,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[t(N,{bold:!0,center:!0,children:h("group.create.confirm.guildbadge")}),t(ze,{badgeCode:o(),isGroup:!0})]}),l(v,{center:!0,className:"bg-muted rounded p-1",gap:2,children:[t(N,{bold:!0,center:!0,children:h("group.edit.color.guild.color")}),l(w,{overflow:"hidden",className:"rounded border",children:[t(P,{className:"group-color-swatch",style:{backgroundColor:"#"+c(0)}}),t(P,{className:"group-color-swatch",style:{backgroundColor:"#"+c(1)}})]})]})]}),l(v,{size:9,justifyContent:"between",children:[l(v,{children:[l(v,{gap:1,children:[t(N,{bold:!0,children:e.groupName}),t(N,{children:e.groupDescription})]}),t(N,{overflow:"auto",children:h("group.create.confirm.info")})]}),t(N,{center:!0,variant:"white",className:"bg-primary rounded p-1",children:h("group.create.confirm.buyinfo",["amount"],[s.toString()])})]})]}):null},bg=a=>{const{groupData:e=null,setGroupData:n=null,setCloseAction:s=null,onClose:r=null,isCreator:o=!1,availableRooms:c=[]}=a,[u,d]=i.useState(""),[g,m]=i.useState(""),[f,p]=i.useState(-1),{showConfirm:C=null}=Je(),E=()=>{!e||e.groupId<=0||C(h("group.deleteconfirm.desc"),()=>{M(new fC(e.groupId)),r&&r()},null,null,null,h("group.deleteconfirm.title"))},b=i.useCallback(()=>!e||!u||!u.length?!1:u===e.groupName&&g===e.groupDescription?!0:e.groupId<=0?f<=0?!1:(n(I=>{const _={...I};return _.groupName=u,_.groupDescription=g,_.groupHomeroomId=f,_}),!0):(M(new gC(e.groupId,u,g||"")),!0),[e,u,g,f,n]);return i.useEffect(()=>{d(e.groupName||""),m(e.groupDescription||""),p(e.groupHomeroomId)},[e]),i.useEffect(()=>(s({action:b}),()=>s(null)),[s,b]),e?l(v,{justifyContent:"between",overflow:"auto",children:[l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t(N,{center:!0,className:"col-3",children:h("group.edit.name")}),t("input",{type:"text",className:"form-control form-control-sm",value:u,maxLength:29,onChange:I=>d(I.target.value)})]}),l(w,{alignItems:"center",gap:1,children:[t(N,{center:!0,className:"col-3",children:h("group.edit.desc")}),t("textarea",{className:"form-control form-control-sm",value:g,maxLength:254,onChange:I=>m(I.target.value)})]}),o&&l(j,{children:[l(w,{alignItems:"center",gap:1,children:[t(N,{center:!0,className:"col-3",children:h("group.edit.base")}),t(v,{fullWidth:!0,gap:1,children:l("select",{className:"form-select form-select-sm",value:f,onChange:I=>p(parseInt(I.target.value)),children:[t("option",{value:-1,disabled:!0,children:h("group.edit.base.select.room")}),c&&c.map((I,_)=>t("option",{value:I.id,children:I.name},_))]})})]}),l(w,{gap:1,children:[t(P,{className:"col-3",children:""}),t(N,{small:!0,children:h("group.edit.base.warning")})]})]})]}),!o&&t(D,{variant:"danger",onClick:E,children:h("group.delete")}),o&&t(N,{underline:!0,center:!0,fullWidth:!0,pointer:!0,onClick:I=>te("navigator/create"),children:h("group.createroom")})]}):null},vw=[1,2,3,4],Tw=a=>{const{onClose:e=null}=a,[n,s]=i.useState(1),[r,o]=i.useState(null),[c,u]=i.useState(null),[d,g]=i.useState(null),[m,f]=i.useState(0),p=()=>{o(null),u(null),e&&e()},C=()=>{if(!c)return;const I=[];c.groupBadgeParts.forEach(_=>{_.code&&(I.push(_.key),I.push(_.color),I.push(_.position))}),M(new EC(c.groupName,c.groupDescription,c.groupHomeroomId,c.groupColors[0],c.groupColors[1],I))},E=()=>{if(!(r&&r.action&&!r.action())){if(n===1){e();return}s(I=>I-1)}},b=()=>{if(!(r&&r.action&&!r.action())){if(n===4){C();return}s(I=>I===4?I:I+1)}};return F(pC,I=>{const _=I.getParser(),S=[];_.availableRooms.forEach((T,R)=>S.push({id:R,name:T})),g(S),f(_.groupCost)}),i.useEffect(()=>{s(1),u({groupId:-1,groupName:null,groupDescription:null,groupHomeroomId:-1,groupState:1,groupCanMembersDecorate:!0,groupColors:null,groupBadgeParts:null}),M(new IC)},[u]),c?l(ie,{className:"nitro-group-creator",theme:"primary-slim",children:[t(ae,{headerText:h("group.create.title"),onCloseClick:p}),l(ne,{children:[t(w,{center:!0,className:"creator-tabs",children:vw.map((I,_)=>t(w,{center:!0,className:`tab tab-${I===1?"blue-flat":I===4?"yellow":"blue-arrow"} ${n===I?"active":""}`,children:t(N,{variant:"white",children:h(`group.create.steplabel.${I}`)})},_))}),l(v,{overflow:"hidden",children:[l(w,{alignItems:"center",gap:2,children:[t(P,{className:`nitro-group-tab-image tab-${n}`}),l(v,{grow:!0,gap:0,children:[t(N,{bold:!0,fontSize:4,children:h(`group.create.stepcaption.${n}`)}),t(N,{children:h(`group.create.stepdesc.${n}`)})]})]}),l(v,{overflow:"hidden",children:[n===1&&t(bg,{groupData:c,setGroupData:u,setCloseAction:o,onClose:null,isCreator:!0,availableRooms:d}),n===2&&t(Eg,{groupData:c,setGroupData:u,setCloseAction:o}),n===3&&t(Cg,{groupData:c,setGroupData:u,setCloseAction:o}),n===4&&t(Nw,{groupData:c,setGroupData:u,purchaseCost:m})]}),l(w,{justifyContent:"between",children:[t(D,{variant:"link",className:"text-black",onClick:E,children:h(n===1?"generic.cancel":"group.create.previousstep")}),t(D,{disabled:n===4&&!yr(),variant:n===4?yr()?"success":"danger":"primary",onClick:b,children:h(n===4?yr()?"group.create.confirm.buy":"group.create.confirm.viprequired":"group.create.nextstep")})]})]})]})]}):null},ww=["regular","exclusive","private"],_g=a=>{const{groupInformation:e=null,onClose:n=null,overflow:s="hidden",...r}=a,{showConfirm:o=null}=Je(),c=e&&e.ownerName===z().userName,u=()=>e&&Kc(e.id),d=()=>{o(h("group.leaveconfirm.desc"),()=>{M(new Bc(e.id,z().userId)),n&&n()},null)},g=()=>e.membershipType===Lt.NOT_MEMBER||e.membershipType===Lt.REQUEST_PENDING?null:c?t("i",{className:"icon icon-group-owner",title:h("group.youareowner")}):e.isAdmin?t("i",{className:"icon icon-group-admin",title:h("group.youareadmin")}):t("i",{className:"icon icon-group-member",title:h("group.youaremember")}),m=()=>{if(c)return"group.youareowner";if(e.type===An.PRIVATE&&e.membershipType!==Lt.MEMBER)return"";if(e.membershipType===Lt.MEMBER)return"group.leave";if(e.membershipType===Lt.NOT_MEMBER&&e.type===An.REGULAR)return"group.join";if(e.membershipType===Lt.REQUEST_PENDING)return"group.membershippending";if(e.membershipType===Lt.NOT_MEMBER&&e.type===An.EXCLUSIVE)return"group.requestmembership"},f=()=>{if(!(e.type===An.PRIVATE&&e.membershipType===Lt.NOT_MEMBER)){if(e.membershipType===Lt.MEMBER){d();return}u()}},p=C=>{switch(C){case"members":ed(e.id);break;case"members_pending":ed(e.id,2);break;case"manage":yh(e.id);break;case"homeroom":vn(e.roomId);break;case"furniture":te("catalog/open/"+gi.GUILD_CUSTOM_FURNI);break;case"popular_groups":te("navigator/search/groups");break}};return e?l(re,{overflow:s,...r,children:[l(v,{center:!0,size:3,overflow:"hidden",children:[t(w,{alignItems:"center",overflow:"hidden",className:"group-badge",children:t(ze,{badgeCode:e.badge,isGroup:!0,scale:2})}),l(v,{alignItems:"center",gap:1,children:[t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>p("members"),children:h("group.membercount",["totalMembers"],[e.membersCount.toString()])}),e.pendingRequestsCount>0&&t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>p("members_pending"),children:h("group.pendingmembercount",["amount"],[e.pendingRequestsCount.toString()])}),e.isOwner&&t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>p("manage"),children:h("group.manage")})]}),g()]}),l(v,{size:9,justifyContent:"between",overflow:"auto",children:[l(v,{overflow:"hidden",children:[l(v,{gap:1,children:[l(w,{alignItems:"center",gap:2,children:[t(N,{bold:!0,children:e.title}),l(w,{gap:1,children:[t("i",{className:"icon icon-group-type-"+e.type,title:h(`group.edit.settings.type.${ww[e.type]}.help`)}),e.canMembersDecorate&&t("i",{className:"icon icon-group-decorate",title:h("group.memberscandecorate")})]})]}),t(N,{small:!0,children:h("group.created",["date","owner"],[e.createdAt,e.ownerName])})]}),t(N,{small:!0,overflow:"auto",className:"group-description",children:e.description})]}),l(v,{children:[l(v,{gap:1,children:[t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>p("homeroom"),children:h("group.linktobase")}),t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>p("furniture"),children:h("group.buyfurni")}),t(N,{small:!0,underline:!0,pointer:!0,onClick:()=>p("popular_groups"),children:h("group.showgroups")})]}),(e.type!==An.PRIVATE||e.type===An.PRIVATE&&e.membershipType===Lt.MEMBER)&&t(D,{disabled:e.membershipType===Lt.REQUEST_PENDING||c,onClick:f,children:h(m())})]})]})]}):null},yw=a=>{const[e,n]=i.useState(null);return F(ga,s=>{const r=s.getParser();(e&&e.id===r.id||r.flag)&&n(r)}),e?l(ie,{className:"nitro-group-information-standalone",theme:"primary-slim",children:[t(ae,{headerText:h("group.window.title"),onCloseClick:s=>n(null)}),t(ne,{children:t(_g,{groupInformation:e,onClose:()=>n(null)})})]}):null},Rw=["regular","exclusive","private"],Ow=a=>{const{groupData:e=null,setGroupData:n=null,setCloseAction:s=null}=a,[r,o]=i.useState(e.groupState),[c,u]=i.useState(e.groupCanMembersDecorate),d=i.useCallback(()=>e?r===e.groupState&&c===e.groupCanMembersDecorate?!0:e.groupId<=0?(n(g=>{const m={...g};return m.groupState=r,m.groupCanMembersDecorate=c,m}),!0):(M(new CC(e.groupId,r,c?0:1)),!0):!1,[e,r,c,n]);return i.useEffect(()=>{o(e.groupState),u(e.groupCanMembersDecorate)},[e]),i.useEffect(()=>(s({action:d}),()=>s(null)),[s,d]),l(v,{overflow:"auto",children:[t(v,{children:Rw.map((g,m)=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"groupState",checked:r===m,onChange:f=>o(m)}),l(v,{gap:0,children:[l(w,{gap:1,children:[t("i",{className:`icon icon-group-type-${m}`}),t(N,{bold:!0,children:h(`group.edit.settings.type.${g}.label`)})]}),t(N,{children:h(`group.edit.settings.type.${g}.help`)})]})]},m))}),t(NS,{}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:c,onChange:g=>u(m=>!m)}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("group.edit.settings.rights.caption")}),t(N,{children:h("group.edit.settings.rights.members.help")})]})]})]})},kw=[1,2,3,5],Aw=a=>{const[e,n]=i.useState(1),[s,r]=i.useState(null),[o,c]=i.useState(null),u=()=>{r(g=>(g&&g.action&&g.action(),null)),c(null)},d=g=>{s&&s.action&&s.action(),n(g)};return F(ga,g=>{const m=g.getParser();!o||o.groupId!==m.id||c(f=>{const p={...f};return p.groupName=m.title,p.groupDescription=m.description,p.groupState=m.type,p.groupCanMembersDecorate=m.canMembersDecorate,p})}),F(bC,g=>{const m=g.getParser(),f=[];m.badgeParts.forEach((p,C)=>{f.push(new Pl(p.isBase?Pl.BASE:Pl.SYMBOL,p.key,p.color,p.position))}),c({groupId:m.id,groupName:m.title,groupDescription:m.description,groupHomeroomId:m.roomId,groupState:m.state,groupCanMembersDecorate:m.canMembersDecorate,groupColors:[m.colorA,m.colorB],groupBadgeParts:f})}),!o||o.groupId<=0?null:l(ie,{className:"nitro-group-manager",children:[t(ae,{headerText:h("group.window.title"),onCloseClick:u}),t(As,{children:kw.map(g=>t(Mn,{isActive:e===g,onClick:()=>d(g),children:h(`group.edit.tab.${g}`)},g))}),l(ne,{children:[l(w,{alignItems:"center",gap:2,children:[t(P,{className:`nitro-group-tab-image tab-${e}`}),l(v,{grow:!0,gap:0,children:[t(N,{bold:!0,fontSize:4,children:h(`group.edit.tabcaption.${e}`)}),t(N,{children:h(`group.edit.tabdesc.${e}`)})]})]}),l(v,{grow:!0,overflow:"hidden",children:[e===1&&t(bg,{groupData:o,setGroupData:c,setCloseAction:r,onClose:u}),e===2&&t(Eg,{groupData:o,setGroupData:c,setCloseAction:r,skipDefault:!0}),e===3&&t(Cg,{groupData:o,setGroupData:c,setCloseAction:r}),e===5&&t(Ow,{groupData:o,setGroupData:c,setCloseAction:r})]})]})]})},xw=a=>{const[e,n]=i.useState(-1),[s,r]=i.useState(-1),[o,c]=i.useState(null),[u,d]=i.useState(-1),[g,m]=i.useState(0),[f,p]=i.useState(""),[C,E]=i.useState(null),{showConfirm:b=null}=Je(),I=y=>{if(y.rank===mn.OWNER)return"group.members.owner";if(o.admin){if(y.rank===mn.ADMIN)return"group.members.removerights";if(y.rank===mn.MEMBER)return"group.members.giverights"}return""},_=i.useCallback(()=>{e===-1||s===-1||u===-1||M(new Du(e,u,f,s))},[e,s,u,f]),S=y=>{!o.admin||y.rank===mn.OWNER||(y.rank!==mn.ADMIN?M(new NC(o.groupId,y.id)):M(new vC(o.groupId,y.id)),_())},T=y=>{!o.admin||y.rank!==mn.REQUESTED||(M(new TC(o.groupId,y.id)),_())},R=y=>{if(o.admin){if(y.rank===mn.REQUESTED){M(new wC(o.groupId,y.id)),_();return}E(y.name),M(new yC(o.groupId,y.id))}};return F(_C,y=>{const A=y.getParser();c(A),r(A.level),m(Math.ceil(A.totalMembersCount/A.pageSize))}),F(SC,y=>{const A=y.getParser();b(h(A.furnitureCount>0?"group.kickconfirm.desc":"group.kickconfirm_nofurni.desc",["user","amount"],[C,A.furnitureCount.toString()]),()=>{M(new Bc(o.groupId,A.userId)),_()},null),E(null)}),i.useEffect(()=>{const y={linkReceived:A=>{const U=A.split("/");if(U.length<2)return;const L=parseInt(U[1])||-1,O=parseInt(U[2])||3;n(L),r(O),d(0)},eventUrlPrefix:"group-members/"};return _t(y),()=>St(y)},[]),i.useEffect(()=>{d(0)},[e,s,f]),i.useEffect(()=>{e===-1||s===-1||u===-1||M(new Du(e,u,f,s))},[e,s,u,f]),i.useEffect(()=>{e!==-1&&(r(-1),c(null),m(0),p(""),E(null))},[e]),e===-1||!o?null:l(ie,{className:"nitro-group-members",theme:"primary-slim",children:[t(ae,{headerText:h("group.members.title",["groupName"],[o?o.groupTitle:""]),onCloseClick:y=>n(-1)}),l(ne,{overflow:"hidden",children:[l(w,{gap:2,children:[t(w,{center:!0,className:"group-badge",children:t(ze,{badgeCode:o.badge,isGroup:!0,className:"mx-auto d-block"})}),l(v,{fullWidth:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm w-100",placeholder:h("group.members.searchinfo"),value:f,onChange:y=>p(y.target.value)}),l("select",{className:"form-select form-select-sm w-100",value:s,onChange:y=>r(parseInt(y.target.value)),children:[t("option",{value:"0",children:h("group.members.search.all")}),t("option",{value:"1",children:h("group.members.search.admins")}),t("option",{value:"2",children:h("group.members.search.pending")})]})]})]}),t(re,{columnCount:2,overflow:"auto",className:"nitro-group-members-list-grid",children:o.result.map((y,A)=>l(w,{gap:2,alignItems:"center",overflow:"hidden",className:"member-list-item bg-white rounded p-2",children:[t("div",{className:"avatar-head cursor-pointer",onClick:()=>pn(y.id),children:t($e,{figure:y.figure,headOnly:!0,direction:2})}),l(v,{grow:!0,gap:1,children:[t(N,{bold:!0,small:!0,pointer:!0,onClick:U=>pn(y.id),children:y.name}),y.rank!==mn.REQUESTED&&t(N,{small:!0,italics:!0,variant:"muted",children:h("group.members.since",["date"],[y.joinedAt])})]}),l(v,{gap:1,children:[y.rank!==mn.REQUESTED&&t(w,{center:!0,children:t(P,{pointer:o.admin,className:`icon icon-group-small-${y.rank===mn.OWNER?"owner":y.rank===mn.ADMIN?"admin":o.admin&&y.rank===mn.MEMBER?"not-admin":""}`,title:h(I(y)),onClick:U=>S(y)})}),o.admin&&y.rank===mn.REQUESTED&&t(w,{alignItems:"center",children:t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-accept",title:h("group.members.accept"),onClick:U=>T(y)})}),o.admin&&y.rank!==mn.OWNER&&y.id!==z().userId&&t(w,{alignItems:"center",children:t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-deny",title:h(y.rank===mn.REQUESTED?"group.members.reject":"group.members.kick"),onClick:U=>R(y)})})]})]},A))}),l(w,{gap:1,justifyContent:"between",alignItems:"center",children:[t(D,{disabled:o.pageIndex===0,onClick:y=>d(A=>A-1),children:t(bn,{className:"fa-icon"})}),t(N,{small:!0,children:h("group.members.pageinfo",["amount","page","totalPages"],[o.totalMembersCount.toString(),(o.pageIndex+1).toString(),g.toString()])}),t(D,{disabled:o.pageIndex===g-1,onClick:y=>d(A=>A+1),children:t(_n,{className:"fa-icon"})})]})]})]})},Dw=a=>{const[e,n]=i.useState(!1);return _a(),F(RC,s=>{const r=s.getParser();n(!1),vn(r.roomId)}),i.useEffect(()=>{const s={linkReceived:r=>{const o=r.split("/");if(!(o.length<2))switch(o[1]){case"create":n(!0);return;case"manage":if(!o[2])return;n(!1),M(new OC(Number(o[2])));return}},eventUrlPrefix:"groups/"};return _t(s),()=>St(s)},[]),l(j,{children:[e&&t(Tw,{onClose:()=>n(!1)}),!e&&t(Aw,{}),t(xw,{}),t(yw,{})]})},Pw=a=>{const{helpRequestDescription:e=null,helpRequestAverageTime:n=0}=a,s=r=>M(new kC(r));return l(v,{children:[l(v,{gap:0,className:"bg-muted p-2 rounded",children:[t(N,{bold:!0,children:h("guide.help.request.guide.accept.request.title")}),t(N,{variant:"muted",children:h("guide.help.request.type.1")}),t(N,{wrap:!0,textBreak:!0,children:e})]}),l(v,{gap:1,children:[t(D,{variant:"success",onClick:r=>s(!0),children:h("guide.help.request.guide.accept.accept.button")}),t(D,{variant:"danger",onClick:r=>s(!1),children:h("guide.help.request.guide.accept.skip.link")})]})]})},Mw=a=>{const{isOnDuty:e=!1,isHandlingGuideRequests:n=!1,setIsHandlingGuideRequests:s=null,isHandlingHelpRequests:r=!1,setIsHandlingHelpRequests:o=null,isHandlingBullyReports:c=!1,setIsHandlingBullyReports:u=null,guidesOnDuty:d=0,helpersOnDuty:g=0,guardiansOnDuty:m=0,processAction:f=null}=a;return l(v,{children:[l(w,{alignItems:"center",gap:2,className:"bg-muted p-2 rounded",children:[t(P,{className:"duty-switch"+(e?"":" off"),onClick:p=>f("toggle_duty")}),l(v,{gap:0,children:[t(N,{bold:!0,children:h("guide.help.guide.tool.yourstatus")}),t(N,{children:h(`guide.help.guide.tool.duty.${e?"on":"off"}`)})]})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("guide.help.guide.tool.tickettypeselection.caption")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:n,onChange:p=>s(p.target.checked)}),t(N,{children:h("guide.help.guide.tool.tickettypeselection.guiderequests")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:r,onChange:p=>o(p.target.checked)}),t(N,{children:h("guide.help.guide.tool.tickettypeselection.onlyhelprequests")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",disabled:e,type:"checkbox",checked:c,onChange:p=>u(p.target.checked)}),t(N,{children:h("guide.help.guide.tool.tickettypeselection.bullyreports")})]})]}),t("hr",{className:"bg-dark m-0"}),l(w,{center:!0,gap:2,children:[t(P,{className:"info-icon"}),l(v,{gap:1,children:[t(P,{dangerouslySetInnerHTML:{__html:h("guide.help.guide.tool.guidesonduty",["amount"],[d.toString()])}}),t(P,{dangerouslySetInnerHTML:{__html:h("guide.help.guide.tool.helpersonduty",["amount"],[g.toString()])}}),t(P,{dangerouslySetInnerHTML:{__html:h("guide.help.guide.tool.guardiansonduty",["amount"],[m.toString()])}})]})]}),t("hr",{className:"bg-dark m-0"}),l(w,{justifyContent:"between",gap:2,children:[t(D,{disabled:!0,onClick:p=>f("forum_link"),children:h("guide.help.guide.tool.forum.link")}),t(D,{disabled:!0,children:h("guide.help.guide.tool.skill.link")})]})]})},Lw=a=>{const e=i.useRef(null),{isGuide:n=!1,userId:s=0,userName:r=null,userFigure:o=null,isTyping:c=!1,messageGroups:u=[]}=a,[d,g]=i.useState("");i.useEffect(()=>{var I;(I=e.current)==null||I.scrollIntoView({block:"end",behavior:"smooth"})},[u]);const m=i.useCallback(()=>{M(new AC)},[]),f=i.useCallback(()=>{M(new xC)},[]),p=i.useCallback(()=>{M(new DC)},[]);F(PC,I=>{const _=I.getParser();vn(_.requesterRoomId)});const C=i.useCallback(()=>{!d||!d.length||(M(new MC(d)),g(""))},[d]),E=i.useCallback(I=>{I.key==="Enter"&&C()},[C]),b=i.useCallback(I=>I===z().userId,[]);return l(v,{fullHeight:!0,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[n&&l(vs,{children:[t(D,{onClick:m,children:h("guide.help.request.guide.ongoing.visit.button")}),t(D,{onClick:f,children:h("guide.help.request.guide.ongoing.invite.button")})]}),!n&&l(v,{gap:0,children:[t(N,{bold:!0,children:r}),t(N,{children:h("guide.help.request.user.ongoing.guide.desc")})]}),t(D,{variant:"danger",disabled:!0,children:h("guide.help.common.report.link")})]}),t(v,{overflow:"hidden",gap:1,className:"bg-muted rounded chat-messages p-2",children:l(v,{overflow:"auto",children:[u.map((I,_)=>l(w,{fullWidth:!0,justifyContent:b(I.userId)?"end":"start",gap:2,children:[t(P,{shrink:!0,className:"message-avatar",children:!b(I.userId)&&t($e,{figure:o,direction:2})}),l(P,{className:"bg-light text-black border-radius mb-2 rounded py-1 px-2 messages-group-"+(b(I.userId)?"right":"left"),children:[l(N,{bold:!0,children:[b(I.userId)&&z().userName,!b(I.userId)&&r]}),I.messages.map((S,T)=>t(P,{pointer:!!S.roomId,className:S.roomId?"text-break text-underline":"text-break",onClick:()=>S.roomId?vn(S.roomId):null,children:S.message},T))]}),b(I.userId)&&t(P,{className:"message-avatar flex-shrink-0",children:t($e,{figure:z().figure,direction:4})})]},_)),t("div",{ref:e})]})}),l(v,{gap:1,children:[l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:h("guide.help.request.guide.ongoing.input.empty",["name"],[r]),value:d,onChange:I=>g(I.target.value),onKeyDown:E}),t(D,{variant:"success",onClick:C,children:h("widgets.chatinput.say")})]}),c&&t(N,{variant:"muted",children:h("guide.help.common.typing")})]}),t(D,{fullWidth:!0,variant:"success",onClick:p,children:h("guide.help.request."+(n?"guide":"user")+".ongoing.close.link")})]})},Uw=15,Fw=a=>{const{userRequest:e="",setUserRequest:n=null}=a,[s,r]=i.useState(!1),o=()=>{r(!0),M(new LC(1,e))};return l(v,{children:[t(N,{children:h("guide.help.request.user.create.help")}),t("textarea",{className:"request-message",maxLength:140,value:e,onChange:c=>n(c.target.value),placeholder:h("guide.help.request.user.create.input.help")}),t(D,{fullWidth:!0,variant:"success",disabled:e.length<Uw||s,onClick:o,children:h("guide.help.request.user.create.input.button")})]})},Vw=a=>{const{userName:e=null}=a,n=s=>M(new UC(s));return l(v,{children:[l(w,{justifyContent:"between",gap:1,className:"bg-muted p-2 rounded",children:[l(v,{gap:0,children:[t(N,{bold:!0,children:e}),t(N,{children:h("guide.help.request.user.feedback.guide.desc")})]}),t(D,{variant:"danger",disabled:!0,children:h("guide.help.common.report.link")})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("guide.help.request.user.feedback.closed.title")}),t(N,{children:h("guide.help.request.user.feedback.closed.desc")})]}),e&&e.length>0&&l(j,{children:[t("hr",{className:"bg-dark m-0 mt-auto"}),l(v,{children:[t(N,{center:!0,bold:!0,children:h("guide.help.request.user.feedback.question")}),l(w,{gap:1,children:[t(D,{fullWidth:!0,variant:"success",onClick:s=>n(!0),children:h("guide.help.request.user.feedback.positive.button")}),t(D,{fullWidth:!0,variant:"danger",onClick:s=>n(!1),children:h("guide.help.request.user.feedback.negative.button")})]})]})]})]})},Bw=a=>l(v,{gap:1,children:[t(N,{bold:!0,children:h("guide.help.request.no_tour_guides.title")}),t(N,{children:h("guide.help.request.no_tour_guides.message")})]}),Gw=a=>{const{helpRequestDescription:e=null,helpRequestAverageTime:n=0}=a,s=()=>M(new FC);return l(v,{children:[l(v,{gap:0,className:"bg-muted rounded p-2",children:[t(N,{bold:!0,children:h("guide.help.request.guide.accept.request.title")}),t(N,{variant:"muted",children:h("guide.help.request.type.1")}),t(N,{wrap:!0,textBreak:!0,children:e})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("guide.help.request.user.pending.info.title")}),t(N,{children:h("guide.help.request.user.pending.info.message")}),t(N,{children:h("guide.help.request.user.pending.info.waiting",["waitingtime"],[n.toString()])})]}),t(D,{variant:"danger",onClick:s,children:h("guide.help.request.user.pending.cancel.button")})]})},Hw=a=>t(v,{gap:1,children:t(N,{children:h("guide.help.request.user.guide.disconnected.error.desc")})}),Ww=a=>l(v,{gap:1,children:[t(N,{bold:!0,children:h("guide.help.request.user.thanks.info.title")}),t(N,{children:h("guide.help.request.user.thanks.info.desc")})]}),jw=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(h("guide.help.guide.tool.title")),[o,c]=i.useState(!1),[u,d]=i.useState(Me.GUIDE_TOOL_MENU),[g,m]=i.useState(!1),[f,p]=i.useState(!1),[C,E]=i.useState(!1),[b,I]=i.useState(!1),[_,S]=i.useState(0),[T,R]=i.useState(0),[y,A]=i.useState(0),[U,L]=i.useState(""),[O,k]=i.useState(null),[x,V]=i.useState(0),[B,W]=i.useState(0),[G,H]=i.useState(null),[Q,ee]=i.useState(null),[me,ve]=i.useState(!1),[Fe,Ve]=i.useState([]),{simpleAlert:Pt=null}=Je(),ke=i.useCallback((xe,pe)=>{switch(xe){case Me.GUIDE_TOOL_MENU:r(h("guide.help.guide.tool.title")),c(!1);break;case Me.GUIDE_ACCEPT:r(h("guide.help.request.guide.accept.title")),c(!0);break;case Me.GUIDE_ONGOING:r(h("guide.help.request.guide.ongoing.title",["name"],[pe])),c(!0);break;case Me.USER_CREATE:r(h("guide.help.request.user.create.title")),c(!1);break;case Me.USER_PENDING:r(h("guide.help.request.user.pending.title")),c(!0);break;case Me.USER_ONGOING:r(h("guide.help.request.user.ongoing.title",["name"],[pe])),c(!0);break;case Me.USER_FEEDBACK:r(h("guide.help.request.user.feedback.title")),c(!0);break;case Me.USER_THANKS:r(h("guide.help.request.user.thanks.title")),c(!1);break;case Me.USER_NO_HELPERS:r(h("guide.help.request.no_tour_guides.heading")),c(!1);break;case Me.USER_SOMETHING_WRONG:r(h("guide.help.request.user.guide.disconnected.error.heading")),c(!1);break}d(xe),n(!0)},[]),ut=i.useCallback(xe=>{switch(xe.type){case Cn.SHOW_GUIDE_TOOL:n(!0);return;case Cn.HIDE_GUIDE_TOOL:n(!1);return;case Cn.TOGGLE_GUIDE_TOOL:n(pe=>!pe);return;case Cn.CREATE_HELP_REQUEST:ke(Me.USER_CREATE);return}},[ke]);st(Cn.SHOW_GUIDE_TOOL,ut),st(Cn.HIDE_GUIDE_TOOL,ut),st(Cn.TOGGLE_GUIDE_TOOL,ut),st(Cn.CREATE_HELP_REQUEST,ut),F(sh,xe=>{!xe.getParser().isAllowed(nh.USE_GUIDE_TOOL)&&g&&(m(!1),M(new Pu(!1,!1,!1,!1)))}),F(VC,xe=>{const pe=xe.getParser();m(pe.onDuty),R(pe.guidesOnDuty),S(pe.helpersOnDuty),A(pe.guardiansOnDuty)}),F(BC,xe=>{const pe=xe.getParser();k(pe.helpRequestDescription),V(pe.roleSpecificWaitTime),pe.asGuide&&g&&ke(Me.GUIDE_ACCEPT),pe.asGuide||ke(Me.USER_PENDING)}),F(GC,xe=>{const pe=xe.getParser();g?(W(pe.requesterUserId),H(pe.requesterName),ee(pe.requesterFigure),ke(Me.GUIDE_ONGOING,pe.requesterName)):(W(pe.guideUserId),H(pe.guideName),ee(pe.guideFigure),ke(Me.USER_ONGOING,pe.guideName))}),F(HC,xe=>{const pe=xe.getParser();ve(pe.isTyping)}),F(WC,xe=>{const pe=xe.getParser(),pt=[...Fe];let Bt=pt[pt.length-1];(!Bt||Bt.userId!==pe.senderId)&&(Bt=new nd(pe.senderId),pt.push(Bt)),Bt.addChat(new td(pe.chatMessage)),Ve(pt)}),F(jC,xe=>{const pe=xe.getParser();if(pe.roomId!==0){const pt=[...Fe];let Bt=pt[pt.length-1];const Vn=g?z().userId:B;(!Bt||Bt.userId!==Vn)&&(Bt=new nd(Vn),pt.push(Bt)),Bt.addChat(new td(pe.roomName,pe.roomId)),Ve(pt)}}),F(qC,xe=>{g?(W(0),H(null),ee(null),ve(!1),Ve([]),ke(Me.GUIDE_TOOL_MENU)):ke(Me.USER_FEEDBACK)}),F(zC,xe=>{switch(xe.getParser().errorCode){case 0:ke(Me.USER_SOMETHING_WRONG);break;case 1:case 2:ke(Me.USER_NO_HELPERS);break}}),F(YC,xe=>{W(0),H(null),ee(null),ve(!1),Ve([]),ke(g?Me.GUIDE_TOOL_MENU:Me.USER_THANKS)}),i.useEffect(()=>{const xe={linkReceived:pe=>{const pt=pe.split("/");if(!(pt.length<2))switch(pt[1]){case"tour":return}},eventUrlPrefix:"help/"};return _t(xe),()=>St(xe)},[]);const Gt=i.useCallback(xe=>{switch(xe){case"close":n(!1),L(""),d(Me.GUIDE_TOOL_MENU);return;case"toggle_duty":if(!f&&!C&&!b){Pt(h("guide.help.guide.tool.noqueueselected.message"),null,null,null,h("guide.help.guide.tool.noqueueselected.caption"),null);return}m(pt=>(M(new Pu(!pt,pt?!1:C,pt?!1:b,pt?!1:f)),!pt));return;case"forum_link":const pe=X("group.homepage.url","").replace("%groupid%",X("guide.help.alpha.groupid","0"));window.open(pe);return}},[f,C,b,Pt]);return e?l(ie,{className:"nitro-guide-tool",theme:"primary-slim",children:[t(ae,{headerText:s,onCloseClick:xe=>Gt("close"),noCloseButton:o}),l(ne,{className:"text-black",children:[u===Me.GUIDE_TOOL_MENU&&t(Mw,{isOnDuty:g,isHandlingGuideRequests:C,setIsHandlingGuideRequests:E,isHandlingHelpRequests:b,setIsHandlingHelpRequests:I,isHandlingBullyReports:f,setIsHandlingBullyReports:p,guidesOnDuty:T,helpersOnDuty:_,guardiansOnDuty:y,processAction:Gt}),u===Me.GUIDE_ACCEPT&&t(Pw,{helpRequestDescription:O,helpRequestAverageTime:x}),[Me.GUIDE_ONGOING,Me.USER_ONGOING].includes(u)&&t(Lw,{isGuide:g,userId:B,userName:G,userFigure:Q,isTyping:me,messageGroups:Fe}),u===Me.USER_CREATE&&t(Fw,{userRequest:U,setUserRequest:L}),u===Me.USER_PENDING&&t(Gw,{helpRequestDescription:O,helpRequestAverageTime:x}),u===Me.USER_FEEDBACK&&t(Vw,{userName:G}),u===Me.USER_THANKS&&t(Ww,{}),u===Me.USER_NO_HELPERS&&t(Bw,{}),u===Me.USER_SOMETHING_WRONG&&t(Hw,{})]})]}):null},qw=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(null),[o,c]=i.useState(0),[u,d]=i.useState(null),{userFigure:g=null}=Zn(),{purse:m=null,clubStatus:f=null}=Ur(),{badgeCodes:p=[],activate:C=null,deactivate:E=null}=Cl(),b=()=>m.clubDays<=0?h("purse.clubdays.zero.amount.text"):m.minutesUntilExpiration>-1&&m.minutesUntilExpiration<60*24?ls.shortFormat(m.minutesUntilExpiration*60):ls.shortFormat((m.clubPeriods*31+m.clubDays)*86400),I=()=>{switch(f){case bs.ACTIVE:return h(`hccenter.status.${f}.info`,["timeleft","joindate","streakduration"],[b(),s==null?void 0:s.firstSubscriptionDate,ls.shortFormat((s==null?void 0:s.currentHcStreak)*86400)]);case bs.EXPIRED:return h(`hccenter.status.${f}.info`,["joindate"],[s==null?void 0:s.firstSubscriptionDate]);default:return h(`hccenter.status.${f}.info`)}},_=()=>!s||s.timeUntilPayday<60?h("hccenter.special.time.soon"):ls.shortFormat(s.timeUntilPayday*60),S=()=>h("hccenter.special.sum",["credits"],[((s==null?void 0:s.creditRewardForStreakBonus)+(s==null?void 0:s.creditRewardForMonthlySpent)).toString()]);if(F(Lm,R=>{const y=R.getParser();c(y.giftsAvailable)}),F(KC,R=>{const y=R.getParser();r(y.data)}),i.useEffect(()=>{const R={linkReceived:y=>{const A=y.split("/");if(!(A.length<2))switch(A[1]){case"open":if(A.length>2)switch(A[2]){case"hccenter":n(!0);break}return}},eventUrlPrefix:"habboUI/"};return _t(R),()=>St(R)},[]),i.useEffect(()=>{d(V_(p))},[p]),i.useEffect(()=>{if(!e)return;const R=C();return()=>E(R)},[e,C,E]),i.useEffect(()=>{M(new Um),M(new $C)},[]),!e)return null;const T=t(Ko,{id:"popover-basic",children:l(Ko.Body,{className:"text-black py-2 px-3",children:[t("h5",{children:h("hccenter.breakdown.title")}),t("div",{children:h("hccenter.breakdown.creditsspent",["credits"],[s==null?void 0:s.totalCreditsSpent.toString()])}),t("div",{children:h("hccenter.breakdown.paydayfactor.percent",["percent"],[((s==null?void 0:s.kickbackPercentage)*100).toString()])}),t("div",{children:h("hccenter.breakdown.streakbonus",["credits"],[s==null?void 0:s.creditRewardForStreakBonus.toString()])}),t("hr",{className:"w-100 text-black my-1"}),t("div",{children:h("hccenter.breakdown.total",["credits","actual"],[S(),(((s==null?void 0:s.kickbackPercentage)*(s==null?void 0:s.totalCreditsSpent)+(s==null?void 0:s.creditRewardForStreakBonus))*100/100).toString()])}),t("div",{className:"btn btn-link text-primary p-0",onClick:()=>te("habbopages/"+X("hc.center")["payday.habbopage"]),children:h("hccenter.special.infolink")})]})});return l(ie,{theme:"primary-slim",className:"nitro-hc-center",children:[t(ae,{headerText:h("generic.hccenter"),onCloseClick:()=>n(!1)}),l(w,{position:"relative",className:"bg-muted p-2",children:[l(v,{gap:1,children:[t("div",{className:"hc-logo"}),t(w,{children:t(D,{variant:"success",onClick:R=>te("catalog/open/"+X("catalog.links")["hc.buy_hc"]),children:h(f===bs.ACTIVE?"hccenter.btn.extend":"hccenter.btn.buy")})})]}),t(P,{position:"absolute",className:"end-0 p-4 top-0 habbo-avatar",children:t($e,{figure:g,direction:4,scale:2})})]}),l(ne,{children:[l(w,{gap:2,children:[t(ze,{badgeCode:u,className:"align-self-center flex-shrink-0 me-1"}),l(v,{size:5,className:"streak-info",gap:0,children:[t(N,{children:h("hccenter.status."+f)}),t(N,{dangerouslySetInnerHTML:{__html:I()}})]})]}),X("hc.center")["payday.info"]&&l(w,{alignItems:"center",children:[l(v,{className:"rounded-start bg-primary p-2 payday-special mb-1",children:[t("h4",{className:"mb-1",children:h("hccenter.special.title")}),t("div",{children:h("hccenter.special.info")}),t("div",{className:"btn btn-link text-white p-0 mt-auto align-self-baseline",onClick:()=>te("habbopages/"+X("hc.center")["payday.habbopage"]),children:h("hccenter.special.infolink")})]}),l("div",{className:"payday flex-shrink-0 p-2",children:[t("h5",{className:"mb-2 ms-2",children:h("hccenter.special.time.title")}),l("div",{className:"d-flex flex-row mb-2",children:[t("div",{className:"clock me-2"}),t("h6",{className:"mb-0 align-self-center",children:_()})]}),f===bs.ACTIVE&&l("div",{className:"pe-3",children:[t("h5",{className:"ms-2 mb-1 bolder",children:h("hccenter.special.amount.title")}),l("div",{className:"d-flex flex-column",children:[t("div",{className:"w-100 text-center ms-4n",children:S()}),t(km,{trigger:["hover","focus"],placement:"left",overlay:T,children:t("div",{className:"btn btn-link align-self-end text-primary",children:h("hccenter.breakdown.infolink")})})]})]})]})]}),X("hc.center")["gift.info"]&&l("div",{className:"rounded bg-success p-2 d-flex flex-row mb-0",children:[l("div",{children:[t("h4",{className:"mb-1",children:h("hccenter.gift.title")}),t("div",{dangerouslySetInnerHTML:{__html:o>0?h("hccenter.unclaimedgifts",["unclaimedgifts"],[o.toString()]):h("hccenter.gift.info")}})]}),t("button",{className:"btn btn-primary btn-lg align-self-center ms-auto",onClick:()=>te("catalog/open/"+X("catalog.links")["hc.hc_gifts"]),children:h(f===bs.ACTIVE?"hccenter.btn.gifts.redeem":"hccenter.btn.gifts.view")})]}),X("hc.center")["benefits.info"]&&l("div",{className:"benefits text-black py-2",children:[t("h5",{className:"mb-1 text-primary",children:h("hccenter.general.title")}),t("div",{className:"mb-2",dangerouslySetInnerHTML:{__html:h("hccenter.general.info")}}),t("button",{className:"btn btn-link p-0 text-primary",onClick:()=>te("habbopages/"+X("hc.center")["benefits.habbopage"]),children:h("hccenter.general.infolink")})]})]})]})},zw=a=>{const[e,n]=i.useState(""),{activeReport:s=null,setActiveReport:r=null}=Xn(),o=()=>{e.length<15||r(u=>{const d=Zt.REPORT_SUMMARY;return{...u,message:e,currentStep:d}})},c=()=>{r(u=>({...u,currentStep:u.currentStep-1}))};return l(j,{children:[l(v,{gap:1,children:[t(N,{fontSize:4,children:h("help.emergency.chat_report.subtitle")}),t(N,{children:h("help.cfh.input.text")})]}),t("textarea",{className:"form-control h-100",value:e,onChange:u=>n(u.target.value)}),l(w,{gap:2,justifyContent:"between",children:[t(D,{variant:"secondary",disabled:!(s.reportType===lt.BULLY||s.reportType===lt.EMERGENCY),onClick:c,children:h("generic.back")}),t(D,{disabled:e.length<15,onClick:o,children:h("help.emergency.main.submit.button")})]})]})},Yw=a=>{const{setActiveReport:e=null}=Xn(),n=()=>{e(s=>{const r=Zt.SELECT_USER,o=lt.BULLY;return{...s,currentStep:r,reportType:o}})};return l(j,{children:[l(v,{grow:!0,center:!0,gap:1,children:[t(N,{fontSize:3,children:h("help.main.frame.title")}),t(N,{children:h("help.main.self.description")})]}),l(v,{gap:1,children:[t(D,{onClick:n,children:h("help.main.bully.subtitle")}),t(D,{onClick:()=>nt(new Cn(Cn.CREATE_HELP_REQUEST)),disabled:!X("guides.enabled"),children:h("help.main.help.title")}),t(D,{disabled:!0,children:h("help.main.self.tips.title")})]}),t(D,{variant:"link",textColor:"black",onClick:()=>M(new QC(!1)),children:h("help.main.my.sanction.status")})]})},Kw=a=>{const{username:e="",onAction:n=null}=a,[s,r]=i.useState(!1),o=()=>{s||(r(!0),M(new JC(e)))};return F(XC,c=>{const u=c.getParser();u&&u.webId===z().userId&&n("close")}),l("div",{className:"d-flex flex-column gap-4 h-100",children:[t("div",{className:"bg-muted rounded p-2 text-center",children:h("tutorial.name_change.info.confirm")}),l("div",{className:"d-flex flex-column align-items-center gap-1 h-100",children:[t("div",{children:h("tutorial.name_change.confirm")}),t("div",{className:"fw-bold",children:e})]}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",disabled:s,onClick:o,children:h("generic.ok")}),t("button",{className:"btn btn-primary w-100",onClick:()=>n("close"),children:h("cancel")})]})]})},$w=a=>{const{onAction:e=null}=a;return l("div",{className:"d-flex flex-column gap-4 h-100",children:[t("div",{className:"bg-muted rounded p-2 text-center",children:h("tutorial.name_change.info.main")}),t("div",{className:"fw-bold d-flex align-items-center justify-content-center h-100 w-100",children:h("tutorial.name_change.current",["name"],[z().userName])}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",onClick:()=>e("start"),children:h("tutorial.name_change.change")}),t("button",{className:"btn btn-primary w-100",onClick:()=>e("confirmation",z().userName),children:h("tutorial.name_change.keep")})]})]})},Qw=0,Xw=2,Jw=3,Zw=4,ey=5,ty=6,ny=a=>{const{onAction:e=null}=a,[n,s]=i.useState(""),[r,o]=i.useState(!1),[c,u]=i.useState(!1),[d,g]=i.useState(null),[m,f]=i.useState([]),p=()=>{n!==""&&(o(!1),f([]),g(null),u(!0),M(new e1(n)))},C=E=>{o(!1),f([]),g(null),s(E)};return F(ZC,E=>{u(!1);const b=E.getParser();if(b)switch(b.resultCode){case Qw:o(!0);break;case Xw:g("short");break;case Jw:g("long");break;case Zw:g("invalid");break;case ey:f(b.nameSuggestions),g("taken");break;case ty:g("change_not_allowed")}}),l("div",{className:"d-flex flex-column gap-3 h-100",children:[t("div",{children:h("tutorial.name_change.info.select")}),l("div",{className:"d-flex gap-2",children:[t("input",{type:"text",className:"form-control form-control-sm",value:n,onChange:E=>C(E.target.value)}),t("button",{className:"btn btn-primary",disabled:n===""||c,onClick:p,children:h("tutorial.name_change.check")})]}),!d&&!r&&t("div",{className:"bg-muted rounded p-2 text-center",children:h("help.tutorial.name.info")}),d&&t("div",{className:"bg-danger rounded p-2 text-center text-white",children:h(`help.tutorial.name.${d}`,["name"],[n])}),r&&t("div",{className:"bg-success rounded p-2 text-center text-white",children:h("help.tutorial.name.available",["name"],[n])}),m&&t("div",{className:"d-flex flex-column gap-2",children:m.map((E,b)=>t("div",{className:"col bg-muted rounded p-1 cursor-pointer",onClick:()=>C(E),children:E},b))}),l("div",{className:"d-flex gap-2",children:[t("button",{className:"btn btn-success w-100",disabled:!r,onClick:()=>e("confirmation",n),children:h("tutorial.name_change.pick")}),t("button",{className:"btn btn-primary w-100",onClick:()=>e("close"),children:h("cancel")})]})]})},Qa="INIT",ql="INPUT",zl="CONFIRMATION",sy=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(Qa),[o,c]=i.useState(""),u=(g,m)=>{switch(g){case"start":r(ql);break;case"confirmation":c(m),r(zl);break;case"close":c(""),n(!1);break}},d=i.useMemo(()=>{switch(s){case Qa:return"tutorial.name_change.title.main";case ql:return"tutorial.name_change.title.select";case zl:return"tutorial.name_change.title.confirm"}},[s]);return st(la.INIT,g=>{r(Qa),n(!0)}),e?l(ie,{className:"nitro-change-username",theme:"primary-slim",children:[t(ae,{headerText:h(d),onCloseClick:()=>u("close")}),l(ne,{className:"text-black",children:[s===Qa&&t($w,{onAction:u}),s===ql&&t(ny,{onAction:u}),s===zl&&t(Kw,{username:o,onAction:u})]})]}):null},ry=a=>{const{activeReport:e=null,setActiveReport:n=null}=Xn(),s=()=>{const r=[];switch(e.reportType){case lt.BULLY:case lt.EMERGENCY:case lt.ROOM:{const o=e.roomId<=0?e.reportedChats[0].roomId:e.roomId;e.reportedChats.forEach(c=>r.push(c.webId,c.message)),M(new o1(e.message,e.cfhTopic,e.reportedUserId,o,r));break}case lt.IM:e.reportedChats.forEach(o=>r.push(o.webId,o.message)),M(new r1(e.message,e.cfhTopic,e.reportedUserId,r));break;case lt.THREAD:M(new s1(e.groupId,e.threadId,e.cfhTopic,e.message));break;case lt.MESSAGE:M(new n1(e.groupId,e.threadId,e.messageId,e.cfhTopic,e.message));break;case lt.PHOTO:M(new t1(e.extraData,e.roomId,e.reportedUserId,e.cfhTopic,e.roomObjectId));break}n(null)};return l(j,{children:[l(v,{gap:1,children:[t(N,{fontSize:4,children:h("help.cfh.button.send")}),t(N,{children:h("help.main.summary")})]}),t(D,{variant:"success",onClick:s,children:h("guide.help.request.emergency.submit.button")})]})},oy=a=>{const{sanctionInfo:e=null,setSanctionInfo:n=null}=Xn(),s=(r,o,c)=>{let u=`help.sanction.${r}`;switch(o){case"ALERT":u=u+".alert";break;case"MUTE":u=u+".mute";break;case"BAN_PERMANENT":u=u+".permban";break;default:if(u=u+".ban",c>24)return u=u+".days",h(u,["days"],[(c/24).toString()])}return h(u,["hours"],[c.toString()])};return e?l(ie,{className:"nitro-help",theme:"primary-slim",children:[t(ae,{headerText:h("help.sanction.info.title"),onCloseClick:()=>n(null)}),t(ne,{className:"text-black",children:l(re,{children:[t(v,{center:!0,size:5,overflow:"hidden",children:t(P,{className:"index-image"})}),l(v,{justifyContent:"between",size:7,overflow:"hidden",children:[e.sanctionReason==="cfh.reason.EMPTY"?t("div",{className:"col-12 fw-bold",children:h("help.sanction.current.none")}):l(j,{children:[(e.probationHoursLeft>0||e.isSanctionActive)&&t("div",{className:"col-12 fw-bold",children:h("help.sanction.probation.reminder")}),l("div",{className:`col-12 fw-bold ${e.isSanctionNew?"text-danger":""}`,children:[h("help.sanction.last.sanction")," ",s("current",e.sanctionName,e.sanctionLengthHours)]}),l("div",{className:"col-12",children:[h("generic.start.time")," ",e.sanctionCreationTime]}),l("div",{className:"col-12",children:[h("generic.reason")," ",e.sanctionReason]}),l("div",{className:"col-12",children:[h("help.sanction.probation.days.left")," ",Math.trunc(e.probationHoursLeft/24)+1]})]}),e.hasCustomMute&&!e.isSanctionActive&&t("div",{className:"col-12 fw-bold",children:h("help.sanction.custom.mute")}),e.tradeLockExpiryTime&&e.tradeLockExpiryTime.length>0&&l("div",{className:"col-12 fw-bold",children:[h("trade.locked.until")," ",e.tradeLockExpiryTime]}),t("div",{className:"col-12",children:s("next",e.nextSanctionName,e.nextSanctionLengthHours)}),t(D,{variant:"success",onClick:r=>n(null),children:h("habbo.way.ok.button")})]})]})})]}):null},ay=a=>{const[e,n]=i.useState([]),{activeReport:s=null,setActiveReport:r=null}=Xn(),{chatHistory:o=[],messengerHistory:c=[]}=pl(),u=i.useMemo(()=>{switch(s.reportType){case lt.BULLY:case lt.EMERGENCY:return o.filter(f=>f.type===cs.TYPE_CHAT&&f.webId===s.reportedUserId&&f.entityType===bt.USER);case lt.IM:return c.filter(f=>f.webId===s.reportedUserId&&f.type===cs.TYPE_IM)}return[]},[s,o,c]),d=f=>{n(p=>{const C=[...p],E=C.indexOf(f);return E>=0?C.splice(E,1):C.push(f),C})},g=()=>{!e||e.length<=0||r(f=>({...f,reportedChats:e,currentStep:Zt.SELECT_TOPICS}))},m=()=>{r(f=>({...f,currentStep:f.currentStep-1}))};return l(j,{children:[l(v,{gap:1,children:[t(N,{fontSize:4,children:h("help.emergency.chat_report.subtitle")}),t(N,{children:h("help.emergency.chat_report.description")})]}),l(v,{gap:1,overflow:"hidden",children:[!u||!u.length&&t(N,{children:h("help.cfh.error.no_user_data")}),u.length>0&&t(Le,{gap:1,columnCount:1,columnMinHeight:25,overflow:"auto",children:u.map((f,p)=>t(Se,{onClick:C=>d(f),itemActive:e.indexOf(f)>=0,children:t(N,{children:f.message})},f.id))})]}),l(w,{gap:2,justifyContent:"between",children:[t(D,{variant:"secondary",onClick:m,disabled:s.reportType===lt.IM,children:h("generic.back")}),t(D,{disabled:e.length<=0,onClick:g,children:h("help.emergency.main.submit.button")})]})]})},iy=a=>{const[e,n]=i.useState(-1),{chatHistory:s=[]}=pl(),{activeReport:r=null,setActiveReport:o=null}=Xn(),c=i.useMemo(()=>{const m=new Map;return s.forEach(f=>{f.type===cs.TYPE_CHAT&&f.entityType===bt.USER&&f.webId!==z().userId&&!m.has(f.webId)&&m.set(f.webId,{id:f.webId,username:f.name})}),Array.from(m.values())},[s]),u=m=>{m<=0||o(f=>({...f,reportedUserId:m,currentStep:Zt.SELECT_CHATS}))},d=m=>{n(f=>m===f?-1:m)},g=()=>{o(m=>({...m,currentStep:m.currentStep-1}))};return l(j,{children:[l(v,{gap:1,children:[t(N,{fontSize:4,children:h("help.emergency.main.step.two.title")}),c.length>0&&t(N,{children:h("report.user.pick.user")})]}),l(v,{gap:1,overflow:"hidden",children:[!c.length&&t(N,{children:h("report.user.error.nolist")}),c.length>0&&t(Le,{columnCount:1,columnMinHeight:25,gap:1,children:c.map((m,f)=>t(Se,{onClick:p=>d(m.id),itemActive:e===m.id,children:t("span",{dangerouslySetInnerHTML:{__html:m.username}})},m.id))})]}),l(w,{gap:2,justifyContent:"between",children:[t(D,{variant:"secondary",onClick:g,children:h("generic.back")}),t(D,{disabled:e<=0,onClick:()=>u(e),children:h("help.emergency.main.submit.button")})]})]})},ly=a=>{const[e,n]=i.useState(-1),[s,r]=i.useState(-1),{setActiveReport:o=null}=Xn(),{cfhCategories:c=[]}=So(),u=()=>{e<0||s<0||o(g=>({...g,cfhCategory:e,cfhTopic:c[e].topics[s].id,currentStep:Zt.INPUT_REPORT_MESSAGE}))},d=()=>{o(g=>({...g,currentStep:g.currentStep-1}))};return l(j,{children:[l(v,{gap:1,children:[t(N,{fontSize:4,children:h("help.emergency.chat_report.subtitle")}),t(N,{children:h("help.cfh.pick.topic")})]}),l(v,{gap:1,overflow:"auto",children:[e<0&&c.map((g,m)=>t(D,{variant:"danger",onClick:f=>n(m),children:h(`help.cfh.reason.${g.name}`)},m)),e>=0&&c[e].topics.map((g,m)=>t(D,{variant:"danger",onClick:f=>r(m),active:s===m,children:h(`help.cfh.topic.${g.id}`)},m))]}),l(w,{gap:2,justifyContent:"between",children:[t(D,{variant:"secondary",onClick:d,children:h("generic.back")}),t(D,{disabled:s<0,onClick:u,children:h("help.emergency.main.submit.button")})]})]})},cy=a=>{const[e,n]=i.useState(!1),{activeReport:s=null,setActiveReport:r=null,report:o=null}=Xn(),c=()=>{r(null),n(!1)};i.useEffect(()=>{const d={linkReceived:g=>{const m=g.split("/");if(!(m.length<2))switch(m[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(f=>!f);return;case"tour":return;case"report":m.length>=5&&m[2]==="room"&&(parseInt(m[3]),unescape(m.splice(4).join("/")));return}},eventUrlPrefix:"help/"};return _t(d),()=>St(d)},[]),i.useEffect(()=>{s&&n(!0)},[s]);const u=()=>{if(s)switch(s.currentStep){case Zt.SELECT_USER:return t(iy,{});case Zt.SELECT_CHATS:return t(ay,{});case Zt.SELECT_TOPICS:return t(ly,{});case Zt.INPUT_REPORT_MESSAGE:return t(zw,{});case Zt.REPORT_SUMMARY:return t(ry,{})}return t(Yw,{})};return l(j,{children:[e&&l(ie,{className:"nitro-help",theme:"primary-slim",children:[t(ae,{headerText:h("help.button.cfh"),onCloseClick:c}),t(ne,{className:"text-black",children:l(re,{children:[t(v,{center:!0,size:5,overflow:"hidden",children:t(P,{className:"index-image"})}),t(v,{justifyContent:"between",size:7,overflow:"hidden",children:t(u,{})})]})})]}),t(oy,{}),t(sy,{})]})},uy="5.7.4",dy=29.9700012207031,my=0,hy=47.0000019143492,gy=600,fy=400,py="dolphins",Iy=0,Ey=[{id:"comp_0",layers:[{ddd:0,ind:1,ty:4,nm:"splash 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:-11.306,ix:10},p:{a:0,k:[368.562,256.031,0],ix:2,l:2},a:{a:0,k:[-186.611,162.129,0],ix:1,l:2},s:{a:0,k:[500,500,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:9,s:[{i:[[.496,.407],[-.869,-1.004]],o:[[-.845,-.134],[-.472,-1.264]],v:[[-190.007,163.426],[-189.431,166.014]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:13,s:[{i:[[.384,.669],[-.619,-3.221]],o:[[-1.339,-1.04],[.506,-2.284]],v:[[-188.723,154.741],[-190.737,157.841]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:19,s:[{i:[[.384,.669],[.599,-1.066]],o:[[-.014,-1.103],[.923,-.568]],v:[[-184.706,158.022],[-187.688,157.312]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:20,s:[{i:[[.384,.669],[.599,-1.066]],o:[[-.014,-1.103],[.923,-.568]],v:[[-184.706,158.022],[-185.013,158.021]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:31,s:[{i:[[.384,.669],[.599,-1.066]],o:[[-.014,-1.103],[.923,-.568]],v:[[-178.974,145.957],[-179.281,145.956]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:32,s:[{i:[[-.224,1.223],[-1.06,-1.621]],o:[[-2.438,-.733],[-.189,-1.151]],v:[[-177.904,138.83],[-178.245,143.199]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:36,s:[{i:[[-2.455,-1.195],[-1.06,-1.621]],o:[[-2.302,-3.28],[-.189,-1.151]],v:[[-172.685,138.159],[-177.295,138.135]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[{i:[[-1.325,-.326],[-1.06,-1.621]],o:[[-.442,-.998],[-.189,-1.151]],v:[[-168.067,146.862],[-169.838,145.549]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:41,s:[{i:[[-1.325,-.326],[-1.06,-1.621]],o:[[-.442,-.998],[-.189,-1.151]],v:[[-168.067,146.862],[-168.513,146.574]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:82,s:[{i:[[.496,.407],[-.869,-1.004]],o:[[-.845,-.134],[-.472,-1.264]],v:[[-190.007,163.426],[-189.431,166.014]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:86,s:[{i:[[.384,.669],[-.619,-3.221]],o:[[-1.339,-1.04],[.506,-2.284]],v:[[-188.723,154.741],[-190.737,157.841]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:92,s:[{i:[[.384,.669],[.599,-1.066]],o:[[-.014,-1.103],[.923,-.568]],v:[[-184.706,158.022],[-187.688,157.312]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:93,s:[{i:[[.384,.669],[.599,-1.066]],o:[[-.014,-1.103],[.923,-.568]],v:[[-184.706,158.022],[-185.013,158.021]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:104,s:[{i:[[.384,.669],[.599,-1.066]],o:[[-.014,-1.103],[.923,-.568]],v:[[-178.974,145.957],[-179.281,145.956]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:105,s:[{i:[[-.224,1.223],[-1.06,-1.621]],o:[[-2.438,-.733],[-.189,-1.151]],v:[[-177.904,138.83],[-178.245,143.199]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:109,s:[{i:[[-2.455,-1.195],[-1.06,-1.621]],o:[[-2.302,-3.28],[-.189,-1.151]],v:[[-172.685,138.159],[-177.295,138.135]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:113,s:[{i:[[-1.325,-.326],[-1.06,-1.621]],o:[[-.442,-.998],[-.189,-1.151]],v:[[-168.067,146.862],[-169.838,145.549]],c:!0}]},{t:114.000004643315,s:[{i:[[-1.325,-.326],[-1.06,-1.621]],o:[[-.442,-.998],[-.189,-1.151]],v:[[-168.067,146.862],[-168.513,146.574]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.811764765721,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-177.26,157.998],ix:2},a:{a:0,k:[-189.628,153.557],ix:1},s:{a:0,k:[90.988,90.713],ix:3},r:{a:0,k:44.4,ix:6},o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:8,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:9,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:19,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:20,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:31,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:32,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:40,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:41,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:81,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:82,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:92,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:93,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:104,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:105,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:113,s:[100]},{t:114.000004643315,s:[0]}],ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:9,s:[{i:[[.112,-1.29],[-.856,-.71]],o:[[.229,.199],[-.469,-1.177]],v:[[-191.419,161.535],[-190.271,162.666]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:13,s:[{i:[[-1.354,-1.048],[-.513,-.766]],o:[[1.648,1.276],[-2.576,-5.129]],v:[[-202.941,153.014],[-196.722,156.307]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:19,s:[{i:[[-.939,-.411],[-.501,1.008]],o:[[.994,-.087],[-1.598,1.077]],v:[[-205.671,161.346],[-205.691,157.129]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:20,s:[{i:[[-.439,-.362],[-.088,.494]],o:[[.261,-.001],[-.313,.118]],v:[[-206.451,164.954],[-206.256,164.622]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:31,s:[{i:[[.036,-1.059],[-2.016,-1.291]],o:[[.354,.924],[-.478,-1.708]],v:[[-177.067,144.944],[-175.401,147.197]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:32,s:[{i:[[.956,-2.264],[-2.016,-1.291]],o:[[-.598,1.404],[-.478,-1.708]],v:[[-181.541,143.49],[-178.463,145.666]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:36,s:[{i:[[-1.407,-2.015],[-2.016,-1.291]],o:[[.691,.989],[-.478,-1.708]],v:[[-186.234,146.084],[-181.579,142.236]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:40,s:[{i:[[-1.467,-2.152],[-2.016,-1.291]],o:[[.776,1.137],[-.478,-1.708]],v:[[-187.15,153.038],[-186.434,148.224]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:41,s:[{i:[[-.632,-.313],[-.906,-.168]],o:[[1.3,-.452],[-.478,-1.708]],v:[[-186.753,153.884],[-186.107,153.075]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:82,s:[{i:[[.112,-1.29],[-.856,-.71]],o:[[.229,.199],[-.469,-1.177]],v:[[-191.419,161.535],[-190.271,162.666]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:86,s:[{i:[[-1.354,-1.048],[-.513,-.766]],o:[[1.648,1.276],[-2.576,-5.129]],v:[[-202.941,153.014],[-196.722,156.307]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:92,s:[{i:[[-.939,-.411],[-.501,1.008]],o:[[.994,-.087],[-1.598,1.077]],v:[[-205.671,161.346],[-205.691,157.129]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:93,s:[{i:[[-.439,-.362],[-.088,.494]],o:[[.261,-.001],[-.313,.118]],v:[[-206.451,164.954],[-206.256,164.622]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:104,s:[{i:[[.036,-1.059],[-2.016,-1.291]],o:[[.354,.924],[-.478,-1.708]],v:[[-177.067,144.944],[-175.401,147.197]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:105,s:[{i:[[.956,-2.264],[-2.016,-1.291]],o:[[-.598,1.404],[-.478,-1.708]],v:[[-181.541,143.49],[-178.463,145.666]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:109,s:[{i:[[-1.407,-2.015],[-2.016,-1.291]],o:[[.691,.989],[-.478,-1.708]],v:[[-186.234,146.084],[-181.579,142.236]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:113,s:[{i:[[-1.467,-2.152],[-2.016,-1.291]],o:[[.776,1.137],[-.478,-1.708]],v:[[-187.15,153.038],[-186.434,148.224]],c:!0}]},{t:114.000004643315,s:[{i:[[-.632,-.313],[-.906,-.168]],o:[[1.3,-.452],[-.478,-1.708]],v:[[-186.753,153.884],[-186.107,153.075]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.811764765721,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:20,s:[-191.461,162.544],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:31,s:[-191.461,162.544],to:[0,0],ti:[0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:93,s:[-191.461,162.544],to:[0,0],ti:[0,0]},{t:104.000004236007,s:[-191.461,162.544]}],ix:2},a:{a:0,k:[-192.373,159.528],ix:1},s:{a:0,k:[93.6,93.6],ix:3},r:{a:0,k:27,ix:6},o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:8,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:9,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:19,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:20,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:31,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:32,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:40,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:41,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:81,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:82,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:92,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:93,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:104,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:105,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:113,s:[100]},{t:114.000004643315,s:[0]}],ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:0,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150.000006109625,st:0,bm:0}]},{id:"comp_1",layers:[{ddd:0,ind:1,ty:4,nm:"dolphin",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:21.864,ix:10},p:{a:0,k:[365.52,227.249,0],ix:2,l:2},a:{a:0,k:[86,-99,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[{i:[[-56.337,-2.193],[27.317,-9.766],[-4.717,-.03],[-12.145,6.938]],o:[[-50.022,-16.699],[-24.879,8.894],[9.54,.062],[17.453,-9.97]],v:[[114.566,-112.062],[15.342,-113.208],[-12.55,-81.373],[14.265,-104.213]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[{i:[[-56.337,-2.193],[27.317,-9.766],[-4.717,-.03],[-12.145,6.938]],o:[[-48.004,-8.366],[-24.879,8.894],[9.54,.062],[17.453,-9.97]],v:[[56.632,-131.972],[-47.737,-129.787],[-74.538,-99.983],[-48.814,-120.793]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[{i:[[-54.666,-15.356],[27.953,-16.453],[-5.033,-2.459],[-12.145,6.938]],o:[[-47.759,-24.323],[-18.94,14.702],[8.35,3.611],[17.453,-9.97]],v:[[48.816,-174.201],[-49.36,-170.58],[-70.032,-127.99],[-42.004,-161.058]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[{i:[[-56.337,-2.193],[27.317,-9.766],[-4.717,-.03],[-12.145,6.938]],o:[[-50.022,-16.699],[-24.879,8.894],[9.54,.062],[17.453,-9.97]],v:[[114.566,-112.062],[15.342,-113.208],[-12.55,-81.373],[14.265,-104.213]],c:!0}]},{t:37.0000015070409,s:[{i:[[-56.338,-2.193],[27.317,-9.766],[-4.717,-.03],[-12.145,6.938]],o:[[-50.022,-16.699],[-24.879,8.894],[9.54,.062],[17.453,-9.97]],v:[[106.279,-111.262],[-9.172,-132.75],[-37.18,-109.932],[-4.388,-117.579]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.283130062328,.633032944623,.916574754902,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[200,60],to:[-23.333,-10],ti:[18.333,-15]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[60,0],to:[-9.31,7.617],ti:[11.603,-19.04]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[-33.66,0],to:[-11.247,18.455],ti:[4.922,-7.383]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[-30,160],to:[-10,15],ti:[0,-11.667]},{t:37.0000015070409,s:[-30,230]}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[34]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:21,s:[0]},{t:30.0000012219251,s:[-65]}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 5",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[{i:[[1.75,.75],[6.714,-1.123],[62.683,6.699],[7,-36.75],[4.75,-1.75],[-5.25,.25],[-2.75,0],[0,0],[-26.013,8.726],[4.378,4.354],[-43.248,-11.939],[-13.896,-6.995],[1.859,3.482]],o:[[-11.633,-8.028],[-10,-7.255],[-23,-3],[-2,4.75],[-4.75,1.75],[5.25,-.25],[2.75,0],[0,0],[-.25,-9],[9.75,-.25],[3.994,6.237],[.161,-6],[7.843,-1.792]],v:[[186.712,-83.084],[156.207,-88.501],[68.5,-120.5],[-15.754,-80.326],[-26.498,-71.044],[-25.748,-65.294],[-2.748,-73.294],[41.078,-75.978],[84.719,-68.748],[70.703,-79.559],[149.328,-84.904],[167.334,-63.145],[165.917,-75.407]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[{i:[[1.75,.75],[-.25,-12],[72.5,8.75],[7,-36.75],[4.75,-1.75],[-5.25,.25],[-2.75,0],[0,0],[-25.25,2.25],[2,14.25],[-19,30.5],[-1,12.75],[1,-1]],o:[[-3,5],[-10.75,6],[-23,-3],[-2,4.75],[-4.75,1.75],[5.25,-.25],[2.75,0],[0,0],[-.25,-9],[9.75,-.25],[8,0],[-12.25,-.5],[-.75,-5]],v:[[110.015,-168.111],[102.265,-149.361],[8.008,-135.936],[-77.742,-98.936],[-89.742,-89.436],[-88.992,-83.686],[-65.992,-91.686],[-23.242,-93.686],[18.758,-72.686],[2.758,-96.936],[107.265,-142.861],[134.515,-160.861],[113.015,-154.361]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[{i:[[1.75,.75],[12.613,26.384],[57.111,-.332],[-20.063,-37.83],[5.352,-5.841],[-5.25,.25],[-2.75,0],[0,0],[-25.864,8.893],[3.574,10.241],[-17.011,-57.721],[5.196,-7.639],[-2.947,5.299]],o:[[-10.29,-14.783],[-18.174,-45.363],[-23,-3],[-2,4.75],[-3.42,3.732],[5.25,-.25],[2.75,0],[0,0],[-.25,-9],[9.694,-.659],[-5.85,19.899],[4.837,3.55],[6.759,8.677]],v:[[99.84,-90.758],[82.379,-121.717],[-6.718,-187.404],[-67.777,-113.709],[-71.698,-102.872],[-72.479,-96.238],[-51.58,-115.517],[-25.466,-132.122],[12.62,-124.906],[-7.595,-140.191],[75.164,-120.821],[60.91,-96.577],[77.792,-99.821]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[{i:[[1.75,.75],[6.714,-1.123],[62.683,6.699],[7,-36.75],[4.75,-1.75],[-5.25,.25],[-2.75,0],[0,0],[-26.013,8.726],[4.378,4.354],[-43.248,-11.939],[-13.896,-6.995],[1.859,3.482]],o:[[-11.633,-8.028],[-10,-7.255],[-23,-3],[-2,4.75],[-4.75,1.75],[5.25,-.25],[2.75,0],[0,0],[-.25,-9],[9.75,-.25],[3.994,6.237],[.161,-6],[7.843,-1.792]],v:[[186.712,-83.084],[156.207,-88.501],[68.5,-120.5],[-15.754,-80.326],[-26.498,-71.044],[-25.748,-65.294],[-2.748,-73.294],[41.078,-75.978],[84.719,-68.748],[70.703,-79.559],[149.328,-84.904],[167.334,-63.145],[165.917,-75.407]],c:!0}]},{t:37.0000015070409,s:[{i:[[1.75,.75],[2.952,-4.817],[62.683,6.699],[12.883,-29.828],[4.75,-1.75],[-5.25,.25],[-2.724,-.374],[0,0],[-25.27,3.967],[4.133,9.324],[-48.109,37.335],[-10.409,9.872],[1.859,3.482]],o:[[-8.443,6.3],[-35.424,11.642],[-23,-3],[-2,4.75],[-4.75,1.75],[5.25,-.25],[9.964,1.369],[0,0],[-5.064,-11.017],[9.75,-.25],[10.723,2.699],[.16,-6],[-.336,-5.386]],v:[[149.251,-136.341],[137.185,-118.658],[32.591,-126.053],[-43.893,-102.58],[-54.274,-98.439],[-52.281,-92.553],[-28.607,-96.153],[17.489,-88.83],[51.093,-63.94],[37.393,-86.788],[141.205,-111.701],[171.58,-122.889],[150.72,-123.905]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.290196078431,.427450980392,.658823529412,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.541176470588,.768627510819,.952941236309,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[200,60],to:[-23.333,-10],ti:[18.333,-15]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[60,0],to:[-9.31,7.617],ti:[11.603,-19.04]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[-33.661,0],to:[-11.247,18.455],ti:[4.922,-7.383]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[-30,160],to:[-10,15],ti:[0,-11.667]},{t:37.0000015070409,s:[-30,230]}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[34]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:21,s:[0]},{t:30.0000012219251,s:[-65]}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[{i:[[-1.625,6.75],[2.125,-6.25],[0,0]],o:[[-13.125,1],[4.5,-1.125],[0,0]],v:[[81.352,-141.645],[51.25,-119.625],[72.089,-118.684]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[{i:[[-1.625,6.75],[2.125,-6.25],[0,0]],o:[[-13.125,1],[4.5,-1.125],[0,0]],v:[[15.633,-158.811],[-9.242,-135.061],[8.258,-134.436]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[{i:[[-3.939,8.277],[2.125,-6.25],[0,0]],o:[[-13.125,1],[4.5,-1.125],[0,0]],v:[[-1.692,-210.044],[-26.377,-181.791],[-3.45,-185.768]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[{i:[[-1.625,6.75],[2.125,-6.25],[0,0]],o:[[-13.125,1],[4.5,-1.125],[0,0]],v:[[81.352,-141.645],[51.25,-119.625],[72.089,-118.684]],c:!0}]},{t:37.0000015070409,s:[{i:[[-5.953,7.188],[2.125,-6.25],[0,0]],o:[[-13.125,1],[4.5,-1.125],[0,0]],v:[[61.539,-147.19],[35.151,-130.598],[53.039,-127.969]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.290196078431,.427450980392,.658823529412,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.541176470588,.768627510819,.952941236309,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[200,60],to:[-23.333,-10],ti:[18.333,-15]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[60,0],to:[-9.31,7.617],ti:[11.603,-19.04]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[-33.661,0],to:[-11.247,18.455],ti:[4.922,-7.383]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[-30,160],to:[-10,15],ti:[0,-11.667]},{t:37.0000015070409,s:[-30,230]}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[34]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:21,s:[0]},{t:30.0000012219251,s:[-65]}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 4",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[{i:[[-18.945,3.41],[18.25,-18.625],[-5,0],[-2.923,-.13],[-23.945,10.032]],o:[[-41.299,-19.904],[7.375,1.5],[5,0],[5.625,.25],[28.564,-11.968]],v:[[150.166,-90.006],[-24.748,-66.919],[-5.873,-68.794],[6.625,-71.125],[83.25,-76]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[{i:[[3.386,4.474],[18.25,-18.625],[-6.211,-1.781],[-2.923,-.13],[-24.338,9.034]],o:[[-24.647,11.143],[4.595,4.431],[4.806,1.378],[5.625,.25],[41.425,-15.376]],v:[[93.385,-135.971],[-89.379,-86.242],[-61.173,-88.359],[-45.365,-87.237],[28.212,-94.458]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[{i:[[-16.811,-10.922],[9.124,-18.376],[-4.612,1.507],[-7.334,3.225],[-25,7]],o:[[-50.633,-77.085],[5.705,6.033],[6.186,-5.785],[5.225,-1.542],[25,-7]],v:[[72.482,-133.715],[-70.449,-101.004],[-57.625,-106.377],[-42.357,-116.198],[22.014,-145.989]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[{i:[[-18.945,3.41],[18.25,-18.625],[-5,0],[-2.923,-.13],[-23.945,10.032]],o:[[-41.299,-19.904],[7.375,1.5],[5,0],[5.625,.25],[28.564,-11.968]],v:[[150.166,-90.006],[-24.748,-66.919],[-5.873,-68.794],[6.625,-71.125],[83.25,-76]],c:!0}]},{t:37.0000015070409,s:[{i:[[-16.559,10.431],[18.25,-18.625],[-5,0],[-2.923,-.13],[-23.945,10.032]],o:[[-41.299,-19.904],[7.375,1.5],[5,0],[5.625,.25],[28.564,-11.968]],v:[[126.725,-103.747],[-51.623,-93.813],[-30.478,-91.163],[-16.771,-88.935],[85.117,-83.843]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.290196078431,.427450980392,.658823529412,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.956862804936,.960784373564,.956862804936,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[200,60],to:[-23.333,-10],ti:[18.333,-15]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[60,0],to:[-9.308,7.615],ti:[11.588,-18.993]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[-33.683,0],to:[-11.237,18.418],ti:[4.919,-7.37]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[-30,160],to:[-9.991,14.97],ti:[0,-11.667]},{t:37.0000015070409,s:[-30,230]}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[34]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:21,s:[0]},{t:30.0000012219251,s:[-65]}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[{i:[[-.25,2.75],[0,0],[-15.924,.98]],o:[[-4.25,-.375],[0,0],[1.375,-4.5]],v:[[42.771,-73.631],[25.71,-71.654],[56.557,-59.907]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[{i:[[-.25,2.75],[0,0],[-6.375,-.125]],o:[[-4.25,-.375],[0,0],[1.375,-4.5]],v:[[-21.617,-89.436],[-36.617,-89.061],[-19.992,-71.811]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[{i:[[-.25,2.75],[0,0],[-10.007,2.657]],o:[[-4.25,-.375],[0,0],[1.375,-4.5]],v:[[-21.478,-132.053],[-34.379,-123.092],[-14.001,-111.927]],c:!0}]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[{i:[[-.25,2.75],[0,0],[-15.924,.98]],o:[[-4.25,-.375],[0,0],[1.375,-4.5]],v:[[42.771,-73.631],[25.71,-71.654],[56.557,-59.907]],c:!0}]},{t:37.0000015070409,s:[{i:[[-.25,2.75],[0,0],[-15.924,.98]],o:[[-4.25,-.375],[0,0],[-3.014,-6.981]],v:[[10.873,-86.389],[-2.04,-87.377],[18.289,-67.329]],c:!0}]}],ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.290504156374,.428246142817,.657996323529,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.541176470588,.768627510819,.952941236309,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:1,s:[200,60],to:[-23.333,-10],ti:[18.333,-15]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:11,s:[60,0],to:[-9.31,7.617],ti:[11.603,-19.04]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:21,s:[-33.661,0],to:[-11.247,18.455],ti:[4.922,-7.383]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:30,s:[-30,160],to:[-10,15],ti:[0,0]},{t:37.0000015070409,s:[-30,230]}],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:1,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:11,s:[34]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:21,s:[0]},{t:30.0000012219251,s:[-65]}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 3",np:3,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1}],ip:0,op:150.000006109625,st:0,bm:0}]}],Cy=[{ddd:0,ind:1,ty:0,nm:"splashes ",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[257,274,0],ix:2,l:2},a:{a:0,k:[300,200,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:600,h:400,ip:25.0000010182709,op:175.000007127896,st:25.0000010182709,bm:0},{ddd:0,ind:2,ty:0,nm:"splashes ",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[94,208,0],ix:2,l:2},a:{a:0,k:[300,200,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:600,h:400,ip:17.0000006924242,op:167.000006802049,st:17.0000006924242,bm:0},{ddd:0,ind:3,ty:0,nm:"splashes ",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[300,200,0],ix:2,l:2},a:{a:0,k:[300,200,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:600,h:400,ip:0,op:150.000006109625,st:0,bm:0},{ddd:0,ind:4,ty:0,nm:"dolphin moving",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[445,287,0],ix:2,l:2},a:{a:0,k:[300,200,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,0],[-1,264],[599,264],[600,0]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:"Mask 1"}],w:600,h:400,ip:6.00000024438501,op:156.00000635401,st:6.00000024438501,bm:0},{ddd:0,ind:5,ty:0,nm:"dolphin moving",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[301,197,0],ix:2,l:2},a:{a:0,k:[300,200,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,0],[-1,264],[599,264],[600,0]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:"Mask 1"}],w:600,h:400,ip:0,op:150.000006109625,st:0,bm:0},{ddd:0,ind:6,ty:0,nm:"dolphin moving",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[325,229,0],ix:2,l:2},a:{a:0,k:[300,200,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[0,0],[-1,264],[599,264],[600,0]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:"Mask 1"}],w:600,h:400,ip:13.0000005295009,op:163.000006639126,st:13.0000005295009,bm:0}],by=[],_y={v:uy,fr:dy,ip:my,op:hy,w:gy,h:fy,nm:py,ddd:Iy,assets:Ey,layers:Cy,markers:by},Sy="5.5.7",Ny={g:"LottieFiles AE 0.1.14",a:"Tron Johnson",k:"fish jump color animate",d:"Fish jumping and changing color",tc:""},vy=30,Ty=0,wy=49,yy=200,Ry=200,Oy="Fish",ky=0,Ay=[],xy=[{ddd:0,ind:1,ty:4,nm:"Splashes 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:1.052,ix:10},p:{a:0,k:[-58.25,100,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[99.676,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[2.26,6.365],[.988,.914],[0,0]],o:[[0,0],[-1.138,-3.204],[-1.671,-1.546],[0,0]],v:[[77.25,90.25],[77.007,77.763],[74.187,73.362],[68.563,71.186]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[0]},{t:46,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:38,s:[0]},{t:45,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[.592156887054,.058823529631,.96862745285,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[2.78,11.298],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,94.927],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Splash 4",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-3.331,5.876],[-.53,.288],[0,0]],o:[[0,0],[.818,-1.444],[.944,-.514],[0,0]],v:[[77.25,90.25],[80.007,77.179],[82.183,75.151],[84.809,74.956]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[0]},{t:46,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:38,s:[0]},{t:45,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[.592156887054,.058823529631,.96862745285,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[20.78,11.798],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,94.927],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Splash 3",np:4,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-4.241,5.257],[0,0]],o:[[0,0],[2.889,-3.581],[0,0]],v:[[77.25,90.25],[80.604,79.011],[88.407,79.825]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[0]},{t:46,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:38,s:[0]},{t:45,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[.592156887054,.058823529631,.96862745285,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[20.78,11.798],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,94.927],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Splash 2",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[5.773,3.507],[0,0]],o:[[0,0],[-5.291,-3.214],[0,0]],v:[[77.25,90.25],[71.284,76.82],[59.05,79.469]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:39,s:[0]},{t:46,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:38,s:[0]},{t:45,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[.592156887054,.058823529631,.96862745285,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[2.509,12.336],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,94.927],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Splash 1",np:4,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1}],ip:31,op:48,st:31,bm:0},{ddd:0,ind:2,ty:4,nm:"Splashes",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:1.052,ix:10},p:{a:0,k:[82,98.875,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[99.676,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-3.331,5.876],[-.53,.288],[0,0]],o:[[0,0],[.818,-1.444],[.944,-.514],[0,0]],v:[[77.25,90.25],[80.007,77.179],[82.183,75.151],[84.809,74.956]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:8,s:[0]},{t:15,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:7,s:[0]},{t:14,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[.949019610882,.015686275437,.149019613862,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[20.78,11.798],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,94.927],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Splash 3",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-4.241,5.257],[0,0]],o:[[0,0],[2.889,-3.581],[0,0]],v:[[77.25,90.25],[80.604,79.011],[88.407,79.825]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:8,s:[0]},{t:15,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:7,s:[0]},{t:14,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[.949019610882,.015686275437,.149019613862,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[20.78,11.798],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,94.927],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Splash 2",np:4,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[5.773,3.507],[0,0]],o:[[0,0],[-5.291,-3.214],[0,0]],v:[[77.25,90.25],[71.284,76.82],[59.05,79.469]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:8,s:[0]},{t:15,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:7,s:[0]},{t:14,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[.947886049747,.013837873004,.150339230895,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[2.509,12.336],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,94.927],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Splash 1",np:4,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1}],ip:0,op:17,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Fish",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:.464},o:{x:.494,y:0},t:0,s:[170.538,227.959,0],to:[-2.696,-26.852,0],ti:[71.791,.135,0]},{i:{x:.469,y:.99},o:{x:.875,y:.325},t:25,s:[92.821,72.847,0],to:[-68.794,-.129,0],ti:[.137,-31.352,0]},{t:42,s:[27,228.459,0]}],ix:2},a:{a:0,k:[-22.044,-19.723,0],ix:1},s:{a:0,k:[64.644,-64.644,100],ix:6}},ao:1,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[6.267,6.267],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.709712009804,.709712009804,.709712009804,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.866416183172,.900284471699,.915916053922,1],ix:4},o:{a:0,k:92,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[5.172,-22.337],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Fish EYE",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-22,20]],o:[[0,0],[-21.625,-20]],v:[[-40,-20],[20,-20]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709712009804,.709712009804,.709712009804,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.984313726425,.670588254929,.792156875134,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:23,s:[.580392181873,.964556932449,1,1]},{t:35,s:[.960784316063,.839215695858,1,1]}],ix:4},o:{a:0,k:92,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-5.622,-14.816],ix:2},a:{a:0,k:[-39.989,-20.024],ix:1},s:{a:0,k:[23.981,39.945],ix:3},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[175.01]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:13,s:[175.01]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:21,s:[148.305]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:24,s:[146.118]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:27,s:[159.744]},{t:30,s:[170.02]}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Fin",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-22,20]],o:[[0,0],[-21.625,-20]],v:[[-40,-20],[20,-20]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709712009804,.709712009804,.709712009804,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.984313726425,.670588254929,.792156875134,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:23,s:[.580392181873,.964705884457,1,1]},{t:35,s:[.960784316063,.839215695858,1,1]}],ix:4},o:{a:0,k:92,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-39.989,-20.024],ix:2},a:{a:0,k:[-39.989,-20.024],ix:1},s:{a:0,k:[40.006,40.006],ix:3},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.167],y:[.167]},t:0,s:[137.125]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:4,s:[159.125]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:9,s:[137.125]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:15,s:[137.125]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:19,s:[159.125]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:24,s:[137.125]},{t:34,s:[152.125]}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Flipper 2",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-22,20]],o:[[0,0],[-21.625,-20]],v:[[-40,-20],[20,-20]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709712009804,.709712009804,.709712009804,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.984313726425,.670588254929,.792156875134,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:23,s:[.580392181873,.964705884457,1,1]},{t:35,s:[.959380626678,.839353561401,1,1]}],ix:4},o:{a:0,k:92,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-39.989,-20.024],ix:2},a:{a:0,k:[-39.989,-20.024],ix:1},s:{a:0,k:[40.006,40.006],ix:3},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:0,s:[225.328]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:4,s:[186.328]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:9,s:[225.328]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:15,s:[225.328]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:20,s:[186.328]},{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:25,s:[225.328]},{t:34,s:[186.328]}],ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Flipper 1",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-22,20]],o:[[0,0],[-21.625,-20]],v:[[-40,-20],[20,-20]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.709712009804,.709712009804,.709712009804,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[.943566203117,.001459845807,.001459845807,1]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:23,s:[.111835621297,.803684473038,.815257370472,1]},{t:35,s:[.603980183601,.044713519514,.818765342236,1]}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-.765,-1.097],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:-.012,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Body",np:3,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1}],ip:0,op:49,st:0,bm:0}],Dy=[],Py={v:Sy,meta:Ny,fr:vy,ip:Ty,op:wy,w:yy,h:Ry,nm:Oy,ddd:ky,assets:Ay,layers:xy,markers:Dy};const Sg=i.memo(()=>{const[a,e]=i.useState("dolphin"),[n,s]=i.useState(!0),[r,o]=i.useState(!0),[c,u]=i.useState(0),d=i.useRef(null),g=()=>Math.random()>.5?"dolphin":"oneFish",m=()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{const C=g();e(C),s(!0),u(E=>E+1)},3e3)},f=()=>{r?setTimeout(()=>{e("oneFish"),u(C=>C+1)},2e3):(s(!1),m())},p=()=>{r?(o(!1),s(!1),m()):(s(!1),m())};return i.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]),l("div",{className:"hotel-view-wave-backdrop","aria-hidden":"true",children:[t("div",{className:"hotel-view-wave-backdrop__layer hotel-view-wave-backdrop__layer--one"}),t("div",{className:"hotel-view-wave-backdrop__circle",children:l("div",{className:"hotel-view-wave-backdrop__fish-wrapper",children:[n&&a==="dolphin"&&t(Eu,{animationData:_y,loop:!1,autoplay:!0,onComplete:f,className:"hotel-view-wave-backdrop__lottie"},`dolphin-${c}`),n&&a==="oneFish"&&t(Eu,{animationData:Py,loop:!1,autoplay:!0,onComplete:p,className:"hotel-view-wave-backdrop__lottie"},`oneFish-${c}`)]})})]})});Sg.displayName="HotelViewWaveBackdrop";const My=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(null),[o,c]=i.useState(null),[u,d]=i.useState(null);return F(a1,g=>{const m=g.getParser();n(m.productType),r(m.productClassId),c(m.totalCoinsForBonus),d(m.coinsStillRequiredToBuy)}),i.useEffect(()=>{M(new i1)},[]),e?l("div",{className:"bonus-rare widget d-flex",children:[e,l("div",{className:"bg-light-dark rounded overflow-hidden position-relative bonus-bar-container",children:[t("div",{className:"d-flex justify-content-center align-items-center w-100 h-100 position-absolute small top-0",children:o-u+"/"+o}),t("div",{className:"small bg-info rounded position-absolute top-0 h-100",style:{width:(o-u)/o*100+"%"}})]})]}):null},Ly=a=>{const{data:e=null,level:n=0}=a;return l("div",{className:"hof-user-container",children:[l("div",{className:"hof-tooltip",children:[l("div",{className:"hof-header",children:[n,". ",e.userName," ",t(Pn,{userId:e.userId})]}),t("div",{className:"small text-center text-white",children:h("landing.view.competition.hof.points",["points"],[Ii(e.currentScore).toString()])})]}),t($e,{figure:e.figure,direction:2})]})},Uy=a=>{const{slot:e=-1,conf:n=null}=a,[s,r]=i.useState(null);return F(l1,o=>{const c=o.getParser();r(c.data)}),i.useEffect(()=>{const o=n?n.campaign:"";M(new c1(o))},[n]),s?t("div",{className:"hall-of-fame d-flex",children:s.hof&&s.hof.length>0&&s.hof.map((o,c)=>t(Ly,{data:o,level:c+1},c))}):null},Fy=()=>null,Vy=a=>{const{conf:e=null}=a,n=s=>{const r=e[s];if(!r)return null;switch(s){case"image":return or.interpolate(r)}return r};return l("div",{className:"widgetcontainer widget",children:[t("div",{className:"widgetcontainer__media",style:{backgroundImage:`url(${n("image")})`}}),l("div",{className:"widgetcontainer__content",children:[t("span",{className:"widgetcontainer__eyebrow",children:h("landing.view.promo.article.header")}),t("h3",{className:"widgetcontainer__title",children:h(`landing.view.${n("texts")}.header`)}),t("p",{className:"widgetcontainer__body",children:h(`landing.view.${n("texts")}.body`)}),t("button",{className:"btn btn-sm btn-gainsboro widgetcontainer__cta",onClick:s=>_o(n("btnLink")),children:h(`landing.view.${n("texts")}.button`)})]})]})},By=a=>{switch(a.widgetType){case"promoarticle":return t(Fy,{});case"achievementcompetition_hall_of_fame":return t(Uy,{slot:a.slot,conf:a.widgetConf});case"bonusrare":return t(My,{});case"widgetcontainer":return t(Vy,{conf:a.widgetConf});default:return null}},Cr=a=>{const{widgetType:e=null,widgetSlot:n=0,widgetConf:s=null,className:r="",...o}=a;return t("div",{className:`widget-slot slot-${n} ${r||""}`,...o,children:t(By,{widgetType:e,slot:n,widgetConf:s})})},Dd=()=>{const a=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1,timeZone:"America/Sao_Paulo"}).format(new Date),e=Number(a);return isNaN(e)||e>=5&&e<12?"morning":e>=12&&e<18?"afternoon":e>=18&&e<22?"evening":"night"},Gy=a=>{const[e,n]=i.useState(!0),[s,r]=i.useState(Dd()),{userFigure:o=null}=Zn();if(Ye([tn.CREATED,tn.ENDED],E=>{switch(E.type){case tn.CREATED:n(!1);return;case tn.ENDED:n(E.openLandingView);return}}),i.useEffect(()=>{const E=()=>{const I=Dd();r(_=>_===I?_:I)},b=setInterval(E,6e4);return E(),()=>clearInterval(b)},[]),!e)return null;const c=X("hotelview").images||{},u=c[`background.${s}.colour`]||c["background.colour"],d=c[`background.${s}`]||c.background,g=or.interpolate(d),m=or.interpolate(c.sun),f=new URL("data:image/png;base64,UklGRpgGAABXRUJQVlA4TIwGAAAvkcAxEG/BNLbtKC8b+84bFBNNEWmBtpGpgkE9jUsfTGTbbnKT0HFV46tDsxSWymDRQVcXTTdMI9t2cn4kg+JrgvwaTxNUQX2Ugv/+KZJljLZt4xb2/1uHBgIQQAEPWLDdfUb8Ruj8YMBxz8qYu92SGHQaV5h0PboCoMLgk4GWQdcGBCntdRO6MyKLrjgxCHL+UYjS/cZz0h/KHpW2v/M0F2QbnSstiKd4dXTOh0iJJCncGSja2tu2kTJeyOON01bTnUzRlFRn3//5RBAEAXB7+RHRfwmSJMltk5DgIryALy6xxhM2335zts1/giL85sAM+u3xTH+EXhzpN8cl6Ddo93c+4IiZfisAQGJ+TmTSbwNsXyMJ8w7PR/wmAIDXeLs6w/N+xwCBOB4FLtddXmWBCTS0t+Xo5fq97q6OIAATezUwNuKeZgDr4UusboFyEGMCJlziPosz4BIgdu4NeETgVpllZOL5kt6kFADgz60y8wNhdVyV2OI6b0DfMRG8Wdd5Ej4kq7IBbCR3g2v6nmADhjERzvOQOP+Qwk8BbNyE1TUIMB+wSV/biQXYgGpUVYfcEgCwn0zYza0N21wdcgIBbEAdvMqLCcAa7NRbFib1M0o4Anics8yU6ogtfcpMTGxA1mFQAA83M+qYUEKq/eorAPo0NaO7pHCyn6UApMLuqgJoBnRVK3x2Oynq2uUR0k4YcC2Hutrhs3uSQioC302ofsiJgDoIExmVA0LZyQEc96W2CbbDGp9Kga+TqsKWTMoBYcLqSYxD+ScptcLV8Zb4nxsg8HVSVZlkUqcQGNZtOU0IBqU+Iukd3dbvDYCNA4RKmJS9ib8dbyEF29FaVIBKVcfpuzgCj4Ke8nCYFMF2q3UErvEKJAR9T0gFmbacZCvEHRtRvkDVjuQ6YsUnzOpzasqNJgpxhPg50yjsHzf1VmS2ytFM7SgaI5SFXeu2ucqUyhfaQYdb9I/Avr5tNoOXOzluWNzAboQieAXYtQOZsBmhCKV0QBPNyjCvkhqZDmh/WDXCpaRNUXAwPfKdHOrChm362xTTLJ/DhBmay+iL/7nVH8NFoxxPg+4y2gJ4aG8LLYCTfaG7jLakUN4Wglxot4buMj0FANIE6rbAHLupY6+6THsepXJZodAuD/s1ynDFZQ5ojCihKJV2AT4v2PDmZegA+TqtaA5LUbuQfi+e5pTme031DyIs2yWNCynKHDBLL3bCfOd0b9r6/F6LWLD2A/QFV+yFNLeIHe67L3RpF+xd0JddsmjMLfTdF/TYHb5Z5ggXoBk85Lmlvy+YWCSAOcIEwiHnEleQ5lbffUFH+pYB9lj9ktjziwHgL/ruC1oIhHBHuAVdZQmC9L61mkea21SI3S1wd0slZnoJ9FWvahJ5e48SK4CAA17q16UWFsSQBIBH2e/7HqtoNQtAABOEAX2PVfTq6pRpfPiRUIXHPMqU3rciXZmedvtYh/6xSq/qM1imK+vTHqWHGJrqtUBFV8an9T1WcaIr09M0z1Va1TeP1ORyoH2uIlfPPOoglQP9cxV53a6fR13q8tCxLu23oBMvF8qjpwCcVeVgk4pv8Z+kS8efv1EONpnaRXK/BZ2qIw5U63b+lu23oEtdHlTrdj6FdDJhN494edCt29kE0sk0xMuDet1+CoV26eeRXB70z1VOVdrVAN088mD8XKVZLRDV5cH6uYqmkFq8PJg/V4HqsYoSLw8Oz1WgfayiLR8+6/Z2YaUrLz7r9mYxmvKjWbf30z5WaZcn3brdEPT3hQgyLf8fqiVXFJkm8wgL9KSKpH8eWd0XxrKgD6/BLH0iVD5Ya83nmJWGeLWELFOl2gKWsQUa4SqEYGUFqvuCuG4PVWaA3ucqUeunbgt6BK3staBPzOq1oE/E+rXUC+h1zOfAlVlKTz2fgczAlfkCep3vkaglyFTpnUcxS5DpIGTJm6nI5SdueRqiTmAsfp2UMhW+TlgZGarMjFAnvAwNM6LbgPPI1CDVJbM2VKlJURvmc7iDHMUwI7q0InOQMpM5TJnKHKLMDVDmBpjXJgYrI0OVmUEq1zI0TJkapIwNUeYGKAfhy0XwchK63AT+HHYUtlwFLWchy13AdVcA4SqEYBVEqAojUAUSpkIJUsGEqHACVEDu94WQnCso1wrLsQJzW5eG5lTBuVR4DjUA8xqCcQ3CtIbxwDeLGohZDcWoBmNSwzGoAXXXkHpr0C+26Wr07Z+Nhd+gEcAfn/dtAg==",self.location).href,p=or.interpolate(c.left);or.interpolate(c["right.repeat"]);const C=or.interpolate(c.right);return l("div",{className:"nitro-hotel-view",style:u&&u.length?{background:u}:{},children:[t(Sg,{}),t("div",{className:"container h-100 py-3 overflow-hidden landing-widgets",children:l("div",{className:"row h-100",children:[l("div",{className:"col-9 h-100 d-flex flex-column",children:[t(Cr,{widgetSlot:1,widgetType:X("hotelview").widgets["slot.1.widget"],widgetConf:X("hotelview").widgets["slot.1.conf"],className:"col-6"}),l("div",{className:"col-12 row mx-0",children:[t(Cr,{widgetSlot:2,widgetType:X("hotelview").widgets["slot.2.widget"],widgetConf:X("hotelview").widgets["slot.2.conf"],className:"col-7"}),t(Cr,{widgetSlot:3,widgetType:X("hotelview").widgets["slot.3.widget"],widgetConf:X("hotelview").widgets["slot.3.conf"],className:"col-5"}),t(Cr,{widgetSlot:4,widgetType:X("hotelview").widgets["slot.4.widget"],widgetConf:X("hotelview").widgets["slot.4.conf"],className:"col-7"}),t(Cr,{widgetSlot:5,widgetType:X("hotelview").widgets["slot.5.widget"],widgetConf:X("hotelview").widgets["slot.5.conf"],className:"col-5"})]}),t(Cr,{widgetSlot:6,widgetType:X("hotelview").widgets["slot.6.widget"],widgetConf:X("hotelview").widgets["slot.6.conf"],className:"mt-auto"})]}),t("div",{className:"col-3 h-100",children:t(Cr,{widgetSlot:7,widgetType:X("hotelview").widgets["slot.7.widget"],widgetConf:X("hotelview").widgets["slot.7.conf"]})})]})}),t("div",{className:"background position-absolute",style:g&&g.length?{backgroundImage:`url(${g})`}:{}}),t("div",{className:"sun position-absolute",style:m&&m.length?{backgroundImage:`url(${m})`}:{}}),t("div",{className:"drape position-absolute",style:f&&f.length?{backgroundImage:`url(${f})`}:{}}),t("div",{className:"left position-absolute",style:p&&p.length?{backgroundImage:`url(${p})`}:{}}),t("div",{className:"right position-absolute",style:C&&C.length?{backgroundImage:`url(${C})`}:{}}),X("hotelview")["show.avatar"]&&t("div",{className:"avatar-image",children:t($e,{figure:o,direction:2})})]})},Pd=a=>{const{badgeCode:e=null,children:n=null,...s}=a,{selectedBadgeCode:r=null,setSelectedBadgeCode:o=null,toggleBadge:c=null,getBadgeId:u=null}=Cl(),{isUnseen:d=null}=Un(),g=d(ct.BADGE,u(e));return l(Se,{itemActive:r===e,itemUnseen:g,onMouseDown:m=>o(e),onDoubleClick:m=>c(r),...s,children:[t(ze,{badgeCode:e}),n]})},Hy=a=>{const[e,n]=i.useState(!1),{badgeCodes:s=[],activeBadgeCodes:r=[],selectedBadgeCode:o=null,isWearingBadge:c=null,canWearBadges:u=null,toggleBadge:d=null,getBadgeId:g=null,activate:m=null,deactivate:f=null}=Cl(),{isUnseen:p=null,removeUnseen:C=null}=Un();return i.useEffect(()=>{!o||!p(ct.BADGE,g(o))||C(ct.BADGE,g(o))},[o,p,C,g]),i.useEffect(()=>{if(!e)return;const E=m();return()=>f(E)},[e,m,f]),i.useEffect(()=>(n(!0),()=>n(!1)),[]),l(re,{children:[t(v,{size:7,overflow:"hidden",children:t(Le,{columnCount:4,children:s&&s.length>0&&s.map((E,b)=>c(E)?null:t(Pd,{badgeCode:E},b))})}),l(v,{className:"justify-content-between",size:5,overflow:"auto",children:[l(v,{overflow:"hidden",gap:2,children:[t(N,{children:h("inventory.badges.activebadges")}),t(Le,{columnCount:3,children:r&&r.length>0&&r.map((E,b)=>t(Pd,{badgeCode:E},b))})]}),!!o&&l(v,{grow:!0,justifyContent:"end",gap:2,children:[l(w,{alignItems:"center",gap:2,children:[t(ze,{shrink:!0,badgeCode:o}),t(N,{children:fa(o)})]}),t(D,{variant:c(o)?"danger":"success",disabled:!c(o)&&!u(),onClick:E=>d(o),children:h(c(o)?"inventory.badges.clearbadge":"inventory.badges.wearbadge")})]})]})]})},cu=a=>{const{title:e="",desc:n="",children:s=null,...r}=a;return l(re,{...r,children:[t(v,{center:!0,size:5,overflow:"hidden",children:t("div",{className:"empty-image"})}),l(v,{justifyContent:"center",size:7,overflow:"hidden",children:[t(N,{fontWeight:"bold",fontSize:5,overflow:"unset",truncate:!0,children:e}),t(N,{overflow:"auto",children:n})]}),s]})},Wy=a=>{const{botItem:e=null,children:n=null,...s}=a,[r,o]=i.useState(!1),{selectedBot:c=null,setSelectedBot:u=null}=zh(),{isUnseen:d=null}=Un(),g=d(ct.BOT,e.botData.id),m=f=>{switch(f.type){case Ae.MOUSE_DOWN:u(e),o(!0);return;case Ae.MOUSE_UP:o(!1);return;case Ae.ROLL_OUT:if(!r||c!==e)return;Sc(e);return;case"dblclick":Sc(e);return}};return l(Se,{itemActive:c===e,itemUnseen:g,onMouseDown:m,onMouseUp:m,onMouseOut:m,onDoubleClick:m,...s,children:[t($e,{figure:e.botData.figure,direction:3,headOnly:!0}),n]})},jy=a=>{const{roomSession:e=null,roomPreviewer:n=null}=a,[s,r]=i.useState(!1),{botItems:o=[],selectedBot:c=null,activate:u=null,deactivate:d=null}=zh(),{isUnseen:g=null,removeUnseen:m=null}=Un();return i.useEffect(()=>{if(!c||!n)return;const f=c.botData,p=Y();let C=p.getRoomInstanceVariable(p.activeRoomId,se.ROOM_WALL_TYPE),E=p.getRoomInstanceVariable(p.activeRoomId,se.ROOM_FLOOR_TYPE),b=p.getRoomInstanceVariable(p.activeRoomId,se.ROOM_LANDSCAPE_TYPE);C=C&&C.length?C:"101",E=E&&E.length?E:"101",b=b&&b.length?b:"1.1",n.reset(!1),n.updateRoomWallsAndFloorVisibility(!0,!0),n.updateObjectRoom(E,C,b),n.addAvatarIntoRoom(f.figure,0)},[n,c]),i.useEffect(()=>{!c||!g(ct.BOT,c.botData.id)||m(ct.BOT,c.botData.id)},[c,g,m]),i.useEffect(()=>{if(!s)return;const f=u();return()=>d(f)},[s,u,d]),i.useEffect(()=>(r(!0),()=>r(!1)),[]),!o||!o.length?t(cu,{title:h("inventory.empty.bots.title"),desc:h("inventory.empty.bots.desc")}):l(re,{children:[t(v,{size:7,overflow:"hidden",children:t(Le,{columnCount:5,children:o&&o.length>0&&o.map(f=>t(Wy,{botItem:f},f.botData.id))})}),l(v,{size:5,overflow:"auto",children:[t(v,{overflow:"hidden",position:"relative",children:t(dl,{roomPreviewer:n,height:140})}),c&&l(v,{grow:!0,justifyContent:"between",gap:2,children:[t(N,{grow:!0,truncate:!0,children:c.botData.name}),!!e&&t(D,{variant:"success",onClick:f=>Sc(c),children:h("inventory.furni.placetoroom")})]})]})]})},qy=a=>{const{groupItem:e=null,...n}=a,[s,r]=i.useState(!1),{selectedItem:o=null,setSelectedItem:c=null}=Lr(),u=g=>{switch(g.type){case Ae.MOUSE_DOWN:c(e),r(!0);return;case Ae.MOUSE_UP:r(!1);return;case Ae.ROLL_OUT:if(!s||e!==o)return;Eo(e);return;case"dblclick":Eo(e);return}},d=e.getUnlockedCount();return t(Se,{className:d?"":"opacity-0-5 ",itemImage:e.iconUrl,itemCount:e.getUnlockedCount(),itemActive:e===o,itemUniqueNumber:e.stuffData.uniqueNumber,itemUnseen:e.hasUnseenItems,onMouseDown:u,onMouseUp:u,onMouseOut:u,onDoubleClick:u,...n})},Ng=a=>{const{groupItems:e=[],setGroupItems:n=null}=a,[s,r]=i.useState("");return i.useEffect(()=>{let o=[...e];if(s&&s.length){const c=s.toLocaleLowerCase();o=e.filter(u=>c&&c.length&&u.name.toLocaleLowerCase().includes(c)?u:null)}n(o)},[e,n,s]),l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:h("generic.search"),value:s,onChange:o=>r(o.target.value)}),t(D,{variant:"primary",children:t(Pc,{className:"fa-icon"})})]})},zy=a=>{const e=a.getLastItem();if(!e||!e.sellable)return!1;nt(new bi(e))},Yy=a=>{const{roomSession:e=null,roomPreviewer:n=null}=a,[s,r]=i.useState(!1),[o,c]=i.useState([]),{groupItems:u=[],selectedItem:d=null,activate:g=null,deactivate:m=null}=Lr(),{resetItems:f=null}=Un();return i.useEffect(()=>{if(!d||!n)return;const p=d.getLastItem();if(!p)return;const C=Y();let E=C.getRoomInstanceVariable(C.activeRoomId,se.ROOM_WALL_TYPE),b=C.getRoomInstanceVariable(C.activeRoomId,se.ROOM_FLOOR_TYPE),I=C.getRoomInstanceVariable(C.activeRoomId,se.ROOM_LANDSCAPE_TYPE);if(E=E&&E.length?E:"101",b=b&&b.length?b:"101",I=I&&I.length?I:"1.1",n.reset(!1),n.updateObjectRoom(b,E,I),n.updateRoomWallsAndFloorVisibility(!0,!0),p.category===ge.WALL_PAPER||p.category===ge.FLOOR||p.category===ge.LANDSCAPE){if(b=p.category===ge.FLOOR?d.stuffData.getLegacyString():b,E=p.category===ge.WALL_PAPER?d.stuffData.getLegacyString():E,I=p.category===ge.LANDSCAPE?d.stuffData.getLegacyString():I,n.updateObjectRoom(b,E,I),p.category===ge.LANDSCAPE){const _=z().getWallItemDataByName("window_double_default");_&&n.addWallItemIntoRoom(_.id,new At(90,0,0),_.customParams)}}else d.isWallItem?n.addWallItemIntoRoom(d.type,new At(90),p.stuffData.getLegacyString()):n.addFurnitureIntoRoom(d.type,new At(90),d.stuffData,p.extra.toString())},[n,d]),i.useEffect(()=>{!d||!d.hasUnseenItems||(f(ct.FURNI,d.items.map(p=>p.id)),d.hasUnseenItems=!1)},[d,f]),i.useEffect(()=>{if(!s)return;const p=g();return()=>m(p)},[s,g,m]),i.useEffect(()=>(r(!0),()=>r(!1)),[]),!u||!u.length?t(cu,{title:h("inventory.empty.title"),desc:h("inventory.empty.desc")}):l(re,{children:[l(v,{size:7,overflow:"hidden",children:[t(Ng,{groupItems:u,setGroupItems:c}),t(Le,{columnCount:5,children:o&&o.length>0&&o.map((p,C)=>t(qy,{groupItem:p},C))})]}),l(v,{size:5,overflow:"auto",children:[l(v,{overflow:"hidden",position:"relative",children:[t(dl,{roomPreviewer:n,height:140}),d&&d.stuffData.isUnique&&t(Bh,{className:"top-2 end-2",position:"absolute",uniqueNumber:d.stuffData.uniqueNumber,uniqueSeries:d.stuffData.uniqueSeries}),d&&d.stuffData.rarityLevel>-1&&t(eu,{className:"top-2 end-2",position:"absolute",level:d.stuffData.rarityLevel})]}),d&&l(v,{grow:!0,justifyContent:"between",gap:2,children:[t(N,{grow:!0,truncate:!0,children:d.name}),l(v,{gap:1,children:[!!e&&t(D,{variant:"success",onClick:p=>Eo(d),children:h("inventory.furni.placetoroom")}),d&&d.isSellable&&t(D,{onClick:p=>zy(d),children:h("inventory.marketplace.sell")})]})]})]})]})},Yl=9,Ky=a=>{const{cancelTrade:e=null}=a,[n,s]=i.useState(null),[r,o]=i.useState(null),[c,u]=i.useState(null),[d,g]=i.useState(null),[m,f]=i.useState(3),[p,C]=i.useState(1),{ownUser:E=null,otherUser:b=null,groupItems:I=[],tradeState:_=Ot.TRADING_STATE_READY,progressTrade:S=null,removeItem:T=null,setTradeState:R=null}=Kh(),{simpleAlert:y=null}=Je(),A=(x,V,B,W,G)=>{if(!E||E.accepts||!E.userItems)return!1;if(E.userItems.length<Yl)return!0;if(!W)return!1;let H=V.toString();return B===ge.POSTER?H=H+"poster"+G.getLegacyString():B===ge.GUILD_FURNI?H=C_(V,G):H=(x?"I":"S")+H,!!E.userItems.getValue(H)},U=x=>{if(!n)return;const V=n.getTradeItems(x);if(!V||!V.length)return;let B=null;const W=[];for(const H of V)W.push(H.id),B||(B=H);if(E.userItems.length+W.length<=1500)if(!B.isGroupable&&W.length)M(new Mu(W.pop()));else{const H=[];for(const Q of W)A(B.isWallItem,B.type,B.category,B.isGroupable,B.stuffData)&&H.push(Q);H.length&&(H.length===1?M(new Mu(H.pop())):M(new u1(...H)))}else y(h("trading.items.too_many_items.desc"),Ie.DEFAULT,null,null,h("trading.items.too_many_items.title"))},L=x=>x?t(vm,{className:"text-success fa-icon"}):t(jg,{className:"text-danger fa-icon"}),O=(x,V)=>{(isNaN(Number(x))||Number(x)<0||!x)&&(x=1),x=Math.max(Number(x),1),x=Math.min(Number(x),V),x!==p&&C(x)},k=x=>{O(p,x),U(p)};return i.useEffect(()=>{C(1)},[n]),i.useEffect(()=>{if(_!==Ot.TRADING_STATE_COUNTDOWN)return;f(3);const x=setInterval(()=>{f(V=>{const B=V-1;return B===0&&clearInterval(x),B})},1e3);return()=>clearInterval(x)},[_,R]),i.useEffect(()=>{m===0&&R(Ot.TRADING_STATE_CONFIRMING)},[m,R]),_===Ot.TRADING_STATE_READY||!E||!b?null:l(re,{children:[l(v,{size:4,overflow:"hidden",children:[t(Ng,{groupItems:I,setGroupItems:g}),l(w,{column:!0,fullHeight:!0,justifyContent:"between",overflow:"hidden",gap:2,children:[t(Le,{columnCount:3,children:d&&d.length>0&&d.map((x,V)=>{const B=x.getUnlockedCount();return t(Se,{className:B?"":"opacity-0-5 ",itemImage:x.iconUrl,itemCount:B,itemActive:n===x,itemUniqueNumber:x.stuffData.uniqueNumber,onClick:W=>B&&s(x),onDoubleClick:W=>U(1),children:B>0&&n===x&&t(D,{position:"absolute",variant:"success",className:"trade-button bottom-1 end-1",onClick:W=>U(1),children:t(_n,{className:"fa-icon"})})},V)})}),l(v,{gap:1,alignItems:"end",children:[l(re,{overflow:"hidden",children:[t(v,{size:6,overflow:"hidden",children:t("input",{type:"number",className:"form-control form-control-sm quantity-input",placeholder:h("catalog.bundlewidget.spinner.select.amount"),disabled:!n,value:p,onChange:x=>C(x.target.valueAsNumber)})}),t(v,{size:6,overflow:"hidden",children:t(D,{variant:"secondary",disabled:!n,onClick:x=>k(n.getUnlockedCount()),children:h("inventory.trading.areoffering")})})]}),t(P,{fullWidth:!0,className:"badge bg-muted",children:n?n.name:h("catalog_selectproduct")})]})]})]}),l(v,{size:8,overflow:"hidden",children:[l(re,{overflow:"hidden",children:[l(v,{size:6,overflow:"hidden",children:[l(w,{justifyContent:"between",alignItems:"center",children:[l(N,{children:[h("inventory.trading.you")," ",h("inventory.trading.areoffering"),":"]}),L(E.accepts)]}),t(Le,{columnCount:3,children:Array.from(Array(Yl),(x,V)=>{const B=E.userItems.getWithIndex(V)||null;return B?t(Se,{itemActive:r===B,itemImage:B.iconUrl,itemCount:B.getTotalCount(),itemUniqueNumber:B.stuffData.uniqueNumber,onClick:W=>o(B),onDoubleClick:W=>T(B),children:r===B&&t(D,{position:"absolute",variant:"danger",className:"trade-button bottom-1 start-1",onClick:W=>T(B),children:t(bn,{className:"fa-icon"})})},V):t(Se,{},V)})}),t(P,{fullWidth:!0,className:"badge bg-muted",children:r?r.name:h("catalog_selectproduct")})]}),l(v,{size:6,overflow:"hidden",children:[l(w,{justifyContent:"between",alignItems:"center",children:[l(N,{children:[b.userName," ",h("inventory.trading.isoffering"),":"]}),L(b.accepts)]}),t(Le,{columnCount:3,children:Array.from(Array(Yl),(x,V)=>{const B=b.userItems.getWithIndex(V)||null;return B?t(Se,{itemActive:c===B,itemImage:B.iconUrl,itemCount:B.getTotalCount(),itemUniqueNumber:B.stuffData.uniqueNumber,onClick:W=>u(B)},V):t(Se,{},V)})}),t(P,{fullWidth:!0,className:"badge bg-muted w-100",children:c?c.name:h("catalog_selectproduct")})]})]}),l(w,{grow:!0,justifyContent:"between",children:[t(D,{variant:"danger",onClick:e,children:h("generic.cancel")}),_===Ot.TRADING_STATE_READY&&t(D,{variant:"secondary",disabled:!E.itemCount&&!b.itemCount,onClick:S,children:h("inventory.trading.accept")}),_===Ot.TRADING_STATE_RUNNING&&t(D,{variant:"secondary",disabled:!E.itemCount&&!b.itemCount,onClick:S,children:h(E.accepts?"inventory.trading.modify":"inventory.trading.accept")}),_===Ot.TRADING_STATE_COUNTDOWN&&t(D,{variant:"secondary",disabled:!0,children:h("inventory.trading.countdown",["counter"],[m.toString()])}),_===Ot.TRADING_STATE_CONFIRMING&&t(D,{variant:"secondary",onClick:S,children:h("inventory.trading.button.restore")}),_===Ot.TRADING_STATE_CONFIRMED&&t(D,{variant:"secondary",children:h("inventory.trading.info.waiting")})]})]})]})},$y=a=>{const{petItem:e=null,children:n=null,...s}=a,[r,o]=i.useState(!1),{selectedPet:c=null,setSelectedPet:u=null}=Yh(),{isUnseen:d}=Un(),g=d(ct.PET,e.petData.id),m=f=>{switch(f.type){case Ae.MOUSE_DOWN:u(e),o(!0);return;case Ae.MOUSE_UP:o(!1);return;case Ae.ROLL_OUT:if(!r||e!==c)return;_c(e);return;case"dblclick":_c(e);return}};return l(Se,{itemActive:e===c,itemUnseen:g,onMouseDown:m,onMouseUp:m,onMouseOut:m,onDoubleClick:m,...s,children:[t(Ss,{figure:e.petData.figureData.figuredata,direction:3,headOnly:!0}),n]})},Qy=a=>{const{roomSession:e=null,roomPreviewer:n=null}=a,[s,r]=i.useState(!1),{petItems:o=null,selectedPet:c=null,activate:u=null,deactivate:d=null}=Yh(),{isUnseen:g=null,removeUnseen:m=null}=Un();return i.useEffect(()=>{if(!c||!n)return;const f=c.petData,p=Y();let C=p.getRoomInstanceVariable(p.activeRoomId,se.ROOM_WALL_TYPE),E=p.getRoomInstanceVariable(p.activeRoomId,se.ROOM_FLOOR_TYPE),b=p.getRoomInstanceVariable(p.activeRoomId,se.ROOM_LANDSCAPE_TYPE);C=C&&C.length?C:"101",E=E&&E.length?E:"101",b=b&&b.length?b:"1.1",n.reset(!1),n.updateRoomWallsAndFloorVisibility(!0,!0),n.updateObjectRoom(E,C,b),n.addPetIntoRoom(f.figureString)},[n,c]),i.useEffect(()=>{!c||!g(ct.PET,c.petData.id)||m(ct.PET,c.petData.id)},[c,g,m]),i.useEffect(()=>{if(!s)return;const f=u();return()=>d(f)},[s,u,d]),i.useEffect(()=>(r(!0),()=>r(!1)),[]),!o||!o.length?t(cu,{title:h("inventory.empty.pets.title"),desc:h("inventory.empty.pets.desc")}):l(re,{children:[t(v,{size:7,overflow:"hidden",children:t(Le,{columnCount:5,children:o&&o.length>0&&o.map(f=>t($y,{petItem:f},f.petData.id))})}),l(v,{size:5,overflow:"auto",children:[t(v,{overflow:"hidden",position:"relative",children:t(dl,{roomPreviewer:n,height:140})}),c&&c.petData&&l(v,{grow:!0,justifyContent:"between",gap:2,children:[t(N,{grow:!0,truncate:!0,children:c.petData.name}),!!e&&t(D,{variant:"success",onClick:f=>_c(c),children:h("inventory.furni.placetoroom")})]})]})]})},vg="inventory.furni",Tg="inventory.bots",wg="inventory.furni.tab.pets",yg="inventory.badges",Md=[vg,Tg,wg,yg],Xy=[ct.FURNI,ct.BOT,ct.PET,ct.BADGE],Jy=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(Md[0]),[o,c]=i.useState(null),[u,d]=i.useState(null),{isTrading:g=!1,stopTrading:m=null}=Kh(),{getCount:f=null,resetCategory:p=null}=Un(),C=()=>{g&&m(),n(!1)};return Te(Tt.PLACED,E=>{f_()&&(pa(!1),E.placedInRoom||n(!0))}),Ye([tn.CREATED,tn.ENDED],E=>{switch(E.type){case tn.CREATED:c(E.session);return;case tn.ENDED:c(null),n(!1);return}}),F(d1,E=>{const b=E.getParser();for(const I of b.data)hh().setBadgePointLimit(I.badgeId,I.limit)}),i.useEffect(()=>{const E={linkReceived:b=>{const I=b.split("/");if(!(I.length<2))switch(I[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(_=>!_);return}},eventUrlPrefix:"inventory/"};return _t(E),()=>St(E)},[]),i.useEffect(()=>(d(new di(Y(),++di.PREVIEW_COUNTER)),()=>{d(E=>(E.dispose(),null))}),[]),i.useEffect(()=>{!e&&g&&n(!0)},[e,g]),e?l(ie,{uniqueKey:"inventory",className:"nitro-inventory",theme:g?"primary-slim":"",children:[t(ae,{headerText:h("inventory.title"),onCloseClick:C}),!g&&l(j,{children:[t(As,{children:Md.map((E,b)=>t(Mn,{isActive:s===E,onClick:I=>r(E),count:f(Xy[b]),children:h(E)},b))}),l(ne,{children:[s===vg&&t(Yy,{roomSession:o,roomPreviewer:u}),s===Tg&&t(jy,{roomSession:o,roomPreviewer:u}),s===wg&&t(Qy,{roomSession:o,roomPreviewer:u}),s===yg&&t(Hy,{})]})]}),g&&t(ne,{children:t(Ky,{cancelTrade:C})})]}):null},Zy=a=>{const{mention:e}=a,{markMentionAsRead:n,deleteMention:s}=tu(),[r,o]=i.useState(!1),c="mentionerUsername"in e?e.mentionerUsername:e.username||"Unknown",u="mentionerUserId"in e?e.mentionerUserId:-1,d="roomName"in e?e.roomName:"",g="roomId"in e?e.roomId:0,m=typeof e.timestamp=="number"?new Date(e.timestamp*1e3):e.timestamp,f=()=>{e.isRead||n(e.id)},p=()=>{s(e.id)},C=()=>{u>0&&(M(new ol(u)),o(!0))},E=()=>{g>0&&vn(g)},b=I=>{const S=new Date().getTime()-I.getTime(),T=Math.floor(S/6e4),R=Math.floor(S/36e5),y=Math.floor(S/864e5);return T<1?"just now":T<60?`${T}m ago`:R<24?`${R}h ago`:y<7?`${y}d ago`:I.toLocaleDateString()};return t(w,{className:`mention-log-item ${e.isRead?"read":"unread"}`,gap:2,alignItems:"center",children:l(w,{fullWidth:!0,column:!0,gap:1,className:"mention-content",children:[l(w,{justifyContent:"between",alignItems:"center",children:[t(P,{className:"mention-username",children:c}),t(P,{className:"mention-timestamp",children:b(m)})]}),t(P,{className:"mention-message",children:e.message}),d&&l(P,{className:"mention-room",style:{fontSize:"11px",color:"#757575",fontStyle:"italic"},children:['in "',d,'"']}),l(w,{gap:1,className:"mention-actions",alignItems:"center",style:{flexWrap:"wrap"},children:[e.isRead?t(D,{size:"sm",variant:"secondary",disabled:!0,children:"Read"}):t(D,{size:"sm",variant:"success",onClick:f,children:" Mark read"}),u>0&&t(D,{size:"sm",variant:r?"secondary":"primary",onClick:C,disabled:r,children:r?"Following":" Follow"}),g>0&&t(D,{size:"sm",variant:"info",onClick:E,children:" Go to room"}),t(D,{size:"sm",variant:"danger",onClick:p,children:""})]})]})})},eR=a=>{const[e,n]=i.useState(!1),{mentions:s,unreadCount:r,markAllMentionsAsRead:o,requestMentionsList:c}=tu(),u=s;return i.useEffect(()=>{const d={linkReceived:g=>{const m=g.split("/");if(!(m.length<2))switch(m[1]){case"show":n(!0),c(0,20);return;case"hide":n(!1);return;case"toggle":n(f=>{const p=!f;return p&&c(0,20),p});return}},eventUrlPrefix:"mention-logs/"};return _t(d),()=>St(d)},[c]),e?l(ie,{className:"nitro-mention-logs",uniqueKey:"nitro-mention-logs",theme:"primary-slim",children:[t(ae,{headerText:`Mention Logs ${r>0?`(${r})`:""}`,onCloseClick:d=>n(!1)}),l(ne,{overflow:"hidden",gap:0,className:"text-black p-0",children:[r>0&&t(w,{className:"p-2",justifyContent:"end",children:t(D,{size:"sm",variant:"primary",onClick:o,children:"Mark all as read"})}),t("div",{className:"mention-logs-list",children:u.length>0?u.map(d=>t(Zy,{mention:d},d.id)):t(w,{center:!0,className:"p-4",children:t("p",{className:"text-muted",children:"No mentions yet"})})})]})]}):null},uu=a=>{const{records:e=null}=a,{openRoomInfo:n=null}=So(),s=i.useMemo(()=>{const o=[];return e.forEach(c=>{o.push({isRoomInfo:!0,roomId:c.roomId,roomName:c.roomName}),c.chatlog.forEach(u=>{o.push({timestamp:u.timestamp,habboId:u.userId,username:u.userName,hasHighlighting:u.hasHighlighting,message:u.message,isRoomInfo:!1})})}),o},[e]),r=o=>l(w,{gap:2,alignItems:"center",justifyContent:"between",className:"bg-muted rounded p-1",children:[l(w,{gap:1,children:[t(N,{bold:!0,children:"Room name:"}),t(N,{children:o.roomName})]}),l(w,{gap:1,children:[t(D,{onClick:c=>vn(o.roomId),children:"Visit Room"}),t(D,{onClick:c=>n(o.roomId),children:"Room Tools"})]})]});return t(j,{children:l(v,{fit:!0,gap:0,overflow:"hidden",children:[t(v,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(P,{className:"g-col-2",children:"Time"}),t(P,{className:"g-col-3",children:"User"}),t(P,{className:"g-col-7",children:"Message"})]})}),e&&e.length>0&&t(hl,{rows:s,rowRender:o=>l(j,{children:[o.isRoomInfo&&t(r,{roomId:o.roomId,roomName:o.roomName}),!o.isRoomInfo&&l(re,{fullHeight:!1,gap:1,alignItems:"center",className:"log-entry py-1 border-bottom",children:[t(N,{className:"g-col-2",children:o.timestamp}),t(N,{className:"g-col-3",bold:!0,underline:!0,pointer:!0,onClick:c=>te(`mod-tools/open-user-info/${o.habboId}`),children:o.username}),t(N,{textBreak:!0,wrap:!0,className:"g-col-7",children:o.message})]})]})})]})})},tR=a=>{const{roomId:e=null,onCloseClick:n=null}=a,[s,r]=i.useState(null);return F(m1,o=>{const c=o.getParser();!c||c.data.roomId!==e||r(c.data)}),i.useEffect(()=>{M(new h1(e))},[e]),s?l(ie,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:$t.TOP_LEFT,children:[t(ae,{headerText:`Room Chatlog ${s.roomName}`,onCloseClick:n}),t(ne,{className:"text-black",overflow:"hidden",children:s&&t(uu,{records:[s]})})]}):null},nR=a=>{const{roomId:e=null,onCloseClick:n=null}=a,[s,r]=i.useState(!1),[o,c]=i.useState(null),[u,d]=i.useState(null),[g,m]=i.useState(null),[f,p]=i.useState(null),[C,E]=i.useState(!1),[b,I]=i.useState(0),[_,S]=i.useState(!1),[T,R]=i.useState(!1),[y,A]=i.useState(!1),[U,L]=i.useState(""),O=(k,x)=>{if(k)switch(k){case"alert_only":if(U.trim().length===0)return;M(new xa(xa.ACTION_ALERT,U,"")),M(new Lu(e,T?1:0,y?1:0,_?1:0));return;case"send_message":if(U.trim().length===0)return;M(new xa(xa.ACTION_MESSAGE,U,"")),M(new Lu(e,T?1:0,y?1:0,_?1:0));return}};return F(g1,k=>{const x=k.getParser();!x||x.data.flatId!==e||(c(x.data.flatId),d(x.data.room.name),m(x.data.ownerId),p(x.data.ownerName),E(x.data.ownerInRoom),I(x.data.userCount))}),i.useEffect(()=>{s||(M(new f1(e)),r(!0))},[e,s,r]),l(ie,{className:"nitro-mod-tools-room",theme:"primary-slim",windowPosition:$t.TOP_LEFT,children:[t(ae,{headerText:"Room Info"+(u?": "+u:""),onCloseClick:k=>n()}),l(ne,{className:"text-black",children:[l(w,{gap:2,children:[l(v,{justifyContent:"center",grow:!0,gap:1,children:[l(w,{alignItems:"center",gap:2,children:[t(N,{bold:!0,align:"end",className:"col-7",children:"Room Owner:"}),t(N,{underline:!0,pointer:!0,truncate:!0,children:f})]}),l(w,{alignItems:"center",gap:2,children:[t(N,{bold:!0,align:"end",className:"col-7",children:"Users in room:"}),t(N,{children:b})]}),l(w,{alignItems:"center",gap:2,children:[t(N,{bold:!0,align:"end",className:"col-7",children:"Owner in room:"}),t(N,{children:C?"Yes":"No"})]})]}),l(v,{gap:1,children:[t(D,{onClick:k=>vn(e),children:"Visit Room"}),t(D,{onClick:k=>te(`mod-tools/open-room-chatlog/${e}`),children:"Chatlog"})]})]}),l(v,{className:"bg-muted rounded p-2",gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:_,onChange:k=>S(k.target.checked)}),t(N,{small:!0,children:"Kick everyone out"})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:T,onChange:k=>R(k.target.checked)}),t(N,{small:!0,children:"Enable the doorbell"})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:y,onChange:k=>A(k.target.checked)}),t(N,{small:!0,children:"Change room name"})]})]}),t("textarea",{className:"form-control",placeholder:"Type a mandatory message to the users in this text box...",value:U,onChange:k=>L(k.target.value)}),l(w,{justifyContent:"between",children:[t(D,{variant:"danger",onClick:k=>O("send_message"),children:"Send Caution"}),t(D,{onClick:k=>O("alert_only"),children:"Send Alert only"})]})]})]})},sR=a=>{const{onCloseClick:e=null,issueId:n=null}=a,[s,r]=i.useState(null);return F(p1,o=>{const c=o.getParser();!c||c.data.issueId!==n||r(c.data)}),i.useEffect(()=>{M(new I1(n))},[n]),l(ie,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",children:[t(ae,{headerText:"Issue Chatlog",onCloseClick:e}),t(ne,{className:"text-black",children:s&&t(uu,{records:[s.chatRecord]})})]})},rR=a=>{const{issueId:e=null,onIssueInfoClosed:n=null}=a,[s,r]=i.useState(!1),{tickets:o=[],openUserInfo:c=null}=So(),u=o.find(m=>m.issueId===e),d=m=>{M(new rh([m])),n(m)},g=m=>{M(new Da([e],m)),n(e)};return l(j,{children:[l(ie,{className:"nitro-mod-tools-handle-issue",theme:"primary-slim",children:[t(ae,{headerText:"Resolving issue "+e,onCloseClick:()=>n(e)}),l(ne,{className:"text-black",children:[t(N,{fontSize:4,children:"Issue Information"}),l(re,{overflow:"auto",children:[t(v,{size:8,children:t("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:l("tbody",{children:[l("tr",{children:[t("th",{children:"Source"}),t("td",{children:$_(u.categoryId)})]}),l("tr",{children:[t("th",{children:"Category"}),t("td",{className:"text-break",children:h("help.cfh.topic."+u.reportedCategoryId)})]}),l("tr",{children:[t("th",{children:"Description"}),t("td",{className:"text-break",children:u.message})]}),l("tr",{children:[t("th",{children:"Caller"}),t("td",{children:t(N,{bold:!0,underline:!0,pointer:!0,onClick:m=>c(u.reporterUserId),children:u.reporterUserName})})]}),l("tr",{children:[t("th",{children:"Reported User"}),t("td",{children:t(N,{bold:!0,underline:!0,pointer:!0,onClick:m=>c(u.reportedUserId),children:u.reportedUserName})})]})]})})}),l(v,{size:4,gap:1,children:[t(D,{variant:"secondary",onClick:()=>r(!s),children:"Chatlog"}),t(D,{onClick:m=>g(Da.RESOLUTION_USELESS),children:"Close as useless"}),t(D,{variant:"danger",onClick:m=>g(Da.RESOLUTION_ABUSIVE),children:"Close as abusive"}),t(D,{variant:"success",onClick:m=>g(Da.RESOLUTION_RESOLVED),children:"Close as resolved"}),t(D,{variant:"secondary",onClick:m=>d(e),children:"Release"})]})]})]})]}),s&&t(sR,{issueId:e,onCloseClick:()=>r(!1)})]})},oR=a=>{const{myIssues:e=null,handleIssue:n=null}=a;return l(v,{gap:0,overflow:"hidden",children:[t(v,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(P,{className:"g-col-2",children:"Type"}),t(P,{className:"g-col-3",children:"Room/Player"}),t(P,{className:"g-col-3",children:"Opened"}),t(P,{className:"g-col-2"}),t(P,{className:"g-col-2"})]})}),t(v,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(s=>l(re,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(P,{className:"g-col-2",children:s.categoryId}),t(P,{className:"g-col-3",children:s.reportedUserName}),t(P,{className:"g-col-3",children:new Date(Date.now()-s.issueAgeInMilliseconds).toLocaleTimeString()}),t(P,{className:"g-col-2",children:t(D,{variant:"primary",onClick:r=>n(s.issueId),children:"Handle"})}),t(P,{className:"g-col-2",children:t(D,{variant:"danger",onClick:r=>M(new rh([s.issueId])),children:"Release"})})]},s.issueId))})]})},aR=a=>{const{openIssues:e=null}=a;return l(v,{gap:0,overflow:"hidden",children:[t(v,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(P,{className:"g-col-2",children:"Type"}),t(P,{className:"g-col-3",children:"Room/Player"}),t(P,{className:"g-col-4",children:"Opened"}),t(P,{className:"g-col-3"})]})}),t(v,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(n=>l(re,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(P,{className:"g-col-2",children:n.categoryId}),t(P,{className:"g-col-3",children:n.reportedUserName}),t(P,{className:"g-col-4",children:new Date(Date.now()-n.issueAgeInMilliseconds).toLocaleTimeString()}),t(P,{className:"g-col-3",children:t(D,{variant:"success",onClick:s=>M(new E1([n.issueId],!1,0,"pick issue button")),children:"Pick Issue"})})]},n.issueId))})]})},iR=a=>{const{pickedIssues:e=null}=a;return l(v,{gap:0,overflow:"hidden",children:[t(v,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(P,{className:"g-col-2",children:"Type"}),t(P,{className:"g-col-3",children:"Room/Player"}),t(P,{className:"g-col-4",children:"Opened"}),t(P,{className:"g-col-3",children:"Picker"})]})}),t(v,{overflow:"auto",className:"striped-children",gap:0,children:e&&e.length>0&&e.map(n=>l(re,{gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[t(P,{className:"g-col-2",children:n.categoryId}),t(P,{className:"g-col-3",children:n.reportedUserName}),t(P,{className:"g-col-4",children:new Date(Date.now()-n.issueAgeInMilliseconds).toLocaleTimeString()}),t(P,{className:"g-col-3",children:n.pickerUserName})]},n.issueId))})]})},lR=["Open Issues","My Issues","Picked Issues"],cR=a=>{const{onCloseClick:e=null}=a,[n,s]=i.useState(0),[r,o]=i.useState([]),{tickets:c=[]}=So(),u=c.filter(C=>C.state===Ml.STATE_OPEN),d=c.filter(C=>C.state===Ml.STATE_PICKED&&C.pickerUserId===z().userId),g=c.filter(C=>C.state===Ml.STATE_PICKED),m=C=>{o(E=>{const b=[...E],I=b.indexOf(C);return I>=0&&b.splice(I,1),b})},f=C=>{o(E=>{const b=[...E],I=b.indexOf(C);return I===-1?b.push(C):b.splice(I,1),b})},p=()=>{switch(n){case 0:return t(aR,{openIssues:u});case 1:return t(oR,{myIssues:d,handleIssue:f});case 2:return t(iR,{pickedIssues:g})}return null};return l(j,{children:[l(ie,{className:"nitro-mod-tools-tickets",children:[t(ae,{headerText:"Tickets",onCloseClick:e}),t(As,{children:lR.map((C,E)=>t(Mn,{isActive:n===E,onClick:b=>s(E),children:C},E))}),t(ne,{gap:1,children:t(p,{})})]}),r&&r.length>0&&r.map(C=>t(rR,{issueId:C,onIssueInfoClosed:m},C))]})},uR=a=>{const{userId:e=null,onCloseClick:n=null}=a,[s,r]=i.useState(null),[o,c]=i.useState(null);return F(C1,u=>{const d=u.getParser();!d||d.data.userId!==e||(c(d.data.username),r(d.data.roomChatlogs))}),i.useEffect(()=>{M(new b1(e))},[e]),l(ie,{className:"nitro-mod-tools-chatlog",theme:"primary-slim",windowPosition:$t.TOP_LEFT,children:[t(ae,{headerText:`User Chatlog: ${o||""}`,onCloseClick:n}),t(ne,{className:"text-black h-100",children:s&&t(uu,{records:s})})]})},Ld=[new We(1,"Alert",We.ALERT,1,0),new We(2,"Mute 1h",We.MUTE,2,0),new We(3,"Ban 18h",We.BAN,3,0),new We(4,"Ban 7 days",We.BAN,4,0),new We(5,"Ban 30 days (step 1)",We.BAN,5,0),new We(7,"Ban 30 days (step 2)",We.BAN,7,0),new We(6,"Ban 100 years",We.BAN,6,0),new We(106,"Ban avatar-only 100 years",We.BAN,6,0),new We(101,"Kick",We.KICK,0,0),new We(102,"Lock trade 1 week",We.TRADE_LOCK,0,168),new We(104,"Lock trade permanent",We.TRADE_LOCK,0,876e3),new We(105,"Message",We.MESSAGE,0,0)],dR=a=>{const{user:e=null,onCloseClick:n=null}=a,[s,r]=i.useState(-1),[o,c]=i.useState(-1),[u,d]=i.useState(""),{cfhCategories:g=null,settings:m=null}=So(),{simpleAlert:f=null}=Je(),p=i.useMemo(()=>{const I=[];if(g&&g.length)for(const _ of g)for(const S of _.topics)I.push(S);return I},[g]),C=I=>f(I,Ie.DEFAULT,null,null,"Error"),E=()=>{let I=null;const _=p[s];if(s===-1&&(I="You must select a CFH topic"),I)return C(I);const S=u.trim().length===0?h(`help.cfh.topic.${_.id}`):u;M(new _1(e.userId,s,S)),n()},b=()=>{let I=null;const _=p[s],S=Ld[o];if(s===-1||o===-1?I="You must select a CFH topic and Sanction":!m||!m.cfhPermission?I="You do not have permission to do this":_?S||(I="You must select a sanction"):I="You must select a CFH topic",I){C(I);return}const T=u.trim().length===0?h(`help.cfh.topic.${_.id}`):u;switch(S.actionType){case We.ALERT:{if(!m.alertPermission){C("You have insufficient permissions");return}M(new w1(e.userId,T,_.id));break}case We.MUTE:M(new T1(e.userId,T,_.id));break;case We.BAN:{if(!m.banPermission){C("You have insufficient permissions");return}M(new v1(e.userId,T,_.id,o,S.actionId===106));break}case We.KICK:{if(!m.kickPermission){C("You have insufficient permissions");return}M(new N1(e.userId,T,_.id));break}case We.TRADE_LOCK:{const R=S.actionLengthHours*60;M(new S1(e.userId,T,R,_.id));break}case We.MESSAGE:{if(u.trim().length===0){C("Please write a message to user");return}M(new oh(e.userId,u,_.id));break}}n()};return e?l(ie,{className:"nitro-mod-tools-user-action",theme:"primary-slim",windowPosition:$t.TOP_LEFT,children:[t(ae,{headerText:"Mod Action: "+(e?e.username:""),onCloseClick:()=>n()}),l(ne,{className:"text-black",children:[l("select",{className:"form-select form-select-sm",value:s,onChange:I=>r(parseInt(I.target.value)),children:[t("option",{value:-1,disabled:!0,children:"CFH Topic"}),p.map((I,_)=>t("option",{value:_,children:h("help.cfh.topic."+I.id)},_))]}),l("select",{className:"form-select form-select-sm",value:o,onChange:I=>c(parseInt(I.target.value)),children:[t("option",{value:-1,disabled:!0,children:"Sanction Type"}),Ld.map((I,_)=>t("option",{value:_,children:I.name},_))]}),l(v,{gap:1,children:[t(N,{small:!0,children:"Optional message type, overrides default"}),t("textarea",{className:"form-control",value:u,onChange:I=>d(I.target.value)})]}),l(w,{justifyContent:"between",gap:1,children:[t(D,{variant:"primary",onClick:E,children:"Default Sanction"}),t(D,{variant:"success",onClick:b,children:"Sanction"})]})]})]}):null},mR=a=>{const{userId:e=null,onCloseClick:n=null}=a,[s,r]=i.useState(null);return F(y1,o=>{const c=o.getParser();c.data.userId===e&&r(c.data)}),i.useEffect(()=>{M(new R1(e))},[e]),e?l(ie,{className:"nitro-mod-tools-user-visits",theme:"primary-slim",windowPosition:$t.TOP_LEFT,children:[t(ae,{headerText:"User Visits",onCloseClick:n}),t(ne,{className:"text-black",gap:1,children:l(v,{fullHeight:!0,gap:0,overflow:"hidden",children:[t(v,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom pb-1",children:[t(P,{className:"g-col-2",children:"Time"}),t(P,{className:"g-col-7",children:"Room name"}),t(P,{className:"g-col-3",children:"Visit"})]})}),t(hl,{rows:(s==null?void 0:s.rooms)??[],rowRender:o=>l(re,{fullHeight:!1,gap:1,alignItems:"center",className:"text-black py-1 border-bottom",children:[l(N,{className:"g-col-2",children:[o.enterHour.toString().padStart(2,"0"),": ",o.enterMinute.toString().padStart(2,"0")]}),t(N,{className:"g-col-7",children:o.roomName}),t(N,{bold:!0,underline:!0,pointer:!0,variant:"primary",className:"g-col-3",onClick:c=>vn(o.roomId),children:"Visit Room"})]})})]})})]}):null},hR=a=>{const{user:e=null,onCloseClick:n=null}=a,[s,r]=i.useState(""),{simpleAlert:o=null}=Je();if(!e)return null;const c=()=>{if(s.trim().length===0){o("Please write a message to user.",null,null,null,"Error",null);return}M(new oh(e.userId,s,-999)),n()};return l(ie,{className:"nitro-mod-tools-user-message",theme:"primary-slim",windowPosition:$t.TOP_LEFT,children:[t(ae,{headerText:"Send Message",onCloseClick:()=>n()}),l(ne,{className:"text-black",children:[l(N,{children:["Message To: ",e.username]}),t("textarea",{className:"form-control",value:s,onChange:u=>r(u.target.value)}),t(D,{fullWidth:!0,onClick:c,children:"Send message"})]})]})},gR=a=>{const{onCloseClick:e=null,userId:n=null}=a,[s,r]=i.useState(null),[o,c]=i.useState(!1),[u,d]=i.useState(!1),[g,m]=i.useState(!1),f=i.useMemo(()=>s?[{localeKey:"modtools.userinfo.userName",value:s.userName,showOnline:!0},{localeKey:"modtools.userinfo.cfhCount",value:s.cfhCount.toString()},{localeKey:"modtools.userinfo.abusiveCfhCount",value:s.abusiveCfhCount.toString()},{localeKey:"modtools.userinfo.cautionCount",value:s.cautionCount.toString()},{localeKey:"modtools.userinfo.banCount",value:s.banCount.toString()},{localeKey:"modtools.userinfo.lastSanctionTime",value:s.lastSanctionTime},{localeKey:"modtools.userinfo.tradingLockCount",value:s.tradingLockCount.toString()},{localeKey:"modtools.userinfo.tradingExpiryDate",value:s.tradingExpiryDate},{localeKey:"modtools.userinfo.minutesSinceLastLogin",value:ls.format(s.minutesSinceLastLogin*60,".ago",2)},{localeKey:"modtools.userinfo.lastPurchaseDate",value:s.lastPurchaseDate},{localeKey:"modtools.userinfo.primaryEmailAddress",value:s.primaryEmailAddress},{localeKey:"modtools.userinfo.identityRelatedBanCount",value:s.identityRelatedBanCount.toString()},{localeKey:"modtools.userinfo.registrationAgeInMinutes",value:ls.format(s.registrationAgeInMinutes*60,".ago",2)},{localeKey:"modtools.userinfo.userClassification",value:s.userClassification}]:null,[s]);return F(O1,p=>{const C=p.getParser();!C||C.data.userId!==n||r(C.data)}),i.useEffect(()=>{M(new k1(n))},[n]),s?l(j,{children:[l(ie,{className:"nitro-mod-tools-user",theme:"primary-slim",windowPosition:$t.TOP_LEFT,children:[t(ae,{headerText:h("modtools.userinfo.title",["username"],[s.userName]),onCloseClick:()=>e()}),t(ne,{className:"text-black",children:l(re,{overflow:"hidden",children:[t(v,{size:8,overflow:"auto",children:t("table",{className:"table table-striped table-sm table-text-small text-black m-0",children:t("tbody",{children:f.map((p,C)=>l("tr",{children:[t("th",{scope:"row",children:h(p.localeKey)}),l("td",{children:[p.value,p.showOnline&&t("i",{className:`icon icon-pf-${s.online?"online":"offline"} ms-2`})]})]},C))})})}),l(v,{size:4,gap:1,children:[t(D,{onClick:p=>te(`mod-tools/open-user-chatlog/${n}`),children:"Room Chat"}),t(D,{onClick:p=>c(!o),children:"Send Message"}),t(D,{onClick:p=>m(!g),children:"Room Visits"}),t(D,{onClick:p=>d(!u),children:"Mod Action"})]})]})})]}),o&&t(hR,{user:{userId:n,username:s.userName},onCloseClick:()=>c(!1)}),u&&t(dR,{user:{userId:n,username:s.userName},onCloseClick:()=>d(!1)}),g&&t(mR,{userId:n,onCloseClick:()=>m(!1)})]}):null},fR=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(-1),[o,c]=i.useState(null),[u,d]=i.useState(!1),{openRooms:g=[],openRoomChatlogs:m=[],openUserChatlogs:f=[],openUserInfos:p=[],openRoomInfo:C=null,closeRoomInfo:E=null,toggleRoomInfo:b=null,openRoomChatlog:I=null,closeRoomChatlog:_=null,toggleRoomChatlog:S=null,openUserInfo:T=null,closeUserInfo:R=null,toggleUserInfo:y=null,openUserChatlog:A=null,closeUserChatlog:U=null,toggleUserChatlog:L=null}=So(),O=i.useRef(null);return Te([xn.INITIALIZED,xn.DISPOSED],k=>{if(!Tr.isRoomPreviewerId(k.roomId))switch(k.type){case xn.INITIALIZED:r(k.roomId);return;case xn.DISPOSED:r(-1);return}}),nu(k=>{if(k.category!==Z.UNIT)return;const x=Oe();if(!x)return;const V=x.userDataManager.getUserDataByIndex(k.id);!V||V.type!==bt.USER||c({userId:V.webID,username:V.name})}),i.useEffect(()=>{const k={linkReceived:x=>{const V=x.split("/");if(!(V.length<2))switch(V[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(B=>!B);return;case"open-room-info":C(Number(V[2]));return;case"close-room-info":E(Number(V[2]));return;case"toggle-room-info":b(Number(V[2]));return;case"open-room-chatlog":I(Number(V[2]));return;case"close-room-chatlog":_(Number(V[2]));return;case"toggle-room-chatlog":S(Number(V[2]));return;case"open-user-info":T(Number(V[2]));return;case"close-user-info":R(Number(V[2]));return;case"toggle-user-info":y(Number(V[2]));return;case"open-user-chatlog":A(Number(V[2]));return;case"close-user-chatlog":U(Number(V[2]));return;case"toggle-user-chatlog":L(Number(V[2]));return}},eventUrlPrefix:"mod-tools/"};return _t(k),()=>St(k)},[C,E,b,I,_,S,T,R,y,A,U,L]),l(j,{children:[e&&l(ie,{uniqueKey:"mod-tools",className:"nitro-mod-tools",windowPosition:$t.TOP_LEFT,theme:"primary-slim",children:[t(ae,{headerText:"Mod Tools",onCloseClick:k=>n(!1)}),l(ne,{className:"text-black",gap:1,children:[l(D,{gap:1,onClick:k=>te(`mod-tools/toggle-room-info/${s}`),disabled:s<=0,className:"position-relative",children:[t(P,{className:"icon icon-small-room position-absolute start-1"})," Room Tool"]}),l(D,{innerRef:O,gap:1,onClick:k=>te(`mod-tools/toggle-room-chatlog/${s}`),disabled:s<=0,className:"position-relative",children:[t(P,{className:"icon icon-chat-history position-absolute start-1"})," Chatlog Tool"]}),l(D,{gap:1,onClick:()=>te(`mod-tools/toggle-user-info/${o.userId}`),disabled:!o,className:"position-relative",children:[t(P,{className:"icon icon-user position-absolute start-1"})," User: ",o?o.username:""]}),l(D,{gap:1,onClick:()=>d(k=>!k),className:"position-relative",children:[t(P,{className:"icon icon-tickets position-absolute start-1"})," Report Tool"]})]})]}),g.length>0&&g.map(k=>t(nR,{roomId:k,onCloseClick:()=>te(`mod-tools/close-room-info/${k}`)},k)),m.length>0&&m.map(k=>t(tR,{roomId:k,onCloseClick:()=>te(`mod-tools/close-room-chatlog/${k}`)},k)),p.length>0&&p.map(k=>t(gR,{userId:k,onCloseClick:()=>te(`mod-tools/close-user-info/${k}`)},k)),f.length>0&&f.map(k=>t(uR,{userId:k,onCloseClick:()=>te(`mod-tools/close-user-chatlog/${k}`)},k)),u&&t(cR,{onCloseClick:()=>d(!1)})]})},pR=[qe.START_DOORBELL,qe.STATE_WAITING,qe.STATE_NO_ANSWER,qe.START_PASSWORD,qe.STATE_WRONG_PASSWORD],IR=[qe.START_DOORBELL,qe.STATE_WAITING,qe.STATE_NO_ANSWER],ER=a=>{const[e,n]=i.useState(""),{doorData:s=null,setDoorData:r=null}=Jn(),o=()=>{s&&s.state===qe.STATE_WAITING&&Cc(),r(null)},c=()=>{!s||!s.roomInfo||(wr(s.roomInfo.roomId),r(g=>{const m={...g};return m.state=qe.STATE_PENDING_SERVER,m}))},u=()=>{!s||!s.roomInfo||(wr(s.roomInfo.roomId,e),r(g=>{const m={...g};return m.state=qe.STATE_PENDING_SERVER,m}))};if(i.useEffect(()=>{!s||s.state!==qe.STATE_NO_ANSWER||Cc()},[s]),!s||s.state===qe.NONE||pR.indexOf(s.state)===-1)return null;const d=IR.indexOf(s.state)>=0;return l(ie,{className:"nitro-navigator-doorbell",theme:"primary-slim",children:[t(ae,{headerText:h(d?"navigator.doorbell.title":"navigator.password.title"),onCloseClick:o}),l(ne,{children:[l(v,{gap:1,children:[t(N,{bold:!0,children:s&&s.roomInfo&&s.roomInfo.roomName}),s.state===qe.START_DOORBELL&&t(N,{children:h("navigator.doorbell.info")}),s.state===qe.STATE_WAITING&&t(N,{children:h("navigator.doorbell.waiting")}),s.state===qe.STATE_NO_ANSWER&&t(N,{children:h("navigator.doorbell.no.answer")}),s.state===qe.START_PASSWORD&&t(N,{children:h("navigator.password.info")}),s.state===qe.STATE_WRONG_PASSWORD&&t(N,{children:h("navigator.password.retryinfo")})]}),d&&l(v,{gap:1,children:[s.state===qe.START_DOORBELL&&t(D,{variant:"success",onClick:c,children:h("navigator.doorbell.button.ring")}),t(D,{variant:"danger",onClick:o,children:h("generic.cancel")})]}),!d&&l(j,{children:[l(v,{gap:1,children:[t(N,{children:h("navigator.password.enter")}),t("input",{type:"password",className:"form-control form-control-sm",onChange:g=>n(g.target.value)})]}),l(v,{gap:1,children:[t(D,{variant:"success",onClick:u,children:h("navigator.password.button.try")}),t(D,{variant:"danger",onClick:o,children:h("generic.cancel")})]})]})]})]})},CR=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(null),[o,c]=i.useState(null),[u,d]=i.useState(null),[g,m]=i.useState(null),[f,p]=i.useState(0),[C,E]=i.useState([]),[b,I]=i.useState(""),{categories:_=null}=Jn(),S=X("hc.disabled",!1),T=A=>X("images.url")+`/navigator/models/model_${A}.png`,R=(A,U)=>{!A||A.clubLevel>Dn()||I(C[U].name)},y=()=>{M(new A1(s,o,"model_"+b,Number(u),Number(g),f))};return i.useEffect(()=>{if(!e){const A=[];for(let U=10;U<=100;U=U+10)A.push(U);n(A),m(A[0])}},[e]),i.useEffect(()=>{_&&_.length&&d(_[0].id)},[_]),i.useEffect(()=>{const A=X("navigator.room.models");A&&A.length&&(E(A),I(A[0].name))},[]),l(v,{overflow:"hidden",children:[l(re,{overflow:"hidden",children:[l(v,{size:6,gap:1,overflow:"auto",children:[l(v,{gap:1,children:[t(N,{children:h("navigator.createroom.roomnameinfo")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:60,onChange:A=>r(A.target.value),placeholder:h("navigator.createroom.roomnameinfo")})]}),l(v,{grow:!0,gap:1,children:[t(N,{children:h("navigator.createroom.roomdescinfo")}),t("textarea",{className:"flex-grow-1 form-control form-control-sm w-100",maxLength:255,onChange:A=>c(A.target.value),placeholder:h("navigator.createroom.roomdescinfo")})]}),l(v,{gap:1,children:[t(N,{children:h("navigator.category")}),t("select",{className:"form-select form-select-sm",onChange:A=>d(Number(A.target.value)),children:_&&_.length>0&&_.map(A=>t("option",{value:A.id,children:h(A.name)},A.id))})]}),l(v,{gap:1,children:[t(N,{children:h("navigator.maxvisitors")}),t("select",{className:"form-select form-select-sm",onChange:A=>m(Number(A.target.value)),children:e&&e.map(A=>t("option",{value:A,children:A},A))})]}),l(v,{gap:1,children:[t(N,{children:h("navigator.tradesettings")}),l("select",{className:"form-select form-select-sm",onChange:A=>p(Number(A.target.value)),children:[t("option",{value:"0",children:h("navigator.roomsettings.trade_not_allowed")}),t("option",{value:"1",children:h("navigator.roomsettings.trade_not_with_Controller")}),t("option",{value:"2",children:h("navigator.roomsettings.trade_allowed")})]})]})]}),t(v,{size:6,gap:1,overflow:"auto",children:C.map((A,U)=>l(Se,{fullHeight:!0,onClick:()=>R(A,U),itemActive:b===A.name,overflow:"unset",gap:0,className:"p-1",disabled:Dn()<A.clubLevel,children:[t(w,{fullHeight:!0,center:!0,overflow:"hidden",children:t("img",{alt:"",src:T(A.name)})}),l(N,{bold:!0,children:[A.tileSize," ",h("navigator.createroom.tilesize")]}),!S&&A.clubLevel>Nn.NO_CLUB&&t(mt,{position:"absolute",className:"top-1 end-1",type:"hc"})]},A.name))})]}),t(D,{fullWidth:!0,variant:!s||s.length<3?"danger":"success",onClick:y,disabled:!s||s.length<3,children:h("navigator.createroom.create")})]})},bR=a=>{const{onCloseClick:e=null}=a,[n,s]=i.useState(!1),[r,o]=i.useState(!1),{report:c=null}=Xn(),{navigatorData:u=null}=Jn(),d=m=>{switch(m){case"settings":return z().userId===u.enteredGuestRoom.ownerId||z().isModerator;case"staff_pick":return z().securityLevel>=mi.COMMUNITY;default:return!1}},g=(m,f)=>{if(!(!u||!u.enteredGuestRoom))switch(m){case"set_home_room":let p=-1;u.homeRoomId!==u.enteredGuestRoom.roomId&&(p=u.enteredGuestRoom.roomId),p>0&&M(new M1(p));return;case"navigator_search_tag":te(`navigator/search/${f}`),M(new fo("hotel_view",`tag:${f}`));return;case"open_room_thumbnail_camera":nt(new Cs(Cs.TOGGLE_THUMBNAIL));return;case"open_group_info":Ia(u.enteredGuestRoom.habboGroupId);return;case"toggle_room_link":te("navigator/toggle-room-link");return;case"open_room_settings":M(new Qm(u.enteredGuestRoom.roomId));return;case"toggle_pick":s(C=>!C),M(new P1(u.enteredGuestRoom.roomId));return;case"toggle_mute":o(C=>!C),M(new D1);return;case"room_filter":M(new x1(u.enteredGuestRoom.roomId));return;case"open_floorplan_editor":te("floor-editor/toggle");return;case"report_room":c(lt.ROOM,{roomId:u.enteredGuestRoom.roomId,roomName:u.enteredGuestRoom.roomName});return;case"close":e();return}};return i.useEffect(()=>{u&&(s(u.currentRoomIsStaffPick),u.enteredGuestRoom&&o(u.enteredGuestRoom.allInRoomMuted))},[u]),u.enteredGuestRoom?l(ie,{className:"nitro-room-info",theme:"primary-slim",children:[t(ae,{headerText:h("navigator.roomsettings.roominfo"),onCloseClick:()=>g("close")}),t(ne,{className:"text-black",children:u.enteredGuestRoom&&l(j,{children:[l(w,{gap:2,overflow:"hidden",children:[t(ml,{roomId:u.enteredGuestRoom.roomId,customUrl:u.enteredGuestRoom.officialRoomPicRef,children:d("settings")&&t("i",{className:"icon icon-camera-small position-absolute b-0 r-0 m-1 cursor-pointer top-0",onClick:()=>g("open_room_thumbnail_camera")})}),l(v,{grow:!0,gap:1,overflow:"hidden",children:[l(w,{gap:1,children:[l(v,{grow:!0,gap:1,children:[l(w,{gap:1,children:[t("i",{onClick:()=>g("set_home_room"),className:zt("flex-shrink-0 icon icon-house-small cursor-pointer",u.homeRoomId!==u.enteredGuestRoom.roomId&&"gray")}),t(N,{bold:!0,children:u.enteredGuestRoom.roomName})]}),u.enteredGuestRoom.showOwner&&l(w,{alignItems:"center",gap:1,children:[t(N,{variant:"muted",children:h("navigator.roomownercaption")}),l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:u.enteredGuestRoom.ownerId}),t(N,{children:u.enteredGuestRoom.ownerName})]})]}),l(w,{alignItems:"center",gap:1,children:[t(N,{variant:"muted",children:h("navigator.roomrating")}),t(N,{children:u.currentRoomRating})]}),u.enteredGuestRoom.tags.length>0&&t(w,{alignItems:"center",gap:1,children:u.enteredGuestRoom.tags.map(m=>l(N,{pointer:!0,className:"bg-muted rounded p-1",onClick:f=>g("navigator_search_tag",m),children:["#",m]},m))})]}),l(v,{alignItems:"center",gap:1,children:[d("settings")&&t("i",{className:"icon icon-cog cursor-pointer",title:h("navigator.room.popup.info.room.settings"),onClick:m=>g("open_room_settings")}),t(qg,{title:h("navigator.embed.caption"),className:"cursor-pointer fa-icon",onClick:m=>te("navigator/toggle-room-link")})]})]}),t(N,{overflow:"auto",style:{maxHeight:50},children:u.enteredGuestRoom.description}),u.enteredGuestRoom.habboGroupId>0&&l(w,{pointer:!0,alignItems:"center",gap:1,onClick:()=>g("open_group_info"),children:[t(ze,{className:"flex-none",badgeCode:u.enteredGuestRoom.groupBadgeCode,isGroup:!0}),t(N,{underline:!0,children:h("navigator.guildbase",["groupName"],[u.enteredGuestRoom.groupName])})]})]})]}),l(v,{gap:1,children:[d("staff_pick")&&t(D,{onClick:()=>g("toggle_pick"),children:h(n?"navigator.staffpicks.unpick":"navigator.staffpicks.pick")}),t(D,{variant:"danger",onClick:()=>g("report_room"),children:h("help.emergency.main.report.room")}),d("settings")&&l(j,{children:[t(D,{onClick:()=>g("toggle_mute"),children:h(r?"navigator.muteall_on":"navigator.muteall_off")}),t(D,{onClick:()=>g("room_filter"),children:h("navigator.roomsettings.roomfilter")}),t(D,{onClick:()=>g("open_floorplan_editor"),children:h("open.floor.plan.editor")})]})]})]})})]}):null},_R=a=>{const{onCloseClick:e=null}=a,{navigatorData:n=null}=Jn();return n.enteredGuestRoom?l(ie,{className:"nitro-room-link",theme:"primary-slim",children:[t(ae,{headerText:h("navigator.embed.title"),onCloseClick:e}),t(ne,{className:"text-black d-flex align-items-center",children:l(w,{gap:2,children:[t(ml,{roomId:n.enteredGuestRoom.roomId,customUrl:n.enteredGuestRoom.officialRoomPicRef}),l(v,{children:[t(N,{bold:!0,fontSize:5,children:h("navigator.embed.headline")}),t(N,{children:h("navigator.embed.info")}),t("input",{type:"text",readOnly:!0,className:"form-control form-control-sm",value:h("navigator.embed.src",["roomId"],[n.enteredGuestRoom.roomId.toString()]).replace("${url.prefix}",X("url.prefix",""))})]})]})})]}):null},SR=a=>{const{roomData:e=null,handleChange:n=null}=a,[s,r]=i.useState(""),[o,c]=i.useState(""),[u,d]=i.useState(!1),g=()=>{!u||s.length<=0||o.length<=0||s!==o||n("password",s)};return i.useEffect(()=>{r(""),c(""),d(!1)},[e]),l(j,{children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.roomaccess.caption")}),t(N,{children:h("navigator.roomsettings.roomaccess.info")})]}),l(v,{overflow:"auto",children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.doormode")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===it.OPEN_STATE&&!u,onChange:m=>n("lock_state",it.OPEN_STATE)}),t(N,{children:h("navigator.roomsettings.doormode.open")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===it.DOORBELL_STATE&&!u,onChange:m=>n("lock_state",it.DOORBELL_STATE)}),t(N,{children:h("navigator.roomsettings.doormode.doorbell")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===it.INVISIBLE_STATE&&!u,onChange:m=>n("lock_state",it.INVISIBLE_STATE)}),t(N,{children:h("navigator.roomsettings.doormode.invisible")})]}),l(w,{fullWidth:!0,gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"lockState",checked:e.lockState===it.PASSWORD_STATE||u,onChange:m=>d(m.target.checked)}),!u&&e.lockState!==it.PASSWORD_STATE&&t(N,{children:h("navigator.roomsettings.doormode.password")}),(u||e.lockState===it.PASSWORD_STATE)&&l(v,{gap:1,children:[t(N,{children:h("navigator.roomsettings.doormode.password")}),t("input",{type:"password",className:"form-control form-control-sm col-4",value:s,onChange:m=>r(m.target.value),placeholder:h("navigator.roomsettings.password"),onFocus:m=>d(!0)}),u&&s.length<=0&&t(N,{bold:!0,small:!0,variant:"danger",children:h("navigator.roomsettings.passwordismandatory")}),t("input",{type:"password",className:"form-control form-control-sm col-4",value:o,onChange:m=>c(m.target.value),onBlur:g,placeholder:h("navigator.roomsettings.passwordconfirm")}),u&&s.length>0&&s!==o&&t(N,{bold:!0,small:!0,variant:"danger",children:h("navigator.roomsettings.invalidconfirm")})]})]})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.pets")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.allowPets,onChange:m=>n("allow_pets",m.target.checked)}),t(N,{children:h("navigator.roomsettings.allowpets")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.allowPetsEat,onChange:m=>n("allow_pets_eat",m.target.checked)}),t(N,{children:h("navigator.roomsettings.allowfoodconsume")})]})]})]})]})},Ud=3,Fd=60,Vd=255,Xa=15,NR=a=>{const{roomData:e=null,handleChange:n=null,onClose:s=null}=a,[r,o]=i.useState(""),[c,u]=i.useState(""),[d,g]=i.useState(""),[m,f]=i.useState(""),[p,C]=i.useState(0),[E,b]=i.useState(""),{showConfirm:I=null}=Je(),{categories:_=null}=Jn();F(L1,A=>{const U=A.getParser();if(U)switch(U.code){case Uu.ERROR_INVALID_TAG:b("navigator.roomsettings.unacceptablewords");case Uu.ERROR_NON_USER_CHOOSABLE_TAG:b("navigator.roomsettings.nonuserchoosabletag");break;default:b("");break}});const S=()=>{I(h("navigator.roomsettings.deleteroom.confirm.message",["room_name"],[e.roomName]),()=>{M(new U1(e.roomId)),s&&s(),te("navigator/search/myworld_view")},null,null,null,h("navigator.roomsettings.deleteroom.confirm.title"))},T=()=>{r===e.roomName||r.length<Ud||r.length>Fd||n("name",r)},R=()=>{c===e.roomDescription||c.length>Vd||n("description",c)},y=A=>{A===0&&d===e.tags[0]||d.length>Xa||A===1&&m===e.tags[1]||m.length>Xa||(d===""&&m!==""&&f(""),b(""),C(A),n("tags",d===""&&m!==""?[m]:[d,m]))};return i.useEffect(()=>{o(e.roomName),u(e.roomDescription),g(e.tags.length>0&&e.tags[0]?e.tags[0]:""),f(e.tags.length>0&&e.tags[1]?e.tags[1]:"")},[e]),l(j,{children:[l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("navigator.roomname")}),l(v,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:r,maxLength:Fd,onChange:A=>o(A.target.value),onBlur:T}),r.length<Ud&&t(N,{bold:!0,small:!0,variant:"danger",children:h("navigator.roomsettings.roomnameismandatory")})]})]}),l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("navigator.roomsettings.desc")}),t("textarea",{className:"form-control form-control-sm",value:c,maxLength:Vd,onChange:A=>u(A.target.value),onBlur:R})]}),l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("navigator.category")}),t("select",{className:"form-select form-select-sm",value:e.categoryId,onChange:A=>n("category",A.target.value),children:_&&_.map(A=>t("option",{value:A.id,children:h(A.name)},A.id))})]}),l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("navigator.maxvisitors")}),t("select",{className:"form-select form-select-sm",value:e.userCount,onChange:A=>n("max_visitors",A.target.value),children:ld&&ld.map(A=>t("option",{value:A,children:A},A))})]}),l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("navigator.tradesettings")}),l("select",{className:"form-select form-select-sm",value:e.tradeState,onChange:A=>n("trade_state",A.target.value),children:[t("option",{value:"0",children:h("navigator.roomsettings.trade_not_allowed")}),t("option",{value:"1",children:h("navigator.roomsettings.trade_not_with_Controller")}),t("option",{value:"2",children:h("navigator.roomsettings.trade_allowed")})]})]}),l(w,{alignItems:"center",gap:1,children:[t(N,{className:"col-3",children:h("navigator.tags")}),l(v,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:d,onChange:A=>g(A.target.value),onBlur:()=>y(0)}),d.length>Xa&&t(N,{bold:!0,small:!0,variant:"danger",children:h("navigator.roomsettings.toomanycharacters")}),p===0&&E!=""&&t(N,{bold:!0,small:!0,variant:"danger",children:h(E)})]}),l(v,{fullWidth:!0,gap:0,children:[t("input",{className:"form-control form-control-sm",value:m,onChange:A=>f(A.target.value),onBlur:()=>y(1)}),m.length>Xa&&t(N,{bold:!0,small:!0,variant:"danger",children:h("navigator.roomsettings.toomanycharacters")}),p===1&&E!=""&&t(N,{bold:!0,small:!0,variant:"danger",children:h(E)})]})]}),l(w,{alignItems:"center",gap:1,children:[t(P,{className:"col-3"}),t("input",{className:"form-check-input",type:"checkbox",checked:e.allowWalkthrough,onChange:A=>n("allow_walkthrough",A.target.checked)}),t(N,{children:h("navigator.roomsettings.allow_walk_through")})]}),l(N,{variant:"danger",underline:!0,bold:!0,pointer:!0,className:"d-flex justify-content-center align-items-center gap-1",onClick:S,children:[t(Ln,{className:"fa-icon"}),h("navigator.roomsettings.delete")]})]})},vR=a=>{var d;const{roomData:e=null,handleChange:n=null}=a,[s,r]=i.useState(-1),[o,c]=i.useState([]),u=g=>{c(m=>{const f=[...m],p=f.findIndex(C=>C.userId===g);return p>=0&&f.splice(p,1),f}),M(new V1(g,e.roomId)),r(-1)};return F(F1,g=>{const m=g.getParser();!e||e.roomId!==m.roomId||c(m.bannedUsers)}),i.useEffect(()=>{M(new ah(e.roomId))},[e.roomId]),l(re,{overflow:"auto",children:[l(v,{size:6,children:[l(N,{bold:!0,children:[h("navigator.roomsettings.moderation.banned.users")," (",o.length,")"]}),t(w,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:t(v,{fullWidth:!0,overflow:"auto",gap:1,children:o&&o.length>0&&o.map((g,m)=>l(w,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[t(Pn,{userName:g.userName}),l(N,{pointer:!0,grow:!0,onClick:f=>r(g.userId),children:[" ",g.userName]})]},m))})}),l(D,{disabled:s<=0,onClick:g=>u(s),children:[h("navigator.roomsettings.moderation.unban")," ",s>0&&((d=o.find(g=>g.userId===s))==null?void 0:d.userName)]})]}),l(v,{size:6,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.moderation.mute.header")}),t(w,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowMute,onChange:g=>n("moderation_mute",g.target.value),children:[t("option",{value:os.MODERATION_LEVEL_NONE,children:h("navigator.roomsettings.moderation.none")}),t("option",{value:os.MODERATION_LEVEL_USER_WITH_RIGHTS,children:h("navigator.roomsettings.moderation.rights")})]})})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.moderation.kick.header")}),t(w,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowKick,onChange:g=>n("moderation_kick",g.target.value),children:[t("option",{value:os.MODERATION_LEVEL_NONE,children:h("navigator.roomsettings.moderation.none")}),t("option",{value:os.MODERATION_LEVEL_USER_WITH_RIGHTS,children:h("navigator.roomsettings.moderation.rights")}),t("option",{value:os.MODERATION_LEVEL_ALL,children:h("navigator.roomsettings.moderation.all")})]})})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.moderation.ban.header")}),t(w,{alignItems:"center",gap:1,children:l("select",{className:"form-select form-select-sm",value:e.moderationSettings.allowBan,onChange:g=>n("moderation_ban",g.target.value),children:[t("option",{value:os.MODERATION_LEVEL_NONE,children:h("navigator.roomsettings.moderation.none")}),t("option",{value:os.MODERATION_LEVEL_USER_WITH_RIGHTS,children:h("navigator.roomsettings.moderation.rights")})]})})]})]})]})},TR=a=>{const{roomData:e=null}=a,[n,s]=i.useState(new Map);return F(B1,r=>{const o=r.getParser();!e||e.roomId!==o.roomId||s(o.users)}),F(G1,r=>{const o=r.getParser();!e||e.roomId!==o.roomId||s(c=>{const u=new Map(c);return u.set(o.data.userId,o.data.userName),u})}),F(H1,r=>{const o=r.getParser();!e||e.roomId!==o.roomId||s(c=>{const u=new Map(c);return u.delete(o.userId),u})}),i.useEffect(()=>{M(new W1(e.roomId))},[e.roomId]),l(re,{children:[l(v,{size:6,children:[t(N,{bold:!0,children:h("navigator.flatctrls.userswithrights",["displayed","total"],[n.size.toString(),n.size.toString()])}),t(w,{overflow:"hidden",className:"bg-white rounded list-container p-2",children:t(v,{fullWidth:!0,overflow:"auto",gap:1,children:Array.from(n.entries()).map(([r,o],c)=>l(w,{shrink:!0,alignItems:"center",gap:1,overflow:"hidden",children:[t(Pn,{userName:o}),l(N,{pointer:!0,grow:!0,onClick:u=>M(new j1(r)),children:[" ",o]})]},c))})})]}),t(v,{size:6,justifyContent:"end",children:t(D,{variant:"danger",disabled:!n.size,onClick:r=>M(new q1(e.roomId)),children:h("navigator.flatctrls.clear")})})]})},wR=a=>{const{roomData:e=null,handleChange:n=null}=a,[s,r]=i.useState(0);return i.useEffect(()=>{r(e.chatSettings.distance)},[e.chatSettings]),l(j,{children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.vip.caption")}),t(N,{children:h("navigator.roomsettings.vip.info")})]}),l(re,{overflow:"auto",children:[l(v,{size:6,gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.chat_settings")}),t(N,{children:h("navigator.roomsettings.chat_settings.info")}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.mode,onChange:o=>n("bubble_mode",o.target.value),children:[t("option",{value:wt.CHAT_MODE_FREE_FLOW,children:h("navigator.roomsettings.chat.mode.free.flow")}),t("option",{value:wt.CHAT_MODE_LINE_BY_LINE,children:h("navigator.roomsettings.chat.mode.line.by.line")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.weight,onChange:o=>n("chat_weight",o.target.value),children:[t("option",{value:wt.CHAT_BUBBLE_WIDTH_NORMAL,children:h("navigator.roomsettings.chat.bubbles.width.normal")}),t("option",{value:wt.CHAT_BUBBLE_WIDTH_THIN,children:h("navigator.roomsettings.chat.bubbles.width.thin")}),t("option",{value:wt.CHAT_BUBBLE_WIDTH_WIDE,children:h("navigator.roomsettings.chat.bubbles.width.wide")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.speed,onChange:o=>n("bubble_speed",o.target.value),children:[t("option",{value:wt.CHAT_SCROLL_SPEED_FAST,children:h("navigator.roomsettings.chat.speed.fast")}),t("option",{value:wt.CHAT_SCROLL_SPEED_NORMAL,children:h("navigator.roomsettings.chat.speed.normal")}),t("option",{value:wt.CHAT_SCROLL_SPEED_SLOW,children:h("navigator.roomsettings.chat.speed.slow")})]}),l("select",{className:"form-select form-select-sm",value:e.chatSettings.protection,onChange:o=>n("flood_protection",o.target.value),children:[t("option",{value:wt.FLOOD_FILTER_LOOSE,children:h("navigator.roomsettings.chat.flood.loose")}),t("option",{value:wt.FLOOD_FILTER_NORMAL,children:h("navigator.roomsettings.chat.flood.normal")}),t("option",{value:wt.FLOOD_FILTER_STRICT,children:h("navigator.roomsettings.chat.flood.strict")})]}),t(N,{children:h("navigator.roomsettings.chat_settings.hearing.distance")}),t("input",{type:"number",min:"0",className:"form-control form-control-sm",value:s,onChange:o=>r(o.target.valueAsNumber),onBlur:o=>n("chat_distance",s)})]}),l(v,{size:6,gap:1,children:[t(N,{bold:!0,children:h("navigator.roomsettings.vip_settings")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:e.hideWalls,onChange:o=>n("hide_walls",o.target.checked)}),t(N,{children:h("navigator.roomsettings.hide_walls")})]}),l("select",{className:"form-select form-select-sm",value:e.wallThickness,onChange:o=>n("wall_thickness",o.target.value),children:[t("option",{value:"0",children:h("navigator.roomsettings.wall_thickness.normal")}),t("option",{value:"1",children:h("navigator.roomsettings.wall_thickness.thick")}),t("option",{value:"-1",children:h("navigator.roomsettings.wall_thickness.thin")}),t("option",{value:"-2",children:h("navigator.roomsettings.wall_thickness.thinnest")})]}),l("select",{className:"form-select form-select-sm",value:e.floorThickness,onChange:o=>n("floor_thickness",o.target.value),children:[t("option",{value:"0",children:h("navigator.roomsettings.floor_thickness.normal")}),t("option",{value:"1",children:h("navigator.roomsettings.floor_thickness.thick")}),t("option",{value:"-1",children:h("navigator.roomsettings.floor_thickness.thin")}),t("option",{value:"-2",children:h("navigator.roomsettings.floor_thickness.thinnest")})]})]})]})]})},Zs=["navigator.roomsettings.tab.1","navigator.roomsettings.tab.2","navigator.roomsettings.tab.3","navigator.roomsettings.tab.4","navigator.roomsettings.tab.5"],yR=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(Zs[0]);F(z1,u=>{const d=u.getParser();if(!d)return;const g=d.data;n({roomId:g.roomId,roomName:g.name,roomDescription:g.description,categoryId:g.categoryId,userCount:g.maximumVisitorsLimit,tags:g.tags,tradeState:g.tradeMode,allowWalkthrough:g.allowWalkThrough,lockState:g.doorMode,password:null,allowPets:g.allowPets,allowPetsEat:g.allowFoodConsume,hideWalls:g.hideWalls,wallThickness:g.wallThickness,floorThickness:g.floorThickness,chatSettings:{mode:g.chatSettings.mode,weight:g.chatSettings.weight,speed:g.chatSettings.speed,distance:g.chatSettings.distance,protection:g.chatSettings.protection},moderationSettings:{allowMute:g.roomModerationSettings.allowMute,allowKick:g.roomModerationSettings.allowKick,allowBan:g.roomModerationSettings.allowBan}}),M(new ah(g.roomId))});const o=()=>{n(null),r(Zs[0])},c=(u,d)=>{n(g=>{const m={...g};switch(u){case"name":m.roomName=String(d);break;case"description":m.roomDescription=String(d);break;case"category":m.categoryId=Number(d);break;case"max_visitors":m.userCount=Number(d);break;case"trade_state":m.tradeState=Number(d);break;case"tags":m.tags=d;break;case"allow_walkthrough":m.allowWalkthrough=!!d;break;case"allow_pets":m.allowPets=!!d;break;case"allow_pets_eat":m.allowPetsEat=!!d;break;case"hide_walls":m.hideWalls=!!d;break;case"wall_thickness":m.wallThickness=Number(d);break;case"floor_thickness":m.floorThickness=Number(d);break;case"lock_state":m.lockState=Number(d);break;case"password":m.lockState=it.PASSWORD_STATE,m.password=String(d);break;case"moderation_mute":m.moderationSettings.allowMute=Number(d);break;case"moderation_kick":m.moderationSettings.allowKick=Number(d);break;case"moderation_ban":m.moderationSettings.allowBan=Number(d);break;case"bubble_mode":m.chatSettings.mode=Number(d);break;case"chat_weight":m.chatSettings.weight=Number(d);break;case"bubble_speed":m.chatSettings.speed=Number(d);break;case"flood_protection":m.chatSettings.protection=Number(d);break;case"chat_distance":m.chatSettings.distance=Number(d);break}return M(new Y1(m.roomId,m.roomName,m.roomDescription,m.lockState,m.password,m.userCount,m.categoryId,m.tags.length,m.tags,m.tradeState,m.allowPets,m.allowPetsEat,m.allowWalkthrough,m.hideWalls,m.wallThickness,m.floorThickness,m.moderationSettings.allowMute,m.moderationSettings.allowKick,m.moderationSettings.allowBan,m.chatSettings.mode,m.chatSettings.weight,m.chatSettings.speed,m.chatSettings.distance,m.chatSettings.protection)),m})};return e?l(ie,{uniqueKey:"nitro-room-settings",className:"nitro-room-settings",children:[t(ae,{headerText:h("navigator.roomsettings"),onCloseClick:o}),t(As,{children:Zs.map(u=>t(Mn,{isActive:s===u,onClick:d=>r(u),children:h(u)},u))}),l(ne,{children:[s===Zs[0]&&t(NR,{roomData:e,handleChange:c,onClose:o}),s===Zs[1]&&t(SR,{roomData:e,handleChange:c}),s===Zs[2]&&t(TR,{roomData:e,handleChange:c}),s===Zs[3]&&t(wR,{roomData:e,handleChange:c}),s===Zs[4]&&t(vR,{roomData:e,handleChange:c})]})]}):null},Bd=a=>{const{roomData:e=null}=a,[n,s]=i.useState(!1),r=i.useRef(),o=()=>{const c=100*(e.userCount/e.maxUserCount);let u="bg-primary";return c>=92?u="bg-danger":c>=50?u="bg-warning":c>0&&(u="bg-success"),u};return l(j,{children:[t(P,{pointer:!0,innerRef:r,className:"icon icon-navigator-info",onMouseOver:c=>s(!0),onMouseLeave:c=>s(!1)}),t(Mc,{show:n,target:r.current,placement:"right",children:t(Ko,{children:t(ne,{overflow:"hidden",className:"room-info image-rendering-pixelated bg-transparent",children:l(w,{gap:2,overflow:"hidden",children:[l(ml,{roomId:e.roomId,customUrl:e.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[e.habboGroupId>0&&t(ze,{badgeCode:e.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1 "}),e.doorMode!==it.OPEN_STATE&&t("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(e.doorMode===it.DOORBELL_STATE?"locked":e.doorMode===it.PASSWORD_STATE?"password":e.doorMode===it.INVISIBLE_STATE?"invisible":"")})]}),l(v,{gap:1,children:[t(N,{bold:!0,truncate:!0,className:"flex-grow-1",style:{maxHeight:13},children:e.roomName}),l(w,{gap:2,children:[t(N,{italics:!0,variant:"muted",children:h("navigator.roomownercaption")}),l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:e.ownerId}),t(N,{italics:!0,children:e.ownerName})]})]}),t(N,{className:"flex-grow-1",children:e.description}),l(w,{className:"badge p-1 position-absolute m-1 bottom-0 end-0 m-2 "+o(),gap:1,children:[t(dc,{className:"fa-icon"}),e.userCount]})]})]})})})})]})},Gd=a=>{const{roomData:e=null,children:n=null,thumbnail:s=!1,...r}=a,{setDoorData:o=null}=Jn(),c=()=>{const d=100*(e.userCount/e.maxUserCount);let g="bg-primary";return d>=92?g="bg-danger":d>=50?g="bg-warning":d>0&&(g="bg-success"),g},u=d=>{if(e.ownerId!==z().userId){if(e.habboGroupId!==0){vn(e.roomId);return}switch(e.doorMode){case it.DOORBELL_STATE:o(g=>{const m={...g};return m.roomInfo=e,m.state=qe.START_DOORBELL,m});return;case it.PASSWORD_STATE:o(g=>{const m={...g};return m.roomInfo=e,m.state=qe.START_PASSWORD,m});return}}wr(e.roomId)};return s?l(v,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:u,gap:0,className:"navigator-item p-1 bg-light rounded-3 small mb-1 flex-column border border-muted",...r,children:[l(ml,{roomId:e.roomId,customUrl:e.officialRoomPicRef,className:"d-flex flex-column align-items-center justify-content-end mb-1",children:[e.habboGroupId>0&&t(ze,{badgeCode:e.groupBadgeCode,isGroup:!0,className:"position-absolute top-0 start-0 m-1"}),l(w,{center:!0,className:"badge p-1 position-absolute m-1 "+c(),gap:1,children:[t(dc,{className:"fa-icon"}),e.userCount]}),e.doorMode!==it.OPEN_STATE&&t("i",{className:"position-absolute end-0 mb-1 me-1 icon icon-navigator-room-"+(e.doorMode===it.DOORBELL_STATE?"locked":e.doorMode===it.PASSWORD_STATE?"password":e.doorMode===it.INVISIBLE_STATE?"invisible":"")})]}),l(w,{className:"w-100",children:[t(N,{truncate:!0,className:"flex-grow-1",children:e.roomName}),t(w,{reverse:!0,alignItems:"center",gap:1,children:t(Bd,{roomData:e})}),n]})]}):l(w,{pointer:!0,overflow:"hidden",alignItems:"center",onClick:u,gap:2,className:"navigator-item px-2 py-1 small",...r,children:[l(w,{center:!0,className:"badge p-1 "+c(),gap:1,children:[t(dc,{className:"fa-icon"}),e.userCount]}),t(N,{truncate:!0,grow:!0,children:e.roomName}),l(w,{reverse:!0,alignItems:"center",gap:1,children:[t(Bd,{roomData:e}),e.habboGroupId>0&&t("i",{className:"icon icon-navigator-room-group"}),e.doorMode!==it.OPEN_STATE&&t("i",{className:"icon icon-navigator-room-"+(e.doorMode===it.DOORBELL_STATE?"locked":e.doorMode===it.PASSWORD_STATE?"password":e.doorMode===it.INVISIBLE_STATE?"invisible":"")})]}),n]})},RR=a=>{const{searchResult:e=null,...n}=a,[s,r]=i.useState(!0),[o,c]=i.useState(0),{topLevelContext:u=null}=Jn(),d=()=>{let p=e.code;return!p||!p.length||h("navigator.searchcode.title."+p)=="navigator.searchcode.title."+p?e.data:p.startsWith("${")?p.slice(2,p.length-1):"navigator.searchcode.title."+p},g=()=>{c(p=>p===er.LIST?er.THUMBNAILS:er.LIST)},m=()=>{e.action==1?M(new fo(e.code,"")):e.action==2&&u&&M(new fo(u.code,""))};i.useEffect(()=>{e&&(r(!e.closed),c(e.mode))},[e]);const f=o>=er.THUMBNAILS;return l(v,{className:"bg-white rounded border border-muted",gap:0,children:[l(w,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:"px-2 py-1",children:[l(w,{grow:!0,pointer:!0,alignItems:"center",gap:1,onClick:p=>r(C=>!C),children:[s&&t(zg,{className:"text-secondary fa-icon"}),!s&&t(da,{className:"text-secondary fa-icon"}),t(N,{children:h(d())})]}),l(w,{gap:2,children:[o===er.LIST&&t(Yg,{className:"text-secondary fa-icon",onClick:g}),o>=er.THUMBNAILS&&t(Kg,{className:"text-secondary fa-icon",onClick:g}),e.action>0&&e.action===1&&t($g,{className:"text-secondary fa-icon",onClick:m}),e.action>0&&e.action!==1&&t(Qg,{className:"text-secondary fa-icon",onClick:m})]})]})," ",s&&t(j,{children:f?t(Le,{columnCount:3,...n,columnMinWidth:110,columnMinHeight:130,className:"mx-2",children:e.rooms.length>0&&e.rooms.map((p,C)=>t(Gd,{roomData:p,thumbnail:!0},C))}):t(re,{columnCount:1,className:"navigator-grid",gap:0,children:e.rooms.length>0&&e.rooms.map((p,C)=>t(Gd,{roomData:p},C))})})]})},OR=a=>{const{sendSearch:e=null}=a,[n,s]=i.useState(0),[r,o]=i.useState(""),{topLevelContext:c=null,searchResult:u=null}=Jn(),d=()=>{if(!c)return;let m=Gr[n];m||(m=Gr[0]);const f=(m.query?m.query+":":"")+r;e(f||"",c.code)},g=m=>{m.key==="Enter"&&d()};return i.useEffect(()=>{if(!u)return;const m=u.data.split(":");let f=null,p="";if(m.length>=2){const[C,...E]=m;f=Gr.find(b=>b.query===C),p=E.join(":")}else p=u.data;f||(f=Gr[0]),s(Gr.findIndex(C=>C===f)),o(p)},[u]),l(w,{fullWidth:!0,gap:1,children:[t(w,{shrink:!0,children:t("select",{className:"form-select form-select-sm",value:n,onChange:m=>s(parseInt(m.target.value)),children:Gr.map((m,f)=>t("option",{value:f,children:h("navigator.filter."+m.name)},f))})}),l(w,{fullWidth:!0,gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:h("navigator.filter.input.placeholder"),value:r,onChange:m=>o(m.target.value),onKeyDown:m=>g(m)}),t(D,{variant:"primary",onClick:d,children:t(Pc,{className:"fa-icon"})})]})]})},kR=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(!1),[o,c]=i.useState(!1),[u,d]=i.useState(!1),[g,m]=i.useState(!1),[f,p]=i.useState(!1),[C,E]=i.useState(!0),[b,I]=i.useState(!1),{searchResult:_=null,topLevelContext:S=null,topLevelContexts:T=null,navigatorData:R=null}=Jn(),y=i.useRef(null),A=i.useRef();Ye(tn.CREATED,O=>{n(!1),c(!1)});const U=i.useCallback((O,k)=>{c(!1),M(new fo(k,O)),p(!0)},[]),L=i.useCallback(()=>{if(!s){I(!0);return}if(y.current){U(y.current.value,y.current.code),y.current=null;return}if(_){U(_.data,_.code);return}S&&U("",S.code)},[s,_,S,U]);return i.useEffect(()=>{const O={linkReceived:k=>{const x=k.split("/");if(!(x.length<2))switch(x[1]){case"show":{n(!0),I(!0);return}case"hide":n(!1);return;case"toggle":{if(e){n(!1);return}n(!0),I(!0);return}case"toggle-room-info":d(V=>!V);return;case"toggle-room-link":m(V=>!V);return;case"goto":if(x.length<=2)return;switch(x[2]){case"home":if(R.homeRoomId<=0)return;vn(R.homeRoomId);break;default:{const V=parseInt(x[2]);vn(V)}}return;case"create":n(!0),c(!0);return;case"search":if(x.length>2){const V=x[2];let B="";x.length>3&&(B=x[3]),y.current={value:B,code:V},n(!0),I(!0)}return}},eventUrlPrefix:"navigator/"};return _t(O),()=>St(O)},[e,R]),i.useEffect(()=>{_&&(p(!1),A&&A.current&&(A.current.scrollTop=0))},[_]),i.useEffect(()=>{!e||!s||!b||(L(),I(!1))},[e,s,b,L]),i.useEffect(()=>{s||!S||r(!0)},[s,S]),i.useEffect(()=>{!e||!C||(M(new K1),E(!1))},[e,C]),i.useEffect(()=>{Jo.addCallback(ma.OPENROOM,(O,k=!1,x=null)=>M(new $1(O)))},[]),l(j,{children:[e&&l(ie,{uniqueKey:"navigator",className:"nitro-navigator",children:[t(ae,{headerText:h(o?"navigator.createroom.title":"navigator.title"),onCloseClick:O=>n(!1)}),l(As,{children:[T&&T.length>0&&T.map((O,k)=>t(Mn,{isActive:S===O&&!o,onClick:x=>U("",O.code),children:h("navigator.toplevelview."+O.code)},k)),t(Mn,{isActive:o,onClick:O=>c(!0),children:t(da,{className:"fa-icon"})})]}),l(ne,{position:"relative",children:[f&&t(P,{fit:!0,position:"absolute",className:"top-0 start-0 z-index-1 bg-muted opacity-0-5"}),!o&&l(j,{children:[t(OR,{sendSearch:U}),t(v,{innerRef:A,overflow:"auto",children:_&&_.results.map((O,k)=>t(RR,{searchResult:O},k))})]}),o&&t(CR,{})]})]}),t(ER,{}),u&&t(bR,{onCloseClick:()=>d(!1)}),g&&t(_R,{onCloseClick:()=>m(!1)}),t(yR,{})]})},AR=/\n\r|\n|\r/mg,xR=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(""),[o,c]=i.useState(null),u=i.useRef(null);return i.useEffect(()=>{const d=async m=>{try{const f=await fetch(m);if(!f)return;const C=(await f.text()).split(AR),E=C.shift().split("|");r(E[0]),c(b=>E[1]&&E[1].split(";").length===2?{width:parseInt(E[1].split(";")[0]),height:parseInt(E[1].split(";")[1])}:null),n(C.join(""))}catch{Mm.error(`Failed to fetch ${m}`)}},g={linkReceived:m=>{const f=m.split("/");f.length<2||(f.shift(),d(X("habbopages.url")+f.join("/")))},eventUrlPrefix:"habbopages/"};return _t(g),()=>St(g)},[]),i.useEffect(()=>{const d=g=>{if(!(g.target instanceof HTMLAnchorElement))return;g.preventDefault();const m=g.target.href;!m||!m.length||_o(m)};return document.addEventListener("click",d),()=>{document.removeEventListener("click",d)}},[]),e?l(ie,{className:"nitropedia",theme:"primary-slim",style:o?{width:o.width,height:o.height}:{},children:[t(ae,{headerText:s,onCloseClick:()=>n(null)}),t(ne,{children:t(P,{fit:!0,innerRef:u,className:"text-black",dangerouslySetInnerHTML:{__html:e}})})]}):null};const DR=()=>{const[a,e]=i.useState(!1),[n,s]=i.useState(!1),[r,o]=i.useState(50),[c,u]=i.useState({x:0,y:0}),[d,g]=i.useState(!1),[m,f]=i.useState({x:0,y:0}),p=i.useRef(null),C=()=>e(!a),E=()=>s(!n),b=()=>o(R=>Math.min(100,R+10)),I=()=>o(R=>Math.max(0,R-10)),_=i.useCallback(R=>{const y=R.target;if(y.closest(".resize-btn")){if(R.preventDefault(),!p.current)return;const A=p.current.getBoundingClientRect(),U=A.left;g(!0),f({x:R.clientX-U,y:R.clientY-A.top});return}if(!(y.closest("button")||y.closest("a")||y.closest(".control-btn")||y.closest(".action-btn")||y.closest(".open"))&&(y.closest(".handle")||y.closest(".player_min")||y.closest(".player"))){if(R.preventDefault(),!p.current)return;const A=p.current.getBoundingClientRect(),U=A.left;g(!0),f({x:R.clientX-U,y:R.clientY-A.top})}},[]),S=i.useCallback(R=>{if(!d||!p.current)return;R.preventDefault();const y=p.current.offsetWidth,A=R.clientX-m.x,U=window.innerWidth-y,L=Math.max(0,Math.min(A,U));u({x:L,y:0})},[d,m]),T=i.useCallback(()=>{g(!1)},[]);return i.useEffect(()=>{if(d)return document.addEventListener("mousemove",S),document.addEventListener("mouseup",T),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",T)}},[d,S,T]),a?t("div",{id:"area_player",children:t("div",{id:"player",ref:p,className:"draggable",onMouseDown:_,style:{left:c.x===0?"50%":`${c.x}px`,transform:c.x===0?"translateX(-50%)":"none"},children:l("div",{className:"player_min",children:[t("div",{className:"guy"}),t("div",{className:"txt",children:"Rdio Habzon"}),t("div",{className:"handle"}),t("div",{className:"open o-c tip",onClick:C,title:"Expandir"})]})})}):t("div",{id:"area_player",children:t("div",{id:"player",ref:p,className:"draggable",onMouseDown:_,style:{left:c.x===0?"50%":`${c.x}px`,transform:c.x===0?"translateX(-50%)":"none"},children:l("div",{className:"player",children:[t("div",{className:"player-left",children:l("div",{className:"controls-grid",children:[t("div",{className:"control-btn volume-up",title:"Aumentar Volume",onClick:b,children:t("i",{className:"fas fa-plus"})}),t("div",{className:"control-btn volume-down",title:"Diminuir Volume",onClick:I,children:t("i",{className:"fas fa-minus"})}),l(P,{className:"control-btn pause-btn",onClick:E,children:[n?t("i",{className:"fas fa-play"}):t("i",{className:"fas fa-pause"}),t("div",{className:"live-dot"})]}),t("a",{href:"https://radiohabb.com.br/pedidos/pedidos.php",onClick:R=>{R.preventDefault(),window.open("https://radiohabb.com.br/pedidos/pedidos.php","targetWindow","toolbar=no, location=no, status=no, menubar=no, scrollbars=yes, resizable=no, width=249, height=248")},children:t("div",{className:"control-btn envelope",title:"Pedidos",children:t("i",{className:"fas fa-envelope"})})})]})}),l("div",{className:"player-right",children:[t("div",{className:"close-btn",onClick:C,title:"Fechar"}),l("div",{className:"info-section",children:[l("div",{className:"info-item locutor",children:[t("div",{className:"info-icon beret"}),t("span",{children:"Habzon Music"})]}),l("div",{className:"info-item room",children:[t("div",{className:"info-icon popcorn"}),t("span",{children:"Misc"})]}),l("div",{className:"info-item listeners",children:[t("div",{className:"info-icon people"}),t("span",{children:"1 Ouvintes"})]}),l("div",{className:"info-item music",children:[t("div",{className:"info-icon music-note"}),t("span",{children:"Music Letra ..."})]})]}),l("div",{className:"action-buttons",children:[t("a",{href:"https://twitter.com/",target:"_blank",rel:"noopener noreferrer",className:"action-btn twitter-btn",title:"Twitter"}),t("a",{href:"https://radiohabb.com.br/",target:"_blank",rel:"noopener noreferrer",className:"action-btn habb-btn",title:"Site"}),t("div",{className:"action-btn settings-btn",title:"Configuraes"}),t("div",{className:"action-btn resize-btn",title:"Redimensionar"})]})]})]})})})},PR=a=>{const{offer:e=null,setOpen:n=null}=a;if(e)return l(Jc,{fadesOut:!1,onClose:null,onClick:s=>n(!0),gap:2,children:[t(P,{className:"nitro-targeted-offer-icon",style:{backgroundImage:`url(${X("image.library.url")+e.iconImageUrl})`}}),t(N,{variant:"light",className:"ubuntu-bold",children:e.title})]})},MR=a=>{const{offer:e=null,setOpen:n=null}=a,{getCurrencyAmount:s}=Ur(),[r,o]=i.useState(1),c=i.useMemo(()=>{let g=!1,m=!1,f=!1;return e.priceInCredits>0&&(g=s(-1)>=e.priceInCredits),e.priceInActivityPoints>0?m=s(e.activityPointType)>=e.priceInActivityPoints:m=!0,e.purchaseLimit>0&&(f=!0),g&&m&&f},[e,s]),u=()=>{let g=Math.max(0,(e.expirationTime-Date.now())/1e3);return ls.format(g)},d=()=>{M(new Q1(e.id,r)),M(new ih)};if(e)return l(ie,{theme:"primary-slim",uniqueKey:"targeted-offer",className:"nitro-targeted-offer",children:[t(ae,{headerText:h(e.title),onCloseClick:g=>n(!1)}),t(Uh,{position:"relative",className:"justify-content-center align-items-center cursor-pointer",variant:"danger",gap:3,children:h("targeted.offer.timeleft",["timeleft"],[u()])}),l(ne,{gap:1,children:[l(w,{gap:1,fullHeight:!0,children:[l(w,{gap:1,column:!0,className:"w-75 text-black",children:[l(v,{className:"bg-warning p-2",fullHeight:!0,children:[t("h4",{children:h(e.title)}),t(P,{dangerouslySetInnerHTML:{__html:e.description}})]}),l(w,{alignSelf:"center",alignItems:"center",justifyContent:"center",gap:2,children:[e.purchaseLimit>1&&l(w,{gap:1,children:[t(N,{variant:"muted",children:h("catalog.bundlewidget.quantity")}),t("input",{type:"number",value:r,onChange:g=>o(parseInt(g.target.value)),min:1,max:e.purchaseLimit})]}),t(D,{variant:"primary",disabled:!c,onClick:()=>d(),children:h("targeted.offer.button.buy")})]})]}),t(P,{className:"w-50",fullHeight:!0,style:{background:`url(${X("image.library.url")+e.imageUrl}) no-repeat center`}})]}),l(w,{className:"price-ray position-absolute",alignItems:"center",justifyContent:"center",column:!0,children:[t(N,{children:h("targeted.offer.price.label")}),e.priceInCredits>0&&l(w,{gap:1,children:[t(N,{variant:"light",children:e.priceInCredits}),t(mt,{type:-1})]}),e.priceInActivityPoints>0&&l(w,{gap:1,children:[l(N,{className:"ubuntu-bold",variant:"light",children:["+",e.priceInActivityPoints]})," ",t(mt,{type:e.activityPointType})]})]})]})]})},LR=()=>{const[a,e]=i.useState(null),[n,s]=i.useState(!1);if(F(X1,r=>{let o=r.getParser();o&&e(o.data)}),og(()=>{M(new ih)}),!!a)return t(j,{children:n?t(MR,{offer:a,setOpen:s}):t(PR,{offer:a,setOpen:s})})},UR=a=>{const[e,n]=i.useState(0),[s,r]=i.useState(null),[o,c]=i.useState(!0),{showConfirm:u=null}=Je();F(lh,p=>{n(0),r(null)}),F(qm,p=>{n(0),r(null)}),F(bo,p=>{const C=p.getParser();C.roomEnter&&(C.data.habboGroupId>0?(n(C.data.habboGroupId),M(new Xo(C.data.habboGroupId,!1))):(n(0),r(null)))}),F(J1,p=>{const C=p.getParser();!s||C.groupId!==s.id&&C.groupId!==e||(n(0),r(null))}),F(ga,p=>{const C=p.getParser();C.id===e&&r(C)});const d=()=>{u(h("group.leaveconfirm.desc"),()=>{M(new Bc(s.id,z().userId))},null)},g=s&&s.ownerName===z().userName,m=()=>{if(g)return"group.manage";if(s.type===An.PRIVATE)return"";if(s.membershipType===Lt.MEMBER)return"group.leave";if(s.membershipType===Lt.NOT_MEMBER&&s.type===An.REGULAR)return"group.join";if(s.membershipType===Lt.REQUEST_PENDING)return"group.membershippending";if(s.membershipType===Lt.NOT_MEMBER&&s.type===An.EXCLUSIVE)return"group.requestmembership"},f=()=>{if(g)return yh(s.id);if(!(s.type===An.PRIVATE&&s.membershipType===Lt.NOT_MEMBER)){if(s.membershipType===Lt.MEMBER){d();return}Kc(s.id)}};return s?t(P,{className:"nitro-notification-bubble rounded",children:l(v,{children:[l(w,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:p=>c(C=>!C),children:[t(N,{variant:"white",children:h("group.homeroominfo.title")}),o&&t(Lc,{className:"fa-icon"}),!o&&t(Uc,{className:"fa-icon"})]}),o&&l(j,{children:[l(w,{pointer:!0,alignItems:"center",gap:2,onClick:p=>Ia(s.id),children:[t(P,{className:"group-badge",children:t(ze,{badgeCode:s.badge,isGroup:!0})}),t(N,{variant:"white",children:s.title})]}),(s.type!==An.PRIVATE||g)&&t(D,{fullWidth:!0,variant:"success",disabled:s.membershipType===Lt.REQUEST_PENDING,onClick:f,children:h(m())})]})]})}):null},FR=a=>{const{title:e="Nitro",onClose:n=null,...s}=a;return t(ul,{title:e,onClose:n,...s,children:l(re,{children:[t(v,{center:!0,size:5,children:t("object",{data:"https://assets.nitrodev.co/logos/nitro-n-dark.svg",width:"100",height:"100",children:""})}),l(v,{size:7,children:[l(v,{alignItems:"center",gap:0,children:[t(N,{bold:!0,fontSize:4,children:"Nitro React"}),l(N,{children:["v",wh()]})]}),l(v,{alignItems:"center",children:[l(N,{children:[t("b",{children:"Renderer:"})," v",M_()]}),l(v,{fullWidth:!0,gap:1,children:[t(D,{fullWidth:!0,variant:"success",onClick:r=>window.open("https://discord.nitrodev.co"),children:"Discord"}),l(w,{gap:1,children:[t(D,{fullWidth:!0,onClick:r=>window.open("https://git.krews.org/nitro/nitro-react"),children:"Git"}),t(D,{fullWidth:!0,onClick:r=>window.open("https://git.krews.org/nitro/nitro-react/-/issues"),children:"Bug Report"})]})]})]})]})]})})},VR=a=>{const{item:e=null,title:n=a.item&&a.item.title||"",onClose:s=null,...r}=a,[o,c]=i.useState(!1),u=()=>{_o(e.clickUrl),s()},d=e.alertType===Ie.DEFAULT;return l(ul,{title:n,onClose:s,...r,type:d?Ie.DEFAULT:e.alertType,children:[l(w,{fullHeight:!0,overflow:"auto",gap:d||e.imageUrl&&!o?2:0,children:[d&&!e.imageUrl&&t(P,{className:"notification-frank flex-shrink-0"}),e.imageUrl&&!o&&t("img",{src:e.imageUrl,alt:e.title,onError:()=>{c(!0)},className:"align-self-baseline"}),l(P,{classNames:["notification-text overflow-y-auto d-flex flex-column w-100",e.clickUrl&&!d?"justify-content-center":""],children:[e.messages.length>0&&e.messages.map((g,m)=>{const f=g.replace(/\r\n|\r|\n/g,"<br />");return t(P,{dangerouslySetInnerHTML:{__html:f}},m)}),e.clickUrl&&e.clickUrl.length>0&&e.imageUrl&&!o&&l(j,{children:[t("hr",{className:"my-2 w-100"}),t(D,{onClick:u,className:"align-self-center px-3",children:h(e.clickUrlText)})]})]})]}),(!e.imageUrl||e.imageUrl&&o)&&t(j,{children:l(v,{alignItems:"center",center:!0,gap:0,children:[t("hr",{className:"my-2 w-100"}),!e.clickUrl&&t(D,{onClick:s,children:h("generic.close")}),e.clickUrl&&e.clickUrl.length>0&&t(D,{onClick:u,children:h(e.clickUrlText)})]})})]})},BR=a=>{const{item:e=null,title:n=a.item&&a.item.title||"",onClose:s=null,...r}=a,[o,c]=i.useState(""),[u,d]=i.useState([]),g=()=>{_o(e.clickUrl),s()},m=p=>{let C=JSON.parse(e.messages[0]);d(C.filter(E=>E.includes(p))),c(p)};i.useEffect(()=>{d(JSON.parse(e.messages[0]))},[e]);const f=e.clickUrl&&e.clickUrl.startsWith("event:");return l(ul,{title:n,onClose:s,...r,children:[t(w,{fullWidth:!0,alignItems:"center",position:"relative",children:t("input",{type:"text",className:"form-control form-control-sm",placeholder:h("generic.search"),value:o,onChange:p=>m(p.target.value)})}),t(v,{fullHeight:!0,className:"py-1",overflow:"hidden",children:t(Le,{gap:1,columnCount:1,children:u&&u.map((p,C)=>t("span",{children:p},C))})}),t("hr",{className:"my-2"}),l(v,{alignItems:"center",center:!0,gap:1,children:[!f&&!e.clickUrl&&t(D,{onClick:s,children:h("generic.close")}),e.clickUrl&&e.clickUrl.length>0&&t(D,{onClick:g,children:h(e.clickUrlText)})]})]})},GR=(a,e)=>{if(!a)return null;const n={key:a.id,item:a,onClose:e};switch(a.alertType){case Ie.NITRO:return t(FR,{...n});case Ie.SEARCH:return t(BR,{...n});default:return t(VR,{...n})}},HR=a=>{const{item:e=null,onClose:n=null,...s}=a;return l(Jc,{fadesOut:!1,className:"flex-column club-gift",onClose:n,...s,children:[l("div",{className:"d-flex align-items-center gap-2 mb-2",children:[t(mt,{type:"hc",className:"flex-shrink-0"}),t("span",{className:"ms-1",children:h("notifications.text.club_gift")})]}),l("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[t("button",{type:"button",className:"btn btn-success w-100 btn-sm",onClick:()=>_o(e.linkUrl),children:h("notifications.button.show_gift_list")}),t("span",{className:"text-decoration-underline cursor-pointer text-nowrap",onClick:n,children:h("notifications.button.later")})]})]})},WR=a=>{const{item:e=null,onClose:n=null,...s}=a,r=e.message.replace(/\r\n|\r|\n/g,"<br />");return l(Jc,{onClose:n,gap:2,alignItems:"center",onClick:c=>{if(console.log(" [DEBUG] Notification clicked!",{linkUrl:e.linkUrl}),!e.linkUrl||!e.linkUrl.length){console.warn(" [DEBUG] No linkUrl found");return}if(e.linkUrl.startsWith("follow:")){const u=e.linkUrl.replace("follow:","");console.log(" [DEBUG] Following user:",u),Oe()?(M(new Z1(`:follow ${u}`,0)),console.log(" [DEBUG] Follow command sent!")):console.error(" [DEBUG] No room session found"),n()}else console.log(" [DEBUG] Opening URL:",e.linkUrl),_o(e.linkUrl)},...s,children:[t(w,{center:!0,className:"bubble-image-container",children:e.iconUrl&&e.iconUrl.length&&t("img",{className:"no-select",src:e.iconUrl,alt:""})}),t(N,{wrap:!0,variant:"white",dangerouslySetInnerHTML:{__html:r}})]})},jR=(a,e)=>{if(!a)return null;const n={key:a.id,item:a,onClose:e};switch(a.notificationType){case Ct.CLUBGIFT:return t(HR,{...n});default:return t(WR,{...n})}},qR=a=>{const{item:e=null,onClose:n=null,...s}=a,{message:r=null,onConfirm:o=null,onCancel:c=null,confirmText:u=null,cancelText:d=null,title:g=null}=e,m=()=>{o&&o(),n()},f=()=>{c&&c(),n()};return l(ul,{title:g,onClose:n,...s,type:Ie.ALERT,children:[t(w,{grow:!0,center:!0,children:t(N,{children:r})}),l(w,{gap:1,children:[t(D,{fullWidth:!0,variant:"danger",onClick:f,children:d}),t(D,{fullWidth:!0,onClick:m,children:u})]})]})},zR=(a,e)=>{if(!a)return null;const n={key:a.id,item:a,onClose:e};switch(a.confirmType){default:return t(qR,{...n})}},YR=a=>{const{alerts:e=[],bubbleAlerts:n=[],confirms:s=[],closeAlert:r=null,closeBubbleAlert:o=null,closeConfirm:c=null}=Je(),u=i.useMemo(()=>{if(!e||!e.length)return null;const m=[];for(const f of e){const p=GR(f,()=>r(f));m.push(p)}return m},[e,r]),d=i.useMemo(()=>{if(!n||!n.length)return null;const m=[];for(const f of n){if(f.notificationType===Ct.CLUBGIFT)continue;const p=jR(f,()=>o(f));m.push(p)}return m},[n,o]),g=i.useMemo(()=>{if(!s||!s.length)return null;const m=[];for(const f of s){const p=zR(f,()=>c(f));m.push(p)}return m},[s,c]);return l(j,{children:[t(v,{gap:1,children:d}),g,u]})},Kl=a=>{const{type:e=-1,amount:n=-1,short:s=!1}=a,r=i.useMemo(()=>s?c_(n):Ii(n),[n,s]),o=i.useMemo(()=>{const u=(p,C=null)=>{if(!p)return null;try{const E=h(p,C);if(E&&E.length>0&&E!==p)return E}catch{return null}return null},d=e.toString(),g=[];d==="-1"?g.push({key:"purse.creditbalance"},{key:"purse.currency.credits"}):g.push({key:`purse.currency.type.${d}`},{key:`purse.activitypoints.${d}`},{key:`purse.seasonal.currency.${d}`});for(const{key:p,params:C=null}of g){const E=u(p,C);if(E)return E}const m=u("purse.currency.type.default",[d]);if(m)return m;const f={"-1":"Credits",0:"Duckets",5:"Diamonds",conchas:"Shells"};return f[d]?f[d]:`Currency ${d}`},[e]),c=i.useMemo(()=>{const u=e.toString(),d=u==="-1"?"credits":`type-${u}`;return l(w,{fullWidth:!0,alignItems:"center",justifyContent:"between",className:zt("nitro-purse-row rounded",d,`currency--${u}`),children:[t(N,{truncate:!0,variant:"white",className:"nitro-purse-row-label",children:o}),l(w,{alignItems:"center",className:"nitro-purse-row-value",children:[t(N,{variant:"white",className:"nitro-purse-row-amount",children:r}),t("div",{className:"nitro-purse-icon-box",children:t(mt,{type:e})})]})]})},[r,o,e]);return s?t(km,{placement:"left",overlay:t(Xg,{id:`tooltip-${e}`,children:Ii(n)}),children:c}):c},KR=a=>{const{type:e=-1,amount:n=-1}=a;return l(w,{fullWidth:!0,justifyContent:"between",className:"nitro-purse-seasonal-currency p-2 rounded",children:[t(N,{variant:"white",children:h(`purse.seasonal.currency.${e}`)}),l(w,{gap:1,children:[t(N,{variant:"white",children:Ii(n)}),t(mt,{type:e})]})]})},$R=a=>{const{purse:e=null,hcDisabled:n=!1}=Ur(),s=i.useMemo(()=>X("system.currency.types",[]),[]),r=i.useMemo(()=>X("currency.display.number.short",!1),[]);(()=>{if(!e)return null;const c=e.clubPeriods*31+e.clubDays,u=e.minutesUntilExpiration;return e.clubLevel===Nn.NO_CLUB?h("purse.clubdays.zero.amount.text"):u>-1&&u<60*24?ls.shortFormat(u*60):ls.shortFormat(c*86400)})();const o=(c,u=-1,d=!1)=>{if(!e||!e.activityPoints||!e.activityPoints.size)return null;const g=Array.from(e.activityPoints.keys()).filter(p=>s.indexOf(p)>=0);let m=0;for(;m<c;)g.shift(),m++;m=0;const f=[];for(const p of g){if(u>-1&&m===u)break;d?f.push(t(KR,{type:p,amount:e.activityPoints.get(p)},p)):f.push(t(Kl,{type:p,amount:e.activityPoints.get(p),short:r},p)),m++}return f};return e?l(v,{alignItems:"end",className:"nitro-purse-container",gap:1,children:[l(v,{fullWidth:!0,gap:0,className:"nitro-purse-box",children:[t(Kl,{type:-1,amount:e.credits,short:r}),o(0,2),t(Kl,{type:"conchas",amount:0,short:r})]}),t(w,{fullWidth:!0,alignItems:"stretch",gap:1,className:"nitro-purse-controls",children:l(w,{justifyContent:"end",className:"nitro-purse-actions",children:[l(w,{center:!0,pointer:!0,className:"nitro-purse-button nitro-purse-shop-button",onClick:c=>te("catalog/toggle"),children:[t("i",{className:"fas fa-shopping-bag fa-icon",style:{marginRight:"6px"}}),"SHOP"]}),t(w,{center:!0,pointer:!0,className:"nitro-purse-button",onClick:c=>te("help/show"),children:t("i",{className:"icon icon-help"})}),t(w,{center:!0,pointer:!0,className:"nitro-purse-button",onClick:c=>te("user-settings/toggle"),children:t("i",{className:"icon icon-cog"})}),t(w,{center:!0,pointer:!0,className:"nitro-purse-button",onClick:c=>te("purse/edit"),children:t("i",{className:"icon pencil-icon"})})]})}),o(2,-1,!0)]}):null},QR={purple:9452386,blue:3891856,green:6459451,yellow:10658089,lilac:6897548,orange:10841125,turquoise:2661026,red:10104881},XR=a=>{const[e,n]=i.useState(!0),[s,r]=i.useState(""),[o,c]=i.useState("");yS(eb.MYSTERY_BOX_KEYS_UPDATE,d=>{r(d.keyColor),c(d.boxColor)});const u=d=>{const g=QR[d];return Ft.int2rgb(g)};return s===""&&o===""?null:t(P,{className:"nitro-notification-bubble rounded mysterybox-extension",children:l(v,{children:[l(w,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:d=>n(g=>!g),children:[t(N,{variant:"white",children:h("mysterybox.tracker.title")}),e&&t(Lc,{className:"fa-icon"}),!e&&t(Uc,{className:"fa-icon"})]}),e&&l(j,{children:[t(N,{variant:"white",children:h("mysterybox.tracker.description")}),l(w,{justifyContent:"center",alignItems:"center",gap:2,children:[t(Se,{className:"mysterybox-container",children:t("div",{className:"box-image flex-shrink-0",style:{backgroundColor:u(o)},children:t("div",{className:"chain-overlay-image"})})}),t(Se,{className:"mysterybox-container",children:t("div",{className:"key-image flex-shrink-0",style:{backgroundColor:u(s)},children:t("div",{className:"key-overlay-image"})})})]})]})]})})},JR=a=>{const{eventId:e=-1,eventName:n="",eventDescription:s="",setIsEditingPromote:r=null}=a,[o,c]=i.useState(n),[u,d]=i.useState(s),g=()=>{M(new tb(e,o,u)),r(!1)};return l(ie,{className:"nitro-guide-tool",theme:"primary-slim",children:[t(ae,{headerText:h("navigator.eventsettings.editcaption"),onCloseClick:()=>r(!1)}),l(ne,{className:"text-black",children:[l(v,{children:[t(N,{bold:!0,children:h("navigator.eventsettings.name")}),t("input",{type:"text",className:"form-control form-control-sm",placeholder:h("navigator.eventsettings.name"),maxLength:64,value:o,onChange:m=>c(m.target.value)})]}),l(v,{children:[t(N,{bold:!0,children:h("navigator.eventsettings.desc")}),t("textarea",{className:"form-control form-control-sm",placeholder:h("navigator.eventsettings.desc"),maxLength:64,value:u,onChange:m=>d(m.target.value)})]}),t(v,{children:t(D,{fullWidth:!0,disabled:!o||!u,variant:!o||!u?"danger":"success",onClick:m=>g(),children:h("navigator.eventsettings.edit")})})]})]})},ZR=a=>{const{eventDescription:e="",setIsEditingPromote:n=null}=a,{setIsExtended:s}=su(),r=()=>{s(!0),te("catalog/open/room_event")};return l(j,{children:[t(w,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:t(N,{variant:"white",children:e})}),t("br",{}),t("br",{}),l(re,{className:"d-flex align-items-center justify-content-end gap-2",children:[t(D,{className:"btn btn-primary w-100 btn-sm",onClick:o=>n(!0),children:h("navigator.roominfo.editevent")}),t(D,{className:"btn btn-success w-100 btn-sm",onClick:o=>r(),children:h("roomad.extend.event")})]})]})},eO=a=>{const{eventDescription:e=""}=a;return l(j,{children:[t(w,{alignItems:"center",gap:2,style:{overflowWrap:"anywhere"},children:t(N,{variant:"white",children:e})}),t("br",{}),t("br",{}),t(v,{alignItems:"center",gap:1,children:l(P,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",center:!0,children:h("navigator.eventinprogress")})}),t(N,{children:""})]})})]})},tO=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(!0),{promoteInformation:o,setPromoteInformation:c}=su();return F(lh,u=>{c(null)}),o?t(j,{children:o.data.adId!==-1&&t(P,{className:"nitro-notification-bubble rounded",children:l(v,{children:[l(w,{alignItems:"center",justifyContent:"between",pointer:!0,onClick:u=>r(d=>!d),children:[t(N,{variant:"white",overflow:"hidden",children:o.data.eventName}),s&&t(Lc,{className:"fa-icon"}),!s&&t(Uc,{className:"fa-icon"})]}),s&&z().userId!==o.data.ownerAvatarId&&t(eO,{eventDescription:o.data.eventDescription}),s&&z().userId===o.data.ownerAvatarId&&t(ZR,{eventDescription:o.data.eventDescription,setIsEditingPromote:()=>n(!0)}),e&&t(JR,{eventId:o.data.adId,eventName:o.data.eventName,eventDescription:o.data.eventDescription,setIsEditingPromote:()=>n(!1)})]})})}):null},nO=a=>t("div",{className:"nitro-right-side",children:l(v,{position:"relative",gap:1,children:[t($R,{}),t(UR,{}),t(XR,{}),t(LR,{}),t(tO,{}),t(YR,{})]})}),sO=a=>t("div",{className:"room-spectator"}),rO=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(null),{chatStyleId:o=0}=Zn(),{roomSession:c=null}=De();F(nb,d=>{const g=d.getParser();if(!g)return;const m=c.userDataManager.getPetData(g.petId);m&&(n(m),r(g))});const u=(d,g)=>{!d||!g||c==null||c.sendChatMessage(`${d} ${g}`,o)};return!e||!s?null:l(ie,{uniqueKey:"user-settings",className:"user-settings-window no-resize",theme:"primary-slim",children:[t(ae,{headerText:h("widgets.pet.commands.title"),onCloseClick:()=>r(null)}),l(ne,{className:"text-black",children:[t(w,{alignItems:"center",justifyContent:"center",gap:2,children:l(re,{columnCount:2,children:[t(v,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:t(Ss,{figure:e.figure,posture:"std",direction:2})}),t(N,{variant:"black",small:!0,wrap:!0,children:e.name})]})}),t(re,{columnCount:2,children:s.commands&&s.commands.length>0&&s.commands.map((d,g)=>t(D,{disabled:!s.enabledCommands.includes(d),onClick:()=>u(e.name,h(`pet.command.${d}`)),children:h(`pet.command.${d}`)},g))})]})]})},cn=a=>{const{justifyContent:e="center",alignItems:n="center",classNames:s=[],...r}=a,o=i.useMemo(()=>{const c=["menu-header","p-1"];return s.length&&c.push(...s),c},[s]);return t(w,{justifyContent:e,alignItems:n,classNames:o,...r})},oO=a=>{const{chatEvent:e=null,onClose:n=null}=a,[s,r]=i.useState(e.chat==="${bot.skill.chatter.configuration.text.placeholder}"?"":e.chat),[o,c]=i.useState(e.automaticChat),[u,d]=i.useState(e.mixSentences),[g,m]=i.useState(e.chatDelay),f=i.useMemo(()=>Wc(Oe().roomId,e.objectId,e.category,1),[e]),p=E=>E.replace(/;#;/g," ").replace(/\r\n|\r|\n/g,"\r"),C=()=>{const E=p(s)+";#;"+o+";#;"+g+";#;"+u;M(new Ms(e.botId,Qe.SETUP_CHAT,E)),n()};return t(dr,{windowPosition:$t.NOTHING,handleSelector:".drag-handler",dragStyle:{top:f.y,left:f.x},children:l(P,{className:"nitro-context-menu bot-chat",children:[t(cn,{className:"drag-handler",children:h("bot.skill.chatter.configuration.title")}),l(v,{className:"p-1",children:[l(v,{gap:1,children:[t(N,{variant:"white",children:h("bot.skill.chatter.configuration.chat.text")}),t("textarea",{className:"form-control form-control-sm",placeholder:h("bot.skill.chatter.configuration.text.placeholder"),value:s,rows:7,onChange:E=>r(E.target.value)})]}),l(v,{gap:1,children:[l(w,{gap:1,alignItems:"center",justifyContent:"between",children:[t(N,{fullWidth:!0,variant:"white",children:h("bot.skill.chatter.configuration.automatic.chat")}),t("input",{type:"checkbox",className:"form-check-input",checked:o,onChange:E=>c(E.target.checked)})]}),l(w,{gap:1,alignItems:"center",justifyContent:"between",children:[t(N,{fullWidth:!0,variant:"white",children:h("bot.skill.chatter.configuration.markov")}),t("input",{type:"checkbox",className:"form-check-input",checked:u,onChange:E=>d(E.target.checked)})]}),l(w,{gap:1,alignItems:"center",justifyContent:"between",children:[t(N,{fullWidth:!0,variant:"white",children:h("bot.skill.chatter.configuration.chat.delay")}),t("input",{type:"number",className:"form-control form-control-sm",value:g,onChange:E=>m(E.target.valueAsNumber)})]})]}),l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(D,{fullWidth:!0,variant:"primary",onClick:n,children:h("cancel")}),t(D,{fullWidth:!0,variant:"success",onClick:C,children:h("save")})]})]})]})})},Hd=-1,Wd=0,jd=1,qd=2,zd=3,Yd=4,Kd=5,$d=6,aO=a=>{const{item:e=null,onClose:n=null}=a,[s,r]=i.useState(Hd),[o,c]=i.useState(null),[u,d]=i.useState(null),{roomSession:g=null}=De(),m=()=>{o&&Y().selectRoomObject(g.roomId,o.roomIndex,Z.UNIT)},f=()=>{g.usePetProduct(e.requestRoomObjectId,o.webID),n()},p=i.useMemo(()=>{if(!o||!u)return null;const C=new go(o.figure),E=u.customParams.split(" "),b=parseInt(E[0]);switch(u.specialType){case ge.PET_SHAMPOO:{if(E.length<2)return null;const I=Y().getPetColorResult(b,C.paletteId),_=Y().getPetColorResultsForTag(b,E[1]);let S=-1;for(const T of _)if(T.breed===I.breed){S=parseInt(T.id);break}return t(Ss,{typeId:C.typeId,paletteId:S,petColor:C.color,customParts:C.customParts,direction:2})}case ge.PET_CUSTOM_PART:{if(E.length<4)return null;const I=[],_=E[1].split(",").map(y=>parseInt(y)),S=E[2].split(",").map(y=>parseInt(y)),T=E[3].split(",").map(y=>parseInt(y));let R=0;for(;R<_.length;){const y=_[R],A=C.getCustomPart(y);let U=T[R];A!=null&&(U=A.paletteId),I.push(new Ll(y,S[R],U)),R++}return t(Ss,{typeId:C.typeId,paletteId:C.paletteId,petColor:C.color,customParts:I,direction:2})}case ge.PET_CUSTOM_PART_SHAMPOO:{if(E.length<3)return null;const I=[],_=E[1].split(",").map(R=>parseInt(R)),S=E[2].split(",").map(R=>parseInt(R));let T=0;for(;T<_.length;){const R=_[T],y=C.getCustomPart(R);let A=-1;y!=null&&(A=y.partId),I.push(new Ll(_[T],A,S[T])),T++}return t(Ss,{typeId:C.typeId,paletteId:C.paletteId,petColor:C.color,customParts:I,direction:2})}case ge.PET_SADDLE:{if(E.length<4)return null;const I=[],_=E[1].split(",").map(y=>parseInt(y)),S=E[2].split(",").map(y=>parseInt(y)),T=E[3].split(",").map(y=>parseInt(y));let R=0;for(;R<_.length;)I.push(new Ll(_[R],S[R],T[R])),R++;for(const y of C.customParts)_.indexOf(y.layerId)===-1&&I.push(y);return t(Ss,{typeId:C.typeId,paletteId:C.paletteId,petColor:C.color,customParts:I,direction:2})}case ge.MONSTERPLANT_REBREED:case ge.MONSTERPLANT_REVIVAL:case ge.MONSTERPLANT_FERTILIZE:{let I="rip";const _=Y().getRoomObject(g.roomId,o.roomIndex,Z.UNIT);if(_&&(I=_.model.getValue(se.FIGURE_POSTURE),I==="rip")){const S=o.petLevel;S<7?I=`grw${S}`:I="std"}return t(Ss,{typeId:C.typeId,paletteId:C.paletteId,petColor:C.color,customParts:C.customParts,posture:I,direction:2})}}},[o,u,g]);return i.useEffect(()=>{const C=g.userDataManager.getUserDataByIndex(e.id);c(C);const E=al(g.roomId,e.requestRoomObjectId,Z.FLOOR);if(!E)return;d(E);let b=Hd;switch(E.specialType){case ge.PET_SHAMPOO:b=Wd;break;case ge.PET_CUSTOM_PART:b=jd;break;case ge.PET_CUSTOM_PART_SHAMPOO:b=qd;break;case ge.PET_SADDLE:b=zd;break;case ge.MONSTERPLANT_REVIVAL:b=Yd;break;case ge.MONSTERPLANT_REBREED:b=Kd;break;case ge.MONSTERPLANT_FERTILIZE:b=$d;break}r(b)},[g,e]),o?l(ie,{className:"nitro-use-product-confirmation",children:[t(ae,{headerText:h("useproduct.widget.title",["name"],[o.name]),onCloseClick:n}),t(ne,{center:!0,children:l(w,{gap:2,overflow:"hidden",children:[t(v,{children:t(P,{pointer:!0,className:"product-preview",onClick:m,children:p})}),l(v,{justifyContent:"between",overflow:"auto",children:[l(v,{gap:2,children:[s===Wd&&l(j,{children:[t(N,{children:h("useproduct.widget.text.shampoo",["productName"],[u.name])}),t(N,{children:h("useproduct.widget.info.shampoo")})]}),s===jd&&l(j,{children:[t(N,{children:h("useproduct.widget.text.custompart",["productName"],[u.name])}),t(N,{children:h("useproduct.widget.info.custompart")})]}),s===qd&&l(j,{children:[t(N,{children:h("useproduct.widget.text.custompartshampoo",["productName"],[u.name])}),t(N,{children:h("useproduct.widget.info.custompartshampoo")})]}),s===zd&&l(j,{children:[t(N,{children:h("useproduct.widget.text.saddle",["productName"],[u.name])}),t(N,{children:h("useproduct.widget.info.saddle")})]}),s===Yd&&l(j,{children:[t(N,{children:h("useproduct.widget.text.revive_monsterplant",["productName"],[u.name])}),t(N,{children:h("useproduct.widget.info.revive_monsterplant")})]}),s===Kd&&l(j,{children:[t(N,{children:h("useproduct.widget.text.rebreed_monsterplant",["productName"],[u.name])}),t(N,{children:h("useproduct.widget.info.rebreed_monsterplant")})]}),s===$d&&l(j,{children:[t(N,{children:h("useproduct.widget.text.fertilize_monsterplant",["productName"],[u.name])}),t(N,{children:h("useproduct.widget.info.fertilize_monsterplant")})]})]}),l(w,{alignItems:"center",justifyContent:"between",children:[t(D,{variant:"danger",onClick:n,children:h("useproduct.widget.cancel")}),t(D,{variant:"success",onClick:f,children:h("useproduct.widget.use")})]})]})]})})]}):null},K=a=>{const{disabled:e=!1,fullWidth:n=!0,justifyContent:s="center",alignItems:r="center",classNames:o=[],onClick:c=null,...u}=a,d=m=>{e||c&&c(m)},g=i.useMemo(()=>{const m=["menu-item","list-item"];return e&&m.push("disabled"),o.length&&m.push(...o),m},[e,o]);return t(w,{fullWidth:n,justifyContent:s,alignItems:r,classNames:g,onClick:d,...u})},iO=a=>{const{justifyContent:e="center",alignItems:n="center",classNames:s=[],collapsed:r=!0,...o}=a,c=i.useMemo(()=>{const u=["menu-footer"];return s.length&&u.push(...s),u},[s]);return l(w,{justifyContent:e,alignItems:n,classNames:c,...o,children:[!r&&t(Ac,{className:"fa-icon align-self-center"}),r&&t(kc,{className:"fa-icon align-self-center"})]})},lO=25,Qd=3,cO=5e3,uO=75,zr=10;let $l=!1,Ja=null,Za=-1e6,Ql=1;const xs=a=>{const{objectId:e=-1,category:n=-1,userType:s=-1,fades:r=!1,onClose:o=null,position:c="absolute",classNames:u=[],style:d={},children:g=null,collapsable:m=!1,...f}=a,[p,C]=i.useState({x:null,y:null}),[E,b]=i.useState(1),[I,_]=i.useState(!1),[S,T]=i.useState($l),R=i.useRef(),y=i.useCallback(O=>{if(!I)return;Ql+=O;let k=(1-Ql/uO)*1;if(k<=0)return o(),!1;b(k)},[I,o]),A=i.useCallback((O,k)=>{if(!O||!k||!Ja)return;let x=-R.current.offsetHeight;s>-1&&(s===bt.USER||s===bt.BOT||s===bt.RENTABLE_BOT)?x=x+(O.height>50?15:0):x=x-14,Ja.addValue(k.y-O.top);let V=Ja.getMax();V<Za-Qd&&(V=Za-Qd),Za=V;const B=k.y-V;let W=~~(k.x-R.current.offsetWidth/2),G=~~(B+x);const H=_e().width-R.current.offsetWidth-zr,Q=_e().height-R.current.offsetHeight-zr;W<zr?W=zr:W>H&&(W=H),G<zr?G=zr:G>Q&&(G=Q),C({x:W,y:G})},[s]),U=i.useMemo(()=>{const O=["nitro-context-menu"];return S&&O.push("menu-hidden"),O.push(p.x!==null?"visible":"invisible"),u.length&&O.push(...u),O},[p,u,S]),L=i.useMemo(()=>{let O={};return O.left=p.x||0,O.top=p.y||0,O.opacity=E,Object.keys(d).length&&(O={...O,...d}),O},[p,E,d]);return i.useEffect(()=>{if(!R.current)return;const O=k=>{if(!R.current)return;y(k);const x=Wc(Oe().roomId,e,n),V=ph(Oe().roomId,e,n);A(x,V)};return zs().add(O),()=>{zs().remove(O)}},[e,n,y,A]),i.useEffect(()=>{if(!r)return;const O=setTimeout(()=>_(!0),cO);return()=>clearTimeout(O)},[r]),i.useEffect(()=>{$l=S},[S]),i.useEffect(()=>{Ja=new sb(lO),Za=-1e6,Ql=1},[]),l(P,{innerRef:R,position:c,classNames:U,style:L,...f,children:[!(m&&$l)&&g,m&&t(iO,{onClick:()=>T(!S),collapsed:S})]})},Xd=0,Jd=1,Zd=2,em=3,tm=4,nm=5,sm=6,rm=7,dO=a=>{const{item:e=null,updateConfirmingProduct:n=null,onClose:s=null}=a,[r,o]=i.useState(0),{roomSession:c=null}=De(),u=d=>{if(d)switch(d){case"use_product":case"use_product_shampoo":case"use_product_custom_part":case"use_product_custom_part_shampoo":case"use_product_saddle":case"replace_product_saddle":case"revive_monsterplant":case"rebreed_monsterplant":case"fertilize_monsterplant":n(e);break}};return i.useEffect(()=>{if(!e)return;const d=al(c.roomId,e.requestRoomObjectId,Z.FLOOR);if(!d)return;let g=Xd;switch(d.specialType){case ge.PET_SHAMPOO:g=Jd;break;case ge.PET_CUSTOM_PART:g=Zd;break;case ge.PET_CUSTOM_PART_SHAMPOO:g=em;break;case ge.PET_SADDLE:g=tm;break;case ge.MONSTERPLANT_REVIVAL:g=nm;break;case ge.MONSTERPLANT_REBREED:g=sm;break;case ge.MONSTERPLANT_FERTILIZE:g=rm;break}o(g)},[c,e]),l(xs,{objectId:e.id,category:Z.UNIT,userType:bt.PET,onClose:s,collapsable:!0,children:[t(cn,{children:e.name}),r===Xd&&t(K,{onClick:d=>u("use_product"),children:h("infostand.button.useproduct")}),r===Jd&&t(K,{onClick:d=>u("use_product_shampoo"),children:h("infostand.button.useproduct_shampoo")}),r===Zd&&t(K,{onClick:d=>u("use_product_custom_part"),children:h("infostand.button.useproduct_custom_part")}),r===em&&t(K,{onClick:d=>u("use_product_custom_part_shampoo"),children:h("infostand.button.useproduct_custom_part_shampoo")}),r===tm&&l(j,{children:[e.replace&&t(K,{onClick:d=>u("replace_product_saddle"),children:h("infostand.button.replaceproduct_saddle")}),!e.replace&&t(K,{onClick:d=>u("use_product_saddle"),children:h("infostand.button.useproduct_saddle")})]}),r===nm&&t(K,{onClick:d=>u("revive_monsterplant"),children:h("infostand.button.revive_monsterplant")}),r===sm&&t(K,{onClick:d=>u("rebreed_monsterplant"),children:h("infostand.button.rebreed_monsterplant")}),r===rm&&t(K,{onClick:d=>u("fertilize_monsterplant"),children:h("infostand.button.fertilize_monsterplant")})]})},mO=a=>{const{avatarInfo:e=null,onClose:n=null}=a;return e?t(v,{className:"nitro-infostand rounded",children:l(v,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(v,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:e.name}),t(Ln,{className:"cursor-pointer fa-icon",onClick:n})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[l(w,{gap:1,children:[t(v,{fullWidth:!0,className:"body-image bot",children:t($e,{figure:e.figure,direction:4})}),t(v,{grow:!0,center:!0,gap:0,children:e.badges.length>0&&e.badges.map(s=>t(ze,{badgeCode:s,showInfo:!0},s))})]}),t("hr",{className:"m-0"})]}),t(w,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:t(N,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:e.motto})}),e.carryItem>0&&l(v,{gap:1,children:[t("hr",{className:"m-0"}),t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.text.handitem",["item"],[h("handitem"+e.carryItem)])})]})]})}):null},Xl=0,om=1,am=2,hO=a=>{const{avatarInfo:e=null,onClose:n=null}=a,{roomSession:s=null}=De(),[r,o]=i.useState(0),[c,u]=i.useState(!1),[d,g]=i.useState(!1),[m,f]=i.useState(!1),[p,C]=i.useState([]),[E,b]=i.useState([]),[I,_]=i.useState([]),[S,T]=i.useState([]),[R,y]=i.useState(!1),[A,U]=i.useState(0),[L,O]=i.useState(0),[k,x]=i.useState(!1),[V,B]=i.useState(!1),[W,G]=i.useState(null),[H,Q]=i.useState(!1),[ee,me]=i.useState(!1),[ve,Fe]=i.useState(-1),[Ve,Pt]=i.useState(""),[ke,ut]=i.useState(""),[Gt,xe]=i.useState({x:-1,y:-1,z:-1}),[pe,pt]=i.useState(!1),[Bt,Vn]=i.useState(null),[No,Fr]=i.useState(null),[yn,be]=i.useState(null),[Be,Bn]=i.useState(null),[vo,En]=i.useState(null);_r(zm.NPE_SONG_CHANGED,ce=>{Fe(ce.id)},H||ee),_r(ib.SIR_TRAX_SONG_INFO_RECEIVED,ce=>{if(ce.id!==ve)return;const le=_e().soundManager.musicController.getSongInfo(ce.id);le&&(Pt(le.name),ut(le.creator))},H||ee);const nn=i.useCallback((ce,le,ue=0,Ne=0)=>{if(console.log(" sendUpdate chamado:",{deltaX:ce,deltaY:le,deltaZ:ue,deltaDirection:Ne,avatarInfo:e}),!e)return;const Ge=Y().activeRoomId,rt=Y().getRoomObject(Ge,e.id,e.category);if(!rt){console.error(" RoomObject no encontrado!");return}if(console.log(" RoomObject encontrado:",rt),e.isWallItem){const Ht=Y().getLegacyWallGeometry(Ge);if(!Ht)return;const q=rt.getLocation();let $=rt.getDirection().x;if(Ne!==0){const fe=[0,90,180,270],Pe=fe.indexOf($);if(Pe!==-1){let ot;Ne>0?ot=(Pe+1)%fe.length:ot=(Pe-1+fe.length)%fe.length,$=fe[ot]}else $<90||$===360?$=Ne>0?90:270:$<180?$=Ne>0?180:0:$<270?$=Ne>0?270:90:$=Ne>0?0:180}const J=new At(q.x+ce,q.y+le,ue!==0?ue:q.z),oe=Ht.getOldLocationString(J,$);oe?(console.log(" Enviando FurnitureWallUpdateComposer:",{itemId:e.id,location:oe}),M(new X_(e.id,oe))):console.error(" locationString invlido!")}else{const Ht=rt.getLocation(),q=Ht.x+ce,$=Ht.y+le,J=ue!==0?ue*1e4:Ht.z*1e4,oe=rt.getDirection().x,fe=Ne!==0?Na(rt,Ne>0)/45:oe/45;console.log(" Enviando UpdateFurniturePositionComposer:",{itemId:e.id,x:q,y:$,z:J,direction:fe,currentLocation:Ht,currentDirection:oe,deltaZ:ue}),M(new rb(e.id,q,$,J,fe))}},[e]);function To(ce){switch(ce.x){case 0:return 0;case 45:return 1;case 90:return 2;case 135:return 3;case 180:return 4;case 225:return 5;case 270:return 6;case 315:return 7;default:return null}}function Na(ce,le){if(!ce||!ce.model)return 0;let ue=[];ce.type==="monster_plant"?ue=ce.model.getValue("pet_allowed_directions"):ue=ce.model.getValue("furniture_allowed_directions");let Ne=ce.getDirection().x;if(ue&&ue.length){let Ge=ue.indexOf(Ne);if(Ge<0){Ge=0;for(let rt=0;rt<ue.length&&!(Ne<=ue[rt]);rt++)Ge++;Ge=Ge%ue.length}le?Ge=(Ge+1)%ue.length:Ge=(Ge-1+ue.length)%ue.length,Ne=ue[Ge]}return Ne}const Vr=i.useCallback(ce=>{let le=parseFloat(ce.target.value);isNaN(le)||le<-5?le=-5:le>40&&(le=40),be(le),nn(0,0,le,0)},[nn]),wo=i.useCallback(ce=>{let le=parseFloat(ce.target.value);isNaN(le)||le<-5?le=-5:le>40&&(le=40),le=parseFloat(le.toFixed(4)),be(le),nn(0,0,le,0)},[nn]),Ds=i.useCallback(ce=>{let le=yn+ce;le<-5?le=-5:le>40&&(le=40),le=parseFloat(le.toFixed(4)),be(le),nn(0,0,le,0)},[yn,nn]);i.useEffect(()=>{let ce=Xl,le=!1,ue=!1,Ne=!1,Ge=[],rt=[],Ht=[],q=[],$=!1,J=0,oe=0,fe=!1,Pe=!1,ot=!1,Ce=!1,sn=-1;const wa=e.roomControllerLevel>=Ke.GUEST;(wa||e.isOwner||e.isRoomOwner||e.isAnyRoomController)&&(le=!0,ue=!0,e.roomControllerLevel>=Ke.MODERATOR&&(fe=!0));const Sl=Y().getRoomObject(s.roomId,e.id,e.isWallItem?Z.WALL:Z.FLOOR),ya=Sl==null?void 0:Sl.getLocation();if(ya&&xe({x:ya.x,y:ya.y,z:ya.z}),e.isAnyRoomController&&(Pe=!0),(e.usagePolicy===Fu.EVERYBODY||e.usagePolicy===Fu.CONTROLLER&&wa||e.extraParam===Ls.JUKEBOX&&wa||e.extraParam===Ls.USABLE_PRODUCT&&wa)&&(Ne=!0),e.extraParam){if(e.extraParam===Ls.CRACKABLE_FURNI){const Hn=e.stuffData;Ne=!0,$=!0,J=Hn.hits,oe=Hn.target}else if(e.extraParam===Ls.JUKEBOX){const Hn=_e().soundManager.musicController.getRoomItemPlaylist();Hn&&(sn=Hn.nowPlayingSongId),ot=!0}else e.extraParam.indexOf(Ls.SONGDISK)===0&&(sn=parseInt(e.extraParam.substr(Ls.SONGDISK.length)),Ce=!0);if(fe){const Hn=e.extraParam.substr(Ls.BRANDING_OPTIONS.length);if(Hn){const yo=Hn.split("	");for(const Nl of yo){const gr=Nl.split("=");gr&&gr.length===2&&(Ge.push(gr[0]),rt.push(gr[1]))}}}}if(fe){const Hn=Y().getRoomObject(s.roomId,e.id,e.isWallItem?Z.WALL:Z.FLOOR);if(Hn){const yo=Hn.model.getValue(se.FURNITURE_CUSTOM_VARIABLES),Nl=Hn.model.getValue(se.FURNITURE_DATA);if(yo&&yo.length)for(const gr of yo)Ht.push(gr),q.push(Nl[gr]||"")}}e.isOwner||e.isAnyRoomController?ce=am:(e.isRoomOwner||e.roomControllerLevel>=Ke.GUILD_ADMIN)&&(ce=om),e.isStickie&&(ce=Xl),o(ce),u(le),g(ue),f(Ne),C(Ge),b(rt),_(Ht),T(q),y($),U(J),O(oe),x(fe),B(Pe),G(null),Q(ot),me(Ce),Fe(sn),e.groupId&&M(new Xo(e.groupId,!1))},[s,e]),i.useEffect(()=>{var Ge;const ce=s.roomId,le=e.id,ue=e.isWallItem?Z.WALL:Z.FLOOR,Ne=Y().getRoomObject(ce,le,ue);if(Ne){const rt=Ne.getLocation();rt&&(Vn(rt.x),Fr(rt.y),be(rt.z));const Ht=Ne.getDirection(),q=Ht?To(Ht):null;Bn(q);const $=(Ge=Ne.model)==null?void 0:Ge.getValue(se.FURNITURE_DATA);En($)}},[e,s]),F(ob,ce=>{const ue=ce.getParser().item;if(console.log(" FurnitureFloorUpdateEvent recebido:",{itemId:ue.itemId,x:ue.x,y:ue.y,z:ue.z,direction:ue.direction,isMyItem:ue.itemId===(e==null?void 0:e.id)}),ue.itemId!==e.id)return;const Ne={x:ue.x,y:ue.y,z:ue.z};Ne&&(Vn(Ne.x),Fr(Ne.y),be(Ne.z));const Ge={x:ue.direction},rt=Ge?To(Ge):null,Ht=ue.state;Bn(rt),En(Ht),console.log(" Posio atualizada no InfoStand:",Ne)}),F(ga,ce=>{const le=ce.getParser();!e||e.groupId!==le.id||le.flag||(W&&G(null),G(le.title))}),i.useEffect(()=>{const ce=_e().soundManager.musicController.getSongInfo(ve);Pt((ce==null?void 0:ce.name)??""),ut((ce==null?void 0:ce.creator)??"")},[ve]);const Br=i.useCallback((ce,le)=>{const ue=Array.from(E);ue[ce]=le,b(ue)},[E]),va=i.useCallback((ce,le)=>{const ue=Array.from(S);ue[ce]=le,T(ue)},[S]),hr=i.useCallback(()=>{if(p.length===0||E.length===0)return"";let ce="",le=0;for(;le<p.length;){const ue=p[le],Ne=E[le];ce=ce+(ue+"="+Ne+"	"),le++}return ce},[p,E]),Gn=i.useCallback(ce=>{if(!(!ce||ce===""))switch(ce){case"buy_one":te(`catalog/open/offerId/${e.purchaseOfferId}`);return;case"move":Y().processRoomObjectOperation(e.id,e.category,is.OBJECT_MOVE);break;case"rotate":e.isWallItem?nn(0,0,0,1):Y().processRoomObjectOperation(e.id,e.category,is.OBJECT_ROTATE_POSITIVE);break;case"pickup":r===am?Y().processRoomObjectOperation(e.id,e.category,is.OBJECT_PICKUP):Y().processRoomObjectOperation(e.id,e.category,is.OBJECT_EJECT);break;case"use":Y().useRoomObject(e.id,e.category);break;case"save_branding_configuration":{const le=new Map,ue=hr().split("	");if(ue)for(const Ne of ue){const[Ge,rt]=Ne.split("=",2);le.set(Ge,rt)}Y().modifyRoomObjectDataWithMap(e.id,e.category,is.OBJECT_SAVE_STUFF_DATA,le);break}case"save_custom_variables":{const le=new Map;for(let ue=0;ue<I.length;ue++){const Ne=I[ue],Ge=S[ue];Ne&&Ne.length&&Ge&&Ge.length&&le.set(Ne,Ge)}M(new ab(e.id,le));break}}},[e,r,I,S,hr,nn]),Ta=i.useCallback(()=>{const ce=e.stuffData;return!ce||!(ce instanceof ha)?null:ce.getValue(2)},[e]);return e?l(v,{gap:1,alignItems:"end",children:[t(v,{className:"nitro-infostand rounded",children:l(v,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(v,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:e.name}),t(Ln,{className:"cursor-pointer fa-icon",onClick:n})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[l(w,{position:"relative",gap:1,children:[e.stuffData.isUnique&&t("div",{className:"position-absolute end-0",children:t(Bh,{uniqueNumber:e.stuffData.uniqueNumber,uniqueSeries:e.stuffData.uniqueSeries})}),e.stuffData.rarityLevel>-1&&t("div",{className:"position-absolute end-0",children:t(eu,{level:e.stuffData.rarityLevel})}),e.image&&e.image.src.length&&t("img",{className:"d-block mx-auto",src:e.image.src,alt:""})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[t(N,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,children:e.description}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:e.ownerId}),t(N,{variant:"white",small:!0,wrap:!0,children:h("furni.owner",["name"],[e.ownerName])})]}),e.purchaseOfferId>0&&t(w,{children:t(N,{variant:"white",small:!0,underline:!0,pointer:!0,onClick:ce=>Gn("buy_one"),children:h("infostand.button.buy")})})]}),(H||ee)&&l(v,{gap:1,children:[t("hr",{className:"m-0"}),ve===-1&&t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.jukebox.text.not.playing")}),!!Ve.length&&l(w,{alignItems:"center",gap:1,children:[t(P,{className:"icon disk-icon"}),t(N,{variant:"white",small:!0,wrap:!0,children:Ve})]}),!!ke.length&&l(w,{alignItems:"center",gap:1,children:[t(P,{className:"icon disk-creator"}),t(N,{variant:"white",small:!0,wrap:!0,children:ke})]})]}),l(v,{gap:1,children:[R&&l(j,{children:[t("hr",{className:"m-0"}),t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.crackable_furni.hits_remaining",["hits","target"],[A.toString(),L.toString()])})]}),e.groupId>0&&l(j,{children:[t("hr",{className:"m-0"}),l(w,{pointer:!0,alignItems:"center",gap:2,onClick:()=>Ia(e.groupId),children:[t(ze,{badgeCode:Ta(),isGroup:!0}),t(N,{variant:"white",underline:!0,children:W})]})]}),k&&l(j,{children:[t("hr",{className:"m-0"}),c&&l(j,{children:[l(D,{variant:"dark",onClick:()=>pt(!pe),children:[pe?"Close":"Open"," Build Tools"]}),pe&&l(j,{children:[t("hr",{className:"m-0"}),l(N,{small:!0,wrap:!0,variant:"white",children:["X = ",Gt.x,"  and  Y = ",Gt.y,t("br",{}),"BuildHeight = ",Gt.z<.01?0:Gt.z,t("br",{}),V&&l(N,{wrap:!0,variant:"white",children:[" Room Furnishing ID: ",e.id]})]}),t("hr",{className:"m-0"}),l(w,{gap:1,children:[t(v,{className:"buildtool-box buildtool-box-left",children:l(v,{fullWidth:!0,children:[t(N,{variant:"white",children:"Position"}),l(v,{justifyContent:"center",alignItems:"center",className:"button-w-height",children:[l(w,{className:"floor-spaceing",children:[l(P,{className:"buildtool-movefurni button-leftup",onClick:()=>nn(-1,0,yn,0),children:[" ",t(Ra,{className:"fa-icon icon-color",size:"1.7em"})," "]}),l(P,{className:"buildtool-movefurni button-rightup",onClick:()=>nn(0,-1,yn,0),children:[" ",t(Ra,{className:"fa-icon icon-color",size:"1.7em"})," "]})]}),l(w,{className:"floor-spaceing",children:[l(P,{className:"buildtool-movefurni button-leftdown",onClick:()=>nn(0,1,yn,0),children:[" ",t(Ra,{className:"fa-icon icon-color",size:"1.7em"})," "]}),l(P,{className:"buildtool-movefurni button-rightdown",onClick:()=>nn(1,0,yn,0),children:[" ",t(Ra,{className:"fa-icon icon-color",size:"1.7em"})," "]})]})]}),d&&l(j,{children:[t(N,{variant:"white",children:"Rotation"}),l(w,{center:!0,className:"floor-spaceing",children:[l(P,{className:"buildtool-rotatefurni",onClick:()=>nn(0,0,yn,-1),children:[" ",t(Jg,{className:"fa-icon icon-color",size:"1.4em"})," "]}),l(P,{className:"buildtool-rotatefurni",onClick:()=>nn(0,0,yn,1),children:[" ",t(Zg,{className:"fa-icon icon-color",size:"1.4em"})," "]})]})]})]})}),t(v,{className:"buildtool-box buildtool-box-right",children:l(v,{fullWidth:!0,children:[t(N,{variant:"white",children:"Height"}),t("input",{spellCheck:"false",type:"number",className:"form-control form-control-sm",value:yn!==null?yn.toString():"",onChange:Vr,onBlur:wo,min:-5,max:40,step:.1}),l(w,{justifyContent:"center",gap:1,children:[l(v,{children:[t(P,{className:"buildtool-setheight buildtool-setheightup",onClick:()=>Ds(1),children:t("i",{className:"fas fa-chevron-up fa-icon"})}),t(w,{center:!0,className:"buildtool-height-indicator buildtool-height-large",children:t("i",{className:"fas fa-grip-lines fa-icon"})}),t(P,{className:"buildtool-setheight buildtool-setheightdown",onClick:()=>Ds(-1),children:t("i",{className:"fas fa-chevron-down fa-icon"})})]}),l(v,{children:[t(P,{className:"buildtool-setheight buildtool-setheightup",onClick:()=>Ds(.1),children:t("i",{className:"fas fa-chevron-up fa-icon"})}),t(w,{center:!0,className:"buildtool-height-indicator buildtool-height-medium",children:t("i",{className:"fas fa-minus fa-icon"})}),t(P,{className:"buildtool-setheight buildtool-setheightdown",onClick:()=>Ds(-.1),children:t("i",{className:"fas fa-chevron-down fa-icon"})})]}),l(v,{children:[t(P,{className:"buildtool-setheight buildtool-setheightup",onClick:()=>Ds(.01),children:t("i",{className:"fas fa-chevron-up fa-icon"})}),t(w,{center:!0,className:"buildtool-height-indicator buildtool-height-small",children:t("i",{className:"fas fa-minus fa-icon"})}),t(P,{className:"buildtool-setheight buildtool-setheightdown",onClick:()=>Ds(-.01),children:t("i",{className:"fas fa-chevron-down fa-icon"})})]})]})]})})]})]})]}),p.length>0&&l(j,{children:[t("hr",{className:"m-0"}),t(v,{gap:1,children:p.map((ce,le)=>l(w,{alignItems:"center",gap:1,children:[t(N,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:ce}),t("input",{type:"text",className:"form-control form-control-sm",value:E[le],onChange:ue=>Br(le,ue.target.value)})]},le))})]})]}),I.length>0&&l(j,{children:[t("hr",{className:"m-0 my-1"}),t(v,{gap:1,children:I.map((ce,le)=>l(w,{alignItems:"center",gap:1,children:[t(N,{small:!0,wrap:!0,align:"end",variant:"white",className:"col-4",children:ce}),t("input",{type:"text",className:"form-control form-control-sm",value:S[le],onChange:ue=>va(le,ue.target.value)})]},le))})]})]})]})}),l(w,{gap:1,justifyContent:"end",children:[c&&t(D,{variant:"dark",onClick:ce=>Gn("move"),children:h("infostand.button.move")}),d&&t(D,{variant:"dark",onClick:ce=>Gn("rotate"),children:h("infostand.button.rotate")}),r!==Xl&&t(D,{variant:"dark",onClick:ce=>Gn("pickup"),children:h(r===om?"infostand.button.eject":"infostand.button.pickup")}),m&&t(D,{variant:"dark",onClick:ce=>Gn("use"),children:h("infostand.button.use")}),p.length>0&&E.length>0&&p.length===E.length&&t(D,{variant:"dark",onClick:()=>Gn("save_branding_configuration"),children:h("save")}),I.length>0&&S.length>0&&I.length===S.length&&t(D,{variant:"dark",onClick:()=>Gn("save_custom_variables"),children:h("save")})]})]}):null},gO=a=>{const{avatarInfo:e=null,onClose:n=null}=a,[s,r]=i.useState(0),[o,c]=i.useState(0),{roomSession:u=null}=De(),{petRespectRemaining:d=0,respectPet:g=null}=Zn();if(i.useEffect(()=>{r(e.remainingGrowTime),c(e.remainingTimeToLive)},[e]),i.useEffect(()=>{if(e.petType!==qt.MONSTERPLANT||e.dead)return;const f=setInterval(()=>{r(p=>p-1),c(p=>p-1)},1e3);return()=>clearInterval(f)},[e]),!e)return null;const m=f=>{let p=!0;if(!(!f||f=="")){switch(f){case"respect":g(e.id),d-1>=1&&(p=!1);break;case"buyfood":te("catalog/open/"+X("catalog.links")["pets.buy_food"]);break;case"train":u==null||u.requestPetCommands(e.id);break;case"treat":M(new Gc(e.id));break;case"compost":u==null||u.compostPlant(e.id);break;case"pick_up":u==null||u.pickupPet(e.id);break}p&&n()}};return l(v,{gap:1,alignItems:"end",children:[t(v,{className:"nitro-infostand rounded",children:l(v,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(v,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:e.name}),t(Ln,{className:"cursor-pointer fa-icon",onClick:n})]}),t(N,{variant:"white",small:!0,wrap:!0,children:h(`pet.breed.${e.petType}.${e.petBreed}`)}),t("hr",{className:"m-0"})]}),e.petType===qt.MONSTERPLANT&&l(j,{children:[l(v,{center:!0,gap:1,children:[t(Ss,{figure:e.petFigure,posture:e.posture,direction:4}),t("hr",{className:"m-0"})]}),l(v,{gap:2,children:[!e.dead&&t(v,{alignItems:"center",gap:1,children:t(N,{variant:"white",center:!0,small:!0,wrap:!0,children:h("pet.level",["level","maxlevel"],[e.level.toString(),e.maximumLevel.toString()])})}),l(v,{alignItems:"center",gap:1,children:[t(N,{variant:"white",small:!0,truncate:!0,children:h("infostand.pet.text.wellbeing")}),l(P,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",small:!0,children:e.dead?"00:00:00":pr(o==0?e.remainingTimeToLive:o).split(":")[1]+":"+pr(o==null||o==null?0:o).split(":")[2]+":"+pr(o==null||o==null?0:o).split(":")[3]})}),t(P,{className:"bg-success rounded pet-stats",style:{width:e.dead?"0":Math.round(e.maximumTimeToLive*100/o).toString()}})]})]}),s!=0&&s>0&&l(v,{alignItems:"center",gap:1,children:[t(N,{variant:"white",small:!0,truncate:!0,children:h("infostand.pet.text.growth")}),t(ES,{className:"top-2 end-2",day:pr(s).split(":")[0],hour:pr(s).split(":")[1],minutes:pr(s).split(":")[2],seconds:pr(s).split(":")[3]})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{variant:"white",small:!0,truncate:!0,children:h("infostand.pet.text.raritylevel",["level"],[h(`infostand.pet.raritylevel.${e.rarityLevel}`)])}),t(eu,{className:"top-2 end-2",level:e.rarityLevel})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:h("pet.age",["age"],[e.age.toString()])}),t("hr",{className:"m-0"})]})]}),e.petType!==qt.MONSTERPLANT&&l(j,{children:[l(v,{gap:1,children:[l(w,{gap:1,children:[t(v,{fullWidth:!0,overflow:"hidden",className:"body-image pet p-1",children:t(Ss,{figure:e.petFigure,posture:e.posture,direction:4})}),l(v,{grow:!0,gap:1,children:[t(N,{variant:"white",center:!0,small:!0,wrap:!0,children:h("pet.level",["level","maxlevel"],[e.level.toString(),e.maximumLevel.toString()])}),l(v,{alignItems:"center",gap:1,children:[t(N,{variant:"white",small:!0,truncate:!0,children:h("infostand.pet.text.happiness")}),l(P,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",small:!0,children:e.happyness+"/"+e.maximumHappyness})}),t(P,{className:"bg-info rounded pet-stats",style:{width:e.happyness/e.maximumHappyness*100+"%"}})]})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{variant:"white",small:!0,truncate:!0,children:h("infostand.pet.text.experience")}),l(P,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",small:!0,children:e.experience+"/"+e.levelExperienceGoal})}),t(P,{className:"bg-purple rounded pet-stats",style:{width:e.experience/e.levelExperienceGoal*100+"%"}})]})]}),l(v,{alignItems:"center",gap:1,children:[t(N,{variant:"white",small:!0,truncate:!0,children:h("infostand.pet.text.energy")}),l(P,{fullWidth:!0,overflow:"hidden",position:"relative",className:"bg-light-dark rounded",children:[t(w,{fit:!0,center:!0,position:"absolute",children:t(N,{variant:"white",small:!0,children:e.energy+"/"+e.maximumEnergy})}),t(P,{className:"bg-success rounded pet-stats",style:{width:e.energy/e.maximumEnergy*100+"%"}})]})]})]})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[e.petType!==qt.MONSTERPLANT&&t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.text.petrespect",["count"],[e.respect.toString()])}),t(N,{variant:"white",small:!0,wrap:!0,children:h("pet.age",["age"],[e.age.toString()])}),t("hr",{className:"m-0"})]})]}),t(v,{gap:1,children:l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:e.ownerId}),t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.text.petowner",["name"],[e.ownerName])})]})})]})}),l(w,{gap:1,justifyContent:"end",children:[e.petType!==qt.MONSTERPLANT&&t(D,{variant:"dark",onClick:f=>m("buyfood"),children:h("infostand.button.buyfood")}),e.isOwner&&e.petType!==qt.MONSTERPLANT&&t(D,{variant:"dark",onClick:f=>m("train"),children:h("infostand.button.train")}),!e.dead&&e.energy/e.maximumEnergy<.98&&e.petType===qt.MONSTERPLANT&&t(D,{variant:"dark",onClick:f=>m("treat"),children:h("infostand.button.pettreat")}),(u==null?void 0:u.isRoomOwner)&&e.petType===qt.MONSTERPLANT&&t(D,{variant:"dark",onClick:f=>m("compost"),children:h("infostand.button.compost")}),e.isOwner&&t(D,{variant:"dark",onClick:f=>m("pick_up"),children:h("inventory.pets.pickup")}),d>0&&e.petType!==qt.MONSTERPLANT&&t(D,{variant:"dark",onClick:f=>m("respect"),children:h("infostand.button.petrespect",["count"],[d.toString()])})]})]})},fO=a=>{const{avatarInfo:e=null,onClose:n=null}=a,s=i.useMemo(()=>!(e.botSkills.indexOf(Qe.NO_PICK_UP)>=0||!e.amIOwner&&!e.amIAnyRoomController),[e]),r=()=>M(new ch(e.webID));if(e)return l(v,{gap:1,children:[t(v,{className:"nitro-infostand rounded",children:l(v,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(v,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:e.name}),t(Ln,{className:"cursor-pointer fa-icon",onClick:n})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[l(w,{gap:1,children:[t(v,{fullWidth:!0,className:"body-image bot",children:t($e,{figure:e.figure,direction:4})}),t(v,{grow:!0,center:!0,gap:0,children:e.badges.length>0&&e.badges.map(o=>t(ze,{badgeCode:o,showInfo:!0},o))})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[t(w,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:t(N,{fullWidth:!0,wrap:!0,textBreak:!0,variant:"white",small:!0,className:"motto-content",children:e.motto})}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:e.ownerId}),t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.text.botowner",["name"],[e.ownerName])})]}),e.carryItem>0&&l(j,{children:[t("hr",{className:"m-0"}),t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.text.handitem",["item"],[h("handitem"+e.carryItem)])})]})]})]})}),s&&t(w,{justifyContent:"end",children:t(D,{variant:"dark",onClick:r,children:h("infostand.button.pickup")})})]})},Jl=a=>{const{type:e=-1,relationship:n=null}=a;if(!n)return null;const s=as.RELATIONSHIP_NAMES[e].toLocaleLowerCase();return l(w,{alignItems:"center",gap:1,children:[t("i",{className:`nitro-friends-spritesheet icon-${s}`}),t(w,{alignItems:"center",gap:0,children:l(N,{small:!0,variant:"white",onClick:r=>pn(n.randomFriendId),children:[t("u",{children:n.randomFriendName}),n.friendCount>1&&" "+h(`extendedprofile.relstatus.others.${s}`,["count"],[(n.friendCount-1).toString()])]})})]})},pO=a=>{const{relationships:e=null}=a;return!e||!e.relationshipStatusMap.length?null:l(j,{children:[t(Jl,{type:as.HEART,relationship:e.relationshipStatusMap.getValue(as.HEART)}),t(Jl,{type:as.SMILE,relationship:e.relationshipStatusMap.getValue(as.SMILE)}),t(Jl,{type:as.BOBBA,relationship:e.relationshipStatusMap.getValue(as.BOBBA)})]})},IO=a=>{te(`navigator/search/${a}`),M(new fo("hotel_view",`tag:${a}`))},EO=a=>{const{tags:e=null}=a;return!e||!e.length?null:l(j,{children:[t("hr",{className:"m-0"}),t(w,{className:"flex-tags",children:e&&e.length>0&&e.map((n,s)=>t(N,{variant:"white",className:"text-tags",onClick:r=>IO(n),children:n},s))})]})},CO=a=>{const{avatarInfo:e=null,setAvatarInfo:n=null,onClose:s=null}=a,[r,o]=i.useState(null),[c,u]=i.useState(!1),[d,g]=i.useState(null),{roomSession:m=null}=De(),f=E=>{!c||E.length>X("motto.max.length",38)||(m.sendMottoMessage(E),u(!1))},p=E=>f(E.target.value),C=E=>{switch(E.stopPropagation(),E.key){case"Enter":f(E.target.value);return}};return Ye(lb.RSUBE_BADGES,E=>{!e||e.webID!==E.userId||e.badges.join("")===E.badges.join("")||n(I=>{const _=un(I);return _.badges=E.badges,_})}),Ye(cb.USER_FIGURE,E=>{!e||e.roomIndex!==E.roomIndex||n(b=>{const I=un(b);return I.figure=E.figure,I.motto=E.customInfo,I.achievementScore=E.activityPoints,I})}),Ye(ub.FAVOURITE_GROUP_UPDATE,E=>{!e||e.roomIndex!==E.roomIndex||n(b=>{const I=un(b),_=E.status===-1||E.habboGroupId<=0;return I.groupId=_?-1:E.habboGroupId,I.groupName=_?null:E.habboGroupName,I.groupBadgeId=_?null:z().getGroupBadge(E.habboGroupId),I})}),F(uh,E=>{const b=E.getParser();!e||e.webID!==b.userId||g(b)}),i.useEffect(()=>(u(!1),o(e.motto),M(new dh(e.webID)),()=>{u(!1),o(null),g(null)}),[e]),e?t(v,{className:"nitro-infostand rounded",children:l(v,{overflow:"visible",className:"container-fluid content-area",gap:1,children:[l(v,{gap:1,children:[l(w,{alignItems:"center",justifyContent:"between",children:[l(w,{alignItems:"center",gap:1,children:[t(Pn,{userId:e.webID}),t(N,{variant:"white",small:!0,wrap:!0,children:e.name})]}),t(Ln,{className:"cursor-pointer fa-icon",onClick:s})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[l(w,{gap:1,children:[t(v,{fullWidth:!0,className:"body-image",onClick:E=>pn(e.webID),children:t($e,{figure:e.figure,direction:4})}),l(v,{grow:!0,alignItems:"center",gap:0,children:[l(w,{gap:1,children:[t(w,{center:!0,className:"badge-image",children:e.badges[0]&&t(ze,{badgeCode:e.badges[0],showInfo:!0})}),t(w,{center:!0,pointer:e.groupId>0,className:"badge-image",onClick:E=>Ia(e.groupId),children:e.groupId>0&&t(ze,{badgeCode:e.groupBadgeId,isGroup:!0,showInfo:!0,customTitle:e.groupName})})]}),l(w,{center:!0,gap:1,children:[t(w,{center:!0,className:"badge-image",children:e.badges[1]&&t(ze,{badgeCode:e.badges[1],showInfo:!0})}),t(w,{center:!0,className:"badge-image",children:e.badges[2]&&t(ze,{badgeCode:e.badges[2],showInfo:!0})})]}),l(w,{center:!0,gap:1,children:[t(w,{center:!0,className:"badge-image",children:e.badges[3]&&t(ze,{badgeCode:e.badges[3],showInfo:!0})}),t(w,{center:!0,className:"badge-image",children:e.badges[4]&&t(ze,{badgeCode:e.badges[4],showInfo:!0})})]})]})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[l(w,{alignItems:"center",className:"bg-light-dark rounded py-1 px-2",children:[e.type!==Rt.OWN_USER&&t(w,{grow:!0,alignItems:"center",className:"motto-content",children:t(N,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",children:r})}),e.type===Rt.OWN_USER&&l(w,{grow:!0,alignItems:"center",gap:2,children:[t(ef,{className:"small fa-icon"}),l(w,{grow:!0,alignItems:"center",className:"motto-content",children:[!c&&l(N,{fullWidth:!0,pointer:!0,wrap:!0,textBreak:!0,small:!0,variant:"white",onClick:E=>u(!0),children:[r,""]}),c&&t("input",{type:"text",className:"motto-input",maxLength:X("motto.max.length",38),value:r,onChange:E=>o(E.target.value),onBlur:p,onKeyDown:C,autoFocus:!0})]})]})]}),t("hr",{className:"m-0"})]}),l(v,{gap:1,children:[t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.text.achievement_score")+" "+e.achievementScore}),e.carryItem>0&&l(j,{children:[t("hr",{className:"m-0"}),t(N,{variant:"white",small:!0,wrap:!0,children:h("infostand.text.handitem",["item"],[h("handitem"+e.carryItem)])})]})]}),t(v,{gap:1,children:t(pO,{relationships:d})}),X("user.tags.enabled")&&t(v,{gap:1,className:"mt-1",children:t(EO,{tags:z().tags})})]})}):null},ei=0,Zl=1,im=2,lm=3,ec=4,cm=5,um=6,bO=a=>{const{avatarInfo:e=null,onClose:n=null}=a,[s,r]=i.useState(ei),{canRequestFriend:o=null}=Tn(),{report:c=null}=Xn(),{roomSession:u=null}=De(),{userRespectRemaining:d=0,respectUser:g=null}=Zn(),{startGroupWhisper:m,getWhisperCommand:f,isActive:p}=ru(),C=i.useMemo(()=>e.amIOwner&&e.targetRoomControllerLevel<Ke.GUEST&&!e.isGuildRoom,[e]),E=i.useMemo(()=>e.amIOwner&&e.targetRoomControllerLevel===Ke.GUEST&&!e.isGuildRoom,[e]),b=i.useMemo(()=>e.canBeKicked||e.canBeBanned||e.canBeMuted||C||E,[C,E,e]),I=i.useMemo(()=>{let S=!1;const T=Mr();if(T){const R=T.model.getValue(se.FIGURE_CARRY_OBJECT);R>0&&R<999999&&(S=!0)}return S},[]),_=S=>{let T=!0;if(S)switch(S){case"moderate":T=!1,r(Zl);break;case"ban":T=!1,r(im);break;case"mute":T=!1,r(lm);break;case"ambassador":T=!1,r(ec);break;case"ambassador_mute":T=!1,r(cm);break;case"back_moderate":T=!1,r(Zl);break;case"back_ambassador":T=!1,r(ec);break;case"back":T=!1,r(ei);break;case"whisper":nt(new js(js.WHISPER,e.name));break;case"group_whisper":m({name:e.name,roomIndex:e.roomIndex}),setTimeout(()=>{const y=f().replace(":whisper ","").trim();nt(new js(js.WHISPER,y))},0);break;case"friend":te(`friends/request/${e.webID}/${e.name}`);break;case"relationship":T=!1,r(um);break;case"respect":{g(e.webID),d-1>=1&&(T=!1);break}case"ignore":z().ignoreUser(e.name);break;case"unignore":z().unignoreUser(e.name);break;case"kick":u.sendKickMessage(e.webID);break;case"ban_hour":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_HOUR");break;case"ban_day":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_DAY");break;case"perm_ban":u.sendBanMessage(e.webID,"RWUAM_BAN_USER_PERM");break;case"mute_2min":u.sendMuteMessage(e.webID,2);break;case"mute_5min":u.sendMuteMessage(e.webID,5);break;case"mute_10min":u.sendMuteMessage(e.webID,10);break;case"give_rights":u.sendGiveRightsMessage(e.webID);break;case"remove_rights":u.sendTakeRightsMessage(e.webID);break;case"trade":M(new mb(e.roomIndex));break;case"report":c(lt.BULLY,{reportedUserId:e.webID});break;case"pass_hand_item":M(new db(e.webID));break;case"ambassador_alert":u.sendAmbassadorAlertMessage(e.webID);break;case"ambassador_kick":u.sendKickMessage(e.webID);break;case"ambassador_mute_2min":u.sendMuteMessage(e.webID,2);break;case"ambassador_mute_10min":u.sendMuteMessage(e.webID,10);break;case"ambassador_mute_60min":u.sendMuteMessage(e.webID,60);break;case"ambassador_mute_18hour":u.sendMuteMessage(e.webID,1080);break;case"rship_heart":M(new ko(e.webID,fn.RELATIONSHIP_HEART));break;case"rship_smile":M(new ko(e.webID,fn.RELATIONSHIP_SMILE));break;case"rship_bobba":M(new ko(e.webID,fn.RELATIONSHIP_BOBBA));break;case"rship_none":M(new ko(e.webID,fn.RELATIONSHIP_NONE));break}T&&n()};return i.useEffect(()=>{r(ei)},[e]),l(xs,{objectId:e.roomIndex,category:Z.UNIT,userType:e.userType,onClose:n,collapsable:!0,children:[t(cn,{className:"cursor-pointer",onClick:S=>pn(e.webID),children:e.name}),s===ei&&l(j,{children:[o(e.webID)&&t(K,{onClick:S=>_("friend"),children:h("infostand.button.friend")}),t(K,{onClick:S=>_("trade"),children:h("infostand.button.trade")}),t(K,{onClick:S=>_("whisper"),children:h("infostand.button.whisper")}),t(K,{onClick:S=>_("group_whisper"),children:"Group Whisper"}),d>0&&t(K,{onClick:S=>_("respect"),children:h("infostand.button.respect",["count"],[d.toString()])}),!o(e.webID)&&l(K,{onClick:S=>_("relationship"),children:[h("infostand.link.relationship"),t(_n,{className:"right fa-icon"})]}),!e.isIgnored&&t(K,{onClick:S=>_("ignore"),children:h("infostand.button.ignore")}),e.isIgnored&&t(K,{onClick:S=>_("unignore"),children:h("infostand.button.unignore")}),t(K,{onClick:S=>_("report"),children:h("infostand.button.report")}),b&&l(K,{onClick:S=>_("moderate"),children:[t(_n,{className:"right fa-icon"}),h("infostand.link.moderate")]}),e.isAmbassador&&l(K,{onClick:S=>_("ambassador"),children:[t(_n,{className:"right fa-icon"}),h("infostand.link.ambassador")]}),I&&t(K,{onClick:S=>_("pass_hand_item"),children:h("avatar.widget.pass_hand_item")})]}),s===Zl&&l(j,{children:[t(K,{onClick:S=>_("kick"),children:h("infostand.button.kick")}),l(K,{onClick:S=>_("mute"),children:[t(_n,{className:"right fa-icon"}),h("infostand.button.mute")]}),l(K,{onClick:S=>_("ban"),children:[t(_n,{className:"right fa-icon"}),h("infostand.button.ban")]}),C&&t(K,{onClick:S=>_("give_rights"),children:h("infostand.button.giverights")}),E&&t(K,{onClick:S=>_("remove_rights"),children:h("infostand.button.removerights")}),l(K,{onClick:S=>_("back"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]}),s===im&&l(j,{children:[t(K,{onClick:S=>_("ban_hour"),children:h("infostand.button.ban_hour")}),t(K,{onClick:S=>_("ban_day"),children:h("infostand.button.ban_day")}),t(K,{onClick:S=>_("perm_ban"),children:h("infostand.button.perm_ban")}),l(K,{onClick:S=>_("back_moderate"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]}),s===lm&&l(j,{children:[t(K,{onClick:S=>_("mute_2min"),children:h("infostand.button.mute_2min")}),t(K,{onClick:S=>_("mute_5min"),children:h("infostand.button.mute_5min")}),t(K,{onClick:S=>_("mute_10min"),children:h("infostand.button.mute_10min")}),l(K,{onClick:S=>_("back_moderate"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]}),s===ec&&l(j,{children:[t(K,{onClick:S=>_("ambassador_alert"),children:h("infostand.button.alert")}),t(K,{onClick:S=>_("ambassador_kick"),children:h("infostand.button.kick")}),l(K,{onClick:S=>_("ambassador_mute"),children:[h("infostand.button.mute"),t(_n,{className:"right fa-icon"})]}),l(K,{onClick:S=>_("back"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]}),s===cm&&l(j,{children:[t(K,{onClick:S=>_("ambassador_mute_2min"),children:h("infostand.button.mute_2min")}),t(K,{onClick:S=>_("ambassador_mute_10min"),children:h("infostand.button.mute_10min")}),t(K,{onClick:S=>_("ambassador_mute_60min"),children:h("infostand.button.mute_60min")}),t(K,{onClick:S=>_("ambassador_mute_18hr"),children:h("infostand.button.mute_18hour")}),l(K,{onClick:S=>_("back_ambassador"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]}),s===um&&l(j,{children:[l(w,{className:"menu-list-split-3",children:[t(K,{onClick:S=>_("rship_heart"),children:t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-heart"})}),t(K,{onClick:S=>_("rship_smile"),children:t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-smile"})}),t(K,{onClick:S=>_("rship_bobba"),children:t(P,{pointer:!0,className:"nitro-friends-spritesheet icon-bobba"})})]}),t(K,{onClick:S=>_("rship_none"),children:h("avatar.widget.clear_relationship")}),l(K,{onClick:S=>_("back"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]})]})},Rg=a=>{const{classNames:e=[],...n}=a,s=i.useMemo(()=>{const r=["menu-list"];return e.length&&r.push(...e),r},[e]);return t(v,{classNames:s,...n})},_O=a=>{const{userId:e=-1,userName:n="",roomIndex:s=-1,setIsDecorating:r=null}=a;return t(xs,{objectId:s,category:Z.UNIT,onClose:null,children:t(Rg,{children:t(K,{onClick:o=>r(!1),children:h("widget.avatar.stop_decorating")})})})},SO=a=>{const{avatarInfo:e=null,onClose:n=null}=a,s=r=>{if(r)switch(r){case"move":$r(e.id,e.category,is.OBJECT_MOVE);break;case"rotate":$r(e.id,e.category,is.OBJECT_ROTATE_POSITIVE);break;case"pickup":$r(e.id,e.category,is.OBJECT_PICKUP);break;case"eject":$r(e.id,e.category,is.OBJECT_EJECT);break}};return l(xs,{objectId:e.id,category:e.category,onClose:n,collapsable:!0,children:[t(cn,{children:e.name}),l(w,{className:"menu-list-split-3",children:[t(K,{onClick:r=>s("move"),children:t(tf,{className:"center fa-icon"})}),t(K,{onClick:r=>s("rotate"),disabled:e.isWallItem,children:t(nf,{className:"center fa-icon"})}),(e.isOwner||e.isAnyRoomController)&&t(K,{onClick:r=>s("pickup"),children:t(Cu,{className:"center fa-icon"})}),!e.isOwner&&!e.isAnyRoomController&&(e.isRoomOwner||e.roomControllerLevel>=Ke.GUILD_ADMIN)&&t(K,{onClick:r=>s("eject"),children:t(Cu,{className:"center fa-icon"})})]})]})},dm=a=>{const{nameInfo:e=null,onClose:n=null}=a,s=i.useMemo(()=>{const r=["name-only"];return e.isFriend&&r.push("is-friend"),r},[e]);return t(xs,{objectId:e.roomIndex,category:e.category,userType:e.userType,fades:e.id!==z().userId,classNames:s,onClose:n,children:t("div",{className:"text-shadow",children:e.name})})},tc=0,nc=1,mm=3,hm=4,NO=a=>{const{avatarInfo:e=null,isDancing:n=!1,setIsDecorating:s=null,onClose:r=null}=a,[o,c]=i.useState(n&&yr()?nc:tc),{roomSession:u=null}=De(),d=f=>{let p=!0;if(f)if(f.startsWith("sign_")){const C=parseInt(f.split("_")[1]);u.sendSignMessage(C)}else switch(f){case"decorate":s(!0);break;case"change_name":nt(new la(la.INIT));break;case"change_looks":te("avatar-editor/show");break;case"expressions":p=!1,c(mm);break;case"sit":u.sendPostureMessage(yi.POSTURE_SIT);break;case"stand":u.sendPostureMessage(yi.POSTURE_STAND);break;case"wave":u.sendExpressionMessage(Es.WAVE.ordinal);break;case"blow":u.sendExpressionMessage(Es.BLOW.ordinal);break;case"laugh":u.sendExpressionMessage(Es.LAUGH.ordinal);break;case"idle":u.sendExpressionMessage(Es.IDLE.ordinal);break;case"dance_menu":p=!1,c(nc);break;case"dance":u.sendDanceMessage(1);break;case"dance_stop":u.sendDanceMessage(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":u.sendDanceMessage(parseInt(f.charAt(f.length-1)));break;case"signs":p=!1,c(hm);break;case"back":p=!1,c(tc);break;case"drop_carry_item":M(new hb);break}p&&r()},g=()=>e.amIOwner||e.amIAnyRoomController||e.roomControllerLevel>Ke.GUEST,m=s_();return l(xs,{objectId:e.roomIndex,category:Z.UNIT,userType:e.userType,onClose:r,collapsable:!0,children:[t(cn,{className:"cursor-pointer",onClick:f=>pn(e.webID),children:e.name}),o===tc&&l(j,{children:[e.allowNameChange&&t(K,{onClick:f=>d("change_name"),children:h("widget.avatar.change_name")}),g()&&t(K,{onClick:f=>d("decorate"),children:h("widget.avatar.decorate")}),t(K,{onClick:f=>d("change_looks"),children:h("widget.memenu.myclothes")}),yr()&&!m&&l(K,{onClick:f=>d("dance_menu"),children:[t(_n,{className:"right fa-icon"}),h("widget.memenu.dance")]}),!n&&!yr()&&!m&&t(K,{onClick:f=>d("dance"),children:h("widget.memenu.dance")}),n&&!yr()&&!m&&t(K,{onClick:f=>d("dance_stop"),children:h("widget.memenu.dance.stop")}),l(K,{onClick:f=>d("expressions"),children:[t(_n,{className:"right fa-icon"}),h("infostand.link.expressions")]}),l(K,{onClick:f=>d("signs"),children:[t(_n,{className:"right fa-icon"}),h("infostand.show.signs")]}),e.carryItem>0&&t(K,{onClick:f=>d("drop_carry_item"),children:h("avatar.widget.drop_hand_item")})]}),o===nc&&l(j,{children:[n&&t(K,{onClick:f=>d("dance_stop"),children:h("widget.memenu.dance.stop")}),t(K,{onClick:f=>d("dance_1"),children:h("widget.memenu.dance1")}),t(K,{onClick:f=>d("dance_2"),children:h("widget.memenu.dance2")}),t(K,{onClick:f=>d("dance_3"),children:h("widget.memenu.dance3")}),t(K,{onClick:f=>d("dance_4"),children:h("widget.memenu.dance4")}),l(K,{onClick:f=>d("back"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]}),o===mm&&l(j,{children:[t_()===uo.POSTURE_STAND&&t(K,{onClick:f=>d("sit"),children:h("widget.memenu.sit")}),Wb()&&t(K,{onClick:f=>d("stand"),children:h("widget.memenu.stand")}),Bl()&&t(K,{onClick:f=>d("wave"),children:h("widget.memenu.wave")}),Bl()&&l(K,{disabled:!Ha(),onClick:f=>d("laugh"),children:[!Ha()&&t(mt,{type:"hc"}),h("widget.memenu.laugh")]}),Bl()&&l(K,{disabled:!Ha(),onClick:f=>d("blow"),children:[!Ha()&&t(mt,{type:"hc"}),h("widget.memenu.blow")]}),t(K,{onClick:f=>d("idle"),children:h("widget.memenu.idle")}),l(K,{onClick:f=>d("back"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]}),o===hm&&l(j,{children:[l(w,{className:"menu-list-split-3",children:[t(K,{onClick:f=>d("sign_1"),children:"1"}),t(K,{onClick:f=>d("sign_2"),children:"2"}),t(K,{onClick:f=>d("sign_3"),children:"3"})]}),l(w,{className:"menu-list-split-3",children:[t(K,{onClick:f=>d("sign_4"),children:"4"}),t(K,{onClick:f=>d("sign_5"),children:"5"}),t(K,{onClick:f=>d("sign_6"),children:"6"})]}),l(w,{className:"menu-list-split-3",children:[t(K,{onClick:f=>d("sign_7"),children:"7"}),t(K,{onClick:f=>d("sign_8"),children:"8"}),t(K,{onClick:f=>d("sign_9"),children:"9"})]}),l(w,{className:"menu-list-split-3",children:[t(K,{onClick:f=>d("sign_10"),children:"10"}),t(K,{onClick:f=>d("sign_11"),children:t("i",{className:"icon icon-sign-heart"})}),t(K,{onClick:f=>d("sign_12"),children:t("i",{className:"icon icon-sign-skull"})})]}),l(w,{className:"menu-list-split-3",children:[t(K,{onClick:f=>d("sign_0"),children:"0"}),t(K,{onClick:f=>d("sign_13"),children:t("i",{className:"icon icon-sign-exclamation"})}),t(K,{onClick:f=>d("sign_15"),children:t("i",{className:"icon icon-sign-smile"})})]}),l(w,{className:"menu-list-split-3",children:[t(K,{onClick:f=>d("sign_14"),children:t("i",{className:"icon icon-sign-soccer"})}),t(K,{onClick:f=>d("sign_17"),children:t("i",{className:"icon icon-sign-yellow"})}),t(K,{onClick:f=>d("sign_16"),children:t("i",{className:"icon icon-sign-red"})})]}),l(K,{onClick:f=>d("back"),children:[t(bn,{className:"left fa-icon"}),h("generic.back")]})]})]})},sc=0,gm=1,fm=2,pm=3,vO=a=>{const{avatarInfo:e=null,onClose:n=null}=a,[s,r]=i.useState(sc),{roomSession:o=null}=De(),{petRespectRemaining:c=0,respectPet:u=null}=Zn(),d=i.useMemo(()=>{let m=!1;const f=Mr();if(f){const p=f.model.getValue(se.FIGURE_CARRY_OBJECT);p>0&&p<999999&&(m=!0)}return m},[]),g=m=>{let f=!0;if(m)switch(m){case"respect":u(e.id),c-1>=1&&(f=!1);break;case"treat":M(new Gc(e.id));break;case"pass_handitem":M(new mh(e.id));break;case"train":o.requestPetCommands(e.id);break;case"pick_up":o.pickupPet(e.id);break;case"mount":o.mountPet(e.id);break;case"toggle_riding_permission":o.togglePetRiding(e.id);break;case"toggle_breeding_permission":o.togglePetBreeding(e.id);break;case"dismount":o.dismountPet(e.id);break;case"saddle_off":o.removePetSaddle(e.id);break;case"breed":break;case"harvest":o.harvestPet(e.id);break;case"revive":break;case"compost":o.compostPlant(e.id);break;case"buy_saddle":te("catalog/open/"+X("catalog.links")["pets.buy_saddle"]);break}f&&n()};return i.useEffect(()=>{r(m=>e.petType===qt.MONSTERPLANT?pm:e.saddle&&!e.rider?gm:e.rider?fm:sc)},[e]),l(xs,{objectId:e.roomIndex,category:Z.UNIT,userType:bt.PET,onClose:n,collapsable:!0,children:[t(cn,{children:e.name}),s===sc&&l(j,{children:[c>0&&t(K,{onClick:m=>g("respect"),children:h("infostand.button.petrespect",["count"],[c.toString()])}),t(K,{onClick:m=>g("train"),children:h("infostand.button.train")}),t(K,{onClick:m=>g("pick_up"),children:h("infostand.button.pickup")}),e.petType===qt.HORSE&&t(K,{onClick:m=>g("buy_saddle"),children:h("infostand.button.buy_saddle")}),[qt.BEAR,qt.TERRIER,qt.CAT,qt.DOG,qt.PIG].indexOf(e.petType)>-1&&t(K,{onClick:m=>g("breed"),children:h("infostand.button.breed")})]}),s===gm&&l(j,{children:[t(K,{onClick:m=>g("mount"),children:h("infostand.button.mount")}),l(K,{onClick:m=>g("toggle_riding_permission"),gap:1,children:[t("input",{type:"checkbox",checked:!!e.publiclyRideable,readOnly:!0}),h("infostand.button.toggle_riding_permission")]}),c>0&&t(K,{onClick:m=>g("respect"),children:h("infostand.button.petrespect",["count"],[c.toString()])}),t(K,{onClick:m=>g("train"),children:h("infostand.button.train")}),t(K,{onClick:m=>g("pick_up"),children:h("infostand.button.pickup")}),t(K,{onClick:m=>g("saddle_off"),children:h("infostand.button.saddleoff")})]}),s===fm&&l(j,{children:[t(K,{onClick:m=>g("dismount"),children:h("infostand.button.dismount")}),c>0&&t(K,{onClick:m=>g("respect"),children:h("infostand.button.petrespect",["count"],[c.toString()])})]}),s===pm&&l(j,{children:[t(K,{onClick:m=>g("pick_up"),children:h("infostand.button.pickup")}),e.dead&&t(K,{onClick:m=>g("revive"),children:h("infostand.button.revive")}),o.isRoomOwner&&t(K,{onClick:m=>g("compost"),children:h("infostand.button.compost")}),!e.dead&&e.energy/e.maximumEnergy<.98&&t(K,{onClick:m=>g("treat"),children:h("infostand.button.pettreat")}),!e.dead&&e.level===e.maximumLevel&&e.breedable&&l(j,{children:[l(K,{onClick:m=>g("toggle_breeding_permission"),gap:1,children:[t("input",{type:"checkbox",checked:e.publiclyBreedable,readOnly:!0}),h("infostand.button.toggle_breeding_permission")]}),t(K,{onClick:m=>g("breed"),children:h("infostand.button.breed")})]})]}),d&&t(K,{onClick:m=>g("pass_hand_item"),children:h("infostand.button.pass_hand_item")})]})},rc=0,Im=1,Em=2,Cm=3,TO=a=>{const{avatarInfo:e=null,onClose:n=null}=a,[s,r]=i.useState(rc),{roomSession:o=null}=De(),{petRespectRemaining:c=0,respectPet:u=null}=Zn(),d=i.useMemo(()=>o.isRoomOwner||o.controllerLevel>=Ke.GUEST||z().isModerator,[o]),g=i.useMemo(()=>{let f=!1;const p=Mr();if(p){const C=p.model.getValue(se.FIGURE_CARRY_OBJECT);C>0&&C<999999&&(f=!0)}return f},[]),m=f=>{let p=!0;if(f)switch(f){case"respect":u(e.id),c-1>=1&&(p=!1);break;case"treat":M(new Gc(e.id));break;case"pass_handitem":M(new mh(e.id));break;case"pick_up":o.pickupPet(e.id);break;case"mount":o.mountPet(e.id);break;case"dismount":o.dismountPet(e.id);break}p&&n()};return i.useEffect(()=>{r(f=>e.petType===qt.MONSTERPLANT?Cm:e.saddle&&!e.rider?Im:e.rider?Em:rc)},[e]),l(xs,{objectId:e.roomIndex,category:Z.UNIT,userType:bt.PET,onClose:n,collapsable:!0,children:[t(cn,{children:e.name}),s===rc&&c>0&&t(K,{onClick:f=>m("respect"),children:h("infostand.button.petrespect",["count"],[c.toString()])}),s===Im&&l(j,{children:[!!e.publiclyRideable&&t(K,{onClick:f=>m("mount"),children:h("infostand.button.mount")}),c>0&&t(K,{onClick:f=>m("respect"),children:h("infostand.button.petrespect",["count"],[c.toString()])})]}),s===Em&&l(j,{children:[t(K,{onClick:f=>m("dismount"),children:h("infostand.button.dismount")}),c>0&&t(K,{onClick:f=>m("respect"),children:h("infostand.button.petrespect",["count"],[c.toString()])})]}),s===Cm&&!e.dead&&e.energy/e.maximumEnergy<.98&&t(K,{onClick:f=>m("treat"),children:h("infostand.button.pettreat")}),d&&t(K,{onClick:f=>m("pick_up"),children:h("infostand.button.pickup")}),g&&t(K,{onClick:f=>m("pass_hand_item"),children:h("infostand.button.pass_hand_item")})]})},oc=0,bm=1,_m=2,wO=a=>{const{avatarInfo:e=null,onClose:n=null}=a,[s,r]=i.useState(oc),[o,c]=i.useState(""),[u,d]=i.useState("");F(gb,p=>{const C=p.getParser();if(C.botId===e.webID)switch(C.commandId){case Qe.CHANGE_BOT_NAME:c(C.data),r(bm);return;case Qe.CHANGE_BOT_MOTTO:d(C.data),r(_m);return;case Qe.SETUP_CHAT:{const E=C.data,b=E.split(E.indexOf(";#;")===-1?";":";#;");(b.length===3||b.length===4)&&(nt(new Ti(e.roomIndex,Z.UNIT,e.webID,b[0],b[1].toLowerCase()==="true"||b[1]==="1",parseInt(b[2]),b[3]?b[3].toLowerCase()==="true"||b[3]==="1":!1)),n());return}}});const g=p=>M(new fb(e.webID,p)),m=p=>{let C=!0;if(p)switch(p){case"donate_to_all":g(Qe.DONATE_TO_ALL),M(new Ms(e.webID,Qe.DONATE_TO_ALL,""));break;case"donate_to_user":g(Qe.DONATE_TO_USER),M(new Ms(e.webID,Qe.DONATE_TO_USER,""));break;case"change_bot_name":g(Qe.CHANGE_BOT_NAME),C=!1;break;case"save_bot_name":M(new Ms(e.webID,Qe.CHANGE_BOT_NAME,o));break;case"change_bot_motto":g(Qe.CHANGE_BOT_MOTTO),C=!1;break;case"save_bot_motto":M(new Ms(e.webID,Qe.CHANGE_BOT_MOTTO,u));break;case"dress_up":M(new Ms(e.webID,Qe.DRESS_UP,""));break;case"random_walk":M(new Ms(e.webID,Qe.RANDOM_WALK,""));break;case"setup_chat":g(Qe.SETUP_CHAT),C=!1;break;case"dance":M(new Ms(e.webID,Qe.DANCE,""));break;case"nux_take_tour":_e().createLinkEvent("help/tour"),M(new Ms(e.webID,Qe.NUX_TAKE_TOUR,""));break;case"pick":M(new ch(e.webID));break}C&&n()};i.useEffect(()=>{r(oc)},[e]);const f=e.amIOwner||e.amIAnyRoomController;return l(xs,{objectId:e.roomIndex,category:Z.UNIT,userType:bt.RENTABLE_BOT,onClose:n,collapsable:!0,children:[t(cn,{children:e.name}),s===oc&&f&&l(j,{children:[e.botSkills.indexOf(Qe.DONATE_TO_ALL)>=0&&t(K,{onClick:p=>m("donate_to_all"),children:h("avatar.widget.donate_to_all")}),e.botSkills.indexOf(Qe.DONATE_TO_USER)>=0&&t(K,{onClick:p=>m("donate_to_user"),children:h("avatar.widget.donate_to_user")}),e.botSkills.indexOf(Qe.CHANGE_BOT_NAME)>=0&&t(K,{onClick:p=>m("change_bot_name"),children:h("avatar.widget.change_bot_name")}),e.botSkills.indexOf(Qe.CHANGE_BOT_MOTTO)>=0&&t(K,{onClick:p=>m("change_bot_motto"),children:h("avatar.widget.change_bot_motto")}),e.botSkills.indexOf(Qe.DRESS_UP)>=0&&t(K,{onClick:p=>m("dress_up"),children:h("avatar.widget.dress_up")}),e.botSkills.indexOf(Qe.RANDOM_WALK)>=0&&t(K,{onClick:p=>m("random_walk"),children:h("avatar.widget.random_walk")}),e.botSkills.indexOf(Qe.SETUP_CHAT)>=0&&t(K,{onClick:p=>m("setup_chat"),children:h("avatar.widget.setup_chat")}),e.botSkills.indexOf(Qe.DANCE)>=0&&t(K,{onClick:p=>m("dance"),children:h("avatar.widget.dance")}),e.botSkills.indexOf(Qe.NO_PICK_UP)===-1&&t(K,{onClick:p=>m("pick"),children:h("avatar.widget.pick_up")})]}),s===bm&&l(v,{className:"menu-item",onClick:null,gap:1,children:[t(N,{variant:"white",children:h("bot.skill.name.configuration.new.name")}),t("input",{type:"text",className:"form-control form-control-sm",value:o,maxLength:X("bot.name.max.length",15),onChange:p=>c(p.target.value)}),l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(D,{fullWidth:!0,variant:"secondary",onClick:p=>m(null),children:h("cancel")}),t(D,{fullWidth:!0,variant:"success",onClick:p=>m("save_bot_name"),children:h("save")})]})]}),s===_m&&l(v,{className:"menu-item",onClick:null,gap:1,children:[t(N,{variant:"white",children:h("bot.skill.name.configuration.new.motto")}),t("input",{type:"text",className:"form-control form-control-sm",value:u,maxLength:X("motto.max.length",38),onChange:p=>d(p.target.value)}),l(w,{alignItems:"center",justifyContent:"between",gap:1,children:[t(D,{fullWidth:!0,variant:"secondary",onClick:p=>m(null),children:h("cancel")}),t(D,{fullWidth:!0,variant:"success",onClick:p=>m("save_bot_motto"),children:h("save")})]})]})]})},yO=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(!1),[o,c]=i.useState(null),{avatarInfo:u=null,setAvatarInfo:d=null,activeNameBubble:g=null,setActiveNameBubble:m=null,nameBubbles:f=[],removeNameBubble:p=null,productBubbles:C=[],confirmingProduct:E=null,updateConfirmingProduct:b=null,removeProductBubble:I=null,isDecorating:_=!1,setIsDecorating:S=null}=Zh(),{roomSession:T=null}=De();Te(xn.NORMAL_MODE,A=>{e&&n(!1)}),Te(xn.GAME_MODE,A=>{e||n(!0)}),Ye(pb.RSDE_DANCE,A=>{A.roomIndex===T.ownRoomIndex&&r(A.danceId!==0)}),st(Ti.UPDATE_CHAT,A=>c(A));const R=()=>{if(!T||e)return null;if(g)return t(dm,{nameInfo:g,onClose:()=>m(null)});if(u)switch(u.type){case Ar.FURNI:{const A=u;return _?t(SO,{avatarInfo:A,onClose:()=>d(null)}):null}case Rt.OWN_USER:case Rt.PEER:{const A=u;return X("user.tags.enabled")&&z().getUserTags(A.roomIndex),A.isSpectatorMode?null:A.isOwnUser?mc.isRunning()?null:t(NO,{avatarInfo:A,isDancing:s,setIsDecorating:S,onClose:()=>d(null)}):t(bO,{avatarInfo:A,onClose:()=>d(null)})}case xr.PET_INFO:{const A=u;return A.isOwner?t(vO,{avatarInfo:A,onClose:()=>d(null)}):t(TO,{avatarInfo:A,onClose:()=>d(null)})}case Dr.RENTABLE_BOT:return t(wO,{avatarInfo:u,onClose:()=>d(null)})}return null},y=()=>{if(!u)return null;switch(u.type){case Ar.FURNI:return t(hO,{avatarInfo:u,onClose:()=>d(null)});case Rt.OWN_USER:case Rt.PEER:return t(CO,{avatarInfo:u,setAvatarInfo:d,onClose:()=>d(null)});case Rt.BOT:return t(mO,{avatarInfo:u,onClose:()=>d(null)});case Dr.RENTABLE_BOT:return t(fO,{avatarInfo:u,onClose:()=>d(null)});case xr.PET_INFO:return t(gO,{avatarInfo:u,onClose:()=>d(null)})}};return l(j,{children:[_&&t(_O,{userId:z().userId,userName:z().userName,roomIndex:T.ownRoomIndex,setIsDecorating:S}),R(),u&&t(v,{alignItems:"end",className:"nitro-infostand-container",children:y()}),f.length>0&&f.map((A,U)=>t(dm,{nameInfo:A,onClose:()=>p(U)},U)),C.length>0&&C.map((A,U)=>t(dO,{item:A,updateConfirmingProduct:b,onClose:()=>I(U)},A.id)),o&&t(oO,{chatEvent:o,onClose:()=>c(null)}),E&&t(aO,{item:E,onClose:()=>b(null)}),t(rO,{})]})},Yr=({iconClass:a,onClick:e})=>t(Se,{className:"bh-button",itemActive:!1,onClick:e,children:t("i",{className:`icon ${a} flash-bright`})}),ac=({min:a,max:e,step:n,value:s,onChange:r,onMouseUp:o})=>t("input",{type:"range",className:"custom-range",min:a,max:e,step:n,value:s,onChange:c=>r(Number(c.target.value)),onMouseUp:o}),RO=0,OO=40,kO=a=>{const[e,n]=i.useState(0),[s,r]=i.useState(4),[o,c]=i.useState(0),[u,d]=i.useState(-1),{sendChat:g}=ou(),m=()=>{if(u===-1){d(0),g(":setrotation 0",0);return}d(S=>{const T=(S+1)%8;return g(`:setrotation ${T}`,0),T})},f=S=>{g(`:buildheight ${S}`,0)},p=S=>{g(`:setspeed ${S}`,0)},C=S=>{g(`:setstate ${S}`,0)},E=(S,T)=>{(isNaN(S)||S<=0)&&(S=0),S>40&&(S=40),S=parseFloat(S.toFixed(1)),n(S),T&&f(S)},b=(S,T)=>{(isNaN(S)||S<=0)&&(S=0),S>100&&(S=100),r(S),T&&p(S)},I=(S,T)=>{(isNaN(S)||S<=0)&&(S=0),S>100&&(S=100),c(S),T&&C(S)},_=S=>{switch(S){case"buildheight":n(0),g(":buildheight",0);break;case"rotation":d(-1),g(":setrotation",0);break;case"state":c(0),g(":setstate",0);break;case"speed":r(4),g(":setspeed 4",0);break}};return t(v,{children:l(v,{fullWidth:!0,children:[l(N,{bold:!0,children:[h("builder.tools.buildheight"),": ",e]}),l(w,{gap:0,className:"bh-range",alignItems:"center",justifyContent:"between",children:[t(Yr,{iconClass:"icon-decrease-height",onClick:()=>E(e-.1,!0)}),t(ac,{min:RO,max:OO,step:.1,value:e,onChange:S=>E(S),onMouseUp:()=>E(e,!0)}),t(Yr,{iconClass:"icon-increase-height",onClick:()=>E(e+.1,!0)})]}),l(N,{bold:!0,children:[h("builder.tools.speed"),": ",s]}),l(w,{gap:1,className:"bh-range",alignItems:"center",justifyContent:"between",children:[t(Yr,{iconClass:"icon-arrows-reverse",onClick:()=>b(s-1,!0)}),t(ac,{min:0,max:100,step:1,value:s,onChange:S=>b(S),onMouseUp:()=>b(s,!0)}),t(Yr,{iconClass:"icon-arrows",onClick:()=>b(s+1,!0)})]}),l(N,{bold:!0,children:[h("builder.tools.state"),": ",o]}),l(w,{gap:1,className:"bh-range",alignItems:"center",justifyContent:"between",children:[t(Yr,{iconClass:"icon-arrows-reverse",onClick:()=>I(o-1,!0)}),t(ac,{min:0,max:100,step:1,value:o,onChange:S=>I(S),onMouseUp:()=>I(o,!0)}),t(Yr,{iconClass:"icon-arrows",onClick:()=>I(o+1,!0)})]}),l(w,{alignItems:"center",justifyContent:"between",gap:3,children:[l(v,{className:"bh-rotation",alignItems:"center",children:[t(N,{bold:!0,children:h("builder.tools.rotation")}),t("i",{className:`icon icon-door-direction-${u===-1?"disabled":u} cursor-pointer`,onClick:()=>m()}),t(D,{overflow:"hidden",variant:"primary",onClick:()=>_("rotation"),children:h("builder.tools.reset.rotation")})]}),l(v,{fullWidth:!0,children:[t(D,{overflow:"hidden",variant:"primary",onClick:()=>_("buildheight"),children:h("builder.tools.reset.bh")}),t(D,{overflow:"hidden",variant:"primary",onClick:()=>_("speed"),children:h("builder.tools.reset.speed")}),t(D,{overflow:"hidden",variant:"primary",onClick:()=>_("state"),children:h("builder.tools.reset.state")})]})]})]})})},AO=a=>{const[e,n]=i.useState(0),[s,r]=i.useState(0),[o,c]=i.useState(0),{sendChat:u}=ou(),{canUseBuilder:d,isBuilderVisible:g,setIsBuilderVisible:m}=Zn(),{toggleIsDecorating:f}=Zh(),p=(E,b)=>()=>{switch(E){case"buildheight":n(I=>Math.max(0,Math.round((I+parseFloat(b))*10)/10));break;case"rotation":break;case"speed":c(I=>Math.max(0,Math.min(10,I+parseInt(b))));break;case"state":r(I=>Math.max(0,Math.min(100,I+parseInt(b))));break;case"screenShot":u(":screenshot",0);break;case"freezeavatar":f();break;case"whereisit":u(":whereisit",0);break;case"teleport":u(":teleport",0);break;case"togglepyramids":u(":togglepyramids",0);break;case"reloadroom":u(":reloadroom",0);break;case"unloadroom":u(":unload",0);break;case"maxfloor":u(":maxfloor",0);break;case"autofloor":u(":autofloor",0);break;case"editfloorplan":u(":floor",0);break;case"hidewired":u(":hidewired",0);break;default:u(`:${E}`,0)}},C=E=>!0;return!d||!g?null:l(ie,{uniqueKey:"builder-tools-widget",className:"nitro-builder-tools-widget",theme:"primary-slim",children:[t(ae,{headerText:h("builder.tools.title"),onCloseClick:()=>m(!1)}),l(ne,{children:[t(kO,{}),l(v,{gap:2,children:[t(N,{bold:!0,children:h("builder.tools.roomobjectcontrols")}),l(re,{gap:1,style:{gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))"},maxContent:!0,children:[t(D,{onClick:p("screenshot"),children:h("builder.tools.screenshot")}),t(D,{onClick:p("freezeavatar"),children:h("builder.tools.freezeavatar")}),t(D,{onClick:p("teleport"),disabled:!C(),children:h("builder.tools.teleport")}),t(D,{onClick:p("findbh"),disabled:!C(),children:h("builder.tools.findbh")}),t(D,{onClick:p("whereisit"),disabled:!C(),children:h("builder.tools.whereisit")}),t(D,{onClick:p("togglepyramids"),disabled:!C(),children:h("builder.tools.togglepyramids")}),t(D,{onClick:p("togglecarpets"),disabled:!C(),children:h("builder.tools.togglecarpets")}),t(D,{onClick:p("togglewalls"),disabled:!C(),children:h("builder.tools.togglewalls")}),t(D,{onClick:p("selectstack"),disabled:!C(),children:h("builder.tools.selectstack")}),t(D,{onClick:p("movestack"),disabled:!C(),children:h("builder.tools.movestack")}),t(D,{onClick:p("pickupstack"),disabled:!C(),children:h("builder.tools.pickupstack")}),t(D,{onClick:p("undostack"),disabled:!C(),children:h("builder.tools.undostack")}),t(D,{onClick:p("duplicatestack"),disabled:!C(),children:h("builder.tools.duplicatestack")})]}),t(N,{bold:!0,children:h("builder.tools.roomsettings")}),l(re,{gap:1,style:{gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))"},maxContent:!0,children:[t(D,{onClick:p("reloadroom"),disabled:!C(),children:h("builder.tools.reloadroom")}),t(D,{onClick:p("unloadroom"),disabled:!C(),children:h("builder.tools.unloadroom")}),t(D,{onClick:p("maxfloor"),disabled:!C(),children:h("builder.tools.maxfloor")}),t(D,{onClick:p("autofloor"),disabled:!C(),children:h("builder.tools.autofloor")}),t(D,{onClick:p("noitemfloor"),disabled:!C(),children:h("builder.tools.noitemfloor")}),t(D,{onClick:p("editfloorplan"),children:h("builder.tools.editfloorplan")}),t(D,{onClick:p("hidewired"),disabled:!C(),children:h("builder.tools.hidewired")}),t(D,{onClick:p("pickwired"),disabled:!C(),children:h("builder.tools.pickwired")})]})]})]})]})},xO=a=>{const{addChatEmoji:e=null}=a,[n,s]=i.useState(!1),r=i.useRef(null),o=i.useRef(null),c=g=>{e(g.native),s(!1)},u=g=>{const m="emoji-icon";o.current&&!o.current.contains(g.target)&&!g.target.classList.contains(m)&&(s(!1),document.removeEventListener("mousedown",u))},d=g=>{s(m=>!m)};return i.useEffect(()=>{n&&document.addEventListener("mousedown",u)},[o,n]),l(j,{children:[t(P,{pointer:!0,onClick:d,innerRef:r,className:"emoji-icon",children:""}),t(Mc,{show:n,target:r,placement:"top-end",children:t(Ko,{children:t(sf,{data:rf,onEmojiSelect:c,theme:"light",perLine:7,emojiSize:19})})})]})},DO=a=>{const{chatStyleId:e=0,chatStyleIds:n=null,selectChatStyleId:s=null}=a,[r,o]=i.useState(null),[c,u]=i.useState(!1),d=m=>{s(m),u(!1)},g=m=>{let f=!1;u(p=>(f=!p,f)),f&&o(m.target)};return i.useEffect(()=>{c||o(null)},[c]),l(j,{children:[t(P,{pointer:!0,className:"icon chatstyles-icon",onClick:g}),t(Mc,{show:c,target:r,placement:"top",children:t(Ko,{className:"nitro-chat-style-selector-container image-rendering-pixelated",children:t(ne,{overflow:"hidden",className:"bg-transparent",children:t(re,{columnCount:3,overflow:"auto",children:n&&n.length>0&&n.map(m=>t(w,{center:!0,pointer:!0,className:"bubble-parent-container",onClick:f=>d(m),children:t(P,{className:"bubble-container",children:t(P,{className:`chat-bubble bubble-${m}`,children:""})},m)},m))})})})})]})},PO=()=>{const[a,e]=i.useState(!1),[n,s]=i.useState(!1),r=i.useRef(null),o=()=>{a?s(!n):(e(!0),s(!1))},c=()=>{s(!1)},u=()=>{s(!1),e(!1)},d=()=>{s(!1),e(!1)};return i.useEffect(()=>{const g=m=>{r.current&&!r.current.contains(m.target)&&s(!1)};return n&&document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[n]),l("div",{className:"chat-input-voice-button-container",ref:r,children:[t("div",{className:`chat-input-voice-button ${a?"recording":""}`,role:"button","aria-label":a?"Pausar gravao":"Gravar udio",title:a?"Pausar gravao":"Gravar udio",onClick:o,children:t("i",{className:a?"fas fa-pause fa-icon":"fas fa-microphone fa-icon"})}),n&&a&&l("div",{className:"chat-input-voice-menu",children:[l(P,{className:"voice-menu-item",onClick:c,role:"button",children:[t("i",{className:"fas fa-play fa-icon",style:{marginRight:"8px"}}),"Reproduzir udio"]}),l(P,{className:"voice-menu-item",onClick:u,role:"button",children:[t("i",{className:"fas fa-paper-plane fa-icon",style:{marginRight:"8px"}}),"Enviar udio"]}),l(P,{className:"voice-menu-item",onClick:d,role:"button",children:[t("i",{className:"fas fa-trash fa-icon",style:{marginRight:"8px"}}),"Deletar"]})]})]})},MO=a=>{const[e,n]=i.useState(""),{chatStyleId:s=0,updateChatStyleId:r=null}=Zn(),{selectedUsername:o="",floodBlocked:c=!1,floodBlockedSeconds:u=0,setIsTyping:d=null,setIsIdle:g=null,sendChat:m=null}=ou(),{roomSession:f=null}=De(),{isActive:p,selectedUsers:C,getWhisperCommand:E}=ru(),b=i.useRef(),I=i.useMemo(()=>h("widgets.chatinput.mode.whisper"),[]),_=i.useMemo(()=>h("widgets.chatinput.mode.shout"),[]),S=i.useMemo(()=>h("widgets.chatinput.mode.speak"),[]),T=i.useMemo(()=>X("chat.input.maxlength",100),[]),R=i.useCallback(()=>{const V=document.activeElement;return!(!V||b&&b.current===V||!(V instanceof HTMLInputElement)&&!(V instanceof HTMLTextAreaElement))},[b]),y=i.useCallback(()=>{b.current.focus(),b.current.setSelectionRange(b.current.value.length*2,b.current.value.length*2)},[b]),A=i.useCallback(()=>{n(V=>V!==I||!o.length?V:`${V} ${o}`)},[o,I]),U=i.useCallback((V,B=!1)=>{if(!V||V==="")return;let W=B?_s.CHAT_SHOUT:_s.CHAT_DEFAULT,G=V;const H=G.split(" ");let Q="",ee="";switch(H[0]){case I:if(W=_s.CHAT_WHISPER,p&&C.length>0){for(H.shift();H.length>0&&H[0].startsWith("@");)H.shift();ee=E()}else Q=H[1],ee=I+" "+Q+" ",H.shift(),H.shift();break;case _:W=_s.CHAT_SHOUT,H.shift();break;case S:W=_s.CHAT_DEFAULT,H.shift();break}G=H.join(" "),d(!1),g(!1),G.length<=T&&(/%CC%/g.test(encodeURIComponent(G))?n(""):(n(""),m(G,W,Q,s))),n(ee)},[I,_,S,T,s,d,g,m,p,C,E]),L=i.useCallback(V=>{!V||!V.length?d(!1):(d(!0),g(!0)),n(V)},[d,g]),O=i.useCallback(V=>{if(c||!b.current||R())return;document.activeElement!==b.current&&y();const B=V.target.value;switch(V.key){case" ":case"Space":A();return;case"NumpadEnter":case"Enter":U(B,V.shiftKey);return;case"Backspace":if(B){const W=B.split(" ");W[0]===I&&W.length===3&&W[2]===""&&n("")}return}},[c,b,I,R,y,A,U]);st(js.CHAT_INPUT_CONTENT,V=>{switch(V.chatMode){case js.WHISPER:{n(p?E():`${I} ${V.userName} `);return}case js.SHOUT:return}}),i.useEffect(()=>{p&&b.current&&b.current.value.startsWith(I)&&n(E())},[p,C,E,I]);const k=i.useMemo(()=>{let V=[];const B=X("chat.styles");for(const W of B)if(W){if(W.minRank>0){z().hasSecurity(W.minRank)&&V.push(W.styleId);continue}if(W.isSystemStyle&&z().hasSecurity(Ke.MODERATOR)){V.push(W.styleId);continue}if(!(X("chat.styles.disabled").indexOf(W.styleId)>=0)){if(W.isHcOnly&&Dn()>=Nn.CLUB){V.push(W.styleId);continue}if(W.isAmbassadorOnly&&z().isAmbassador){V.push(W.styleId);continue}!W.isHcOnly&&!W.isAmbassadorOnly&&V.push(W.styleId)}}return V},[]),x=i.useCallback(V=>{n(B=>B+V),d(!0)},[d]);return i.useEffect(()=>(document.body.addEventListener("keydown",O),()=>{document.body.removeEventListener("keydown",O)}),[O]),!f||f.isSpectator?null:xc.createPortal(l("div",{className:"nitro-chat-input-wrapper",children:[l("div",{className:"nitro-chat-input-container",children:[l("div",{className:"input-sizer align-items-center",children:[!c&&t("input",{ref:b,type:"text",className:"chat-input",placeholder:h("widgets.chatinput.default"),value:e,maxLength:T,onChange:V=>L(V.target.value),onMouseDown:V=>y()}),c&&l(N,{variant:"danger",children:[h("chat.input.alert.flood",["time"],[u.toString()])," "]})]}),t(xO,{addChatEmoji:x}),t(DO,{chatStyleId:s,chatStyleIds:k,selectChatStyleId:r})]}),t(PO,{})]}),document.getElementById("chat-input-container"))},LO=()=>{let a=null;self.onmessage=e=>{if(!e)return;const n=e.data;switch(n.action){case"START":a=setInterval(()=>postMessage(null),n.content);break;case"STOP":a&&(clearInterval(a),a=null);break}}};class UO extends Worker{constructor(e){const n=e.toString(),s=new Blob([`(${n})()`]);super(URL.createObjectURL(s))}}const FO=a=>{const{chat:e=null,makeRoom:n=null,bubbleWidth:s=wt.CHAT_BUBBLE_WIDTH_NORMAL}=a,[r,o]=i.useState(!1),[c,u]=i.useState(!1),d=i.useRef(),g=i.useMemo(()=>{switch(s){case wt.CHAT_BUBBLE_WIDTH_NORMAL:return 350;case wt.CHAT_BUBBLE_WIDTH_THIN:return 240;case wt.CHAT_BUBBLE_WIDTH_WIDE:return 2e3}},[s]);return i.useEffect(()=>{o(!1);const m=d.current;if(!m)return;const f=m.offsetWidth,p=m.offsetHeight;e.width=f,e.height=p,e.elementRef=m;let C=e.left,E=e.top;return!C&&!E&&(C=e.location.x-f/2,E=m.parentElement.offsetHeight-p,e.left=C,e.top=E),u(!0),()=>{e.elementRef=null,u(!1)}},[e]),i.useEffect(()=>{!c||!e||r||(n&&n(e),o(!0))},[e,c,r,n]),l("div",{ref:d,className:`bubble-container ${r?"visible":"invisible"}`,onClick:m=>Y().selectRoomObject(e.roomId,e.senderId,Z.UNIT),children:[e.styleId===0&&t("div",{className:"user-container-bg",style:{backgroundColor:e.color}}),l("div",{className:`chat-bubble bubble-${e.styleId} type-${e.type}`,style:{maxWidth:g},children:[t("div",{className:"user-container",children:e.imageUrl&&e.imageUrl.length>0&&t("div",{className:"user-image",style:{backgroundImage:`url(${e.imageUrl})`}})}),l("div",{className:"chat-content",children:[t("b",{className:"username mr-1",dangerouslySetInnerHTML:{__html:`${e.username}: `}}),t("span",{className:"message",dangerouslySetInnerHTML:{__html:`${e.formattedText}`}}),e.repeatCount>1&&l("span",{className:"message-repeat-count",children:[" (",e.repeatCount,"x)"]})]}),t("div",{className:"pointer"})]})]})},VO=a=>{const{chatMessages:e=[],setChatMessages:n=null,chatSettings:s=null,getScrollSpeed:r=6e3}=dv(),o=i.useRef(),c=i.useCallback(()=>{n(g=>{if(g){const m=g.filter(f=>f.top>-f.height*2);if(m.length!==g.length)return m}return g})},[n]),u=i.useCallback((g,m,f)=>{for(let p=e.indexOf(g)-1;p>=0;p--){const C=e[p];if(!(!C||g===C||f.indexOf(C)>=0||C.top+C.height-m>g.top+g.height)&&J_(g,C,-m,0)){const E=Math.abs(C.top+C.height-g.top);f.push(C),C.top-=E,C.skipMovement=!0,u(C,E,f)}}},[e]),d=i.useCallback(g=>{if(s.mode===wt.CHAT_MODE_FREE_FLOW)g.skipMovement=!0,u(g,0,[g]),c();else{const m=g.top+g.height,f=g.height,p=o.current.offsetHeight-m,C=f-p;p<f&&(n(E=>(E.forEach(b=>{b!==g&&(b.top-=C)}),E)),c())}},[s,u,c,n]);return i.useEffect(()=>{const g=(m=null)=>{if(!o||!o.current)return;const f=o.current.offsetHeight,p=Math.round(document.body.offsetHeight*X("chat.viewer.height.percentage"));o.current.style.height=`${p}px`,n(C=>(C&&C.forEach(E=>E.top-=f-p),C))};return window.addEventListener("resize",g),g(),()=>{window.removeEventListener("resize",g)}},[n]),i.useEffect(()=>{const g=f=>{n(p=>(p.forEach(C=>{if(C.skipMovement){C.skipMovement=!1;return}C.top-=f}),p)),c()},m=new UO(LO);return m.onmessage=()=>g(15),m.postMessage({action:"START",content:r}),()=>{m.postMessage({action:"STOP"})}},[r,c,n]),t("div",{ref:o,className:"nitro-chat-widget",children:e.map(g=>t(FO,{chat:g,makeRoom:d,bubbleWidth:s.weight},g.id))})},Og=a=>{const{title:e=null,items:n=[],selectItem:s=null,onClose:r=null}=a,[o,c]=i.useState(null),[u,d]=i.useState(""),g=z().isModerator,m=i.useMemo(()=>{const f=u.toLocaleLowerCase();return n.filter(p=>{var C;return(C=p.name)==null?void 0:C.toLocaleLowerCase().includes(f)})},[n,u]);return i.useEffect(()=>{o&&s(o)},[o,s]),l(ie,{className:"nitro-chooser-widget",theme:"primary-slim",children:[t(ae,{headerText:e,onCloseClick:r}),l(ne,{overflow:"hidden",gap:2,children:[t("input",{type:"text",className:"form-control form-control-sm",placeholder:h("generic.search"),value:u,onChange:f=>d(f.target.value)}),t(hl,{rows:m,rowRender:f=>t(w,{alignItems:"center",className:zt("rounded p-1",o===f&&"bg-muted"),pointer:!0,onClick:p=>c(f),children:l(N,{truncate:!0,children:[f.name," ",g&&" - "+f.id]})})})]})]})},BO=a=>{const{items:e=null,onClose:n=null,selectItem:s=null,populateChooser:r=null}=Cv();return i.useEffect(()=>{const o={linkReceived:c=>{c.split("/"),r()},eventUrlPrefix:"furni-chooser/"};return _t(o),()=>St(o)},[r]),e?t(Og,{title:h("widget.chooser.furni.title"),items:e,selectItem:s,onClose:n}):null},GO=a=>{const{items:e=null,onClose:n=null,selectItem:s=null,populateChooser:r=null}=kv();return i.useEffect(()=>{const o={linkReceived:c=>{c.split("/"),r()},eventUrlPrefix:"user-chooser/"};return _t(o),()=>St(o)},[r]),e?t(Og,{title:h("widget.chooser.user.title"),items:e,selectItem:s,onClose:n}):null},HO=a=>{const[e,n]=i.useState(!1),{users:s=[],answer:r=null}=hv();return i.useEffect(()=>{n(!!s.length)},[s]),e?l(ie,{className:"nitro-widget-doorbell",theme:"primary-slim",children:[t(ae,{headerText:h("navigator.doorbell.title"),onCloseClick:o=>n(!1)}),l(ne,{overflow:"hidden",gap:0,children:[t(v,{gap:2,children:l(re,{gap:1,className:"text-black fw-bold border-bottom px-1 pb-1",children:[t(P,{className:"g-col-6",children:h("generic.username")}),t(P,{className:"g-col-6"})]})}),t(v,{overflow:"auto",className:"striped-children",gap:0,children:s&&s.length>0&&s.map(o=>l(re,{gap:1,alignItems:"center",className:"text-black border-bottom p-1",children:[t(P,{className:"g-col-6",children:o}),t(P,{className:"g-col-6",children:l(w,{alignItems:"center",justifyContent:"end",gap:1,children:[t(D,{variant:"success",onClick:()=>r(o,!0),children:h("generic.accept")}),t(D,{variant:"danger",onClick:()=>r(o,!1),children:h("generic.deny")})]})})]},o))})]})]}):null},du=a=>{const{objectId:e=-1,category:n=-1,noFollow:s=!1,position:r="absolute",...o}=a,[c,u]=i.useState({x:-1,y:-1}),d=i.useRef();return i.useEffect(()=>{let g=!1;const m=()=>{const p=Oe();return Wc(p.roomId,e,n,1)},f=()=>{const p=m();!p||!d.current||u({x:Math.round(p.left+p.width/2-d.current.offsetWidth/2),y:Math.round(p.top-d.current.offsetHeight+10)})};return s?f():(g=!0,zs().add(f)),()=>{g&&zs().remove(f)}},[e,n,s]),t(P,{innerRef:d,position:r,visible:c.x+(d.current?d.current.offsetWidth:0)>-1,className:"object-location",style:{left:c.x,top:c.y},...o})},WO=a=>{const{roomIndex:e=-1,request:n=null,hideFriendRequest:s=null,requestResponse:r=null}=a;return t(du,{objectId:e,category:Z.UNIT,children:t(P,{className:"nitro-friend-request-dialog nitro-context-menu p-2",children:l(v,{children:[l(w,{alignItems:"center",justifyContent:"between",gap:2,children:[t(N,{variant:"white",fontSize:6,children:h("widget.friendrequest.from",["username"],[n.name])}),t(Ln,{className:"cursor-pointer fa-icon",onClick:o=>s(n.requesterUserId)})]}),l(w,{justifyContent:"end",gap:1,children:[t(D,{variant:"danger",onClick:o=>r(n.requesterUserId,!1),children:h("widget.friendrequest.decline")}),t(D,{variant:"success",onClick:o=>r(n.requesterUserId,!0),children:h("widget.friendrequest.accept")})]})]})})})},jO=a=>{const{displayedRequests:e=[],hideFriendRequest:n=null}=Iv(),{requestResponse:s=null}=Tn();return e.length?t(j,{children:e.map((r,o)=>t(WO,{roomIndex:r.roomIndex,request:r.request,hideFriendRequest:n,requestResponse:s},o))}):null},qO=a=>{const{productType:e=Ee.FLOOR,classId:n=-1,extraParam:s=void 0}=a;switch(e){case Ee.WALL:case Ee.FLOOR:return t(Qc,{productType:e,productClassId:n});case Ee.BADGE:return t(ze,{badgeCode:s});case Ee.HABBO_CLUB:return t(mt,{type:"hc"})}return null},zO=a=>{const{ownerId:e=-1}=a,[n,s]=i.useState(0),[r,o]=i.useState(void 0),c=()=>{n===1&&M(new bb(e)),s(0),o(void 0)};F(Ib,d=>{s(1)}),F(Eb,d=>{s(0),o(void 0)}),F(Cb,d=>{const g=d.getParser();o({contentType:g.contentType,classId:g.classId}),s(2)});const u=z().userId===e;return n===0?null:l(ie,{className:"nitro-mysterybox-dialog",theme:"primary-slim",children:[t(ae,{headerText:h(n===1?`mysterybox.dialog.${u?"owner":"other"}.title`:"mysterybox.reward.title"),onCloseClick:c}),l(ne,{children:[n===1&&l(j,{children:[l(N,{variant:"primary",children:[" ",h(`mysterybox.dialog.${u?"owner":"other"}.subtitle`)," "]}),l(N,{children:[" ",h(`mysterybox.dialog.${u?"owner":"other"}.description`)," "]}),l(N,{children:[" ",h(`mysterybox.dialog.${u?"owner":"other"}.waiting`)]}),l(D,{variant:"danger",onClick:c,className:"mt-auto",children:[" ",h(`mysterybox.dialog.${u?"owner":"other"}.cancel`)," "]})]}),n===2&&r&&l(j,{children:[l(N,{variant:"black",children:[" ",h("mysterybox.reward.text")," "]}),t(w,{className:"prize-container justify-content-center mx-auto",children:t(qO,{classId:r.classId,productType:r.contentType})}),l(D,{variant:"success",onClick:c,className:"mt-auto",children:[" ",h("mysterybox.reward.close")," "]})]})]})]})},YO=a=>{const{objectId:e=-1,onClose:n=null}=a,[s,r]=i.useState(""),o=()=>{M(new _b(e,s)),n()};return e===-1?null:l(ie,{className:"nitro-mysterytrophy-dialog no-resize",theme:"primary-slim",children:[t(ae,{center:!0,headerText:h("mysterytrophy.header.title"),onCloseClick:n}),l(ne,{children:[l(w,{className:"mysterytrophy-dialog-top p-3",children:[t("div",{className:"mysterytrophy-image flex-shrink-0"}),t("div",{className:"m-2",children:t(N,{variant:"white",className:"mysterytrophy-text-big",children:h("mysterytrophy.header.description")})})]}),t(w,{className:"mysterytrophy-dialog-bottom p-2",children:l(v,{gap:1,children:[l(w,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-mysterytrophy-dialog",children:[t("textarea",{className:"form-control form-control-sm input-mysterytrophy",value:s,onChange:c=>r(c.target.value)}),t("div",{className:"mysterytrophy-pencil-image flex-shrink-0 small fa-icon"})]}),l(w,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[t(N,{pointer:!0,className:"text-decoration",onClick:()=>n(),children:h("cancel")}),t(D,{variant:"success",onClick:()=>o(),children:h("generic.ok")})]})]})})]})]})},KO=a=>{const{objectId:e=-1,onClose:n=null}=a,{roomSession:s=null}=De(),r=()=>{s.useMultistateItem(e),n()};return l(ie,{className:"nitro-use-product-confirmation",children:[t(ae,{headerText:h("effectbox.header.title"),onCloseClick:n}),t(ne,{center:!0,children:t(w,{gap:2,children:l(v,{justifyContent:"between",children:[t(N,{children:h("effectbox.header.description")}),l(w,{alignItems:"center",justifyContent:"between",children:[t(D,{variant:"danger",onClick:n,children:h("generic.cancel")}),t(D,{variant:"success",onClick:r,children:h("generic.ok")})]})]})})})]})},ti=-1,$O=0,QO=a=>{const{objectId:e=-1,onClose:n=null}=a,[s,r]=i.useState(null),[o,c]=i.useState(ti),{roomSession:u=null}=De(),d=()=>{u.useMultistateItem(e),n()};return i.useEffect(()=>{if(!u||e===-1)return;const g=al(u.roomId,e,Z.FLOOR);if(!g)return;r(g);let m=ti;switch(g.specialType){case ge.MONSTERPLANT_SEED:m=$O;break}if(m===ti){n();return}c(m)},[u,e,n]),o===ti?null:l(ie,{className:"nitro-use-product-confirmation",children:[t(ae,{headerText:h("useproduct.widget.title.plant_seed",["name"],[s.name]),onCloseClick:n}),t(ne,{center:!0,children:l(w,{gap:2,overflow:"hidden",children:[t(v,{children:t(P,{className:"product-preview",children:t(P,{className:"monsterplant-image"})})}),l(v,{justifyContent:"between",overflow:"auto",children:[l(v,{gap:2,children:[t(N,{children:h("useproduct.widget.text.plant_seed",["productName"],[s.name])}),t(N,{children:h("useproduct.widget.info.plant_seed")})]}),l(w,{alignItems:"center",justifyContent:"between",children:[t(D,{variant:"danger",onClick:n,children:h("useproduct.widget.cancel")}),t(D,{variant:"success",onClick:d,children:h("widget.monsterplant_seed.button.use")})]})]})]})})]})},ni=-1,XO=0,JO=a=>{const{objectId:e=-1,onClose:n=null}=a,[s,r]=i.useState(ni),[o,c]=i.useState(Re.MALE),[u,d]=i.useState(null),{roomSession:g=null}=De(),m=()=>{Ic().send(new Sb(e)),Ic().send(new Jm(o,u)),n()};return i.useEffect(()=>{let f=ni;const p=z().figure,C=z().gender,E=[];if(g&&e>=0){const b=al(g.roomId,e,Z.FLOOR);if(b)switch(b.specialType){case ge.FIGURE_PURCHASABLE_SET:f=XO;const I=b.customParams.split(",").map(_=>parseInt(_));for(const _ of I)xt().isValidFigureSetForGender(_,C)&&E.push(_);break}}if(f===ni){n();return}c(C),d(xt().getFigureStringWithFigureIds(p,C,E)),r(f)},[g,e,n]),s===ni?null:l(ie,{className:"nitro-use-product-confirmation",children:[t(ae,{headerText:h("useproduct.widget.title.bind_clothing"),onCloseClick:n}),t(ne,{center:!0,children:l(w,{gap:2,overflow:"hidden",children:[t(v,{children:t(P,{className:"mannequin-preview",children:t($e,{figure:u,direction:2})})}),l(v,{justifyContent:"between",overflow:"auto",children:[l(v,{gap:2,children:[t(N,{children:h("useproduct.widget.text.bind_clothing")}),t(N,{children:h("useproduct.widget.info.bind_clothing")})]}),l(w,{alignItems:"center",justifyContent:"between",children:[t(D,{variant:"danger",onClick:n,children:h("useproduct.widget.cancel")}),t(D,{variant:"success",onClick:m,children:h("useproduct.widget.bind_clothing")})]})]})]})})]})},ZO=a=>{const{closeConfirm:e=null,processAction:n=null,onClose:s=null,objectId:r=-1,mode:o=null,confirmMode:c=null,confirmingObjectId:u=-1,groupData:d=null,isGroupMember:g=!1,objectOwnerId:m=-1}=IN(),{simpleAlert:f=null}=Je();F(Nb,C=>{const E=C.getParser();if(E)switch(E.count){case 1:f(h("costumehopper.costumerequired.bodytext"),null,"catalog/open/temporary_effects",h("costumehopper.costumerequired.buy"),h("costumehopper.costumerequired.header"),null);break;case 2:f(h("viphopper.viprequired.bodytext"),null,"catalog/open/habbo_club",h("viprequired.buy.vip"),h("viprequired.header"),null);break;case 3:f(h("gate.viprequired.bodytext"),null,"catalog/open/habbo_club",h("viprequired.buy.vip"),h("gate.viprequired.title"),null);break}});const p=z().userId===m;return l(j,{children:[c===wc&&t(QO,{objectId:u,onClose:e}),c===yc&&t(JO,{objectId:u,onClose:e}),c===Jh&&t(KO,{objectId:u,onClose:e}),c===Rc&&t(YO,{objectId:u,onClose:e}),t(zO,{ownerId:m}),r>=0&&o&&l(xs,{objectId:r,category:Z.FLOOR,onClose:s,fades:!0,children:[o===jt.FRIEND_FURNITURE&&l(j,{children:[t(cn,{children:h("friendfurni.context.title")}),t(K,{onClick:C=>n("use_friend_furni"),children:h("friendfurni.context.use")})]}),o===jt.MONSTERPLANT_SEED&&l(j,{children:[t(cn,{children:h("furni.mnstr_seed.name")}),t(K,{onClick:C=>n("use_monsterplant_seed"),children:h("widget.monsterplant_seed.button.use")})]}),o===jt.RANDOM_TELEPORT&&l(j,{children:[t(cn,{children:h("furni.random_teleport.name")}),t(K,{onClick:C=>n("use_random_teleport"),children:h("widget.random_teleport.button.use")})]}),o===jt.PURCHASABLE_CLOTHING&&l(j,{children:[t(cn,{children:h("furni.generic_usable.name")}),t(K,{onClick:C=>n("use_purchaseable_clothing"),children:h("widget.generic_usable.button.use")})]}),o===jt.MYSTERY_BOX&&l(j,{children:[t(cn,{children:h("mysterybox.context.title")}),t(K,{onClick:C=>n("use_mystery_box"),children:h("mysterybox.context."+(p?"owner":"other")+".use")})]}),o===jt.MYSTERY_TROPHY&&l(j,{children:[t(cn,{children:h("mysterytrophy.header.title")}),t(K,{onClick:C=>n("use_mystery_trophy"),children:h("friendfurni.context.use")})]}),o===Xh&&d&&l(j,{children:[t(cn,{className:"cursor-pointer text-truncate",onClick:()=>Ia(d.guildId),children:d.guildName}),!g&&t(K,{onClick:C=>n("join_group"),children:h("widget.furniture.button.join.group")}),t(K,{onClick:C=>n("go_to_group_homeroom"),children:h("widget.furniture.button.go.to.group.home.room")}),d.guildHasReadableForum&&t(K,{onClick:C=>n("open_forum"),children:h("widget.furniture.button.open_group_forum")})]})]})]})},ek=a=>{const{objectId:e=-1,color:n=0,setColor:s=null,applyToner:r=null,toggleToner:o=null,onClose:c=null}=hN();return e===-1?null:l(ie,{theme:"primary-slim",className:"nitro-room-widget-toner",children:[t(ae,{headerText:h("widget.backgroundcolor.title"),onCloseClick:c}),l(ne,{overflow:"hidden",justifyContent:"between",children:[t(v,{overflow:"auto",gap:1,children:t("input",{type:"color",className:"form-control",value:Ft.makeColorNumberHex(n),onChange:u=>s(Ft.convertFromHex(u.target.value))})}),l(v,{gap:1,children:[t(D,{fullWidth:!0,variant:"primary",onClick:o,children:h("widget.backgroundcolor.button.on")}),t(D,{fullWidth:!0,variant:"primary",onClick:r,children:h("widget.backgroundcolor.button.apply")})]})]})]})},tk=a=>{const{objectId:e=-1,color:n="1",badgeName:s="",badgeDesc:r="",date:o="",senderName:c="",onClose:u=null}=fN();return e===-1?null:t(Gh,{color:n,message:r,date:o,senderName:c,customTitle:s,onCloseClick:u})},nk=a=>{const{objectId:e=-1,recipes:n=[],ingredients:s=[],selectedRecipe:r=null,requiredIngredients:o=null,isCrafting:c=!1,craft:u=null,selectRecipe:d=null,onClose:g=null}=CN(),{roomSession:m=null}=De(),[f,p]=i.useState(!1),C=i.useMemo(()=>{const I=Y().getRoomObject(m.roomId,e,Z.FLOOR);return Jt(I)},[e,m.roomId]),E=i.useMemo(()=>{if(!o||!o.length)return!1;for(const I of o){const _=s.find(S=>S.name===I.itemName);if(!_||_.count<I.count)return!1}return!0},[s,o]),b=()=>{if(!f){p(!0);return}u(),p(!1)};return i.useEffect(()=>{p(!1)},[r]),e===-1?null:l(ie,{className:"nitro-widget-crafting",theme:"primary-slim",children:[t(ae,{headerText:h("crafting.title"),onCloseClick:g}),t(ne,{children:l(w,{grow:!0,overflow:"hidden",gap:2,children:[l(w,{column:!0,fullWidth:!0,gap:2,children:[l(v,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:h("crafting.title.products")}),t(Le,{columnCount:5,children:n.length>0&&n.map(I=>t(Se,{itemImage:I.iconUrl,itemActive:r&&r.name===I.name,onClick:()=>d(I)},I.name))})]}),l(v,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:h("crafting.title.mixer")}),t(Le,{columnCount:5,children:s.length>0&&s.map(I=>t(Se,{itemImage:I.iconUrl,itemCount:I.count,itemCountMinimum:0,className:(I.count?"":"opacity-0-5 ")+"cursor-default"},I.name))})]})]}),l(w,{column:!0,fullWidth:!0,gap:2,children:[!r&&t(v,{center:!0,fullHeight:!0,className:"text-black text-center",children:h("crafting.info.start")}),r&&l(j,{children:[l(v,{overflow:"hidden",fullHeight:!0,children:[t("div",{className:"bg-muted rounded py-1 text-center",children:h("crafting.current_recipe")}),t(Le,{columnCount:5,children:!!o&&o.length>0&&o.map(I=>{const _=s.find(T=>T.name===I.itemName),S=[];for(let T=0;T<I.count;T++)S.push(t(Se,{itemImage:_.iconUrl,className:(_.count-T<=0?"opacity-0-5 ":"")+"cursor-default"},T));return S})})]}),l(w,{gap:2,column:!0,fullHeight:!0,children:[l(w,{gap:2,className:"bg-muted rounded",column:!0,fullHeight:!0,children:[t("div",{className:"py-1 text-center",children:h("crafting.result")}),l(w,{gap:1,center:!0,column:!0,fullHeight:!0,className:"pb-1",children:[t(v,{fullHeight:!0,children:t("img",{src:r.iconUrl})}),t("div",{className:"text-black",children:r.localizedName})]})]}),l(D,{variant:!C||!E?"danger":f?"warning":c?"primary":"success",disabled:!C||!E||c,onClick:b,children:[!c&&h(C?E?f?"generic.confirm":"crafting.btn.craft":"crafting.status.recipe.incomplete":"crafting.btn.notowner"),c&&t(Xc,{})]})]})]})]})]})})]})},sk=a=>{const[e,n]=i.useState(!1),{presets:s=[],dimmerState:r=0,selectedPresetId:o=0,color:c=16777215,brightness:u=255,effectId:d=0,selectedColor:g=0,setSelectedColor:m=null,selectedBrightness:f=0,setSelectedBrightness:p=null,selectedEffectId:C=0,setSelectedEffectId:E=null,selectPresetId:b=null,applyChanges:I}=_N(),_=()=>{Yn.previewDimmer(c,u,d===2),n(!1)};Te(ye.REMOVE_DIMMER,T=>n(!1)),i.useEffect(()=>{!s||!s.length||n(!0)},[s]);const S=i.useMemo(()=>X("widget.dimmer.colorwheel",!1),[]);return e?l(ie,{className:"nitro-room-widget-dimmer",children:[t(ae,{headerText:h("widget.dimmer.title"),onCloseClick:_}),r===1&&t(As,{children:s.map(T=>t(Mn,{isActive:o===T.id,onClick:R=>b(T.id),children:h(`widget.dimmer.tab.${T.id}`)},T.id))}),l(ne,{children:[r===0&&l(v,{alignItems:"center",children:[t(P,{className:"dimmer-banner"}),t(N,{center:!0,className:"bg-muted rounded p-1",children:h("widget.dimmer.info.off")}),t(D,{fullWidth:!0,variant:"success",onClick:()=>Yn.changeState(),children:h("widget.dimmer.button.on")})]}),r===1&&l(j,{children:[l(v,{gap:1,children:[t(N,{fontWeight:"bold",children:h("widget.backgroundcolor.hue")}),S&&t("input",{type:"color",className:"form-control",value:Ft.makeColorNumberHex(g),onChange:T=>m(Ft.convertFromHex(T.target.value))}),!S&&t(re,{gap:1,columnCount:7,children:Yn.AVAILABLE_COLORS.map((T,R)=>t(v,{fullWidth:!0,pointer:!0,className:zt("color-swatch rounded",T===g&&"active"),onClick:()=>m(T),style:{backgroundColor:Yn.HTML_COLORS[R]}},R))})]}),l(v,{gap:1,children:[t(N,{fontWeight:"bold",children:h("widget.backgroundcolor.lightness")}),t(Vt,{className:"nitro-slider",min:Yn.MIN_BRIGHTNESS,max:Yn.MAX_BRIGHTNESS,value:f,onChange:T=>p(T),thumbClassName:"thumb percent",renderThumb:(T,R)=>t("div",{...T,children:Yn.scaleBrightness(R.valueNow)})})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:C===2,onChange:T=>E(T.target.checked?2:1)}),t(N,{children:h("widget.dimmer.type.checkbox")})]}),l(w,{gap:1,children:[t(D,{fullWidth:!0,variant:"danger",onClick:()=>Yn.changeState(),children:h("widget.dimmer.button.off")}),t(D,{fullWidth:!0,variant:"success",onClick:I,children:h("widget.dimmer.button.apply")})]})]})]})]}):null},rk=a=>{const{objectId:e=-1,value:n=0,onClose:s=null,redeem:r=null}=NN();return e===-1?null:l(ie,{className:"nitro-widget-exchange-credit",theme:"primary-slim",children:[t(ae,{headerText:h("catalog.redeem.dialog.title"),onCloseClick:s}),t(ne,{center:!0,children:l(w,{overflow:"hidden",gap:2,children:[t(v,{center:!0,children:t(P,{className:"exchange-image"})}),l(v,{grow:!0,justifyContent:"between",overflow:"hidden",children:[l(v,{gap:1,overflow:"auto",children:[t(N,{fontWeight:"bold",children:h("creditfurni.description",["credits"],[n.toString()])}),t(N,{children:h("creditfurni.prompt")})]}),t(D,{variant:"success",onClick:r,children:h("catalog.redeem.dialog.button.exchange")})]})]})})]})},ok=a=>{const{currentIndex:e=-1,currentPhotos:n=null}=a,[s,r]=i.useState(0),o=n&&n.length?n[s]:null,c=()=>{r(d=>{let g=d+1;return g>=n.length&&(g=0),g})},u=()=>{r(d=>{let g=d-1;return g<0&&(g=n.length-1),g})};return i.useEffect(()=>{r(e)},[e]),o?l(re,{style:{display:"flex",flexDirection:"column"},children:[t(w,{center:!0,className:"picture-preview border border-black",style:o.w?{backgroundImage:"url("+o.w+")"}:{},children:!o.w&&t(N,{bold:!0,children:h("camera.loading")})}),o.m&&o.m.length&&t(N,{center:!0,children:o.m}),l(w,{alignItems:"center",justifyContent:"between",children:[t(N,{children:o.n||""}),t(N,{children:new Date(o.t*1e3).toLocaleDateString()})]}),n.length>1&&l(w,{className:"picture-preview-buttons",children:[t(Rm,{className:"cursor-pointer picture-preview-buttons-previous fa-icon",onClick:u}),t(N,{underline:!0,className:"cursor-pointer",onClick:d=>pn(o.oi),children:o.o}),t(Om,{className:"cursor-pointer picture-preview-buttons-next fa-icon",onClick:c})]})]}):null},ak=a=>{const{objectId:e=-1,currentPhotoIndex:n=-1,currentPhotos:s=null,onClose:r=null}=TN(),{report:o=null}=Xn();return e===-1||n===-1?null:l(ie,{className:"nitro-external-image-widget",theme:"primary-slim",children:[t(ae,{headerText:"",isGalleryPhoto:!0,onReportPhoto:()=>o(lt.PHOTO,{extraData:s[n].w,roomId:s[n].s,reportedUserId:z().userId,roomObjectId:Number(s[n].u)}),onCloseClick:r}),t(ne,{children:t(ok,{currentIndex:n,currentPhotos:s})})]})},ik=a=>{const{objectId:e=-1,type:n=0,stage:s=0,usernames:r=[],figures:o=[],date:c=null,onClose:u=null,respond:d=null}=yN();if(e===-1)return null;if(s>0)return l(ie,{className:"nitro-engraving-lock",theme:"primary-slim",children:[t(ae,{headerText:h("friend.furniture.confirm.lock.caption"),onCloseClick:u}),l(ne,{children:[t("h5",{className:"text-black text-center fw-bold mt-2 mb-2",children:h("friend.furniture.confirm.lock.subtitle")}),t("div",{className:"d-flex justify-content-center mb-2",children:t("div",{className:`engraving-lock-stage-${s}`})}),s===2&&t("div",{className:"text-small text-black text-center mb-2",children:h("friend.furniture.confirm.lock.other.locked")}),l(w,{gap:1,children:[t(D,{fullWidth:!0,onClick:g=>d(!1),children:h("friend.furniture.confirm.lock.button.cancel")}),t(D,{fullWidth:!0,variant:"success",onClick:g=>d(!0),children:h("friend.furniture.confirm.lock.button.confirm")})]})]})]});if(r.length>0)return t(dr,{handleSelector:".nitro-engraving-lock-view",children:l("div",{className:`nitro-engraving-lock-view engraving-lock-${n}`,children:[t("div",{className:"engraving-lock-close",onClick:u}),l(w,{justifyContent:"center",children:[t("div",{className:"engraving-lock-avatar",children:t($e,{figure:o[0],direction:2})}),t("div",{className:"engraving-lock-avatar",children:t($e,{figure:o[1],direction:4})})]}),l(v,{justifyContent:"between",className:"mt-1",children:[l(v,{alignItems:"center",justifyContent:"center",gap:1,children:[l("div",{children:[n===0&&h("lovelock.engraving.caption"),n===3&&h("wildwest.engraving.caption")]}),t("div",{children:c})]}),l(w,{justifyContent:"center",gap:4,children:[t("div",{children:r[0]}),t("div",{children:r[1]})]})]})]})})},lk=a=>{const{objectId:e=-1,classId:n=-1,itemType:s=null,text:r=null,isOwnerOfFurniture:o=!1,senderName:c=null,senderFigure:u=null,placedItemId:d=-1,placedItemType:g=null,placedInRoom:m=!1,imageUrl:f=null,openPresent:p=null,onClose:C=null}=HN(),{groupItems:E=[]}=Lr();if(e===-1)return null;const b=I=>{const _=E.find(S=>{var T;return((T=S.getItemById(I))==null?void 0:T.id)===I});_&&Eo(_),C()};return l(ie,{className:"nitro-gift-opening",theme:"primary-slim",children:[t(ae,{headerText:h(c?"widget.furni.present.window.title_from":"widget.furni.present.window.title",["name"],[c]),onCloseClick:C}),l(ne,{children:[d===-1&&l(v,{overflow:"hidden",children:[t(w,{center:!0,overflow:"auto",children:t(Vh,{userName:c,figure:u,message:r})}),o&&l(w,{gap:1,children:[c&&t(D,{fullWidth:!0,onClick:I=>te("catalog/open"),children:h("widget.furni.present.give_gift",["name"],[c])}),t(D,{fullWidth:!0,variant:"success",onClick:p,children:h("widget.furni.present.open_gift")})]})]}),d>-1&&l(w,{gap:2,overflow:"hidden",children:[t(v,{center:!0,className:"p-2",children:t(ks,{imageUrl:f})}),l(v,{grow:!0,children:[l(v,{center:!0,gap:1,children:[t(N,{wrap:!0,small:!0,children:h("widget.furni.present.message_opened")}),t(N,{bold:!0,fontSize:5,children:r})]}),l(v,{grow:!0,gap:1,children:[l(w,{gap:1,children:[m&&t(D,{fullWidth:!0,onClick:null,children:h("widget.furni.present.put_in_inventory")}),t(D,{fullWidth:!0,variant:"success",onClick:I=>b(d),children:h(m?"widget.furni.present.keep_in_room":"widget.furni.present.place_in_room")})]}),c&&c.length&&t(D,{fullWidth:!0,onClick:I=>te("catalog/open"),children:h("widget.furni.present.give_gift",["name"],[c])})]})]})]})]})]})},ck=a=>{const{stuffDatas:e=null,getScoreType:n=null,getClearType:s=null}=AN();return!e||!e.size?null:t(j,{children:Array.from(e.entries()).map(([r,o],c)=>t(du,{objectId:r,category:Z.FLOOR,children:l(v,{className:"nitro-widget-high-score nitro-context-menu",gap:0,children:[t(cn,{children:h("high.score.display.caption",["scoretype","cleartype"],[h(`high.score.display.scoretype.${n(o.scoreType)}`),h(`high.score.display.cleartype.${s(o.clearType)}`)])}),l(Rg,{overflow:"hidden",gap:1,className:"h-100",children:[l(v,{gap:1,children:[l(w,{alignItems:"center",children:[t(N,{center:!0,bold:!0,variant:"white",className:"col-8",children:h("high.score.display.users.header")}),t(N,{center:!0,bold:!0,variant:"white",className:"col-4",children:h("high.score.display.score.header")})]}),t("hr",{className:"m-0"})]}),t(v,{overflow:"auto",gap:1,className:"overflow-y-scroll",children:o.entries.map((u,d)=>l(w,{alignItems:"center",children:[t(N,{center:!0,variant:"white",className:"col-8",children:u.users.join(", ")}),t(N,{center:!0,variant:"white",className:"col-4",children:u.score})]},d))})]})]})},c))})},uk=a=>(PN(),null),dk=-1,si=0,ic=1,lc=2,cc=3,uc=4,mk=a=>{const[e,n]=i.useState(null),[s,r]=i.useState(dk),{objectId:o=-1,figure:c=null,gender:u=null,clubLevel:d=Nn.NO_CLUB,name:g=null,setName:m=null,saveFigure:f=null,wearFigure:p=null,saveName:C=null,onClose:E=null}=LN();return i.useEffect(()=>{if(o===-1)return;const b=Oe();if(b.isRoomOwner||b.controllerLevel>=Ke.GUEST||z().isModerator){r(si);return}if(z().gender.toLowerCase()!==u.toLowerCase()){r(uc);return}if(Dn()<d){r(cc);return}r(lc)},[o,u,d]),i.useEffect(()=>{switch(s){case si:case uc:{const b=xt().createFigureContainer(c);ho.transformAsMannequinFigure(b),n(b.getFigureString());break}case ic:{const b=xt().createFigureContainer(z().figure);ho.transformAsMannequinFigure(b),n(b.getFigureString());break}case lc:case cc:{const b=ho.getMergedMannequinFigureContainer(z().figure,c);n(b.getFigureString());break}}},[s,c,d]),o===-1?null:l(ie,{className:"nitro-mannequin no-resize",theme:"primary-slim",children:[t(ae,{headerText:h("mannequin.widget.title"),onCloseClick:E}),t(ne,{center:!0,children:l(w,{fullWidth:!0,gap:2,overflow:"hidden",children:[t(v,{children:l(P,{position:"relative",className:"mannequin-preview",children:[t($e,{position:"absolute",figure:e,direction:2}),d>0&&t(mt,{className:"position-absolute end-2 bottom-2",type:"hc"})]})}),l(v,{grow:!0,justifyContent:"between",overflow:"auto",children:[s===si&&l(j,{children:[t("input",{type:"text",className:"form-control form-control-sm",value:g,onChange:b=>m(b.target.value),onBlur:C}),l(v,{gap:1,children:[t(D,{variant:"success",onClick:b=>r(ic),children:h("mannequin.widget.style")}),t(D,{variant:"success",onClick:p,children:h("mannequin.widget.wear")})]})]}),s===ic&&l(j,{children:[l(v,{gap:1,children:[t(N,{bold:!0,children:g}),t(N,{wrap:!0,children:h("mannequin.widget.savetext")})]}),l(w,{alignItems:"center",justifyContent:"between",children:[t(N,{underline:!0,pointer:!0,onClick:b=>r(si),children:h("mannequin.widget.back")}),t(D,{variant:"success",onClick:f,children:h("mannequin.widget.save")})]})]}),s===lc&&l(j,{children:[l(v,{gap:1,children:[t(N,{bold:!0,children:g}),t(N,{children:h("mannequin.widget.weartext")})]}),t(D,{variant:"success",onClick:p,children:h("mannequin.widget.wear")})]}),s===cc&&t(w,{center:!0,grow:!0,children:t(N,{children:h("mannequin.widget.clubnotification")})}),s===uc&&t(N,{children:h("mannequin.widget.wronggender")})]})]})})]})},hk=a=>(qN(),null),kg=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],gk=["blue","pink","green","yellow"],fk=a=>{let e=kg.indexOf(a);return e===-1&&(e=0),gk[e]},pk=a=>{const{objectId:e=-1,color:n="0",setColor:s=null,text:r="",setText:o=null,canModify:c=!1,onClose:u=null}=YN();return e===-1?null:t(dr,{handleSelector:".drag-handler",windowPosition:$t.TOP_LEFT,children:l("div",{className:"nitro-stickie nitro-stickie-image stickie-"+fk(n),children:[l("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[t("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:c&&l(j,{children:[t("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:u}),kg.map(d=>t("div",{className:"stickie-color ms-1",onClick:g=>s(d),style:{backgroundColor:Ft.makeColorHex(d)}},d))]})}),t("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:u})]}),t("div",{className:"stickie-context",children:t("textarea",{className:"context-text",value:r,onChange:d=>o(d.target.value),tabIndex:0,autoFocus:!0})})]})})},Ik=a=>{const{objectId:e=-1,height:n=0,maxHeight:s=40,onClose:r=null,updateHeight:o=null}=$N(),[c,u]=i.useState(""),d=g=>{u(g);const m=parseFloat(g);isNaN(m)||m===n||o(m)};return i.useEffect(()=>{u(n.toString())},[n]),e===-1?null:l(ie,{className:"nitro-widget-custom-stack-height",theme:"primary-slim",children:[t(ae,{headerText:h("widget.custom.stack.height.title"),onCloseClick:r}),l(ne,{justifyContent:"between",children:[t(N,{children:h("widget.custom.stack.height.text")}),l(w,{gap:2,children:[t(Vt,{className:"nitro-slider",min:0,max:s,step:.01,value:n,onChange:g=>o(g),renderThumb:(g,m)=>t("div",{...g,children:m.valueNow})}),t("input",{className:"show-number-arrows",style:{width:50},type:"number",min:0,max:s,value:c,onChange:g=>d(g.target.value)})]}),l(v,{gap:1,children:[t(D,{onClick:g=>M(new fc(e,-100)),children:h("furniture.above.stack")}),t(D,{onClick:g=>M(new fc(e,0)),children:h("furniture.floor.level")})]})]})]})},Ag=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],Ek=["blue","pink","green","yellow"],Ck=["post_it","post_it_shakesp","post_it_dreams","post_it_xmas","post_it_vd","post_it_juninas"],bk=["post_it","shakesp","dreams","christmas","heart","juninas"],_k=a=>{let e=Ag.indexOf(a);return e===-1&&(e=0),Ek[e]},Sk=a=>{let e=Ck.indexOf(a);return e===-1&&(e=0),bk[e]},Nk=a=>{const{objectId:e=-1,color:n="0",text:s="",type:r="",canModify:o=!1,updateColor:c=null,updateText:u=null,trash:d=null,onClose:g=null}=XN(),[m,f]=i.useState(!1);return i.useEffect(()=>{f(!1)},[e,n,s,r]),e===-1?null:t(dr,{handleSelector:".drag-handler",windowPosition:$t.TOP_LEFT,children:l("div",{className:"nitro-stickie nitro-stickie-image stickie-"+(r=="post_it"?_k(n):Sk(r)),children:[l("div",{className:"d-flex align-items-center stickie-header drag-handler",children:[t("div",{className:"d-flex align-items-center flex-grow-1 h-100",children:o&&l(j,{children:[t("div",{className:"nitro-stickie-image stickie-trash header-trash",onClick:d}),r=="post_it"&&t(j,{children:Ag.map(p=>t("div",{className:"stickie-color ms-1",onClick:C=>c(p),style:{backgroundColor:Ft.makeColorHex(p)}},p))})]})}),t("div",{className:"d-flex align-items-center nitro-stickie-image stickie-close header-close",onClick:g})]}),t("div",{className:"stickie-context",children:!m||!o?t("div",{className:"context-text",onClick:p=>o&&f(!0),children:s}):t("textarea",{className:"context-text",defaultValue:s,tabIndex:0,onBlur:p=>u(p.target.value),autoFocus:!0})})]})})},vk=a=>{const{objectId:e=-1,color:n="1",senderName:s="",date:r="",message:o="",onClose:c=null}=ZN();return e===-1?null:t(Gh,{color:n,message:o,date:r,senderName:s,onCloseClick:c})},Tk=a=>{const[e,n]=i.useState(null),{objectId:s=-1,videoId:r=null,videoStart:o=0,videoEnd:c=0,currentVideoState:u=null,selectedVideo:d=null,playlists:g=[],onClose:m=null,previous:f=null,next:p=null,pause:C=null,play:E=null,selectVideo:b=null}=ov(),I=S=>{if(n(S.target),s!==-1)switch(S.target.getPlayerState()){case-1:case 1:u!==1&&E();return;case 2:u!==2&&C()}};if(i.useEffect(()=>{if(!(u===null||!e)){if(u===ar.PLAYING&&e.getPlayerState()!==ar.PLAYING){e.playVideo();return}if(u===ar.PAUSED&&e.getPlayerState()!==ar.PAUSED){e.pauseVideo();return}}},[u,e]),s===-1)return null;const _={height:"375",width:"500",playerVars:{autoplay:1,disablekb:1,controls:0,origin:window.origin,modestbranding:1,start:o,end:c}};return l(ie,{className:"youtube-tv-widget",children:[t(ae,{headerText:h("catalog.page.youtube_tvs"),onCloseClick:m}),t(ne,{children:l("div",{className:"row w-100 h-100",children:[l("div",{className:"youtube-video-container col-9 overflow-hidden",children:[r&&r.length>0&&t(of,{videoId:r,opts:_,onReady:S=>n(S.target),onStateChange:I,containerClassName:"youtubeContainer"}),(!r||r.length===0)&&t("div",{className:"empty-video w-100 h-100 justify-content-center align-items-center d-flex",children:h("widget.furni.video_viewer.no_videos")})]}),l("div",{className:"playlist-container col-3 d-flex flex-column",children:[l("span",{className:"playlist-controls justify-content-center d-flex",children:[t("i",{className:"icon icon-youtube-prev cursor-pointer",onClick:f}),t("i",{className:"icon icon-youtube-next cursor-pointer",onClick:p})]}),t("div",{className:"mb-1",children:h("widget.furni.video_viewer.playlists")}),t(Le,{columnCount:1,columnMinWidth:80,columnMinHeight:100,className:"mb-1",overflow:"auto",children:g&&g.map((S,T)=>t(Se,{onClick:R=>b(S.video),itemActive:S.video===d,children:t("b",{children:S.title})},T))})]})]})})]})},wk=a=>{const{diskInventory:e=null,addToPlaylist:n=null}=a,[s,r]=i.useState(-1),[o,c]=i.useState(-1),u=i.useCallback((m,f)=>{m.stopPropagation(),c(p=>p===f?-1:f)},[]),d=i.useCallback((m,f)=>{var p,C;m.stopPropagation(),n(f,(C=(p=_e().soundManager.musicController)==null?void 0:p.getRoomItemPlaylist())==null?void 0:C.length)},[n]),g=()=>{te("catalog/open/"+gi.TRAX_SONGS)};return i.useEffect(()=>{var m;if(o!==-1)return(m=_e().soundManager.musicController)==null||m.playSong(o,Ao.PRIORITY_SONG_PLAY,0,0,0,0),()=>{var f;(f=_e().soundManager.musicController)==null||f.stop(Ao.PRIORITY_SONG_PLAY)}},[o]),i.useEffect(()=>()=>c(-1),[]),l(j,{children:[l("div",{className:"bg-success py-3 container-fluid justify-content-center d-flex rounded",children:[t("img",{src:X("image.library.url")+"playlist/title_mymusic.gif",className:"my-music"}),t("h2",{className:"ms-4",children:h("playlist.editor.my.music")})]}),t("div",{className:"h-100 overflow-y-scroll mt-4 py-2",children:t(Le,{columnCount:3,columnMinWidth:95,gap:1,children:e&&e.getKeys().map((m,f)=>{var b;const p=e.getKey(f),C=e.getWithIndex(f),E=(b=_e().soundManager.musicController)==null?void 0:b.getSongInfo(C);return l(Se,{itemActive:s===f,onClick:()=>r(I=>I===f?-1:f),classNames:["text-black"],children:[t("div",{className:"disk-image flex-shrink-0 mb-n2",style:{backgroundColor:Dh(E==null?void 0:E.songData)}}),t(N,{truncate:!0,fullWidth:!0,className:"text-center",children:E==null?void 0:E.name}),s===f&&l(w,{position:"absolute",className:"bottom-0 mb-1 bg-secondary p-1 rounded",alignItems:"center",justifyContent:"center",gap:2,children:[t(D,{onClick:I=>u(I,C),variant:"light",children:t(P,{className:o===C?"pause-btn":"preview-song"})}),t(D,{onClick:I=>d(I,p),variant:"light",children:t(P,{className:"move-disk"})})]})]},f)})})}),l("div",{className:"playlist-bottom text-black p-1",children:[t("h5",{children:h("playlist.editor.text.get.more.music")}),t("div",{children:h("playlist.editor.text.you.have.no.songdisks.available")}),t("div",{children:h("playlist.editor.text.you.can.buy.some.from.the.catalogue")}),t("button",{className:"btn btn-primary btn-sm",onClick:()=>g(),children:h("playlist.editor.button.open.catalogue")})]}),t("img",{src:X("image.library.url")+"playlist/background_get_more_music.gif",className:"get-more"})]})},yk=a=>{var m,f;const{furniId:e=-1,playlist:n=null,currentPlayingIndex:s=-1,removeFromPlaylist:r=null,togglePlayPause:o=null}=a,[c,u]=i.useState(-1),d=p=>{c===p&&r(p)},g=(p,C)=>{o(p,C!==-1?C:0)};return l(j,{children:[l("div",{className:"bg-primary py-3 container-fluid justify-content-center d-flex rounded",children:[t("img",{src:X("image.library.url")+"playlist/title_playlist.gif",className:"playlist-img"}),t("h2",{className:"ms-4",children:h("playlist.editor.playlist")})]}),t("div",{className:"h-100 overflow-y-scroll py-2",children:t(w,{column:!0,gap:2,children:n&&n.map((p,C)=>l(w,{gap:1,className:"text-black cursor-pointer "+(c===C?"border border-muted border-2 rounded":"border-2"),alignItems:"center",onClick:()=>u(E=>E===C?-1:C),children:[t(P,{onClick:()=>d(C),className:"disk-2 "+(c===C?"selected-song":""),style:{backgroundColor:c===C?"":Dh(p.songData)}}),p.name]},C))})}),(!n||n.length===0)&&l(j,{children:[l("div",{className:"playlist-bottom text-black p-1 ms-5",children:[t("h5",{children:h("playlist.editor.add.songs.to.your.playlist")}),t("div",{children:h("playlist.editor.text.click.song.to.choose.click.again.to.move")})]}),t("img",{src:X("image.library.url")+"playlist/background_add_songs.gif",className:"add-songs"})]}),n&&n.length>0&&l(j,{children:[s===-1&&t(D,{variant:"success",size:"lg",onClick:()=>g(e,c),children:h("playlist.editor.button.play.now")}),s!==-1&&l(w,{gap:1,children:[t(D,{variant:"danger",onClick:()=>g(e,c),children:t(P,{className:"pause-song"})}),l(w,{column:!0,children:[t(N,{bold:!0,display:"block",children:h("playlist.editor.text.now.playing.in.your.room")}),t(N,{children:((m=n[s])==null?void 0:m.name)+" - "+((f=n[s])==null?void 0:f.creator)})]})]})]})]})},Rk=a=>{const{objectId:e=-1,currentPlayingIndex:n=-1,playlist:s=null,diskInventory:r=null,onClose:o=null,togglePlayPause:c=null,removeFromPlaylist:u=null,addToPlaylist:d=null}=FN();return e===-1?null:l(ie,{className:"nitro-playlist-editor-widget",theme:"primary-slim",children:[t(ae,{headerText:h("playlist.editor.title"),onCloseClick:o}),t(ne,{children:l("div",{className:"d-flex flex-row gap-1 h-100",children:[t("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:t(wk,{addToPlaylist:d,diskInventory:r})}),t("div",{className:"w-50 position-relative overflow-hidden h-100 rounded d-flex flex-column",children:t(yk,{furniId:e,removeFromPlaylist:u,playlist:s,togglePlayPause:c,currentPlayingIndex:n})})]})})]})},Ok=a=>l(P,{fit:!0,position:"absolute",className:"nitro-room-widgets top-0 start-0",children:[t(ek,{}),t(tk,{}),t(nk,{}),t(sk,{}),t(rk,{}),t(ak,{}),t(ik,{}),t(lk,{}),t(ck,{}),t(uk,{}),t(mk,{}),t(Rk,{}),t(hk,{}),t(pk,{}),t(Ik,{}),t(Nk,{}),t(vk,{}),t(ZO,{}),t(Tk,{})]}),kk=a=>{const{isVisible:e=!1,errorResult:n=null,petName:s=null,objectType:r=null,onChangePetName:o=null,onConfirm:c=null,onClose:u=null}=_v();return t(j,{children:e&&l(ie,{className:"nitro-pet-package no-resize",theme:"primary-slim",children:[t(ae,{center:!0,headerText:h(r==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage.open"),onCloseClick:()=>u()}),l(ne,{children:[l(w,{className:"pet-package-container-top p-3",children:[t("div",{className:`package-image-${r} flex-shrink-0`}),t("div",{className:"m-2",children:t(N,{variant:"white",className:"package-text-big",children:h(r==="gnome_box"?"widgets.gnomepackage.name.title":"furni.petpackage")})})]}),t(w,{className:"pet-package-container-bottom p-2",children:l(v,{gap:1,children:[l(w,{alignItems:"center",className:"bg-white rounded py-1 px-2 input-pet-package-container",children:[t("input",{type:"text",className:"form-control form-control-sm input-pet-package",maxLength:X("pet.package.name.max.length"),placeholder:h(r==="gnome_box"?"widgets.gnomepackage.name.select":"widgets.petpackage.name.title"),value:s,onChange:d=>o(d.target.value)}),t("div",{className:"package-pencil-image flex-shrink-0 small fa-icon"})]}),n.length>0&&t(P,{className:"invalid-feedback d-block m-0",children:n}),l(w,{className:"mt-2",gap:5,display:"flex",justifyContent:"center",alignItems:"center",children:[t(N,{pointer:!0,className:"text-decoration",onClick:()=>u(),children:h("cancel")}),t(af,{variant:s.length<3?"danger":"success",disabled:s.length<3,onClick:()=>c(),children:h(r==="gnome_box"?"widgets.gnomepackage.name.pick":"furni.petpackage.confirm")})]})]})})]})]})})},Ak=a=>{const[e,n]=i.useState("bobba"),[s,r]=i.useState(""),[o,c]=i.useState(!1),{wordsFilter:u=[],isVisible:d=null,setWordsFilter:g,onClose:m=null}=fv(),{navigatorData:f=null}=Jn(),p=b=>{(o?!s:!e)||(M(new vb(f.enteredGuestRoom.roomId,b,o?s:e)),r(""),n("bobba"),c(!1),!(b&&u.includes(o?s:e))&&g(I=>{const _=[...I];return b?_.push(o?s:e):_.splice(_.indexOf(o?s:e),1),_}))},C=b=>{n(b),c(!1)},E=b=>{r(b),c(!0)};return d?l(ie,{className:"nitro-guide-tool no-resize",theme:"primary-slim",children:[t(ae,{headerText:h("navigator.roomsettings.roomfilter"),onCloseClick:()=>m()}),l(ne,{className:"text-black",children:[l(re,{className:"d-flex align-items-center justify-content-end gap-2",children:[t("input",{type:"text",className:"form-control form-control-sm",maxLength:255,value:e,onChange:b=>C(b.target.value)}),t(D,{onClick:()=>p(!0),children:h("navigator.roomsettings.roomfilter.addword")})]}),t(v,{overflow:"auto",gap:0,className:"form-control form-control-sm",style:{height:"100px"},children:u&&u.length>0&&u.map((b,I)=>t(w,{alignItems:"center",className:zt("rounded p-1",s===b&&"bg-muted"),pointer:!0,onClick:_=>E(b),children:t(N,{truncate:!0,children:b})},I))}),t(re,{className:"d-flex align-items-center justify-content-end gap-2",children:t(D,{variant:"danger",onClick:()=>p(!1),disabled:u.length===0||!o,children:h("navigator.roomsettings.roomfilter.removeword")})})]})]}):null};const Sm=[{value:"credits",label:"Credits",iconType:-1},{value:"duckets",label:"Duckets",iconType:0},{value:"diamonds",label:"Diamonds",iconType:5},{value:"shells",label:"Shells",iconType:"conchas"}],Nm=({value:a,onChange:e})=>{const[n,s]=i.useState(!1),r=i.useRef(null),o=Sm.find(u=>u.value===a);i.useEffect(()=>{const u=d=>{r.current&&!r.current.contains(d.target)&&s(!1)};return n&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[n]);const c=u=>{e(u),s(!1)};return l("div",{className:"currency-select-wrapper",ref:r,children:[t(P,{pointer:!0,className:"currency-select-button",onClick:()=>s(!n),children:l(w,{alignItems:"center",gap:2,children:[t(mt,{type:(o==null?void 0:o.iconType)||-1,className:"currency-select-icon"}),t(N,{children:(o==null?void 0:o.label)||"Select currency"}),t("i",{className:`fas fa-chevron-${n?"up":"down"} fa-icon`,style:{marginLeft:"auto",fontSize:"12px"}})]})}),n&&t("div",{className:"currency-select-dropdown",children:Sm.map(u=>t(P,{pointer:!0,className:`currency-select-option ${a===u.value?"selected":""}`,onClick:()=>c(u.value),children:l(w,{alignItems:"center",gap:2,children:[t(mt,{type:u.iconType,className:"currency-select-icon"}),t(N,{children:u.label})]})},u.value))})]})},xk=()=>{const{isVisible:a,close:e}=tg(),[n,s]=i.useState("private"),[r,o]=i.useState(""),[c,u]=i.useState(""),[d,g]=i.useState("credits"),[m,f]=i.useState(""),[p,C]=i.useState("credits"),E=()=>{if(!r.trim()){console.error("Username is required");return}const I=parseFloat(c);if(isNaN(I)||I<=0){console.error("Price must be greater than zero");return}console.log("Sell room to user:",{username:r,price:I,currency:d}),o(""),u(""),g("credits")},b=()=>{const I=parseFloat(m);if(isNaN(I)||I<=0){console.error("Quantity must be greater than zero");return}console.log("Advertise room for sale:",{quantity:I,currency:p}),f(""),C("credits")};return a?l(ie,{className:"nitro-room-sell",theme:"primary",children:[t(ae,{headerText:"Sell Room",onCloseClick:e}),l(As,{children:[t(Mn,{isActive:n==="private",onClick:()=>s("private"),children:"Private"}),t(Mn,{isActive:n==="advertisement",onClick:()=>s("advertisement"),children:"Advertisement"})]}),l(ne,{className:"room-sell-content",children:[n==="private"&&l(v,{gap:3,className:"room-sell-form",children:[l(v,{gap:2,children:[t(N,{bold:!0,fontSize:5,children:"Sell to Specific User"}),t(N,{variant:"muted",fontSize:6,children:"Enter the username and price to sell the room directly."})]}),l(v,{gap:2,children:[l(v,{gap:1,children:[t(N,{fontSize:6,children:"Username"}),t("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter username",value:r,onChange:I=>o(I.target.value)})]}),l(v,{gap:1,children:[t(N,{fontSize:6,children:"Price"}),t("input",{type:"number",className:"form-control form-control-sm",placeholder:"0",min:"1",step:"1",value:c,onChange:I=>u(I.target.value)})]}),l(v,{gap:1,children:[t(N,{fontSize:6,children:"Currency Type"}),t(Nm,{value:d,onChange:g})]})]}),t(D,{variant:"success",onClick:E,disabled:!r.trim()||!c||parseFloat(c)<=0,children:"Sell Room"})]}),n==="advertisement"&&l(v,{gap:3,className:"room-sell-form",children:[l(v,{gap:2,children:[t(N,{bold:!0,fontSize:5,children:"Advertise Room for Sale"}),t(N,{variant:"muted",fontSize:6,children:"Advertise your room on the market so other users can buy it."})]}),l(v,{gap:2,children:[l(v,{gap:1,children:[t(N,{fontSize:6,children:"Quantity"}),t("input",{type:"number",className:"form-control form-control-sm",placeholder:"0",min:"1",step:"1",value:m,onChange:I=>f(I.target.value)})]}),l(v,{gap:1,children:[t(N,{fontSize:6,children:"Currency Type"}),t(Nm,{value:p,onChange:C})]})]}),t(D,{variant:"success",onClick:b,disabled:!m||parseFloat(m)<=0,children:"Advertise Room"})]})]})]}):null};const Dk=()=>{const{isVisible:a,close:e}=rg(),{roomSession:n=null}=De(),[s,r]=i.useState(""),[o,c]=i.useState(!1),[u,d]=i.useState(!1),[g,m]=i.useState("only_me"),f=i.useRef(null);if(Zn(),!a)return null;const p=z().userName,C=z().figure,E={totalLikes:1250,totalDislikes:45,totalListeners:3420,totalSongsPlayed:892},b={id:"next",name:"NextDJ",figure:"hd-180-1.hr-100-61.ch-210-66.lg-280-110.sh-305-62"},I=[{id:"1",name:"User1",figure:"hd-180-1.hr-100-61.ch-210-66.lg-280-110.sh-305-62"},{id:"2",name:"User2",figure:"hd-180-1.hr-100-61.ch-210-66.lg-280-110.sh-305-62"},{id:"3",name:"User3",figure:"hd-180-1.hr-100-61.ch-210-66.lg-280-110.sh-305-62"},{id:"4",name:"User1",figure:"hd-180-1.hr-100-61.ch-210-66.lg-280-110.sh-305-62"},{id:"5",name:"User4",figure:"hd-180-1.hr-100-61.ch-210-66.lg-280-110.sh-305-62"}],_=[{id:"s1",title:"Search Result 1",thumbnail:"https://via.placeholder.com/120x90",duration:"3:45"},{id:"s2",title:"Search Result 2",thumbnail:"https://via.placeholder.com/120x90",duration:"4:12"},{id:"s3",title:"Search Result 3",thumbnail:"https://via.placeholder.com/120x90",duration:"2:30"},{id:"s4",title:"Search Result 4",thumbnail:"https://via.placeholder.com/120x90",duration:"5:20"}],S=()=>{console.log("Previous video")},T=()=>{console.log("Next video")},R=()=>{s.trim()&&(c(!0),console.log("Search:",s))},y=O=>{console.log("Add to queue:",O)},A=()=>{d(!u)},U=O=>{m(O),d(!1),console.log("DJ Permission changed to:",O)};i.useEffect(()=>{const O=k=>{f.current&&!f.current.contains(k.target)&&d(!1)};return u&&document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[u]);const L=[{value:"only_me",label:"Only I can be DJ"},{value:"me_and_rights",label:"Me and users with rights"},{value:"anyone",label:"Anyone"}];return l(ie,{className:"nitro-room-youtube",theme:"primary",children:[t(ae,{headerText:"YouTube TV",onCloseClick:e}),(n==null?void 0:n.isRoomOwner)&&l(j,{children:[t(P,{position:"absolute",className:"nitro-room-youtube-config-button",onClick:A,children:t("i",{className:"fas fa-cog fa-icon"})}),u&&t(P,{position:"absolute",className:"nitro-room-youtube-config-dropdown",innerRef:f,children:l(v,{gap:0,children:[t(N,{bold:!0,fontSize:6,className:"config-dropdown-title",children:"Who can be DJ?"}),L.map(O=>t(P,{pointer:!0,className:`config-dropdown-option ${g===O.value?"selected":""}`,onClick:()=>U(O.value),children:t(N,{fontSize:6,children:O.label})},O.value))]})})]}),t(ne,{className:"room-youtube-content",children:l(re,{columnCount:12,gap:2,className:"room-youtube-grid",children:[t(v,{size:9,className:"room-youtube-video-area",children:l(v,{gap:2,children:[l(v,{gap:1,children:[t(N,{bold:!0,fontSize:5,children:"Currently Playing"}),t("div",{className:"room-youtube-current-dj",children:l(w,{gap:2,alignItems:"center",children:[t($e,{figure:C,direction:2,headOnly:!1,className:"room-youtube-dj-avatar"}),t(v,{justifyContent:"center",className:"room-youtube-dj-info",children:l(w,{gap:2,alignItems:"center",children:[l(N,{bold:!0,fontSize:5,children:["DJ ",p]}),t("div",{className:"room-youtube-dj-divider"}),l(w,{gap:3,className:"room-youtube-dj-stats",children:[l(v,{gap:0,alignItems:"center",children:[t(N,{fontSize:6,variant:"muted",children:"Likes"}),t(N,{bold:!0,fontSize:5,children:E.totalLikes})]}),l(v,{gap:0,alignItems:"center",children:[t(N,{fontSize:6,variant:"muted",children:"Dislikes"}),t(N,{bold:!0,fontSize:5,children:E.totalDislikes})]}),l(v,{gap:0,alignItems:"center",children:[t(N,{fontSize:6,variant:"muted",children:"Listeners"}),t(N,{bold:!0,fontSize:5,children:E.totalListeners})]}),l(v,{gap:0,alignItems:"center",children:[t(N,{fontSize:6,variant:"muted",children:"Songs"}),t(N,{bold:!0,fontSize:5,children:E.totalSongsPlayed})]})]})]})})]})})]}),t("div",{className:"room-youtube-video-container",children:t("div",{className:"room-youtube-video-placeholder",children:t(N,{variant:"muted",fontSize:5,children:"Video Player"})})})]})}),t(v,{size:3,className:"room-youtube-controls-area",children:l(v,{gap:2,children:[l(v,{gap:1,children:[t(N,{bold:!0,fontSize:5,children:"Search Music"}),l(w,{gap:1,children:[t("input",{type:"text",className:"form-control form-control-sm room-youtube-search-input",placeholder:"Search...",value:s,onChange:O=>{r(O.target.value),c(!1)},onKeyDown:O=>O.key==="Enter"&&R()}),t(D,{variant:"primary",onClick:R,className:"room-youtube-search-button",children:t("i",{className:"fas fa-search fa-icon"})})]}),o&&s.trim()&&t(v,{gap:1,className:"room-youtube-search-results",children:_.map(O=>t(P,{pointer:!0,className:"room-youtube-search-item",onClick:()=>y(O.id),children:l(w,{gap:1,children:[t("div",{className:"room-youtube-thumbnail",children:t("img",{src:O.thumbnail,alt:O.title})}),l(v,{justifyContent:"center",className:"room-youtube-video-info",children:[t(N,{small:!0,wrap:!0,children:O.title}),t(N,{variant:"muted",fontSize:6,children:O.duration})]})]})},O.id))})]}),l(w,{gap:1,justifyContent:"center",className:"room-youtube-nav-buttons",children:[l(D,{variant:"primary",onClick:S,className:"room-youtube-nav-button",children:[t("i",{className:"fas fa-chevron-left fa-icon"}),t(N,{children:"Previous"})]}),l(D,{variant:"primary",onClick:T,className:"room-youtube-nav-button",children:[t(N,{children:"Next"}),t("i",{className:"fas fa-chevron-right fa-icon"})]})]}),l(v,{gap:1,children:[t(N,{bold:!0,fontSize:5,children:"Next to Play"}),t("div",{className:"room-youtube-next-dj",children:l(w,{gap:2,alignItems:"center",children:[t($e,{figure:b.figure,direction:2,headOnly:!1,className:"room-youtube-next-avatar"}),t(v,{justifyContent:"center",className:"room-youtube-next-info",children:l(N,{bold:!0,fontSize:5,children:["DJ ",b.name]})})]})})]}),l(v,{gap:1,children:[t(N,{bold:!0,fontSize:5,children:"Queue"}),t(w,{gap:1,className:"room-youtube-queue-avatars",children:I.map((O,k)=>t(P,{pointer:!0,className:"room-youtube-queue-avatar",title:O.name,children:t($e,{figure:O.figure,direction:2,headOnly:!1})},`${O.id}-${k}`))})]})]})})]})})]})};const ri={hue:0,saturation:0,lightness:100},Pk=a=>{if(!a)return"#000000";const e=Math.round(a.hue/360*255),n=Math.round(a.saturation/100*255),s=Math.round(a.lightness/100*255),r=Ft.eight_bitVals_to_int(0,e,n,s),o=en.hslToRGB(r);return Ft.makeColorNumberHex(o)},Mk=a=>{const e=Ft.convertFromHex(a),n=en.rgbToHSL(e),[,s,r,o]=Ft.int_to_8BitVals(n);return{hue:Math.round(s/255*360),saturation:Math.round(r/255*100),lightness:Math.round(o/255*100)}},Lk=()=>{const{data:a,isVisible:e,close:n,applyChanges:s,wallColor:r,floorColor:o,backgroundColor:c,setWallColor:u,setFloorColor:d,setBackgroundColor:g,hasPendingChanges:m,canEdit:f}=sg(),[p,C]=i.useState("wall"),[E,b]=i.useState(0),[I,_]=i.useState(0),[S,T]=i.useState(100),R=i.useCallback(()=>{switch(p){case"wall":return r||ri;case"floor":return o||ri;case"background":return c||ri;default:return ri}},[p,r,o,c]);i.useEffect(()=>{if(!e)return;const W=R();console.debug("[RoomStyleEditor:View] sync sliders from activeColor",{activeTab:p,color:W}),b(Math.round(W.hue??0)),_(Math.round(W.saturation??0)),T(Math.round(W.lightness??0))},[p,R,e]);const y=i.useMemo(()=>Pk(R()),[R]),A=i.useCallback(W=>{switch(console.debug("[RoomStyleEditor:View] updateActiveColor",{activeTab:p,color:W}),p){case"wall":u(W);break;case"floor":d(W);break;case"background":g(W);break}},[p,u,d,g]),U=W=>{console.debug("[RoomStyleEditor:View] handleHexChange",{activeTab:p,hex:W});const G=Mk(W);b(G.hue),_(G.saturation),T(G.lightness),A(G)},L=W=>{console.debug("[RoomStyleEditor:View] handleHueChange",{activeTab:p,value:W}),b(W),A({hue:W,saturation:I,lightness:S})},O=W=>{console.debug("[RoomStyleEditor:View] handleSaturationChange",{activeTab:p,value:W}),_(W),A({hue:E,saturation:W,lightness:S})},k=W=>{console.debug("[RoomStyleEditor:View] handleLightnessChange",{activeTab:p,value:W}),T(W),A({hue:E,saturation:I,lightness:W})},x=W=>{console.debug("[RoomStyleEditor:View] handleTabChange",{from:p,to:W}),C(W)},V=()=>{f&&(console.debug("[RoomStyleEditor:View] handleApply",{activeTab:p,hue:E,saturation:I,lightness:S}),s())},B=()=>{n()};return!e||!a?null:l(ie,{className:"nitro-room-style-editor",children:[t(ae,{headerText:"Room Style",onCloseClick:B}),l(ne,{className:"room-style-content",children:[l("div",{className:"style-tabs",children:[l("button",{className:`tab ${p==="wall"?"active":""}`,onClick:()=>x("wall"),children:[t("i",{className:"fas fa-paint-roller"}),t("span",{children:"Wall"})]}),l("button",{className:`tab ${p==="floor"?"active":""}`,onClick:()=>x("floor"),children:[t("i",{className:"fas fa-vector-square"}),t("span",{children:"Floor"})]}),l("button",{className:`tab ${p==="background"?"active":""}`,onClick:()=>x("background"),children:[t("i",{className:"fas fa-image"}),t("span",{children:"Background"})]})]}),l("div",{className:"color-picker-inline",children:[t("input",{type:"color",className:"color-input",value:y,onChange:W=>U(W.target.value)}),t(D,{variant:"success",onClick:V,className:"apply-btn",disabled:!f||!m,children:""})]}),l(v,{gap:1,className:"color-controls",children:[l("div",{className:"slider-group",children:[l("label",{className:"slider-label",children:["H ",l("span",{className:"slider-value",children:[E,""]})]}),t("input",{type:"range",min:"0",max:"360",value:E,onChange:W=>L(parseInt(W.target.value,10)),className:"slider hue-slider"})]}),l("div",{className:"slider-group",children:[l("label",{className:"slider-label",children:["S ",l("span",{className:"slider-value",children:[I,"%"]})]}),t("input",{type:"range",min:"0",max:"100",value:I,onChange:W=>O(parseInt(W.target.value,10)),className:"slider saturation-slider"})]}),l("div",{className:"slider-group",children:[l("label",{className:"slider-label",children:["L ",l("span",{className:"slider-value",children:[S,"%"]})]}),t("input",{type:"range",min:"0",max:"100",value:S,onChange:W=>k(parseInt(W.target.value,10)),className:"slider lightness-slider"})]})]}),!f&&t(N,{small:!0,variant:"danger",children:"You don't have permission to edit this room."})]})]})},Uk=a=>{const[e,n]=i.useState(!1),{roomSession:s=null}=De();st([Cs.SHOW_THUMBNAIL,Cs.HIDE_THUMBNAIL,Cs.TOGGLE_THUMBNAIL],o=>{switch(o.type){case Cs.SHOW_THUMBNAIL:n(!0);return;case Cs.HIDE_THUMBNAIL:n(!1);return;case Cs.TOGGLE_THUMBNAIL:n(c=>!c);return}});const r=o=>{Y().saveTextureAsScreenshot(o,!0),n(!1)};return e?t(bS,{roomId:s.roomId,textureReceiver:r,onClose:()=>n(!1)}):null},Fk=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(null),[o,c]=i.useState(null),[u,d]=i.useState(null),[g,m]=i.useState(!1),{navigatorData:f=null}=Jn(),{roomSession:p=null}=De(),{canUseBuilder:C,isBuilderVisible:E,setIsBuilderVisible:b}=Zn(),{canOpen:I}=sg(),{open:_}=tg(),{open:S}=rg(),T=(R,y)=>{switch(R){case"settings":te("navigator/toggle-room-info");return;case"zoom":n(A=>{let U=Y().getRoomInstanceRenderingCanvasScale(p.roomId,1);return A?U*=2:U/=2,Y().setRoomInstanceRenderingCanvasScale(p.roomId,1,U),!A});return;case"chat_history":te("chat-history/toggle");return;case"like_room":M(new Tb(1));return;case"builder":b(A=>!A);return;case"room_style":p&&p.sendChatMessage(":roomstyle",0);return;case"toggle_room_link":te("navigator/toggle-room-link");return;case"navigator_search_tag":te(`navigator/search/${y}`),M(new fo("hotel_view",`tag:${y}`));return}};return F(bo,R=>{const y=R.getParser();!y.roomEnter||y.data.roomId!==p.roomId||(s!==y.data.roomName&&r(y.data.roomName),o!==y.data.ownerName&&c(y.data.ownerName),u!==y.data.tags&&d(y.data.tags))}),i.useEffect(()=>{m(!0);const R=setTimeout(()=>m(!1),5e3);return()=>clearTimeout(R)},[s,o,u]),l(w,{className:"nitro-room-tools-container",gap:2,children:[l(v,{center:!0,className:"nitro-room-tools p-2",children:[t(P,{pointer:!0,title:h("room.settings.button.text"),className:"icon icon-cog",onClick:()=>T("settings")}),t(P,{pointer:!0,title:h("room.zoom.button.text"),onClick:()=>T("zoom"),className:zt("icon",!e&&"icon-zoom-less",e&&"icon-zoom-more")}),t(P,{pointer:!0,title:h("room.chathistory.button.text"),onClick:()=>T("chat_history"),className:"icon icon-chat-history"}),C&&t(P,{pointer:!0,title:h("room.builder.button.text"),onClick:()=>T("builder"),className:"icon icon-builders"}),I&&l(j,{children:[t(P,{pointer:!0,title:h("room.style.editor.button.text"),className:"icon icon-room-style",onClick:()=>T("room_style"),children:t("i",{className:"fas fa-paint-roller fa-icon"})}),t(P,{pointer:!0,className:"icon icon-room-style-custom-button",onClick:()=>{console.log("Room style custom button clicked")},children:t("img",{src:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAASCAYAAABfJS4tAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEE3MUE2N0IzQUVEMTFFRjhGQzFDOTcwREQxMEVFMkEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEE3MUE2N0MzQUVEMTFFRjhGQzFDOTcwREQxMEVFMkEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0QTcxQTY3OTNBRUQxMUVGOEZDMUM5NzBERDEwRUUyQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0QTcxQTY3QTNBRUQxMUVGOEZDMUM5NzBERDEwRUUyQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkTSOREAAAEnSURBVHjaYvz//z8DCDAyMkIYlANGkJkQAmjofTtluIyCzAsIQ0OasDE3njI8eCIB5yoeugtxJ5CAGwo3kAyAbjgThivJBCD9yGawEOMCQgZiAyyEDGzRrGVQNISIRS/LxukAdAtYCLny8bODDHNmzAOzWxmm4rUAa1AQ4/XqdHe4BffPv2Coud6M07cs5EQUzAJ3v4MMMz8ewh3GZ+49YzBRksJp0MEzdzHEjpy9g1UtyCyyXAwycFZrOsRCRdzaWZBtwudqYgyEuRac9UA5b7UMJ1wA3XD7+38QQUKEgSAQ+uQ7xMU3v6owqHPfwVAEsgSfd7EZCjKLgeEy/jBG10QKYEK1iTKAbAYjlP7fIqgLF4QFCzkG1ry/DC82YYBqBT2IAAgwABCngb58Aw7RAAAADmVYSWZNTQAqAAAACAAAAAAAAADSU5MAAAAASUVORK5CYII=",self.location).href,alt:"Custom button"})})]}),t(P,{pointer:!0,title:"YouTube TV",className:"icon icon-youtube-room-tool",onClick:()=>S(),children:t("i",{className:"fab fa-youtube fa-icon"})}),f.canRate&&t(P,{pointer:!0,title:h("room.like.button.text"),onClick:()=>T("like_room"),className:"icon icon-like-room"}),(p==null?void 0:p.isRoomOwner)&&t(P,{pointer:!0,title:"Vender Quarto",className:"icon icon-sell-room",onClick:()=>_(),children:t("i",{className:"fas fa-store fa-icon"})})]}),t(v,{justifyContent:"center",children:t(ba,{type:gn.SLIDE_LEFT,inProp:g,timeout:300,children:t(v,{center:!0,children:l(v,{className:"nitro-room-tools-info rounded py-2 px-3",children:[l(v,{gap:1,children:[t(N,{wrap:!0,variant:"white",fontSize:4,children:s}),t(N,{variant:"muted",fontSize:5,children:o})]}),u&&u.length>0&&t(w,{gap:2,children:u.map((R,y)=>l(N,{small:!0,pointer:!0,variant:"white",className:"rounded bg-primary p-1",onClick:()=>T("navigator_search_tag",R),children:["#",R]},y))})]})})})})]})},Vk=a=>{const{question:e=null,canVote:n=null,vote:s=null,noVotes:r=null,yesVotes:o=null}=a;return l(v,{gap:2,className:"wordquiz-question p-2",children:[!n&&l(w,{fullWidth:!0,alignItems:"center",gap:2,children:[t(w,{center:!0,pointer:!0,className:"bg-danger rounded p-2",children:t(N,{variant:"white",children:r})}),t(N,{variant:"white",center:!0,textBreak:!0,children:e}),t(w,{center:!0,pointer:!0,className:"bg-success rounded p-2",children:t(N,{variant:"white",children:o})})]}),n&&l(v,{children:[t(N,{variant:"white",center:!0,textBreak:!0,children:e}),l(w,{fullWidth:!0,justifyContent:"center",gap:1,children:[t(w,{center:!0,pointer:!0,className:"bg-danger rounded p-1",onClick:c=>s(Ri),children:t(P,{className:"word-quiz-dislike"})}),t(w,{center:!0,pointer:!0,className:"bg-success rounded p-1",onClick:c=>s(Ph),children:t(P,{className:"word-quiz-like"})})]})]})]})},Bk=a=>{const{userIndex:e=null,vote:n=null,...s}=a;return t(du,{objectId:e,category:Z.UNIT,...s,children:t(w,{center:!0,pointer:!0,className:`bg-${n===Ri?"danger":"success"} rounded p-1`,children:t(P,{className:`word-quiz-${n===Ri?"dislike":"like"}-sm`})})})},Gk=a=>{const{question:e=null,answerSent:n=!1,answerCounts:s=null,userAnswers:r=null,vote:o=null}=Dv();return l(j,{children:[e&&t(Vk,{question:e.content,canVote:!n,vote:o,noVotes:s.get(Ri)||0,yesVotes:s.get(Ph)||0}),r&&Array.from(r.entries()).map(([c,u],d)=>t(Bk,{userIndex:c,vote:u.value},d))]})},Hk=a=>{const{roomSession:e=null}=De(),{simpleAlert:n=null}=Je();return RS(),Te(pc.ROOM_ZOOM,s=>Y().setRoomInstanceRenderingCanvasScale(s.roomId,1,s.level,null,null,!1,s.asDelta)),Te([ye.REQUEST_TEASER,ye.REQUEST_ECOTRONBOX,ye.REQUEST_CLOTHING_CHANGE,ye.REQUEST_PLAYLIST_EDITOR,ye.OPEN_WIDGET,ye.CLOSE_WIDGET,Pa.FURNI_CLICK,Pa.FURNI_DOUBLE_CLICK,Pa.TOOLTIP_SHOW,Pa.TOOLTIP_HIDE],s=>{if(e)switch(s.objectId,s.category,s.type){}}),Ye([It.RSEME_KICKED,It.RSEME_PETS_FORBIDDEN_IN_HOTEL,It.RSEME_PETS_FORBIDDEN_IN_FLAT,It.RSEME_MAX_PETS,It.RSEME_MAX_NUMBER_OF_OWN_PETS,It.RSEME_NO_FREE_TILES_FOR_PET,It.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,It.RSEME_BOTS_FORBIDDEN_IN_HOTEL,It.RSEME_BOTS_FORBIDDEN_IN_FLAT,It.RSEME_BOT_LIMIT_REACHED,It.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,It.RSEME_BOT_NAME_NOT_ACCEPTED],s=>{let r=h("error.title"),o="";switch(s.type){case It.RSEME_MAX_PETS:o=h("room.error.max_pets");break;case It.RSEME_MAX_NUMBER_OF_OWN_PETS:o=h("room.error.max_own_pets");break;case It.RSEME_KICKED:o=h("room.error.kicked"),r=h("generic.alert.title");break;case It.RSEME_PETS_FORBIDDEN_IN_HOTEL:o=h("room.error.pets.forbidden_in_hotel");break;case It.RSEME_PETS_FORBIDDEN_IN_FLAT:o=h("room.error.pets.forbidden_in_flat");break;case It.RSEME_NO_FREE_TILES_FOR_PET:o=h("room.error.pets.no_free_tiles");break;case It.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:o=h("room.error.pets.selected_tile_not_free");break;case It.RSEME_BOTS_FORBIDDEN_IN_HOTEL:o=h("room.error.bots.forbidden_in_hotel");break;case It.RSEME_BOTS_FORBIDDEN_IN_FLAT:o=h("room.error.bots.forbidden_in_flat");break;case It.RSEME_BOT_LIMIT_REACHED:o=h("room.error.max_bots");break;case It.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:o=h("room.error.bots.selected_tile_not_free");break;case It.RSEME_BOT_NAME_NOT_ACCEPTED:o=h("room.error.bots.name.not.accepted");break;default:return}n(o,Ie.DEFAULT,null,null,r)}),l(j,{children:[t(yO,{}),t(VO,{}),t(MO,{}),t(HO,{}),t(Ok,{}),t(Fk,{}),t(Ak,{}),t(Uk,{}),t(BO,{}),t(kk,{}),t(GO,{}),t(Gk,{}),t(jO,{}),t(AO,{}),t(Lk,{}),t(xk,{}),t(Dk,{})]})},Wk=a=>{const{roomSession:e=null}=De(),n=i.useRef();return i.useEffect(()=>{if(!e)return;const s=_e().application.renderer.view;if(!s)return;s.onclick=p=>Fa(p),s.onmousemove=p=>Fa(p),s.onmousedown=p=>Fa(p),s.onmouseup=p=>Fa(p),s.ontouchstart=p=>Ga(p),s.ontouchmove=p=>Ga(p),s.ontouchend=p=>Ga(p),s.ontouchcancel=p=>Ga(p);const r=new Set,o=new Map;let c=null;const u=50,d=(p=3)=>{if(r.size===0)return;const C=Y();if(!C||!e)return;const E=e.roomId,b=e.ownRoomIndex,I=C.getRoomObject(E,b,100);if(!I)return;const _=I.getLocation();if(!_)return;let S=Math.floor(_.x),T=Math.floor(_.y),R=!1;r.has("ArrowUp")&&(S-=p,R=!0),r.has("ArrowDown")&&(S+=p,R=!0),r.has("ArrowLeft")&&(T+=p,R=!0),r.has("ArrowRight")&&(T-=p,R=!0),R&&M(new wb(S,T))},g=p=>{if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(p.key)){p.preventDefault();const E=Date.now();if(!r.has(p.key)){let b=!1;for(const[I,_]of o.entries())if(I!==p.key&&r.has(I)&&E-_<=u){b=!0;break}!b&&r.size>0&&(c&&(clearInterval(c),c=null),r.clear(),o.clear()),r.add(p.key),o.set(p.key,E),d(1),setTimeout(()=>{r.has(p.key)&&!c&&(c=setInterval(()=>d(3),150))},200)}}},m=p=>{["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(p.key)&&(p.preventDefault(),r.delete(p.key),o.delete(p.key),r.size===0&&c&&(clearInterval(c),c=null))};window.addEventListener("keydown",g),window.addEventListener("keyup",m);const f=n.current;if(f)return f.appendChild(s),()=>{window.removeEventListener("keydown",g),window.removeEventListener("keyup",m),c&&(clearInterval(c),c=null),r.clear(),o.clear()}},[e]),t(lv,{children:t(P,{fit:!0,innerRef:n,className:!e&&"d-none",children:e&&l(j,{children:[t(Hk,{}),e.isSpectator&&t(sO,{})]})})})},jk=a=>{const{useGuideTool:e=!1,unseenAchievementCount:n=0,setMeExpanded:s=null,children:r=null,...o}=a,c=i.useRef();return i.useEffect(()=>{const u=Oe();u&&Y().selectRoomObject(u.roomId,u.ownRoomIndex,Z.UNIT)},[]),i.useEffect(()=>{const u=d=>s(!1);return document.addEventListener("click",u),()=>document.removeEventListener(Ae.MOUSE_CLICK,u)},[s]),l(w,{innerRef:c,alignItems:"center",className:"nitro-toolbar-me p-2",gap:2,children:[X("guides.enabled")&&e&&t(P,{pointer:!0,className:"navigation-item icon icon-me-helper-tool",onClick:u=>nt(new Cn(Cn.TOGGLE_GUIDE_TOOL))}),t(P,{pointer:!0,className:"navigation-item icon icon-me-achievements",onClick:u=>te("achievements/toggle"),children:n>0&&t(qs,{count:n})}),t(P,{pointer:!0,className:"navigation-item icon icon-me-profile",onClick:u=>pn(z().userId)}),t(P,{pointer:!0,className:"navigation-item icon icon-me-rooms",onClick:u=>te("navigator/search/myworld_view")}),t(P,{pointer:!0,className:"navigation-item icon icon-me-clothing",onClick:u=>te("avatar-editor/toggle")}),t(P,{pointer:!0,className:"navigation-item icon icon-me-settings",onClick:u=>te("user-settings/toggle")}),r]})},qk=a=>{const{isInRoom:e}=a,[n,s]=i.useState(!1),[r,o]=i.useState(!1),[c,u]=i.useState(!1),[d,g]=i.useState(!1),{userFigure:m=null}=Zn(),{getFullCount:f=0}=Un(),{getTotalUnseen:p=0}=gl(),{requests:C=[]}=Tn(),{iconState:E=Ns.HIDDEN}=qh(),{unreadCount:b=0}=tu(),I=z().isModerator;return F(sh,_=>{const S=_.getParser();o(S.isAllowed(nh.USE_GUIDE_TOOL))}),Te(yb.ANIMATE_ICON,_=>{((T,R,y,A)=>{const U=document.body.getElementsByClassName(T)[0];if(!U)return;R.className="toolbar-icon-animation",R.style.visibility="visible",R.style.left=y+"px",R.style.top=A+"px",document.body.append(R);const L=U.getBoundingClientRect(),O=R.getBoundingClientRect(),k=O.x-L.x,x=O.y-L.y,V=Math.sqrt(k*k+x*x),B=500-Math.abs(1/V*100*500*.5),W=20,G=`ToolbarBouncing[${T}]`;Ul.getMotionByTag(G)||(Ul.runMotion(new Vu(new Rb(B+8),new Ob(U,400,12))).tag=G);const H=new Vu(new kb(new Ab(R,B,L.x-O.x+W,L.y-O.y,100,1),1),new xb(R));Ul.runMotion(H)})("icon-inventory",_.image,_.x,_.y)}),l(j,{children:[t(ba,{type:gn.FADE_IN,inProp:n,timeout:300,children:t(jk,{useGuideTool:r,unseenAchievementCount:p,setMeExpanded:s})}),l(w,{alignItems:"center",justifyContent:"between",gap:2,className:`nitro-toolbar py-1 px-3 ${e?"":"is-hotel-view"}`,children:[l(w,{gap:2,alignItems:"center",style:{paddingLeft:"24px"},children:[t(P,{pointer:!0,className:"toolbar-toggle-btn toolbar-toggle-left",onClick:()=>u(!c),title:c?"Expandir cones":"Minimizar cones",children:t("i",{className:`fas fa-chevron-${c?"right":"left"}`})}),l(w,{alignItems:"center",gap:2,className:`toolbar-icons-left ${c?"minimized":""}`,children:[l(w,{center:!0,pointer:!0,className:"navigation-item item-avatar "+(n?"active ":""),onClick:_=>s(!n),children:[t($e,{figure:m,direction:2,position:"absolute"}),p>0&&t(qs,{count:p})]}),e&&t(P,{pointer:!0,className:"navigation-item icon icon-habbo",onClick:_=>Hc()}),!e&&t(P,{pointer:!0,className:"navigation-item icon icon-house",onClick:_=>te("navigator/goto/home")}),t(P,{pointer:!0,className:"navigation-item icon icon-rooms",onClick:_=>te("navigator/toggle")}),X("game.center.enabled")&&t(P,{pointer:!0,className:"navigation-item icon icon-game",onClick:_=>te("games/toggle")}),t(P,{pointer:!0,className:"navigation-item icon icon-catalog",onClick:_=>te("catalog/toggle")}),t(P,{pointer:!0,className:"navigation-item icon icon-inventory",onClick:_=>te("inventory/toggle"),children:f>0&&t(qs,{count:f})}),e&&t(P,{pointer:!0,className:"navigation-item icon icon-camera",onClick:_=>te("camera/toggle")}),I&&t(P,{pointer:!0,className:"navigation-item icon icon-modtools",onClick:_=>te("mod-tools/toggle")})]})]}),l(w,{alignItems:"center",gap:2,style:{paddingRight:"24px"},children:[l(w,{gap:2,className:`toolbar-icons-right ${d?"minimized":""}`,children:[l(P,{pointer:!0,className:"navigation-item",style:{position:"relative",width:"32px",height:"33px"},onClick:_=>te("mention-logs/toggle"),children:[t("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAABLElEQVR42r2WsRHCMAxFwwLswBhMQMEQlFT0oWKUdOyQNjVNpqDKDOYkIp8sS7HOycV3/2I7lt6XY0iaZn0Ls3ZrCAzfC2oPAwnw059j3zCw2lACBLW3YwaWBlh/eyD0rbkacBVQg8LYA18E0tXaZpijecjTPk64tgQO0zT9A+bFMrEHyKE0vwRGaNd1cXtoyzQDS8AkPq04mJWSMIA5LhlQgaJixsih4ziivAZKQBrDGthNDo+Dw/2tGrAq8AD5ehOMuj4TA/KQlACWQShi6F85WExGA9xELZCUgWkL6MYaAxJI+Sg3/WoimMM9BjwVynzESU42h/MA6xGIv8IYp8Va0AzODchE/NCB+D0J40ALqsI1Ex5pOdwvCS24RjUfAqHWhHgcm3zQeVVsP3VweUKbAKONAAAAAElFTkSuQmCC",alt:"Mention Logs",className:"icon-mention-logs",style:{width:"100%",height:"100%",display:"block"}}),b>0&&t(qs,{count:b})]}),t(P,{pointer:!0,className:"navigation-item icon icon-friendall",onClick:_=>te("friends/toggle"),children:C.length>0&&t(qs,{count:C.length})}),(E===Ns.SHOW||E===Ns.UNREAD)&&t(P,{pointer:!0,className:`navigation-item icon icon-message ${E===Ns.UNREAD&&"is-unseen"}`,onClick:_=>cl()})]}),t(P,{id:"toolbar-friend-bar-container",className:`d-none d-lg-block ${d?"minimized":""}`}),t(P,{pointer:!0,className:"toolbar-toggle-btn toolbar-toggle-right",onClick:()=>g(!d),title:d?"Expandir cones":"Minimizar cones",children:t("i",{className:`fas fa-chevron-${d?"left":"right"}`})})]})]})]})},zk=a=>{const{badges:e=null,gap:n=1,justifyContent:s="between",...r}=a;return t(j,{children:e&&e.length>0&&e.map((o,c)=>t(v,{center:!0,children:t(ze,{badgeCode:o},o)},o))})},Yk=a=>{const{relationships:e=null}=a,n=({type:s})=>{const r=e&&e.relationshipStatusMap.hasKey(s)?e.relationshipStatusMap.getValue(s):null,o=as.RELATIONSHIP_NAMES[s].toLocaleLowerCase();return l(w,{fullWidth:!0,gap:1,children:[t(w,{center:!0,className:"user-relationship",children:t("i",{className:`nitro-friends-spritesheet icon-${o}`})}),l(v,{grow:!0,gap:0,children:[l(w,{alignItems:"center",justifyContent:"between",className:"bg-white rounded px-2 py-1 user-relationship",children:[l(N,{small:!0,underline:!0,pointer:!0,onClick:c=>r&&r.randomFriendId>=1&&pn(r.randomFriendId),children:[(!r||r.friendCount===0)&&h("extendedprofile.add.friends"),r&&r.friendCount>=1&&r.randomFriendName]}),r&&r.friendCount>=1&&t(w,{center:!0,position:"relative",className:"avatar-image-container",children:t($e,{figure:r.randomFriendFigure,headOnly:!0,direction:4})})]}),l(N,{small:!0,italics:!0,className:"user-relationship-count",children:[(!r||r.friendCount===0)&&h("extendedprofile.no.friends.in.this.category"),r&&r.friendCount>1&&h(`extendedprofile.relstatus.others.${o}`,["count"],[(r.friendCount-1).toString()]),""]})]})]})};return l(j,{children:[t(n,{type:as.HEART}),t(n,{type:as.SMILE}),t(n,{type:as.BOBBA})]})},Kk=a=>{const{relationships:e=null,friendsCount:n=null}=a;return l(v,{gap:1,children:[l(N,{small:!0,children:[t("b",{children:h("extendedprofile.friends.count")})," ",n]}),t(N,{bold:!0,small:!0,children:h("extendedprofile.relstatus")}),t(v,{children:t(Yk,{relationships:e})})]})},$k=a=>{const{itsMe:e=null,groups:n=null,onLeaveGroup:s=null,overflow:r="hidden",gap:o=2,...c}=a,[u,d]=i.useState(null),[g,m]=i.useState(null);return F(ga,f=>{const p=f.getParser();!u||u!==p.id||p.flag||m(p)}),i.useEffect(()=>{u&&M(new Xo(u,!1))},[u]),i.useEffect(()=>{m(null),n.length>0&&d(f=>(f===n[0].groupId&&M(new Xo(n[0].groupId,!1)),n[0].groupId))},[n]),!n||!n.length?t(v,{center:!0,fullHeight:!0,children:l(w,{justifyContent:"center",gap:2,children:[t(P,{className:"no-group-spritesheet image-1"}),t(P,{className:"no-group-spritesheet image-2"}),t(P,{className:"no-group-spritesheet image-3"})]})}):l(re,{overflow:r,gap:2,...c,children:[t(v,{alignItems:"center",size:2,overflow:"auto",children:t(Le,{overflow:null,columnCount:1,columnMinHeight:50,className:"user-groups-container",children:n.map((f,p)=>l(Se,{overflow:"unset",itemActive:u===f.groupId,onClick:()=>d(f.groupId),className:"p-1",children:[e&&t("i",{className:"position-absolute end-0 top-0 z-index-1 icon icon-group-"+(f.favourite?"favorite":"not-favorite"),onClick:()=>L_(f)}),t(ze,{badgeCode:f.badgeCode,isGroup:!0})]},p))})}),t(v,{size:10,overflow:"hidden",children:g&&t(_g,{groupInformation:g,onClose:s})})]})},Qk=a=>{const{userProfile:e=null}=a,[n,s]=i.useState(e.requestSent),r=e.id===z().userId,o=!n&&!r&&!e.isMyFriend&&!e.requestSent,c=()=>{s(!0),M(new Bm(e.username))};return i.useEffect(()=>{s(e.requestSent)},[e]),l(w,{gap:2,children:[t(v,{center:!0,className:"avatar-container",children:t($e,{figure:e.figure,direction:2})}),l(v,{children:[l(v,{gap:0,children:[t(N,{bold:!0,children:e.username}),l(N,{italics:!0,textBreak:!0,small:!0,children:[e.motto,""]})]}),l(v,{gap:1,children:[l(N,{small:!0,children:[t("b",{children:h("extendedprofile.created")})," ",e.registration]}),l(N,{small:!0,children:[t("b",{children:h("extendedprofile.last.login")})," ",ls.format(e.secondsSinceLastVisit,".ago",2)]}),l(N,{small:!0,children:[t("b",{children:h("extendedprofile.achievementscore")})," ",e.achievementPoints]})]}),l(w,{gap:1,children:[e.isOnline&&t("i",{className:"icon icon-pf-online"}),!e.isOnline&&t("i",{className:"icon icon-pf-offline"}),l(w,{alignItems:"center",gap:1,children:[o&&t(N,{small:!0,underline:!0,pointer:!0,onClick:c,children:h("extendedprofile.addasafriend")}),!o&&l(j,{children:[t("i",{className:"icon icon-pf-tick"}),r&&t(N,{children:h("extendedprofile.me")}),e.isMyFriend&&t(N,{children:h("extendedprofile.friend")}),(n||e.requestSent)&&t(N,{children:h("extendedprofile.friendrequestsent")})]})]})]})]})]})},Xk=a=>{const[e,n]=i.useState(null),[s,r]=i.useState([]),[o,c]=i.useState(null),u=()=>{n(null),r([]),c(null)},d=()=>{!e||e.id!==z().userId||pn(e.id)};return F(Db,g=>{const m=g.getParser();!e||m.userId!==e.id||r(m.badges)}),F(uh,g=>{const m=g.getParser();!e||m.userId!==e.id||c(m)}),F(Mb,g=>{const m=g.getParser();let f=!1;n(p=>(p&&p.id&&(f=p.id===m.id),m)),f||(r([]),c(null)),M(new Pb(m.id)),M(new dh(m.id))}),F(Lb,g=>{const m=g.getParser();m.userId==(e==null?void 0:e.id)&&pn(m.userId)}),Te(Tt.SELECTED,g=>{if(!e||g.category!==Z.UNIT)return;const m=Oe().userDataManager.getUserDataByIndex(g.objectId);m.type===bt.USER&&pn(m.webID)}),e?l(ie,{uniqueKey:"nitro-user-profile",theme:"primary-slim",className:"user-profile",children:[t(ae,{headerText:h("extendedprofile.caption"),onCloseClick:u}),l(ne,{overflow:"hidden",children:[l(re,{fullHeight:!1,gap:2,children:[l(v,{size:7,gap:1,className:"user-container pe-2",children:[t(Qk,{userProfile:e}),t(re,{columnCount:5,fullHeight:!0,className:"bg-muted rounded px-2 py-1",children:t(zk,{fullWidth:!0,center:!0,badges:s})})]}),t(v,{size:5,children:o&&t(Kk,{relationships:o,friendsCount:e.friendsCount})})]}),t(w,{alignItems:"center",className:"rooms-button-container px-2 py-1",children:l(w,{alignItems:"center",gap:1,onClick:g=>te(`navigator/search/hotel_view/owner:${e.username}`),children:[t("i",{className:"icon icon-rooms"}),t(N,{bold:!0,underline:!0,pointer:!0,children:h("extendedprofile.rooms")})]})}),t($k,{fullWidth:!0,itsMe:e.id===z().userId,groups:e.groups,onLeaveGroup:d})]})]}):null},Jk=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(null),[o,c]=Wh(),[u,d]=jh(),[g,m]=i.useState(!1),{roomSession:f=null}=De(),p=(b,I)=>{let _=!0;const S=s.clone();switch(b){case"close_view":n(!1),_=!1;return;case"oldchat":S.oldChat=I,M(new Vb(S.oldChat));break;case"room_invites":S.roomInvites=I,M(new Fb(S.roomInvites));break;case"camera_follow":S.cameraFollow=I,M(new Ub(S.cameraFollow));break;case"system_volume":S.volumeSystem=I,S.volumeSystem=Math.max(0,S.volumeSystem),S.volumeSystem=Math.min(100,S.volumeSystem);break;case"furni_volume":S.volumeFurni=I,S.volumeFurni=Math.max(0,S.volumeFurni),S.volumeFurni=Math.min(100,S.volumeFurni);break;case"trax_volume":S.volumeTrax=I,S.volumeTrax=Math.max(0,S.volumeTrax),S.volumeTrax=Math.min(100,S.volumeTrax);break}_&&r(S),bc(S)},C=b=>{switch(b){case"volume":M(new Bb(Math.round(s.volumeSystem),Math.round(s.volumeFurni),Math.round(s.volumeTrax)));break}};F(Xm,b=>{const I=b.getParser(),_=new Gb;_.volumeSystem=I.volumeSystem,_.volumeFurni=I.volumeFurni,_.volumeTrax=I.volumeTrax,_.oldChat=I.oldChat,_.roomInvites=I.roomInvites,_.cameraFollow=I.cameraFollow,_.flags=I.flags,_.chatType=I.chatType,r(_),bc(_)}),i.useEffect(()=>{const b={linkReceived:I=>{const _=I.split("/");if(!(_.length<2))switch(_[1]){case"show":n(!0);return;case"hide":n(!1);return;case"toggle":n(S=>!S);return}},eventUrlPrefix:"user-settings/"};return _t(b),()=>St(b)},[]);const E=b=>{if(m(b),!f)return;const I=b?":mentions off":":mentions on";f.sendChatMessage(I,0),console.log(` Comando enviado no chat: ${I}`)};return i.useEffect(()=>{s&&nt(s)},[s]),!e||!s?null:l(ie,{uniqueKey:"user-settings",className:"user-settings-window",theme:"primary-slim",children:[t(ae,{headerText:h("widget.memenu.settings.title"),onCloseClick:b=>p("close_view")}),l(ne,{className:"text-black",children:[l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:s.oldChat,onChange:b=>p("oldchat",b.target.checked)}),t(N,{children:h("memenu.settings.chat.prefer.old.chat")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:s.roomInvites,onChange:b=>p("room_invites",b.target.checked)}),t(N,{children:h("memenu.settings.other.ignore.room.invites")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:s.cameraFollow,onChange:b=>p("camera_follow",b.target.checked)}),t(N,{children:h("memenu.settings.other.disable.room.camera.follow")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:o,onChange:b=>c(b.target.checked)}),t(N,{children:h("memenu.settings.other.place.multiple.objects")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:u,onChange:b=>d(b.target.checked)}),t(N,{children:h("memenu.settings.other.skip.purchase.confirmation")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:g,onChange:b=>E(b.target.checked)}),t(N,{children:"Disable mentions"})]})]}),l(v,{children:[t(N,{bold:!0,children:h("widget.memenu.settings.volume")}),l(v,{gap:1,children:[t(N,{children:h("widget.memenu.settings.volume.ui")}),l(w,{alignItems:"center",gap:1,children:[s.volumeSystem===0&&t(vl,{className:zt(s.volumeSystem>=50&&"text-muted","fa-icon")}),s.volumeSystem>0&&t(Tl,{className:zt(s.volumeSystem>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeSystem",value:s.volumeSystem,onChange:b=>p("system_volume",b.target.value),onMouseUp:()=>C("volume")}),t(wl,{className:zt(s.volumeSystem<50&&"text-muted","fa-icon")})]})]}),l(v,{gap:1,children:[t(N,{children:h("widget.memenu.settings.volume.furni")}),l(w,{alignItems:"center",gap:1,children:[s.volumeFurni===0&&t(vl,{className:zt(s.volumeFurni>=50&&"text-muted","fa-icon")}),s.volumeFurni>0&&t(Tl,{className:zt(s.volumeFurni>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeFurni",value:s.volumeFurni,onChange:b=>p("furni_volume",b.target.value),onMouseUp:()=>C("volume")}),t(wl,{className:zt(s.volumeFurni<50&&"text-muted","fa-icon")})]})]}),l(v,{gap:1,children:[t(N,{children:h("widget.memenu.settings.volume.trax")}),l(w,{alignItems:"center",gap:1,children:[s.volumeTrax===0&&t(vl,{className:zt(s.volumeTrax>=50&&"text-muted","fa-icon")}),s.volumeTrax>0&&t(Tl,{className:zt(s.volumeTrax>=50&&"text-muted","fa-icon")}),t("input",{type:"range",className:"custom-range w-100",min:"0",max:"100",step:"1",id:"volumeTrax",value:s.volumeTrax,onChange:b=>p("trax_volume",b.target.value),onMouseUp:()=>C("volume")}),t(wl,{className:zt(s.volumeTrax<50&&"text-muted","fa-icon")})]})]})]})]})]})},Zk=a=>{const{trigger:e=null,furniIds:n=[]}=we();return l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.pickfurnis.caption",["count","limit"],[n.length.toString(),e.maximumItemSelectionCount.toString()])}),t(N,{small:!0,children:h("wiredfurni.pickfurnis.desc")})]})},mu=a=>{const{wiredType:e="",requiresFurni:n=he.STUFF_SELECTION_OPTION_NONE,save:s=null,validate:r=null,children:o=null,hasSpecialInput:c=!1}=a,[u,d]=i.useState(null),[g,m]=i.useState(null),[f,p]=i.useState(!1),{trigger:C=null,setTrigger:E=null,setIntParams:b=null,setStringParam:I=null,setFurniIds:_=null,setAllowsFurni:S=null,saveWired:T=null}=we(),R=()=>E(null),y=()=>{r&&!r()||(s&&s(),p(!0))};return i.useEffect(()=>{f&&(T(),p(!1))},[f,T]),i.useEffect(()=>{if(!C)return;const A=C.spriteId||-1,U=z().getFloorItemData(A);U?(d(U.name),m(U.description)):(d("NAME: "+A),m("NAME: "+A)),c&&(b(C.intData),I(C.stringData)),n>he.STUFF_SELECTION_OPTION_NONE&&_(L=>(L&&L.length&&Or.clearSelectionShaderFromFurni(L),C.selectedItems&&C.selectedItems.length?(Or.applySelectionShaderToFurni(C.selectedItems),C.selectedItems):[])),S(n)},[C,c,n,b,I,_,S]),l(ie,{uniqueKey:"nitro-wired",className:"nitro-wired",theme:"primary-slim",children:[t(ae,{headerText:h("wiredfurni.title"),onCloseClick:R}),l(ne,{children:[l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("i",{className:`icon icon-wired-${e}`}),t(N,{bold:!0,children:u})]}),t(N,{small:!0,children:g})]}),!!o&&t("hr",{className:"m-0 bg-dark"}),o,n>he.STUFF_SELECTION_OPTION_NONE&&l(j,{children:[t("hr",{className:"m-0 bg-dark"}),t(Zk,{})]}),l(w,{alignItems:"center",gap:1,children:[t(D,{fullWidth:!0,variant:"success",onClick:y,children:h("wiredfurni.ready")}),t(D,{fullWidth:!0,variant:"secondary",onClick:R,children:h("cancel")})]})]})]})},ft=a=>{const{requiresFurni:e=he.STUFF_SELECTION_OPTION_NONE,save:n=null,hasSpecialInput:s=!1,children:r=null}=a,{trigger:o=null,actionDelay:c=0,setActionDelay:u=null}=we();return i.useEffect(()=>{u(o.delayInPulses)},[o,u]),l(mu,{wiredType:"action",requiresFurni:e,save:n,hasSpecialInput:s,children:[r,!!r&&t("hr",{className:"m-0 bg-dark"}),l(v,{children:[t(N,{bold:!0,children:h("wiredfurni.params.delay",["seconds"],[Ca(c)])}),t(Vt,{className:"nitro-slider",min:0,max:20,value:c,onChange:d=>u(d)})]})]})},eA="hd-180-1.ch-210-66.lg-270-82.sh-290-81",tA=a=>{const[e,n]=i.useState(""),[s,r]=i.useState(""),{trigger:o=null,setStringParam:c=null}=we(),u=()=>c(e+Co+s);return i.useEffect(()=>{const d=o.stringData.split(Co);d.length>0&&n(d[0]),d.length>1&&r(d[1].length>0?d[1]:eA)},[o]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:d=>n(d.target.value)})]}),l(w,{center:!0,children:[t($e,{figure:s,direction:4}),t(D,{onClick:d=>r(z().figure),children:h("wiredfurni.params.capture.figure")})]})]})},nA=a=>{const[e,n]=i.useState(""),[s,r]=i.useState(-1),{trigger:o=null,setStringParam:c=null,setIntParams:u=null}=we(),d=()=>{c(e),u([s])};return i.useEffect(()=>{n(o.stringData),r(o.intData.length>0?o.intData[0]:0)},[o]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:g=>n(g.target.value)})]}),l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode1",checked:s===1,onChange:g=>r(1)}),t(N,{children:h("wiredfurni.params.start.following")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"followMode",id:"followMode2",checked:s===0,onChange:g=>r(0)}),t(N,{children:h("wiredfurni.params.stop.following")})]})]})]})},sA=[2,5,7,8,9,10,27],rA=a=>{const[e,n]=i.useState(""),[s,r]=i.useState(-1),{trigger:o=null,setStringParam:c=null,setIntParams:u=null}=we(),d=()=>{c(e),u([s])};return i.useEffect(()=>{n(o.stringData),r(o.intData.length>0?o.intData[0]:0)},[o]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:g=>n(g.target.value)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.handitem")}),l("select",{className:"form-select form-select-sm",value:s,onChange:g=>r(parseInt(g.target.value)),children:[t("option",{value:"0",children:"------"}),sA.map(g=>t("option",{value:g,children:h(`handitem${g}`)},g))]})]})]})},oA=a=>{const[e,n]=i.useState(""),{trigger:s=null,setStringParam:r=null}=we(),o=()=>r(e);return i.useEffect(()=>{n(s.stringData)},[s]),t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>n(c.target.value)})]})})},aA=a=>{const[e,n]=i.useState(""),[s,r]=i.useState(""),[o,c]=i.useState(-1),{trigger:u=null,setStringParam:d=null,setIntParams:g=null}=we(),m=()=>{d(e+Co+s),g([o])};return i.useEffect(()=>{const f=u.stringData.split(Co);f.length>0&&n(f[0]),f.length>1&&r(f[1].length>0?f[1]:""),c(u.intData.length>0?u.intData[0]:0)},[u]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:f=>n(f.target.value)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:X("wired.action.bot.talk.to.avatar.max.length",64),value:s,onChange:f=>r(f.target.value)})]}),l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:o===0,onChange:f=>c(0)}),t(N,{children:h("wiredfurni.params.talk")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:o===1,onChange:f=>c(1)}),t(N,{children:h("wiredfurni.params.whisper")})]})]})]})},iA=a=>{const[e,n]=i.useState(""),[s,r]=i.useState(""),[o,c]=i.useState(-1),{trigger:u=null,setStringParam:d=null,setIntParams:g=null}=we(),m=()=>{d(e+Co+s),g([o])};return i.useEffect(()=>{const f=u.stringData.split(Co);f.length>0&&n(f[0]),f.length>1&&r(f[1].length>0?f[1]:""),c(u.intData.length>0?u.intData[0]:0)},[u]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:m,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:f=>n(f.target.value)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:X("wired.action.bot.talk.max.length",64),value:s,onChange:f=>r(f.target.value)})]}),l(v,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode1",checked:o===0,onChange:f=>c(0)}),t(N,{children:h("wiredfurni.params.talk")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"talkMode",id:"talkMode2",checked:o===1,onChange:f=>c(1)}),t(N,{children:h("wiredfurni.params.shout")})]})]})]})},lA=a=>{const[e,n]=i.useState(""),{trigger:s=null,setStringParam:r=null}=we(),o=()=>r(e);return i.useEffect(()=>{n(s.stringData)},[s]),t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>n(c.target.value)})]})})},cA=a=>t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),uA=a=>t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),dA=a=>{const[e,n]=i.useState(""),{trigger:s=null,setStringParam:r=null}=we(),o=()=>r(e);return i.useEffect(()=>{n(s.stringData)},[s]),t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>n(c.target.value),maxLength:X("wired.action.chat.max.length",100)})]})})},mA=a=>t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),hA=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(1),[o,c]=i.useState(!1),[u,d]=i.useState(1),[g,m]=i.useState(1),[f,p]=i.useState([]),{trigger:C=null,setIntParams:E=null,setStringParam:b=null}=we(),I=()=>p(R=>[...R,{isBadge:!1,itemCode:"",probability:null}]),_=R=>{p(y=>{const A=Array.from(y);return A.splice(R,1),A})},S=(R,y,A,U)=>{const L=Array.from(f),O=L[R];O&&(O.isBadge=y,O.itemCode=A,O.probability=U,p(L))},T=()=>{let R=[];for(const y of f){if(!y.itemCode)continue;const A=[y.isBadge?"0":"1",y.itemCode,y.probability.toString()];R.push(A.join(","))}R.length>0&&(b(R.join(";")),E([s,o?1:0,u,g]))};return i.useEffect(()=>{const R=[];if(C.stringData.length>0&&C.stringData.includes(";")){const y=C.stringData.split(";");for(const A of y){const U=A.split(",");U.length===3&&R.push({isBadge:U[0]==="0",itemCode:U[1],probability:Number(U[2])})}}R.length===0&&R.push({isBadge:!1,itemCode:"",probability:null}),r(C.intData.length>0?C.intData[0]:0),c(C.intData.length>1?C.intData[1]===1:!1),d(C.intData.length>2?C.intData[2]:0),m(C.intData.length>3?C.intData[3]:0),n(C.intData.length>3?C.intData[3]>0:!1),p(R)},[C]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:T,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"limitEnabled",onChange:R=>n(R.target.checked)}),t(N,{children:h("wiredfurni.params.prizelimit",["amount"],[e?u.toString():""])})]}),!e&&t(N,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"Reward limit not set. Make sure rewards are badges or non-tradeable items."}),e&&t(Vt,{className:"nitro-slider",min:1,max:1e3,value:u,onChange:R=>d(R)}),t("hr",{className:"m-0 bg-dark"}),l(v,{gap:1,children:[t(N,{bold:!0,children:"How often can a user be rewarded?"}),l(w,{gap:1,children:[l("select",{className:"form-select form-select-sm w-100",value:s,onChange:R=>r(Number(R.target.value)),children:[t("option",{value:"0",children:"Once"}),l("option",{value:"3",children:["Once every ",g," minutes"]}),l("option",{value:"2",children:["Once every ",g," hours"]}),l("option",{value:"1",children:["Once every ",g," days"]})]}),s>0&&t("input",{type:"number",className:"form-control form-control-sm",value:g,onChange:R=>m(Number(R.target.value))})]})]}),t("hr",{className:"m-0 bg-dark"}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"uniqueRewards",checked:o,onChange:R=>c(R.target.checked)}),t(N,{children:"Unique rewards"})]}),t(N,{center:!0,small:!0,className:"bg-muted rounded p-1",children:"If checked each reward will be given once to each user. This will disable the probabilities option."}),t("hr",{className:"m-0 bg-dark"}),l(w,{justifyContent:"between",alignItems:"center",children:[t(N,{bold:!0,children:"Rewards"}),t(D,{variant:"success",onClick:I,children:t(da,{className:"fa-icon"})})]}),t(v,{gap:1,children:f&&f.map((R,y)=>l(w,{gap:1,children:[l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",checked:R.isBadge,onChange:A=>S(y,A.target.checked,R.itemCode,R.probability)}),t(N,{small:!0,children:"Badge?"})]}),t("input",{type:"text",className:"form-control form-control-sm",value:R.itemCode,onChange:A=>S(y,R.isBadge,A.target.value,R.probability),placeholder:"Item Code"}),t("input",{type:"number",className:"form-control form-control-sm",value:R.probability,onChange:A=>S(y,R.isBadge,R.itemCode,Number(A.target.value)),placeholder:"Probability"}),y>0&&t(D,{variant:"danger",onClick:A=>_(y),children:t(Dc,{className:"fa-icon"})})]},y))})]})},gA=a=>{const[e,n]=i.useState(1),[s,r]=i.useState(1),[o,c]=i.useState(1),{trigger:u=null,setIntParams:d=null}=we(),g=()=>d([e,s,o]);return i.useEffect(()=>{u.intData.length>=2?(n(u.intData[0]),r(u.intData[1]),c(u.intData[2])):(n(1),r(1),c(1))},[u]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:g,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.setpoints",["points"],[e.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:100,value:e,onChange:m=>n(m)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.settimesingame",["times"],[s.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:10,value:s,onChange:m=>r(m)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.team")}),[1,2,3,4].map(m=>l(w,{gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${m}`,checked:o===m,onChange:f=>c(m)}),t(N,{children:h("wiredfurni.params.team."+m)})]},m))]})]})},fA=a=>{const[e,n]=i.useState(1),[s,r]=i.useState(1),{trigger:o=null,setIntParams:c=null}=we(),u=()=>c([e,s]);return i.useEffect(()=>{o.intData.length>=2?(n(o.intData[0]),r(o.intData[1])):(n(1),r(1))},[o]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.setpoints",["points"],[e.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:100,value:e,onChange:d=>n(d)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.settimesingame",["times"],[s.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:10,value:s,onChange:d=>r(d)})]})]})},pA=a=>{const[e,n]=i.useState(-1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.team")}),[1,2,3,4].map(c=>l(w,{gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${c}`,checked:e===c,onChange:u=>n(c)}),t(N,{children:h(`wiredfurni.params.team.${c}`)})]},c))]})})},IA=a=>{const[e,n]=i.useState(""),{trigger:s=null,setStringParam:r=null}=we(),o=()=>r(e);return i.useEffect(()=>{n(s.stringData)},[s]),t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>n(c.target.value),maxLength:X("wired.action.kick.from.room.max.length",100)})]})})},EA=a=>t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),CA=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],bA=[0,1,2,3,4,5,6],_A=a=>{const[e,n]=i.useState(-1),[s,r]=i.useState(-1),{trigger:o=null,setIntParams:c=null}=we(),u=()=>c([e,s]);return i.useEffect(()=>{o.intData.length>=2?(n(o.intData[0]),r(o.intData[1])):(n(-1),r(-1))},[o]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:u,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.startdir")}),t(w,{gap:1,children:CA.map(d=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${d.value}`,checked:e===d.value,onChange:g=>n(d.value)}),t(N,{children:t("i",{className:`icon icon-${d.icon}`})})]},d.value))})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.turn")}),bA.map(d=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${d}`,checked:s===d,onChange:g=>r(d)}),t(N,{children:h(`wiredfurni.params.turn.${d}`)})]},d))]})]})},SA=[{value:0,icon:"ne"},{value:2,icon:"se"},{value:4,icon:"sw"},{value:6,icon:"nw"}],NA=a=>{const[e,n]=i.useState(-1),[s,r]=i.useState(-1),{trigger:o=null,setIntParams:c=null}=we(),u=()=>c([s,e]);return i.useEffect(()=>{o.intData.length>=2?(n(o.intData[1]),r(o.intData[0])):(n(-1),r(-1))},[o]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:u,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.emptytiles",["tiles"],[e.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:5,value:e,onChange:d=>n(d)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.startdir")}),t(w,{gap:1,children:SA.map(d=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${d.value}`,checked:s===d.value,onChange:g=>r(d.value)}),t(N,{children:t("i",{className:`icon icon-${d.icon}`})})]},d.value))})]})]})},vA=[{value:4,icon:"ne"},{value:5,icon:"se"},{value:6,icon:"sw"},{value:7,icon:"nw"},{value:2,icon:"mv-2"},{value:3,icon:"mv-3"},{value:1,icon:"mv-1"}],TA=[0,1,2,3],wA=a=>{const[e,n]=i.useState(-1),[s,r]=i.useState(-1),{trigger:o=null,setIntParams:c=null}=we(),u=()=>c([e,s]);return i.useEffect(()=>{o.intData.length>=2?(n(o.intData[0]),r(o.intData[1])):(n(-1),r(-1))},[o]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!0,save:u,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.movefurni")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:"movement0",checked:e===0,onChange:d=>n(0)}),t(N,{children:h("wiredfurni.params.movefurni.0")})]}),l(w,{gap:1,children:[vA.map(d=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"movement",id:`movement${d.value}`,checked:e===d.value,onChange:g=>n(d.value)}),t("i",{className:`icon icon-${d.icon}`})]},d.value)),t("div",{className:"col"})]})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.rotatefurni")}),TA.map(d=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"rotation",id:`rotation${d}`,checked:s===d,onChange:g=>r(d)}),l(N,{children:[[1,2].includes(d)&&t("i",{className:`icon icon-rot-${d}`}),h(`wiredfurni.params.rotatefurni.${d}`)]})]},d))]})]})},yA=a=>{const[e,n]=i.useState(-1),[s,r]=i.useState(""),{trigger:o=null,setIntParams:c=null,setStringParam:u=null}=we(),d=()=>{c([e]),u(s)};return i.useEffect(()=>{n(o.intData.length>0?o.intData[0]:0),r(o.stringData)},[o]),l(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.length.minutes",["minutes"],[e.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:10,value:e,onChange:g=>n(g)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.message")}),t("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:g=>r(g.target.value),maxLength:X("wired.action.mute.user.max.length",100)})]})]})},RA=a=>t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),OA=a=>{const[e,n]=i.useState(0),[s,r]=i.useState(0),[o,c]=i.useState(0),{trigger:u=null,setIntParams:d=null}=we(),g=()=>d([e,s,o]);return i.useEffect(()=>{n(u.getBoolean(0)?1:0),r(u.getBoolean(1)?1:0),c(u.getBoolean(2)?1:0)},[u]),t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:g,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.conditions")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!e,onChange:m=>n(m.target.checked?1:0)}),t(N,{children:h("wiredfurni.params.condition.state")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!s,onChange:m=>r(m.target.checked?1:0)}),t(N,{children:h("wiredfurni.params.condition.direction")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!o,onChange:m=>c(m.target.checked?1:0)}),t(N,{children:h("wiredfurni.params.condition.position")})]})]})})},kA=a=>t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),AA=a=>t(ft,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_BY_TYPE_OR_FROM_CONTEXT,hasSpecialInput:!1,save:null}),xA=a=>{switch(a){case at.BOT_CHANGE_FIGURE:return t(tA,{});case at.BOT_FOLLOW_AVATAR:return t(nA,{});case at.BOT_GIVE_HAND_ITEM:return t(rA,{});case at.BOT_MOVE:return t(oA,{});case at.BOT_TALK:return t(iA,{});case at.BOT_TALK_DIRECT_TO_AVTR:return t(aA,{});case at.BOT_TELEPORT:return t(lA,{});case at.CALL_ANOTHER_STACK:return t(cA,{});case at.CHASE:return t(uA,{});case at.CHAT:return t(dA,{});case at.FLEE:return t(mA,{});case at.GIVE_REWARD:return t(hA,{});case at.GIVE_SCORE:return t(fA,{});case at.GIVE_SCORE_TO_PREDEFINED_TEAM:return t(gA,{});case at.JOIN_TEAM:return t(pA,{});case at.KICK_FROM_ROOM:return t(IA,{});case at.LEAVE_TEAM:return t(EA,{});case at.MOVE_FURNI:return t(wA,{});case at.MOVE_AND_ROTATE_FURNI:return t(_A,{});case at.MOVE_FURNI_TO:return t(NA,{});case at.MUTE_USER:return t(yA,{});case at.RESET:return t(RA,{});case at.SET_FURNI_STATE:return t(OA,{});case at.TELEPORT:return t(kA,{});case at.TOGGLE_FURNI_STATE:return t(AA,{})}return null},In=a=>{const{requiresFurni:e=he.STUFF_SELECTION_OPTION_NONE,save:n=null,hasSpecialInput:s=!1,children:r=null}=a;return t(mu,{wiredType:"condition",requiresFurni:e,hasSpecialInput:s,save:()=>n&&n(),children:r})},DA=[2,5,7,8,9,10,27],PA=a=>{const[e,n]=i.useState(-1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.handitem")}),t("select",{className:"form-select form-select-sm",value:e,onChange:c=>n(parseInt(c.target.value)),children:DA.map(c=>t("option",{value:c,children:h(`handitem${c}`)},c))})]})})},MA=a=>t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),LA=a=>t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),UA=[1,2,3,4],FA=a=>{const[e,n]=i.useState(-1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.team")}),UA.map(c=>l(w,{gap:1,alignItems:"center",children:[t("input",{className:"form-check-input",type:"radio",name:"selectedTeam",id:`selectedTeam${c}`,checked:e===c,onChange:u=>n(c)}),t(N,{children:h(`wiredfurni.params.team.${c}`)})]},c))]})})},VA=a=>{const[e,n]=i.useState(""),{trigger:s=null,setStringParam:r=null}=we(),o=()=>r(e);return i.useEffect(()=>{n(s.stringData)},[s]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.badgecode")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:c=>n(c.target.value)})]})})},BA=a=>{const[e,n]=i.useState(-1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n((s==null?void 0:s.intData[0])??0)},[s]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.tooltip.effectid")}),t("input",{type:"number",className:"form-control form-control-sm",value:e,onChange:c=>n(parseInt(c.target.value))})]})})},GA=a=>{const[e,n]=i.useState(""),[s,r]=i.useState(""),{trigger:o=null,setIntParams:c=null}=we(),u=()=>{let d=0,g=0;const m=new Date(e),f=new Date(s);m&&f&&(d=m.getTime()/1e3,g=f.getTime()/1e3),c([d,g])};return i.useEffect(()=>{if(o.intData.length>=2){let d=new Date,g=new Date;o.intData[0]>0&&(d=new Date(o.intData[0]*1e3)),o.intData[1]>0&&(g=new Date(o.intData[1]*1e3)),n(md(d)),r(md(g))}},[o]),l(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.startdate")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:d=>n(d.target.value)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.enddate")}),t("input",{type:"text",className:"form-control form-control-sm",value:s,onChange:d=>r(d.target.value)})]})]})},HA=a=>t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!1,save:null}),WA=a=>{const[e,n]=i.useState(-1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.requireall")}),[0,1].map(c=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${c}`,checked:e===c,onChange:u=>n(c)}),t(N,{children:h("wiredfurni.params.requireall."+c)})]},c))]})})},jA=a=>{const[e,n]=i.useState(-1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.not_requireall")}),[0,1].map(c=>l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"requireAll",id:`requireAll${c}`,checked:e===c,onChange:u=>n(c)}),t(N,{children:h(`wiredfurni.params.not_requireall.${c}`)})]},c))]})})},qA=a=>t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),zA=a=>{const[e,n]=i.useState(0),[s,r]=i.useState(0),[o,c]=i.useState(0),{trigger:u=null,setIntParams:d=null}=we(),g=()=>d([e,s,o]);return i.useEffect(()=>{n(u.getBoolean(0)?1:0),r(u.getBoolean(1)?1:0),c(u.getBoolean(2)?1:0)},[u]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID,hasSpecialInput:!0,save:g,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.conditions")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"stateFlag",checked:!!e,onChange:m=>n(m.target.checked?1:0)}),t(N,{children:h("wiredfurni.params.condition.state")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"directionFlag",checked:!!s,onChange:m=>r(m.target.checked?1:0)}),t(N,{children:h("wiredfurni.params.condition.direction")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"checkbox",id:"positionFlag",checked:!!o,onChange:m=>c(m.target.checked?1:0)}),t(N,{children:h("wiredfurni.params.condition.position")})]})]})})},YA=a=>{const[e,n]=i.useState(-1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.allowbefore",["seconds"],[Ca(e)])}),t(Vt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>n(c)})]})})},KA=a=>{const[e,n]=i.useState(-1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.allowafter",["seconds"],[Ca(e)])}),t(Vt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>n(c)})]})})},$A=a=>{const[e,n]=i.useState(1),[s,r]=i.useState(1),{trigger:o=null,setIntParams:c=null}=we(),u=()=>c([e,s]);return i.useEffect(()=>{o.intData.length>=2?(n(o.intData[0]),r(o.intData[1])):(n(1),r(1))},[o]),l(In,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.usercountmin",["value"],[e.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:50,value:e,onChange:d=>n(d)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.usercountmax",["value"],[s.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:50,value:s,onChange:d=>r(d)})]})]})},QA=a=>{switch(a){case dt.ACTOR_HAS_HANDITEM:return t(PA,{});case dt.ACTOR_IS_GROUP_MEMBER:case dt.NOT_ACTOR_IN_GROUP:return t(MA,{});case dt.ACTOR_IS_ON_FURNI:case dt.NOT_ACTOR_ON_FURNI:return t(LA,{});case dt.ACTOR_IS_IN_TEAM:case dt.NOT_ACTOR_IN_TEAM:return t(FA,{});case dt.ACTOR_IS_WEARING_BADGE:case dt.NOT_ACTOR_WEARS_BADGE:return t(VA,{});case dt.ACTOR_IS_WEARING_EFFECT:case dt.NOT_ACTOR_WEARING_EFFECT:return t(BA,{});case dt.DATE_RANGE_ACTIVE:return t(GA,{});case dt.FURNIS_HAVE_AVATARS:case dt.FURNI_NOT_HAVE_HABBO:return t(HA,{});case dt.HAS_STACKED_FURNIS:return t(WA,{});case dt.NOT_HAS_STACKED_FURNIS:return t(jA,{});case dt.STUFF_TYPE_MATCHES:case dt.NOT_FURNI_IS_OF_TYPE:return t(qA,{});case dt.STATES_MATCH:case dt.NOT_STATES_MATCH:return t(zA,{});case dt.TIME_ELAPSED_LESS:return t(YA,{});case dt.TIME_ELAPSED_MORE:return t(KA,{});case dt.USER_COUNT_IN:case dt.NOT_USER_COUNT_IN:return t($A,{})}return null},wn=a=>{const{requiresFurni:e=he.STUFF_SELECTION_OPTION_NONE,save:n=null,hasSpecialInput:s=!1,children:r=null}=a;return t(mu,{wiredType:"trigger",requiresFurni:e,hasSpecialInput:s,save:()=>n&&n(),children:r})},XA=a=>{const[e,n]=i.useState(""),[s,r]=i.useState(0),{trigger:o=null,setStringParam:c=null}=we(),u=()=>c(s===1?e:"");return i.useEffect(()=>{n(o.stringData),r(o.stringData?1:0)},[o]),t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:u,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.picktriggerer")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode0",checked:s===0,onChange:d=>r(0)}),t(N,{children:h("wiredfurni.params.anyavatar")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"avatarMode",id:"avatarMode1",checked:s===1,onChange:d=>r(1)}),t(N,{children:h("wiredfurni.params.certainavatar")})]}),s===1&&t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:d=>n(d.target.value)})]})})},JA=a=>{const[e,n]=i.useState(""),[s,r]=i.useState(-1),{trigger:o=null,setStringParam:c=null,setIntParams:u=null}=we(),d=()=>{c(e),u([s])};return i.useEffect(()=>{n(o.stringData),r(o.intData.length>0?o.intData[0]:0)},[o]),l(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:d,children:[l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.whatissaid")}),t("input",{type:"text",className:"form-control form-control-sm",value:e,onChange:g=>n(g.target.value)})]}),l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.picktriggerer")}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar0",checked:s===0,onChange:g=>r(0)}),t(N,{children:h("wiredfurni.params.anyavatar")})]}),l(w,{alignItems:"center",gap:1,children:[t("input",{className:"form-check-input",type:"radio",name:"triggererAvatar",id:"triggererAvatar1",checked:s===1,onChange:g=>r(1)}),t(N,{children:z().userName})]})]})]})},ZA=a=>t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),ex=a=>t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),tx=a=>{const[e,n]=i.useState(""),{trigger:s=null,setStringParam:r=null}=we(),o=()=>r(e);return i.useEffect(()=>{n(s.stringData)},[s]),t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>n(c.target.value)})]})})},nx=a=>{const[e,n]=i.useState(""),{trigger:s=null,setStringParam:r=null}=we(),o=()=>r(e);return i.useEffect(()=>{n(s.stringData)},[s]),t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.bot.name")}),t("input",{type:"text",className:"form-control form-control-sm",maxLength:32,value:e,onChange:c=>n(c.target.value)})]})})},sx=a=>t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),rx=a=>{const[e,n]=i.useState(1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.settime",["seconds"],[Ca(e)])}),t(Vt,{className:"nitro-slider",min:1,max:1200,value:e,onChange:c=>n(c)})]})})},ox=a=>{const[e,n]=i.useState(1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.setlongtime",["time"],[ls.format(e*5).toString()])}),t(Vt,{className:"nitro-slider",min:1,max:120,value:e,onChange:c=>n(c)})]})})},ax=a=>{const[e,n]=i.useState(1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.settime",["seconds"],[Ca(e)])}),t(Vt,{className:"nitro-slider",min:1,max:60,value:e,onChange:c=>n(c)})]})})},ix=a=>t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),lx=a=>t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!1,save:null}),cx=a=>{const[e,n]=i.useState(1),{trigger:s=null,setIntParams:r=null}=we(),o=()=>r([e]);return i.useEffect(()=>{n(s.intData.length>0?s.intData[0]:0)},[s]),t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_NONE,hasSpecialInput:!0,save:o,children:l(v,{gap:1,children:[t(N,{bold:!0,children:h("wiredfurni.params.setscore",["points"],[e.toString()])}),t(Vt,{className:"nitro-slider",min:1,max:1e3,value:e,onChange:c=>n(c)})]})})},ux=a=>t(wn,{requiresFurni:he.STUFF_SELECTION_OPTION_BY_ID_OR_BY_TYPE,hasSpecialInput:!1,save:null}),dx=a=>{switch(a){case rn.AVATAR_ENTERS_ROOM:return t(XA,{});case rn.AVATAR_SAYS_SOMETHING:return t(JA,{});case rn.AVATAR_WALKS_OFF_FURNI:return t(ZA,{});case rn.AVATAR_WALKS_ON_FURNI:return t(ex,{});case rn.BOT_REACHED_AVATAR:return t(tx,{});case rn.BOT_REACHED_STUFF:return t(nx,{});case rn.COLLISION:return t(sx,{});case rn.EXECUTE_ONCE:return t(rx,{});case rn.EXECUTE_PERIODICALLY:return t(ax,{});case rn.EXECUTE_PERIODICALLY_LONG:return t(ox,{});case rn.GAME_ENDS:return t(ix,{});case rn.GAME_STARTS:return t(lx,{});case rn.SCORE_ACHIEVED:return t(cx,{});case rn.TOGGLE_FURNI:return t(ux,{})}return null},mx=a=>{const{trigger:e=null}=we();return e?e instanceof Ym?xA(e.code):e instanceof Km?dx(e.code):e instanceof $m?QA(e.code):null:null},hx=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(!0);return Ye(tn.CREATED,o=>r(!1)),Ye(tn.ENDED,o=>r(o.openLandingView)),i.useEffect(()=>{n(!0),po().connection.onReady()},[]),i.useEffect(()=>{const o={linkReceived:c=>{const u=c.split("/");if(!(u.length<2))switch(u[1]){case"open":if(u.length>2)switch(u[2]){case"credits":break;default:{const d=u[2];ma.openHabblet(d)}}return}},eventUrlPrefix:"habblet/"};return _t(o),()=>St(o)},[]),l(P,{fit:!0,children:[t(ba,{type:gn.FADE_IN,inProp:s,timeout:300,children:t(Gy,{})}),t(P,{id:"chat-input-container"}),t(DR,{}),t(qk,{isInRoom:!s}),t(fR,{}),t(Wk,{}),t(zT,{}),t(mx,{}),t(Xv,{}),t(Hv,{}),t(kR,{}),t(Jy,{}),t(qT,{}),t(pw,{}),t(eR,{}),t(nO,{}),t(Jk,{}),t(Xk,{}),t(Dw,{}),t(rT,{}),t(cy,{}),t(xR,{}),t(jw,{}),t(qw,{}),t(iT,{}),t(bw,{}),t(sw,{})]})};Am.UI_VERSION=wh();const gx=a=>{const[e,n]=i.useState(!1),[s,r]=i.useState(!1),[o,c]=i.useState("Getting Ready"),[u,d]=i.useState(0),[g,m]=i.useState(!0);if(!_e()){if(!NitroConfig)throw new Error("NitroConfig is not defined!");Kr.bootstrap()}const f=i.useCallback(async p=>{switch(p.type){case Ma.LOADED:_e().localization.init(),d(C=>C+20);return;case Ma.FAILED:r(!0),c("Configuration Failed");return;case Kr.WEBGL_UNAVAILABLE:r(!0),c("WebGL Required");return;case Kr.WEBGL_CONTEXT_LOST:r(!0),c("WebGL Context Lost - Reloading"),setTimeout(()=>window.location.reload(),1500);return;case ds.CONNECTION_HANDSHAKING:d(C=>C+20);return;case ds.CONNECTION_HANDSHAKE_FAILED:r(!0),c("Handshake Failed");return;case ds.CONNECTION_AUTHENTICATED:d(C=>C+20),_e().init(),Jo.available&&Jo.call("legacyTrack","authentication","authok",[]);return;case ds.CONNECTION_ERROR:r(!0),c("Connection Error");return;case ds.CONNECTION_CLOSED:c("Connection Error"),ma.send(-1,"client.init.handshake.fail");return;case xn.ENGINE_INITIALIZED:d(C=>C+20),setTimeout(()=>n(!0),300);return;case Bu.LOADED:{const C=X("preload.assets.urls"),E=[];if(C&&C.length)for(const I of C)E.push(or.interpolate(I));await eh().downloadAssets(E)?(po().init(),K_(),d(I=>I+20)):(r(!0),c("Assets Failed"));return}}},[]);return Ir(Kr.WEBGL_UNAVAILABLE,f),Ir(Kr.WEBGL_CONTEXT_LOST,f),Ir(ds.CONNECTION_HANDSHAKING,f),Ir(ds.CONNECTION_HANDSHAKE_FAILED,f),Ir(ds.CONNECTION_AUTHENTICATED,f),Ir(ds.CONNECTION_ERROR,f),Ir(ds.CONNECTION_CLOSED,f),Te(xn.ENGINE_INITIALIZED,f),wS(Bu.LOADED,f),fd(Ma.LOADED,f),fd(Ma.FAILED,f),i.useEffect(()=>{_e().core.configuration.init();const p=C=>m(!(window.devicePixelRatio%1));return window.addEventListener("resize",p),p(),()=>{window.removeEventListener("resize",p)}},[]),l(P,{fit:!0,overflow:"hidden",className:g&&"image-rendering-pixelated",children:[(!e||s)&&t(vS,{isError:s,message:o,percent:u}),t(ba,{type:gn.FADE_IN,inProp:e,children:t(hx,{})}),t(P,{id:"draggable-windows-container"})]})};lf(document.getElementById("root")).render(t(gx,{}));
